{"ast":null,"code":"!function (t, e, r) {\n  \"undefined\" != typeof module && module.exports ? module.exports = e() : \"function\" == typeof r.define && r.define.amd ? define(e) : r.Firepad = e();\n}(0, function () {\n  function t(t) {\n    return function (t) {\n      if (Array.isArray(t)) return e(t);\n    }(t) || function (t) {\n      if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(t)) return Array.from(t);\n    }(t) || function (t, r) {\n      if (!t) return;\n      if (\"string\" == typeof t) return e(t, r);\n      var n = Object.prototype.toString.call(t).slice(8, -1);\n      \"Object\" === n && t.constructor && (n = t.constructor.name);\n      if (\"Map\" === n || \"Set\" === n) return Array.from(n);\n      if (\"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return e(t, r);\n    }(t) || function () {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }();\n  }\n\n  function e(t, e) {\n    (null == e || e > t.length) && (e = t.length);\n\n    for (var r = 0, n = new Array(e); r < e; r++) {\n      n[r] = t[r];\n    }\n\n    return n;\n  }\n\n  function r(t, e) {\n    for (var r = 0; r < e.length; r++) {\n      var n = e[r];\n      n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(t, n.key, n);\n    }\n  }\n\n  (n = n || {}).utils = {}, n.utils.makeEventEmitter = function (t, e) {\n    t.prototype.allowedEvents_ = e, t.prototype.on = function (t, e, r) {\n      this.validateEventType_(t), this.eventListeners_ = this.eventListeners_ || {}, this.eventListeners_[t] = this.eventListeners_[t] || [], this.eventListeners_[t].push({\n        callback: e,\n        context: r\n      });\n    }, t.prototype.off = function (t, e) {\n      this.validateEventType_(t), this.eventListeners_ = this.eventListeners_ || {};\n\n      for (var r = this.eventListeners_[t] || [], n = 0; n < r.length; n++) {\n        if (r[n].callback === e) return void r.splice(n, 1);\n      }\n    }, t.prototype.trigger = function (t) {\n      this.eventListeners_ = this.eventListeners_ || {};\n\n      for (var e = this.eventListeners_[t] || [], r = 0; r < e.length; r++) {\n        e[r].callback.apply(e[r].context, Array.prototype.slice.call(arguments, 1));\n      }\n    }, t.prototype.validateEventType_ = function (t) {\n      if (this.allowedEvents_) {\n        for (var e = !1, r = 0; r < this.allowedEvents_.length; r++) {\n          if (this.allowedEvents_[r] === t) {\n            e = !0;\n            break;\n          }\n        }\n\n        if (!e) throw new Error('Unknown event \"' + t + '\"');\n      }\n    };\n  }, n.utils.elt = function (t, e, r) {\n    var i = document.createElement(t);\n    if (\"string\" == typeof e) n.utils.setTextContent(i, e);else if (e) for (var o = 0; o < e.length; ++o) {\n      i.appendChild(e[o]);\n    }\n\n    for (var s in r || {}) {\n      i.setAttribute(s, r[s]);\n    }\n\n    return i;\n  }, n.utils.setTextContent = function (t, e) {\n    t.innerHTML = \"\", t.appendChild(document.createTextNode(e));\n  }, n.utils.on = function (t, e, r, n) {\n    t.addEventListener ? t.addEventListener(e, r, n || !1) : t.attachEvent && t.attachEvent(\"on\" + e, r);\n  }, n.utils.off = function (t, e, r, n) {\n    t.removeEventListener ? t.removeEventListener(e, r, n || !1) : t.detachEvent && t.detachEvent(\"on\" + e, r);\n  }, n.utils.preventDefault = function (t) {\n    t.preventDefault ? t.preventDefault() : t.returnValue = !1;\n  }, n.utils.stopPropagation = function (t) {\n    t.stopPropagation ? t.stopPropagation() : t.cancelBubble = !0;\n  }, n.utils.stopEvent = function (t) {\n    n.utils.preventDefault(t), n.utils.stopPropagation(t);\n  }, n.utils.stopEventAnd = function (t) {\n    return function (e) {\n      return t(e), n.utils.stopEvent(e), !1;\n    };\n  }, n.utils.trim = function (t) {\n    return t.replace(/^\\s+/g, \"\").replace(/\\s+$/g, \"\");\n  }, n.utils.stringEndsWith = function (t, e) {\n    for (var r = \"string\" == typeof e ? [e] : e, n = 0; n < r.length; n++) {\n      e = r[n];\n      if (-1 !== t.indexOf(e, t.length - e.length)) return !0;\n    }\n\n    return !1;\n  }, n.utils.assert = function (t, e) {\n    if (!t) throw new Error(e || \"assertion error\");\n  }, n.utils.log = function () {\n    if (\"undefined\" != typeof console && void 0 !== console.log) {\n      for (var t = [\"Firepad:\"], e = 0; e < arguments.length; e++) {\n        t.push(arguments[e]);\n      }\n\n      console.log.apply(console, t);\n    }\n  }, (n = n || {}).Span = function () {\n    function t(t, e) {\n      this.pos = t, this.length = e;\n    }\n\n    return t.prototype.end = function () {\n      return this.pos + this.length;\n    }, t;\n  }(), (n = n || {}).TextOp = function () {\n    var t = n.utils;\n\n    function e(e) {\n      this.type = e, this.chars = null, this.text = null, this.attributes = null, \"insert\" === e ? (this.text = arguments[1], t.assert(\"string\" == typeof this.text), this.attributes = arguments[2] || {}, t.assert(\"object\" == typeof this.attributes)) : \"delete\" === e ? (this.chars = arguments[1], t.assert(\"number\" == typeof this.chars)) : \"retain\" === e && (this.chars = arguments[1], t.assert(\"number\" == typeof this.chars), this.attributes = arguments[2] || {}, t.assert(\"object\" == typeof this.attributes));\n    }\n\n    return e.prototype.isInsert = function () {\n      return \"insert\" === this.type;\n    }, e.prototype.isDelete = function () {\n      return \"delete\" === this.type;\n    }, e.prototype.isRetain = function () {\n      return \"retain\" === this.type;\n    }, e.prototype.equals = function (t) {\n      return this.type === t.type && this.text === t.text && this.chars === t.chars && this.attributesEqual(t.attributes);\n    }, e.prototype.attributesEqual = function (t) {\n      for (var e in this.attributes) {\n        if (this.attributes[e] !== t[e]) return !1;\n      }\n\n      for (e in t) {\n        if (this.attributes[e] !== t[e]) return !1;\n      }\n\n      return !0;\n    }, e.prototype.hasEmptyAttributes = function () {\n      var t = !0;\n\n      for (var e in this.attributes) {\n        t = !1;\n        break;\n      }\n\n      return t;\n    }, e;\n  }(), (n = n || {}).TextOperation = function () {\n    \"use strict\";\n\n    var t = n.TextOp,\n        e = n.utils;\n\n    function r() {\n      if (!this || this.constructor !== r) return new r();\n      this.ops = [], this.baseLength = 0, this.targetLength = 0;\n    }\n\n    function i(t) {\n      var e = t.ops;\n\n      switch (e.length) {\n        case 1:\n          return e[0];\n\n        case 2:\n          return e[0].isRetain() ? e[1] : e[1].isRetain() ? e[0] : null;\n\n        case 3:\n          if (e[0].isRetain() && e[2].isRetain()) return e[1];\n      }\n\n      return null;\n    }\n\n    function o(t) {\n      return t.ops[0].isRetain() ? t.ops[0].chars : 0;\n    }\n\n    return r.prototype.equals = function (t) {\n      if (this.baseLength !== t.baseLength) return !1;\n      if (this.targetLength !== t.targetLength) return !1;\n      if (this.ops.length !== t.ops.length) return !1;\n\n      for (var e = 0; e < this.ops.length; e++) {\n        if (!this.ops[e].equals(t.ops[e])) return !1;\n      }\n\n      return !0;\n    }, r.prototype.retain = function (e, r) {\n      if (\"number\" != typeof e || e < 0) throw new Error(\"retain expects a positive integer.\");\n      if (0 === e) return this;\n      this.baseLength += e, this.targetLength += e, r = r || {};\n      var n = this.ops.length > 0 ? this.ops[this.ops.length - 1] : null;\n      return n && n.isRetain() && n.attributesEqual(r) ? n.chars += e : this.ops.push(new t(\"retain\", e, r)), this;\n    }, r.prototype.insert = function (e, r) {\n      if (\"string\" != typeof e) throw new Error(\"insert expects a string\");\n      if (\"\" === e) return this;\n      r = r || {}, this.targetLength += e.length;\n      var n = this.ops.length > 0 ? this.ops[this.ops.length - 1] : null,\n          i = this.ops.length > 1 ? this.ops[this.ops.length - 2] : null;\n      return n && n.isInsert() && n.attributesEqual(r) ? n.text += e : n && n.isDelete() ? i && i.isInsert() && i.attributesEqual(r) ? i.text += e : (this.ops[this.ops.length - 1] = new t(\"insert\", e, r), this.ops.push(n)) : this.ops.push(new t(\"insert\", e, r)), this;\n    }, r.prototype.delete = function (e) {\n      if (\"string\" == typeof e && (e = e.length), \"number\" != typeof e || e < 0) throw new Error(\"delete expects a positive integer or a string\");\n      if (0 === e) return this;\n      this.baseLength += e;\n      var r = this.ops.length > 0 ? this.ops[this.ops.length - 1] : null;\n      return r && r.isDelete() ? r.chars += e : this.ops.push(new t(\"delete\", e)), this;\n    }, r.prototype.isNoop = function () {\n      return 0 === this.ops.length || 1 === this.ops.length && this.ops[0].isRetain() && this.ops[0].hasEmptyAttributes();\n    }, r.prototype.clone = function () {\n      for (var t = new r(), e = 0; e < this.ops.length; e++) {\n        this.ops[e].isRetain() ? t.retain(this.ops[e].chars, this.ops[e].attributes) : this.ops[e].isInsert() ? t.insert(this.ops[e].text, this.ops[e].attributes) : t.delete(this.ops[e].chars);\n      }\n\n      return t;\n    }, r.prototype.toString = function () {\n      return (Array.prototype.map || function (t) {\n        for (var e = [], r = 0, n = this.length; r < n; r++) {\n          e[r] = t(this[r]);\n        }\n\n        return e;\n      }).call(this.ops, function (t) {\n        return t.isRetain() ? \"retain \" + t.chars : t.isInsert() ? \"insert '\" + t.text + \"'\" : \"delete \" + t.chars;\n      }).join(\", \");\n    }, r.prototype.toJSON = function () {\n      for (var t = [], e = 0; e < this.ops.length; e++) {\n        this.ops[e].hasEmptyAttributes() || t.push(this.ops[e].attributes), \"retain\" === this.ops[e].type ? t.push(this.ops[e].chars) : \"insert\" === this.ops[e].type ? t.push(this.ops[e].text) : \"delete\" === this.ops[e].type && t.push(-this.ops[e].chars);\n      }\n\n      return 0 === t.length && t.push(0), t;\n    }, r.fromJSON = function (t) {\n      for (var n = new r(), i = 0, o = t.length; i < o; i++) {\n        var s = t[i],\n            a = {};\n        \"object\" == typeof s && (a = s, s = t[++i]), \"number\" == typeof s ? s > 0 ? n.retain(s, a) : n.delete(-s) : (e.assert(\"string\" == typeof s), n.insert(s, a));\n      }\n\n      return n;\n    }, r.prototype.apply = function (t, r, n) {\n      if (r = r || [], n = n || [], t.length !== this.baseLength) throw new Error(\"The operation's base length must be equal to the string's length.\");\n\n      for (var i, o, s = [], a = 0, h = 0, c = this.ops, u = 0, l = c.length; u < l; u++) {\n        var p = c[u];\n\n        if (p.isRetain()) {\n          if (h + p.chars > t.length) throw new Error(\"Operation can't retain more characters than are left in the string.\");\n\n          for (s[a++] = t.slice(h, h + p.chars), i = 0; i < p.chars; i++) {\n            var d = r[h + i] || {},\n                f = {};\n\n            for (o in d) {\n              f[o] = d[o], e.assert(!1 !== f[o]);\n            }\n\n            for (o in p.attributes) {\n              !1 === p.attributes[o] ? delete f[o] : f[o] = p.attributes[o], e.assert(!1 !== f[o]);\n            }\n\n            n.push(f);\n          }\n\n          h += p.chars;\n        } else if (p.isInsert()) for (s[a++] = p.text, i = 0; i < p.text.length; i++) {\n          var g = {};\n\n          for (o in p.attributes) {\n            g[o] = p.attributes[o], e.assert(!1 !== g[o]);\n          }\n\n          n.push(g);\n        } else h += p.chars;\n      }\n\n      if (h !== t.length) throw new Error(\"The operation didn't operate on the whole string.\");\n      var m = s.join(\"\");\n      return e.assert(m.length === n.length), m;\n    }, r.prototype.invert = function (t) {\n      for (var e = 0, n = new r(), i = this.ops, o = 0, s = i.length; o < s; o++) {\n        var a = i[o];\n        a.isRetain() ? (n.retain(a.chars), e += a.chars) : a.isInsert() ? n.delete(a.text.length) : (n.insert(t.slice(e, e + a.chars)), e += a.chars);\n      }\n\n      return n;\n    }, r.prototype.compose = function (t) {\n      if (this.targetLength !== t.baseLength) throw new Error(\"The base length of the second operation has to be the target length of the first operation\");\n\n      function e(t, e, r) {\n        var n,\n            i = {};\n\n        for (n in t) {\n          i[n] = t[n];\n        }\n\n        for (n in e) {\n          r && !1 === e[n] ? delete i[n] : i[n] = e[n];\n        }\n\n        return i;\n      }\n\n      for (var n, i = new r(), o = this.clone().ops, s = t.clone().ops, a = 0, h = 0, c = o[a++], u = s[h++]; void 0 !== c || void 0 !== u;) {\n        if (c && c.isDelete()) i.delete(c.chars), c = o[a++];else if (u && u.isInsert()) i.insert(u.text, u.attributes), u = s[h++];else {\n          if (void 0 === c) throw new Error(\"Cannot compose operations: first operation is too short.\");\n          if (void 0 === u) throw new Error(\"Cannot compose operations: first operation is too long.\");\n          if (c.isRetain() && u.isRetain()) n = e(c.attributes, u.attributes), c.chars > u.chars ? (i.retain(u.chars, n), c.chars -= u.chars, u = s[h++]) : c.chars === u.chars ? (i.retain(c.chars, n), c = o[a++], u = s[h++]) : (i.retain(c.chars, n), u.chars -= c.chars, c = o[a++]);else if (c.isInsert() && u.isDelete()) c.text.length > u.chars ? (c.text = c.text.slice(u.chars), u = s[h++]) : c.text.length === u.chars ? (c = o[a++], u = s[h++]) : (u.chars -= c.text.length, c = o[a++]);else if (c.isInsert() && u.isRetain()) n = e(c.attributes, u.attributes, !0), c.text.length > u.chars ? (i.insert(c.text.slice(0, u.chars), n), c.text = c.text.slice(u.chars), u = s[h++]) : c.text.length === u.chars ? (i.insert(c.text, n), c = o[a++], u = s[h++]) : (i.insert(c.text, n), u.chars -= c.text.length, c = o[a++]);else {\n            if (!c.isRetain() || !u.isDelete()) throw new Error(\"This shouldn't happen: op1: \" + JSON.stringify(c) + \", op2: \" + JSON.stringify(u));\n            c.chars > u.chars ? (i.delete(u.chars), c.chars -= u.chars, u = s[h++]) : c.chars === u.chars ? (i.delete(u.chars), c = o[a++], u = s[h++]) : (i.delete(c.chars), u.chars -= c.chars, c = o[a++]);\n          }\n        }\n      }\n\n      return i;\n    }, r.prototype.shouldBeComposedWith = function (t) {\n      if (this.isNoop() || t.isNoop()) return !0;\n      var e = o(this),\n          r = o(t),\n          n = i(this),\n          s = i(t);\n      return !(!n || !s) && (n.isInsert() && s.isInsert() ? e + n.text.length === r : !(!n.isDelete() || !s.isDelete()) && (r + s.chars === e || e === r));\n    }, r.prototype.shouldBeComposedWithInverted = function (t) {\n      if (this.isNoop() || t.isNoop()) return !0;\n      var e = o(this),\n          r = o(t),\n          n = i(this),\n          s = i(t);\n      return !(!n || !s) && (n.isInsert() && s.isInsert() ? e + n.text.length === r || e === r : !(!n.isDelete() || !s.isDelete()) && r + s.chars === e);\n    }, r.transformAttributes = function (t, r) {\n      var n,\n          i = {},\n          o = {},\n          s = {};\n\n      for (n in t) {\n        s[n] = !0;\n      }\n\n      for (n in r) {\n        s[n] = !0;\n      }\n\n      for (n in s) {\n        var a = t[n],\n            h = r[n];\n        e.assert(null != a || null != h), null == a ? o[n] = h : null == h ? i[n] = a : a === h || (i[n] = a);\n      }\n\n      return [i, o];\n    }, r.transform = function (t, e) {\n      if (t.baseLength !== e.baseLength) throw new Error(\"Both operations have to have the same base length\");\n\n      for (var n = new r(), i = new r(), o = t.clone().ops, s = e.clone().ops, a = 0, h = 0, c = o[a++], u = s[h++]; void 0 !== c || void 0 !== u;) {\n        if (c && c.isInsert()) n.insert(c.text, c.attributes), i.retain(c.text.length), c = o[a++];else if (u && u.isInsert()) n.retain(u.text.length), i.insert(u.text, u.attributes), u = s[h++];else {\n          if (void 0 === c) throw new Error(\"Cannot transform operations: first operation is too short.\");\n          if (void 0 === u) throw new Error(\"Cannot transform operations: first operation is too long.\");\n          var l;\n\n          if (c.isRetain() && u.isRetain()) {\n            var p = r.transformAttributes(c.attributes, u.attributes);\n            c.chars > u.chars ? (l = u.chars, c.chars -= u.chars, u = s[h++]) : c.chars === u.chars ? (l = u.chars, c = o[a++], u = s[h++]) : (l = c.chars, u.chars -= c.chars, c = o[a++]), n.retain(l, p[0]), i.retain(l, p[1]);\n          } else if (c.isDelete() && u.isDelete()) c.chars > u.chars ? (c.chars -= u.chars, u = s[h++]) : c.chars === u.chars ? (c = o[a++], u = s[h++]) : (u.chars -= c.chars, c = o[a++]);else if (c.isDelete() && u.isRetain()) c.chars > u.chars ? (l = u.chars, c.chars -= u.chars, u = s[h++]) : c.chars === u.chars ? (l = u.chars, c = o[a++], u = s[h++]) : (l = c.chars, u.chars -= c.chars, c = o[a++]), n.delete(l);else {\n            if (!c.isRetain() || !u.isDelete()) throw new Error(\"The two operations aren't compatible\");\n            c.chars > u.chars ? (l = u.chars, c.chars -= u.chars, u = s[h++]) : c.chars === u.chars ? (l = c.chars, c = o[a++], u = s[h++]) : (l = c.chars, u.chars -= c.chars, c = o[a++]), i.delete(l);\n          }\n        }\n      }\n\n      return [n, i];\n    }, r.prototype.transform = function (t) {\n      return r.transform(this, t);\n    }, r;\n  }(), (n = n || {}).AnnotationList = function () {\n    var t = n.Span;\n\n    function e(t, e) {\n      if (!t) throw new Error(\"AnnotationList assertion failed\" + (e ? \": \" + e : \"\"));\n    }\n\n    function r(t, e) {\n      this.pos = t, this.length = e.length, this.annotation = e.annotation, this.attachedObject_ = e.attachedObject;\n    }\n\n    function i(t, e) {\n      this.pos = t, this.length = e.length, this.annotation = e.annotation, this.node_ = e;\n    }\n\n    r.prototype.getAttachedObject = function () {\n      return this.attachedObject_;\n    }, i.prototype.attachObject = function (t) {\n      this.node_.attachedObject = t;\n    };\n    var o = {\n      equals: function equals() {\n        return !1;\n      }\n    };\n\n    function s(t) {\n      this.head_ = new a(0, o), this.changeHandler_ = t;\n    }\n\n    function a(t, e) {\n      this.length = t, this.annotation = e, this.attachedObject = null, this.next = null;\n    }\n\n    return s.prototype.insertAnnotatedSpan = function (r, n) {\n      this.wrapOperation_(new t(r.pos, 0), function (t, i) {\n        e(!i || null === i.next);\n        var s = new a(r.length, n);\n\n        if (i) {\n          e(r.pos > t && r.pos < t + i.length);\n          var h = new a(0, o);\n          return h.next = new a(r.pos - t, i.annotation), h.next.next = s, s.next = new a(t + i.length - r.pos, i.annotation), h.next;\n        }\n\n        return s;\n      });\n    }, s.prototype.removeSpan = function (t) {\n      0 !== t.length && this.wrapOperation_(t, function (r, n) {\n        e(null !== n);\n        var i = new a(0, o),\n            s = i;\n\n        for (t.pos > r && (s.next = new a(t.pos - r, n.annotation), s = s.next); t.end() > r + n.length;) {\n          r += n.length, n = n.next;\n        }\n\n        var h = r + n.length - t.end();\n        return h > 0 && (s.next = new a(h, n.annotation)), i.next;\n      });\n    }, s.prototype.updateSpan = function (t, r) {\n      0 !== t.length && this.wrapOperation_(t, function (n, i) {\n        e(null !== i);\n        var s = new a(0, o),\n            h = s,\n            c = n,\n            u = t.pos - c;\n\n        for (e(u < i.length), u > 0 && (h.next = new a(u, i.annotation), c += (h = h.next).length); null !== i && t.end() >= n + i.length;) {\n          var l = n + i.length - c;\n          h.next = new a(l, r(i.annotation, l)), h = h.next, n += i.length, i = i.next, c = n;\n        }\n\n        var p = t.end() - c;\n        return p > 0 && (e(p < i.length), h.next = new a(p, r(i.annotation, p)), c += (h = h.next).length, h.next = new a(n + i.length - c, i.annotation)), s.next;\n      });\n    }, s.prototype.wrapOperation_ = function (t, e) {\n      if (t.pos < 0) throw new Error(\"Span start cannot be negative.\");\n      var n,\n          o = [],\n          s = [],\n          h = this.getAffectedNodes_(t);\n      null !== h.start ? (n = h.end.next, h.end.next = null) : n = h.succ;\n      var c = e(h.startPos, h.start),\n          u = !1,\n          l = !1;\n\n      if (c) {\n        var p;\n\n        for (this.mergeNodesWithSameAnnotations_(c), h.pred && h.pred.annotation.equals(c.annotation) ? (u = !0, c.length += h.pred.length, h.beforePred.next = c, p = h.predPos) : (h.beforeStart.next = c, p = h.startPos); c.next;) {\n          s.push(new i(p, c)), p += c.length, c = c.next;\n        }\n\n        h.succ && h.succ.annotation.equals(c.annotation) ? (c.length += h.succ.length, l = !0, c.next = h.succ.next) : c.next = n, s.push(new i(p, c));\n      } else h.pred && h.succ && h.pred.annotation.equals(h.succ.annotation) ? (u = !0, l = !0, c = new a(h.pred.length + h.succ.length, h.pred.annotation), h.beforePred.next = c, c.next = h.succ.next, s.push(new i(h.startPos - h.pred.length, c))) : h.beforeStart.next = n;\n\n      u && o.push(new r(h.predPos, h.pred));\n\n      for (var d = h.startPos, f = h.start; null !== f;) {\n        o.push(new r(d, f)), d += f.length, f = f.next;\n      }\n\n      l && o.push(new r(d, h.succ)), this.changeHandler_(o, s);\n    }, s.prototype.getAffectedNodes_ = function (t) {\n      for (var e = {}, r = null, n = this.head_, i = n.next, o = 0; null !== i && t.pos >= o + i.length;) {\n        o += i.length, r = n, n = i, i = i.next;\n      }\n\n      if (null === i && (0 !== t.length || t.pos !== o)) throw new Error(\"Span start exceeds the bounds of the AnnotationList.\");\n\n      for (e.startPos = o, 0 === t.length && t.pos === o ? e.start = null : e.start = i, e.beforeStart = n, o === t.pos && o > 0 ? (e.pred = n, e.predPos = o - n.length, e.beforePred = r) : e.pred = null; null !== i && t.end() > o;) {\n        o += i.length, n = i, i = i.next;\n      }\n\n      if (t.end() > o) throw new Error(\"Span end exceeds the bounds of the AnnotationList.\");\n      return 0 === t.length && t.end() === o ? e.end = null : e.end = n, e.succ = o === t.end() ? i : null, e;\n    }, s.prototype.mergeNodesWithSameAnnotations_ = function (t) {\n      if (t) for (var e = null, r = t; r;) {\n        e && e.annotation.equals(r.annotation) ? (e.length += r.length, e.next = r.next) : e = r, r = r.next;\n      }\n    }, s.prototype.forEach = function (t) {\n      for (var e = this.head_.next; null !== e;) {\n        t(e.length, e.annotation, e.attachedObject), e = e.next;\n      }\n    }, s.prototype.getAnnotatedSpansForPos = function (t) {\n      for (var e = 0, n = this.head_.next, i = null; null !== n && e + n.length <= t;) {\n        e += n.length, i = n, n = n.next;\n      }\n\n      if (null === n && e !== t) throw new Error(\"pos exceeds the bounds of the AnnotationList\");\n      var o = [];\n      return e === t && i && o.push(new r(e - i.length, i)), n && o.push(new r(e, n)), o;\n    }, s.prototype.getAnnotatedSpansForSpan = function (e) {\n      if (0 === e.length) return [];\n\n      for (var r = [], n = this.getAffectedNodes_(e), i = n.startPos, o = n.start; null !== o && i < e.end();) {\n        var s = Math.max(i, e.pos),\n            a = Math.min(i + o.length, e.end()),\n            h = new t(s, a - s);\n        h.annotation = o.annotation, r.push(h), i += o.length, o = o.next;\n      }\n\n      return r;\n    }, s.prototype.count = function () {\n      for (var t = 0, r = this.head_.next, n = null; null !== r;) {\n        n && e(!n.annotation.equals(r.annotation)), n = r, r = r.next, t++;\n      }\n\n      return t;\n    }, a.prototype.clone = function () {\n      var t = new a(this.spanLength, this.annotation);\n      return t.next = this.next, t;\n    }, s;\n  }(), (n = n || {}).Cursor = function () {\n    \"use strict\";\n\n    function t(t, e) {\n      this.position = t, this.selectionEnd = e;\n    }\n\n    return t.fromJSON = function (e) {\n      return new t(e.position, e.selectionEnd);\n    }, t.prototype.equals = function (t) {\n      return this.position === t.position && this.selectionEnd === t.selectionEnd;\n    }, t.prototype.compose = function (t) {\n      return t;\n    }, t.prototype.transform = function (e) {\n      function r(t) {\n        for (var r = t, n = e.ops, i = 0, o = e.ops.length; i < o && (n[i].isRetain() ? t -= n[i].chars : n[i].isInsert() ? r += n[i].text.length : (r -= Math.min(t, n[i].chars), t -= n[i].chars), !(t < 0)); i++) {\n          ;\n        }\n\n        return r;\n      }\n\n      var n = r(this.position);\n      return this.position === this.selectionEnd ? new t(n, n) : new t(n, r(this.selectionEnd));\n    }, t;\n  }(), (n = n || {}).FirebaseAdapter = function (t) {\n    \"undefined\" == typeof firebase && \"function\" == typeof require && \"function\" != typeof Firebase && (firebase = require(\"firebase/app\"), require(\"firebase/database\"));\n    var e = n.TextOperation,\n        r = n.utils;\n\n    function i(t, r, n) {\n      this.ref_ = t, this.ready_ = !1, this.firebaseCallbacks_ = [], this.zombie_ = !1, this.document_ = new e(), this.revision_ = 0, this.pendingReceivedRevisions_ = {};\n      var i = this;\n\n      if (r) {\n        this.setUserId(r), this.setColor(n);\n        var o = t.root.child(\".info/connected\");\n        this.firebaseOn_(o, \"value\", function (t) {\n          !0 === t.val() && i.initializeUserData_();\n        }, this), this.on(\"ready\", function () {\n          i.monitorCursors_();\n        });\n      } else this.userId_ = t.push().key;\n\n      setTimeout(function () {\n        i.monitorHistory_();\n      }, 0);\n    }\n\n    function o(t, e) {\n      if (!t) throw new Error(e || \"assertion error\");\n    }\n\n    r.makeEventEmitter(i, [\"ready\", \"cursor\", \"operation\", \"ack\", \"retry\"]), i.prototype.dispose = function () {\n      var t = this;\n      this.removeFirebaseCallbacks_(), this.handleInitialRevisions_ = function () {}, this.ready_ ? (this.userRef_ && (this.userRef_.child(\"cursor\").remove(), this.userRef_.child(\"color\").remove()), this.ref_ = null, this.document_ = null, this.zombie_ = !0) : this.on(\"ready\", function () {\n        t.dispose();\n      });\n    }, i.prototype.setUserId = function (t) {\n      this.userRef_ && (this.userRef_.child(\"cursor\").remove(), this.userRef_.child(\"cursor\").onDisconnect().cancel(), this.userRef_.child(\"color\").remove(), this.userRef_.child(\"color\").onDisconnect().cancel()), this.userId_ = t, this.userRef_ = this.ref_.child(\"users\").child(t), this.initializeUserData_();\n    }, i.prototype.isHistoryEmpty = function () {\n      return o(this.ready_, \"Not ready yet.\"), 0 === this.revision_;\n    }, i.prototype.sendOperation = function (t, e) {\n      var n = this;\n\n      if (this.ready_) {\n        o(this.document_.targetLength === t.baseLength, \"sendOperation() called with invalid operation.\");\n        var i = a(this.revision_);\n        this.sent_ = {\n          id: i,\n          op: t\n        }, function t(i, o) {\n          n.ref_.child(\"history\").child(i).transaction(function (t) {\n            if (null === t) return o;\n          }, function (s, a, h) {\n            if (s) {\n              if (\"disconnect\" !== s.message) throw r.log(\"Transaction failure!\", s), s;\n              n.sent_ && n.sent_.id === i ? setTimeout(function () {\n                t(i, o);\n              }, 0) : e && e(s, !1);\n            } else e && e(null, a);\n          }, !1);\n        }(i, {\n          a: n.userId_,\n          o: t.toJSON(),\n          t: firebase.database.ServerValue.TIMESTAMP\n        });\n      } else this.on(\"ready\", function () {\n        n.trigger(\"retry\");\n      });\n    }, i.prototype.sendCursor = function (t) {\n      this.userRef_.child(\"cursor\").set(t), this.cursor_ = t;\n    }, i.prototype.setColor = function (t) {\n      this.userRef_.child(\"color\").set(t), this.color_ = t;\n    }, i.prototype.getDocument = function () {\n      return this.document_;\n    }, i.prototype.registerCallbacks = function (t) {\n      for (var e in t) {\n        this.on(e, t[e]);\n      }\n    }, i.prototype.initializeUserData_ = function () {\n      this.userRef_.child(\"cursor\").onDisconnect().remove(), this.userRef_.child(\"color\").onDisconnect().remove(), this.sendCursor(this.cursor_ || null), this.setColor(this.color_ || null);\n    }, i.prototype.monitorCursors_ = function () {\n      var t = this.ref_.child(\"users\"),\n          e = this;\n\n      function r(t) {\n        var r = t.key,\n            n = t.val();\n        e.trigger(\"cursor\", r, n.cursor, n.color);\n      }\n\n      this.firebaseOn_(t, \"child_added\", r), this.firebaseOn_(t, \"child_changed\", r), this.firebaseOn_(t, \"child_removed\", function (t) {\n        var r = t.key;\n        e.trigger(\"cursor\", r, null);\n      });\n    }, i.prototype.monitorHistory_ = function () {\n      var t = this;\n      this.ref_.child(\"checkpoint\").once(\"value\", function (e) {\n        if (!t.zombie_) {\n          var r = e.child(\"id\").val(),\n              n = e.child(\"o\").val(),\n              i = e.child(\"a\").val();\n          null != n && null != r && null !== i ? (t.pendingReceivedRevisions_[r] = {\n            o: n,\n            a: i\n          }, t.checkpointRevision_ = function (t) {\n            o(t.length > 0 && t[0] === s[t.length + 8]);\n\n            for (var e = 0, r = 1; r < t.length; r++) {\n              e *= s.length, e += s.indexOf(t[r]);\n            }\n\n            return e;\n          }(r), t.monitorHistoryStartingAt_(t.checkpointRevision_ + 1)) : (t.checkpointRevision_ = 0, t.monitorHistoryStartingAt_(t.checkpointRevision_));\n        }\n      });\n    }, i.prototype.monitorHistoryStartingAt_ = function (t) {\n      var e = this.ref_.child(\"history\").startAt(null, a(t)),\n          r = this;\n      setTimeout(function () {\n        r.firebaseOn_(e, \"child_added\", function (t) {\n          var e = t.key;\n          r.pendingReceivedRevisions_[e] = t.val(), r.ready_ && r.handlePendingReceivedRevisions_();\n        }), e.once(\"value\", function () {\n          r.handleInitialRevisions_();\n        });\n      }, 0);\n    }, i.prototype.handleInitialRevisions_ = function () {\n      o(!this.ready_, \"Should not be called multiple times.\"), this.revision_ = this.checkpointRevision_;\n\n      for (var t = a(this.revision_), e = this.pendingReceivedRevisions_; null != e[t];) {\n        var n = this.parseRevision_(e[t]);\n        n ? this.document_ = this.document_.compose(n.operation) : r.log(\"Invalid operation.\", this.ref_.toString(), t, e[t]), delete e[t], this.revision_++, t = a(this.revision_);\n      }\n\n      this.trigger(\"operation\", this.document_), this.ready_ = !0;\n      var i = this;\n      setTimeout(function () {\n        i.trigger(\"ready\");\n      }, 0);\n    }, i.prototype.handlePendingReceivedRevisions_ = function () {\n      for (var t = this.pendingReceivedRevisions_, e = a(this.revision_), n = !1; null != t[e];) {\n        this.revision_++;\n        var i = this.parseRevision_(t[e]);\n        i ? (this.document_ = this.document_.compose(i.operation), this.sent_ && e === this.sent_.id ? this.sent_.op.equals(i.operation) && i.author === this.userId_ ? (this.revision_ % 100 == 0 && this.saveCheckpoint_(), this.sent_ = null, this.trigger(\"ack\")) : (n = !0, this.trigger(\"operation\", i.operation)) : this.trigger(\"operation\", i.operation)) : r.log(\"Invalid operation.\", this.ref_.toString(), e, t[e]), delete t[e], e = a(this.revision_);\n      }\n\n      n && (this.sent_ = null, this.trigger(\"retry\"));\n    }, i.prototype.parseRevision_ = function (t) {\n      if (\"object\" != typeof t) return null;\n      if (\"string\" != typeof t.a || \"object\" != typeof t.o) return null;\n      var r = null;\n\n      try {\n        r = e.fromJSON(t.o);\n      } catch (t) {\n        return null;\n      }\n\n      return r.baseLength !== this.document_.targetLength ? null : {\n        author: t.a,\n        operation: r\n      };\n    }, i.prototype.saveCheckpoint_ = function () {\n      this.ref_.child(\"checkpoint\").set({\n        a: this.userId_,\n        o: this.document_.toJSON(),\n        id: a(this.revision_ - 1)\n      });\n    }, i.prototype.firebaseOn_ = function (t, e, r, n) {\n      return this.firebaseCallbacks_.push({\n        ref: t,\n        eventType: e,\n        callback: r,\n        context: n\n      }), t.on(e, r, n), r;\n    }, i.prototype.firebaseOff_ = function (t, e, r, n) {\n      t.off(e, r, n);\n\n      for (var i = 0; i < this.firebaseCallbacks_.length; i++) {\n        var o = this.firebaseCallbacks_[i];\n\n        if (o.ref === t && o.eventType === e && o.callback === r && o.context === n) {\n          this.firebaseCallbacks_.splice(i, 1);\n          break;\n        }\n      }\n    }, i.prototype.removeFirebaseCallbacks_ = function () {\n      for (var t = 0; t < this.firebaseCallbacks_.length; t++) {\n        var e = this.firebaseCallbacks_[t];\n        e.ref.off(e.eventType, e.callback, e.context);\n      }\n\n      this.firebaseCallbacks_ = [];\n    };\n    var s = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n\n    function a(t) {\n      if (0 === t) return \"A0\";\n\n      for (var e = \"\"; t > 0;) {\n        var r = t % s.length;\n        e = s[r] + e, t -= r, t /= s.length;\n      }\n\n      return s[e.length + 9] + e;\n    }\n\n    return i;\n  }(), (n = n || {}).RichTextToolbar = function (t) {\n    var e = n.utils;\n\n    function r(t) {\n      this.imageInsertionUI = t, this.element_ = this.makeElement_();\n    }\n\n    return e.makeEventEmitter(r, [\"bold\", \"italic\", \"underline\", \"strike\", \"font\", \"font-size\", \"color\", \"left\", \"center\", \"right\", \"unordered-list\", \"ordered-list\", \"todo-list\", \"indent-increase\", \"indent-decrease\", \"undo\", \"redo\", \"insert-image\"]), r.prototype.element = function () {\n      return this.element_;\n    }, r.prototype.makeButton_ = function (t, r) {\n      var n = this;\n      r = r || t;\n      var i = e.elt(\"a\", [e.elt(\"span\", \"\", {\n        class: \"firepad-tb-\" + r\n      })], {\n        class: \"firepad-btn\"\n      });\n      return e.on(i, \"click\", e.stopEventAnd(function () {\n        n.trigger(t);\n      })), i;\n    }, r.prototype.makeElement_ = function () {\n      var t = this.makeFontDropdown_(),\n          r = this.makeFontSizeDropdown_(),\n          n = this.makeColorDropdown_(),\n          i = [e.elt(\"div\", [t], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [r], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [n], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [this.makeButton_(\"bold\"), this.makeButton_(\"italic\"), this.makeButton_(\"underline\"), this.makeButton_(\"strike\", \"strikethrough\")], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [this.makeButton_(\"unordered-list\", \"list-2\"), this.makeButton_(\"ordered-list\", \"numbered-list\"), this.makeButton_(\"todo-list\", \"list\")], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [this.makeButton_(\"indent-decrease\"), this.makeButton_(\"indent-increase\")], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [this.makeButton_(\"left\", \"paragraph-left\"), this.makeButton_(\"center\", \"paragraph-center\"), this.makeButton_(\"right\", \"paragraph-right\")], {\n        class: \"firepad-btn-group\"\n      }), e.elt(\"div\", [this.makeButton_(\"undo\"), this.makeButton_(\"redo\")], {\n        class: \"firepad-btn-group\"\n      })];\n      this.imageInsertionUI && i.push(e.elt(\"div\", [this.makeButton_(\"insert-image\")], {\n        class: \"firepad-btn-group\"\n      }));\n      var o = e.elt(\"div\", i, {\n        class: \"firepad-toolbar-wrapper\"\n      }),\n          s = e.elt(\"div\", null, {\n        class: \"firepad-toolbar\"\n      });\n      return s.appendChild(o), s;\n    }, r.prototype.makeFontDropdown_ = function () {\n      for (var t = [\"Arial\", \"Comic Sans MS\", \"Courier New\", \"Impact\", \"Times New Roman\", \"Verdana\"], r = [], n = 0; n < t.length; n++) {\n        var i = e.elt(\"span\", t[n]);\n        i.setAttribute(\"style\", \"font-family:\" + t[n]), r.push({\n          content: i,\n          value: t[n]\n        });\n      }\n\n      return this.makeDropdown_(\"Font\", \"font\", r);\n    }, r.prototype.makeFontSizeDropdown_ = function () {\n      for (var t = [9, 10, 12, 14, 18, 24, 32, 42], r = [], n = 0; n < t.length; n++) {\n        var i = e.elt(\"span\", t[n].toString());\n        i.setAttribute(\"style\", \"font-size:\" + t[n] + \"px; line-height:\" + (t[n] - 6) + \"px;\"), r.push({\n          content: i,\n          value: t[n]\n        });\n      }\n\n      return this.makeDropdown_(\"Size\", \"font-size\", r, \"px\");\n    }, r.prototype.makeColorDropdown_ = function () {\n      for (var t = [\"black\", \"red\", \"green\", \"blue\", \"yellow\", \"cyan\", \"magenta\", \"grey\"], r = [], n = 0; n < t.length; n++) {\n        var i = e.elt(\"div\");\n        i.className = \"firepad-color-dropdown-item\", i.setAttribute(\"style\", \"background-color:\" + t[n]), r.push({\n          content: i,\n          value: t[n]\n        });\n      }\n\n      return this.makeDropdown_(\"Color\", \"color\", r);\n    }, r.prototype.makeDropdown_ = function (t, r, n, i) {\n      i = i || \"\";\n      var o = this,\n          s = e.elt(\"a\", t + \" ▾\", {\n        class: \"firepad-btn firepad-dropdown\"\n      }),\n          a = e.elt(\"ul\", [], {\n        class: \"firepad-dropdown-menu\"\n      });\n      s.appendChild(a);\n      var h = !1;\n      var c = !1;\n\n      function u() {\n        h && (a.style.display = \"\", e.off(document, \"click\", u, !0), h = !1), c = !0, setTimeout(function () {\n          c = !1;\n        }, 0);\n      }\n\n      function l(t, n) {\n        \"object\" != typeof t && (t = document.createTextNode(String(t)));\n        var s = e.elt(\"a\", [t]);\n        e.on(s, \"click\", e.stopEventAnd(function () {\n          u(), o.trigger(r, n + i);\n        })), a.appendChild(s);\n      }\n\n      for (var p = 0; p < n.length; p++) {\n        l(n[p].content, n[p].value);\n      }\n\n      return e.on(s, \"click\", e.stopEventAnd(function () {\n        c || h || (a.style.display = \"block\", e.on(document, \"click\", u, !0), h = !0);\n      })), s;\n    }, r;\n  }(), (n = n || {}).WrappedOperation = function (t) {\n    \"use strict\";\n\n    function e(t, e) {\n      this.wrapped = t, this.meta = e;\n    }\n\n    function r(t, e) {\n      for (var r in t) {\n        t.hasOwnProperty(r) && (e[r] = t[r]);\n      }\n    }\n\n    function n(t, e) {\n      return t && \"object\" == typeof t && \"function\" == typeof t.transform ? t.transform(e) : t;\n    }\n\n    return e.prototype.apply = function () {\n      return this.wrapped.apply.apply(this.wrapped, arguments);\n    }, e.prototype.invert = function () {\n      var t = this.meta;\n      return new e(this.wrapped.invert.apply(this.wrapped, arguments), t && \"object\" == typeof t && \"function\" == typeof t.invert ? t.invert.apply(t, arguments) : t);\n    }, e.prototype.compose = function (t) {\n      return new e(this.wrapped.compose(t.wrapped), function (t, e) {\n        if (t && \"object\" == typeof t) {\n          if (\"function\" == typeof t.compose) return t.compose(e);\n          var n = {};\n          return r(t, n), r(e, n), n;\n        }\n\n        return e;\n      }(this.meta, t.meta));\n    }, e.transform = function (t, r) {\n      var i = t.wrapped.transform(r.wrapped);\n      return [new e(i[0], n(t.meta, r.wrapped)), new e(i[1], n(r.meta, t.wrapped))];\n    }, e.prototype.transform = function (t) {\n      return e.transform(this, t);\n    }, e;\n  }(), (n = n || {}).UndoManager = function () {\n    \"use strict\";\n\n    var t = \"normal\";\n\n    function e(e) {\n      this.maxItems = e || 50, this.state = t, this.dontCompose = !1, this.undoStack = [], this.redoStack = [];\n    }\n\n    function r(t, e) {\n      for (var r = [], n = e.constructor, i = t.length - 1; i >= 0; i--) {\n        var o = n.transform(t[i], e);\n        \"function\" == typeof o[0].isNoop && o[0].isNoop() || r.push(o[0]), e = o[1];\n      }\n\n      return r.reverse();\n    }\n\n    return e.prototype.add = function (t, e) {\n      if (\"undoing\" === this.state) this.redoStack.push(t), this.dontCompose = !0;else if (\"redoing\" === this.state) this.undoStack.push(t), this.dontCompose = !0;else {\n        var r = this.undoStack;\n        !this.dontCompose && e && r.length > 0 ? r.push(t.compose(r.pop())) : (r.push(t), r.length > this.maxItems && r.shift()), this.dontCompose = !1, this.redoStack = [];\n      }\n    }, e.prototype.transform = function (t) {\n      this.undoStack = r(this.undoStack, t), this.redoStack = r(this.redoStack, t);\n    }, e.prototype.performUndo = function (e) {\n      if (this.state = \"undoing\", 0 === this.undoStack.length) throw new Error(\"undo not possible\");\n      e(this.undoStack.pop()), this.state = t;\n    }, e.prototype.performRedo = function (e) {\n      if (this.state = \"redoing\", 0 === this.redoStack.length) throw new Error(\"redo not possible\");\n      e(this.redoStack.pop()), this.state = t;\n    }, e.prototype.canUndo = function () {\n      return 0 !== this.undoStack.length;\n    }, e.prototype.canRedo = function () {\n      return 0 !== this.redoStack.length;\n    }, e.prototype.isUndoing = function () {\n      return \"undoing\" === this.state;\n    }, e.prototype.isRedoing = function () {\n      return \"redoing\" === this.state;\n    }, e;\n  }(), (n = n || {}).Client = function () {\n    \"use strict\";\n\n    function t() {\n      this.state = r;\n    }\n\n    function e() {}\n\n    t.prototype.setState = function (t) {\n      this.state = t;\n    }, t.prototype.applyClient = function (t) {\n      this.setState(this.state.applyClient(this, t));\n    }, t.prototype.applyServer = function (t) {\n      this.setState(this.state.applyServer(this, t));\n    }, t.prototype.serverAck = function () {\n      this.setState(this.state.serverAck(this));\n    }, t.prototype.serverRetry = function () {\n      this.setState(this.state.serverRetry(this));\n    }, t.prototype.sendOperation = function (t) {\n      throw new Error(\"sendOperation must be defined in child class\");\n    }, t.prototype.applyOperation = function (t) {\n      throw new Error(\"applyOperation must be defined in child class\");\n    }, t.Synchronized = e, e.prototype.applyClient = function (t, e) {\n      return t.sendOperation(e), new n(e);\n    }, e.prototype.applyServer = function (t, e) {\n      return t.applyOperation(e), this;\n    }, e.prototype.serverAck = function (t) {\n      throw new Error(\"There is no pending operation.\");\n    }, e.prototype.serverRetry = function (t) {\n      throw new Error(\"There is no pending operation.\");\n    };\n    var r = new e();\n\n    function n(t) {\n      this.outstanding = t;\n    }\n\n    function i(t, e) {\n      this.outstanding = t, this.buffer = e;\n    }\n\n    return t.AwaitingConfirm = n, n.prototype.applyClient = function (t, e) {\n      return new i(this.outstanding, e);\n    }, n.prototype.applyServer = function (t, e) {\n      var r = this.outstanding.transform(e);\n      return t.applyOperation(r[1]), new n(r[0]);\n    }, n.prototype.serverAck = function (t) {\n      return r;\n    }, n.prototype.serverRetry = function (t) {\n      return t.sendOperation(this.outstanding), this;\n    }, t.AwaitingWithBuffer = i, i.prototype.applyClient = function (t, e) {\n      var r = this.buffer.compose(e);\n      return new i(this.outstanding, r);\n    }, i.prototype.applyServer = function (t, e) {\n      var r = this.outstanding.transform(e),\n          n = this.buffer.transform(r[1]);\n      return t.applyOperation(n[1]), new i(r[0], n[0]);\n    }, i.prototype.serverRetry = function (t) {\n      var e = this.outstanding.compose(this.buffer);\n      return t.sendOperation(e), new n(e);\n    }, i.prototype.serverAck = function (t) {\n      return t.sendOperation(this.buffer), new n(this.buffer);\n    }, t;\n  }(), (n = n || {}).EditorClient = function () {\n    \"use strict\";\n\n    var t = n.Client,\n        e = n.Cursor,\n        r = n.UndoManager,\n        i = n.WrappedOperation;\n\n    function o(t, e) {\n      this.cursorBefore = t, this.cursorAfter = e;\n    }\n\n    function s(t, e) {\n      this.id = t, this.editorAdapter = e;\n    }\n\n    function a(n, i) {\n      t.call(this), this.serverAdapter = n, this.editorAdapter = i, this.undoManager = new r(), this.clients = {};\n      var o = this;\n      this.editorAdapter.registerCallbacks({\n        change: function change(t, e) {\n          o.onChange(t, e);\n        },\n        cursorActivity: function cursorActivity() {\n          o.onCursorActivity();\n        },\n        blur: function blur() {\n          o.onBlur();\n        },\n        focus: function focus() {\n          o.onFocus();\n        }\n      }), this.editorAdapter.registerUndo(function () {\n        o.undo();\n      }), this.editorAdapter.registerRedo(function () {\n        o.redo();\n      }), this.serverAdapter.registerCallbacks({\n        ack: function ack() {\n          o.serverAck(), o.focused && o.state instanceof t.Synchronized && (o.updateCursor(), o.sendCursor(o.cursor)), o.emitStatus();\n        },\n        retry: function retry() {\n          o.serverRetry();\n        },\n        operation: function operation(t) {\n          o.applyServer(t);\n        },\n        cursor: function cursor(r, n, i) {\n          if (o.serverAdapter.userId_ !== r && o.state instanceof t.Synchronized) {\n            var s = o.getClientObject(r);\n            n ? (i && s.setColor(i), s.updateCursor(e.fromJSON(n))) : s.removeCursor();\n          }\n        }\n      });\n    }\n\n    return o.prototype.invert = function () {\n      return new o(this.cursorAfter, this.cursorBefore);\n    }, o.prototype.compose = function (t) {\n      return new o(this.cursorBefore, t.cursorAfter);\n    }, o.prototype.transform = function (t) {\n      return new o(this.cursorBefore ? this.cursorBefore.transform(t) : null, this.cursorAfter ? this.cursorAfter.transform(t) : null);\n    }, s.prototype.setColor = function (t) {\n      this.color = t;\n    }, s.prototype.updateCursor = function (t) {\n      this.removeCursor(), this.cursor = t, this.mark = this.editorAdapter.setOtherCursor(t, this.color, this.id);\n    }, s.prototype.removeCursor = function () {\n      this.mark && this.mark.clear();\n    }, function (t, e) {\n      function r() {}\n\n      r.prototype = e.prototype, t.prototype = new r(), t.prototype.constructor = t;\n    }(a, t), a.prototype.getClientObject = function (t) {\n      var e = this.clients[t];\n      return e || (this.clients[t] = new s(t, this.editorAdapter));\n    }, a.prototype.applyUnredo = function (t) {\n      this.undoManager.add(this.editorAdapter.invertOperation(t)), this.editorAdapter.applyOperation(t.wrapped), this.cursor = t.meta.cursorAfter, this.cursor && this.editorAdapter.setCursor(this.cursor), this.applyClient(t.wrapped);\n    }, a.prototype.undo = function () {\n      var t = this;\n      this.undoManager.canUndo() && this.undoManager.performUndo(function (e) {\n        t.applyUnredo(e);\n      });\n    }, a.prototype.redo = function () {\n      var t = this;\n      this.undoManager.canRedo() && this.undoManager.performRedo(function (e) {\n        t.applyUnredo(e);\n      });\n    }, a.prototype.onChange = function (t, e) {\n      var r = this.cursor;\n      this.updateCursor();\n      var n,\n          s = this.undoManager.undoStack.length > 0 && e.shouldBeComposedWithInverted((n = this.undoManager.undoStack, n[n.length - 1]).wrapped),\n          a = new o(this.cursor, r);\n      this.undoManager.add(new i(e, a), s), this.applyClient(t);\n    }, a.prototype.updateCursor = function () {\n      this.cursor = this.editorAdapter.getCursor();\n    }, a.prototype.onCursorActivity = function () {\n      var t = this.cursor;\n      this.updateCursor(), !this.focused || t && this.cursor.equals(t) || this.sendCursor(this.cursor);\n    }, a.prototype.onBlur = function () {\n      this.cursor = null, this.sendCursor(null), this.focused = !1;\n    }, a.prototype.onFocus = function () {\n      this.focused = !0, this.onCursorActivity();\n    }, a.prototype.sendCursor = function (e) {\n      this.state instanceof t.AwaitingWithBuffer || this.serverAdapter.sendCursor(e);\n    }, a.prototype.sendOperation = function (t) {\n      this.serverAdapter.sendOperation(t), this.emitStatus();\n    }, a.prototype.applyOperation = function (t) {\n      this.editorAdapter.applyOperation(t), this.updateCursor(), this.undoManager.transform(new i(t, null));\n    }, a.prototype.emitStatus = function () {\n      var e = this;\n      setTimeout(function () {\n        e.trigger(\"synced\", e.state instanceof t.Synchronized);\n      }, 0);\n    }, a;\n  }(), n.utils.makeEventEmitter(n.EditorClient, [\"synced\"]), void 0 !== n && null !== n || (n = {}), n.ACEAdapter = function () {\n    var e = function () {\n      function e(t) {\n        var r;\n        !function (t, e) {\n          if (!(t instanceof e)) throw new TypeError(\"Cannot call a class as a function\");\n        }(this, e), this.onChange = this.onChange.bind(this), this.onBlur = this.onBlur.bind(this), this.onFocus = this.onFocus.bind(this), this.onCursorActivity = this.onCursorActivity.bind(this), this.ace = t, this.aceSession = this.ace.getSession(), this.aceDoc = this.aceSession.getDocument(), this.aceDoc.setNewLineMode(\"unix\"), this.grabDocumentState(), this.ace.on(\"change\", this.onChange), this.ace.on(\"blur\", this.onBlur), this.ace.on(\"focus\", this.onFocus), this.aceSession.selection.on(\"changeCursor\", this.onCursorActivity), null == this.aceRange && (this.aceRange = (null != (r = ace.require) ? r : require)(\"ace/range\").Range);\n      }\n\n      var i, o, s;\n      return i = e, (o = [{\n        key: \"grabDocumentState\",\n        value: function value() {\n          return this.lastDocLines = this.aceDoc.getAllLines(), this.lastCursorRange = this.aceSession.selection.getRange();\n        }\n      }, {\n        key: \"detach\",\n        value: function value() {\n          return this.ace.removeListener(\"change\", this.onChange), this.ace.removeListener(\"blur\", this.onBlur), this.ace.removeListener(\"focus\", this.onFocus), this.aceSession.selection.removeListener(\"changeCursor\", this.onCursorActivity);\n        }\n      }, {\n        key: \"onChange\",\n        value: function value(e) {\n          var r;\n          if (!this.ignoreChanges) return r = this.operationFromACEChange(e), this.trigger.apply(this, [\"change\"].concat(t(r))), this.grabDocumentState();\n        }\n      }, {\n        key: \"onBlur\",\n        value: function value() {\n          if (this.ace.selection.isEmpty()) return this.trigger(\"blur\");\n        }\n      }, {\n        key: \"onFocus\",\n        value: function value() {\n          return this.trigger(\"focus\");\n        }\n      }, {\n        key: \"onCursorActivity\",\n        value: function value() {\n          var t = this;\n          return setTimeout(function () {\n            return t.trigger(\"cursorActivity\");\n          }, 0);\n        }\n      }, {\n        key: \"operationFromACEChange\",\n        value: function value(t) {\n          var e, r, i, o, s, a, h;\n          return t.data ? (\"insertLines\" === (o = (r = t.data).action) || \"removeLines\" === o ? (h = r.lines.join(\"\\n\") + \"\\n\", r.action.replace(\"Lines\", \"\")) : (h = r.text.replace(this.aceDoc.getNewLineCharacter(), \"\\n\"), r.action.replace(\"Text\", \"\")), a = this.indexFromPos(r.range.start)) : (h = t.lines.join(\"\\n\"), a = this.indexFromPos(t.start)), s = this.lastDocLines.join(\"\\n\").length - a, \"remove\" === t.action && (s -= h.length), i = new n.TextOperation().retain(a).insert(h).retain(s), e = new n.TextOperation().retain(a).delete(h).retain(s), \"remove\" === t.action ? [e, i] : [i, e];\n        }\n      }, {\n        key: \"applyOperationToACE\",\n        value: function value(t) {\n          var e, r, n, i, o, s, a, h;\n\n          for (r = 0, n = 0, i = (a = t.ops).length; n < i; n++) {\n            (o = a[n]).isRetain() ? r += o.chars : o.isInsert() ? (this.aceDoc.insert(this.posFromIndex(r), o.text), r += o.text.length) : o.isDelete() && (e = this.posFromIndex(r), h = this.posFromIndex(r + o.chars), s = this.aceRange.fromPoints(e, h), this.aceDoc.remove(s));\n          }\n\n          return this.grabDocumentState();\n        }\n      }, {\n        key: \"posFromIndex\",\n        value: function value(t) {\n          var e, r, n, i, o;\n\n          for (o = e = 0, r = (i = this.aceDoc.$lines).length; e < r && !(t <= (n = i[o]).length); o = ++e) {\n            t -= n.length + 1;\n          }\n\n          return {\n            row: o,\n            column: t\n          };\n        }\n      }, {\n        key: \"indexFromPos\",\n        value: function value(t, e) {\n          var r, n, i, o;\n\n          for (null == e && (e = this.lastDocLines), n = 0, r = i = 0, o = t.row; 0 <= o ? i < o : i > o; r = 0 <= o ? ++i : --i) {\n            n += this.lastDocLines[r].length + 1;\n          }\n\n          return n + t.column;\n        }\n      }, {\n        key: \"getValue\",\n        value: function value() {\n          return this.aceDoc.getValue();\n        }\n      }, {\n        key: \"getCursor\",\n        value: function value() {\n          var t, e, r;\n\n          try {\n            r = this.indexFromPos(this.aceSession.selection.getRange().start, this.aceDoc.$lines), e = this.indexFromPos(this.aceSession.selection.getRange().end, this.aceDoc.$lines);\n          } catch (n) {\n            n;\n\n            try {\n              r = this.indexFromPos(this.lastCursorRange.start), e = this.indexFromPos(this.lastCursorRange.end);\n            } catch (n) {\n              t = n, console.log(\"Couldn't figure out the cursor range:\", t, \"-- setting it to 0:0.\"), r = 0, e = 0;\n            }\n          }\n\n          if (r > e) {\n            var i = [e, r];\n            r = i[0], e = i[1];\n          }\n\n          return new n.Cursor(r, e);\n        }\n      }, {\n        key: \"setCursor\",\n        value: function value(t) {\n          var e, r;\n\n          if (r = this.posFromIndex(t.position), e = this.posFromIndex(t.selectionEnd), t.position > t.selectionEnd) {\n            var n = [e, r];\n            r = n[0], e = n[1];\n          }\n\n          return this.aceSession.selection.setSelectionRange(new this.aceRange(r.row, r.column, e.row, e.column));\n        }\n      }, {\n        key: \"setOtherCursor\",\n        value: function value(t, e, r) {\n          var n,\n              i,\n              o,\n              s,\n              a,\n              h,\n              c,\n              u = this;\n\n          if (null == this.otherCursors && (this.otherCursors = {}), (o = this.otherCursors[r]) && (o.start.detach(), o.end.detach(), this.aceSession.removeMarker(o.id)), c = this.posFromIndex(t.position), s = this.posFromIndex(t.selectionEnd), t.selectionEnd < t.position) {\n            var l = [s, c];\n            c = l[0], s = l[1];\n          }\n\n          return n = \"other-client-selection-\".concat(e.replace(\"#\", \"\")), (a = t.position === t.selectionEnd) && (n = n.replace(\"selection\", \"cursor\")), i = \".\".concat(n, \" {\\n  position: absolute;\\n  background-color: \").concat(a ? \"transparent\" : e, \";\\n  border-left: 2px solid \").concat(e, \";\\n}\"), this.addStyleRule(i), this.otherCursors[r] = o = new this.aceRange(c.row, c.column, s.row, s.column), h = this, o.clipRows = function () {\n            var t;\n            return (t = h.aceRange.prototype.clipRows.apply(this, arguments)).isEmpty = function () {\n              return !1;\n            }, t;\n          }, o.start = this.aceDoc.createAnchor(o.start), o.end = this.aceDoc.createAnchor(o.end), o.id = this.aceSession.addMarker(o, n, \"text\"), {\n            clear: function clear() {\n              return o.start.detach(), o.end.detach(), u.aceSession.removeMarker(o.id);\n            }\n          };\n        }\n      }, {\n        key: \"addStyleRule\",\n        value: function value(t) {\n          var e;\n          if (\"undefined\" != typeof document && null !== document && (this.addedStyleRules || (this.addedStyleRules = {}, e = document.createElement(\"style\"), document.documentElement.getElementsByTagName(\"head\")[0].appendChild(e), this.addedStyleSheet = e.sheet), !this.addedStyleRules[t])) return this.addedStyleRules[t] = !0, this.addedStyleSheet.insertRule(t, 0);\n        }\n      }, {\n        key: \"registerCallbacks\",\n        value: function value(t) {\n          this.callbacks = t;\n        }\n      }, {\n        key: \"trigger\",\n        value: function value(t) {\n          for (var e, r, n = arguments.length, i = new Array(n > 1 ? n - 1 : 0), o = 1; o < n; o++) {\n            i[o - 1] = arguments[o];\n          }\n\n          return null != (e = this.callbacks) && null != (r = e[t]) ? r.apply(this, i) : void 0;\n        }\n      }, {\n        key: \"applyOperation\",\n        value: function value(t) {\n          return t.isNoop() || (this.ignoreChanges = !0), this.applyOperationToACE(t), this.ignoreChanges = !1;\n        }\n      }, {\n        key: \"registerUndo\",\n        value: function value(t) {\n          return this.ace.undo = t;\n        }\n      }, {\n        key: \"registerRedo\",\n        value: function value(t) {\n          return this.ace.redo = t;\n        }\n      }, {\n        key: \"invertOperation\",\n        value: function value(t) {\n          return t.invert(this.getValue());\n        }\n      }]) && r(i.prototype, o), s && r(i, s), e;\n    }();\n\n    return e.prototype.ignoreChanges = !1, e;\n  }.call(void 0);\n\n  var n,\n      i = function i(t, e, r) {\n    return \".\" + t + \" {\\n  position: relative;\\nbackground-color: \" + e + \";\\nborder-left: 2px solid \" + r + \";\\n}\";\n  },\n      o = function o(t, e) {\n    if (\"undefined\" == typeof document || null === document) return !1;\n\n    if (-1 === this.addedStyleRules.indexOf(t)) {\n      var r = document.createElement(\"style\"),\n          n = document.createTextNode(e);\n      r.appendChild(n), document.head.appendChild(r), this.addedStyleRules.push(t);\n    }\n  },\n      s = function () {\n    function t(t) {\n      if (!t || \"function\" != typeof t.getModel) throw new Error(\"MonacoAdapter: Incorrect Parameter Recieved in constructor, expected valid Monaco Instance\");\n      this.monaco = t, this.monacoModel = this.monaco.getModel(), this.lastDocLines = this.monacoModel.getLinesContent(), this.lastCursorRange = this.monaco.getSelection(), this.callbacks = {}, this.otherCursors = [], this.addedStyleRules = [], this.ignoreChanges = !1, this.onChange = this.onChange.bind(this), this.onBlur = this.onBlur.bind(this), this.onFocus = this.onFocus.bind(this), this.onCursorActivity = this.onCursorActivity.bind(this), this.changeHandler = this.monaco.onDidChangeModelContent(this.onChange), this.didBlurHandler = this.monaco.onDidBlurEditorWidget(this.onBlur), this.didFocusHandler = this.monaco.onDidFocusEditorWidget(this.onFocus), this.didChangeCursorPositionHandler = this.monaco.onDidChangeCursorPosition(this.onCursorActivity);\n    }\n\n    return t.prototype.detach = function () {\n      this.changeHandler.dispose(), this.didBlurHandler.dispose(), this.didFocusHandler.dispose(), this.didChangeCursorPositionHandler.dispose();\n    }, t.prototype.getCursor = function () {\n      var t = this.monaco.getSelection();\n      void 0 !== t && null !== t || (t = this.lastCursorRange);\n      var e = t.getStartPosition(),\n          r = t.getEndPosition(),\n          i = this.monacoModel.getOffsetAt(e),\n          o = this.monacoModel.getOffsetAt(r);\n\n      if (i > o) {\n        var s = [o, i];\n        i = s[0], o = s[1];\n      }\n\n      return new n.Cursor(i, o);\n    }, t.prototype.setCursor = function (t) {\n      var e = t.position,\n          r = t.selectionEnd,\n          n = this.monacoModel.getPositionAt(e),\n          i = this.monacoModel.getPositionAt(r);\n\n      if (e > r) {\n        var o = [i, n];\n        n = o[0], i = o[1];\n      }\n\n      this.monaco.setSelection(new monaco.Range(n.lineNumber, n.column, i.lineNumber, i.column));\n    }, t.prototype.setOtherCursor = function (t, e, r) {\n      if (\"object\" != typeof t || \"number\" != typeof t.position || \"number\" != typeof t.selectionEnd) return !1;\n      if (\"string\" != typeof e || !e.match(/^#[a-fA-F0-9]{3,6}$/)) return !1;\n      var n = t.position,\n          s = t.selectionEnd;\n      if (n < 0 || s < 0) return !1;\n      var a = this.otherCursors.find(function (t) {\n        return t.clientID === r;\n      });\n      a || (a = {\n        clientID: r,\n        decoration: []\n      }, this.otherCursors.push(a)), a.decoration = this.monaco.deltaDecorations(a.decoration, []);\n      var h,\n          c,\n          u = \"other-client-selection-\" + e.replace(\"#\", \"\");\n      n === s ? (u = u.replace(\"selection\", \"cursor\"), h = i(u, \"transparent\", e), c = o.call(this, u, h)) : (h = i(u, e, e), c = o.call(this, u, h)), 0 == c && console.log(\"Monaco Adapter: Failed to add some css style.\\nPlease make sure you're running on supported environment.\");\n      var l = this.monacoModel.getPositionAt(n),\n          p = this.monacoModel.getPositionAt(s);\n\n      if (n > s) {\n        var d = [p, l];\n        l = d[0], p = d[1];\n      }\n\n      a.decoration = this.monaco.deltaDecorations(a.decoration, [{\n        range: new monaco.Range(l.lineNumber, l.column, p.lineNumber, p.column),\n        options: {\n          className: u\n        }\n      }]);\n      var f = this;\n      return {\n        clear: function clear() {\n          a.decoration = f.monaco.deltaDecorations(a.decoration, []);\n        }\n      };\n    }, t.prototype.registerCallbacks = function (t) {\n      this.callbacks = Object.assign({}, this.callbacks, t);\n    }, t.prototype.registerUndo = function (t) {\n      if (\"function\" != typeof t) throw new Error(\"MonacoAdapter: registerUndo method expects a callback function in parameter\");\n      this.callbacks.undo = t;\n    }, t.prototype.registerRedo = function (t) {\n      if (\"function\" != typeof t) throw new Error(\"MonacoAdapter: registerRedo method expects a callback function in parameter\");\n      this.callbacks.redo = t;\n    }, t.prototype.operationFromMonacoChanges = function (t, e, r) {\n      var i,\n          o,\n          s,\n          a = t.text,\n          h = t.rangeLength,\n          c = t.rangeOffset,\n          u = e.length + r - c;\n      return 0 === a.length && h > 0 ? (s = e.slice(c, c + h), i = new n.TextOperation().retain(c).delete(h).retain(u - h), o = new n.TextOperation().retain(c).insert(s).retain(u - h)) : a.length > 0 && h > 0 ? (s = e.slice(c, c + h), i = new n.TextOperation().retain(c).delete(h).insert(a).retain(u - h), o = new n.TextOperation().retain(c).delete(a.length).insert(s).retain(u - h)) : (i = new n.TextOperation().retain(c).insert(a).retain(u), o = new n.TextOperation().retain(c).delete(a).retain(u)), [i, o];\n    }, t.prototype.onChange = function (t) {\n      var e = this;\n\n      if (!this.ignoreChanges) {\n        var r = this.lastDocLines.join(this.monacoModel.getEOL()),\n            i = 0;\n\n        if (!t.changes) {\n          var o = new n.TextOperation().retain(r.length);\n          this.trigger(\"change\", o, o);\n        }\n\n        t.changes.forEach(function (t) {\n          var n = e.operationFromMonacoChanges(t, r, i);\n          i += n[0].targetLength - n[0].baseLength, e.trigger.apply(e, [\"change\"].concat(n));\n        }), this.lastDocLines = this.monacoModel.getLinesContent();\n      }\n    }, t.prototype.trigger = function (t) {\n      if (this.callbacks.hasOwnProperty(t)) {\n        var e = this.callbacks[t];\n        0;\n        var r = [];\n        if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) {\n          r.push(arguments[n]);\n        }\n        e.apply(null, r);\n      }\n    }, t.prototype.onBlur = function () {\n      this.monaco.getSelection().isEmpty() && this.trigger(\"blur\");\n    }, t.prototype.onFocus = function () {\n      this.trigger(\"focus\");\n    }, t.prototype.onCursorActivity = function () {\n      var t = this;\n      setTimeout(function () {\n        return t.trigger(\"cursorActivity\");\n      }, 1);\n    }, t.prototype.applyOperation = function (t) {\n      t.isNoop() || (this.ignoreChanges = !0);\n      var e = 0,\n          r = this;\n      t.ops.forEach(function (t) {\n        if (t.isRetain()) e += t.chars;else if (t.isInsert()) {\n          var n = r.monacoModel.getPositionAt(e);\n          r.monaco.executeEdits(\"my-source\", [{\n            range: new monaco.Range(n.lineNumber, n.column, n.lineNumber, n.column),\n            text: t.text,\n            forceMoveMarkers: !0\n          }]), e += t.text.length;\n        } else if (t.isDelete()) {\n          var i = r.monacoModel.getPositionAt(e),\n              o = r.monacoModel.getPositionAt(e + t.chars);\n          r.monaco.executeEdits(\"my-source\", [{\n            range: new monaco.Range(i.lineNumber, i.column, o.lineNumber, o.column),\n            text: \"\",\n            forceMoveMarkers: !0\n          }]);\n        }\n      }), this.lastDocLines = this.monacoModel.getLinesContent(), this.ignoreChanges = !1;\n    }, t.prototype.invertOperation = function (t) {\n      t.invert(this.getValue());\n    }, t;\n  }();\n\n  return n.MonacoAdapter = s, (n = n || {}).AttributeConstants = {\n    BOLD: \"b\",\n    ITALIC: \"i\",\n    UNDERLINE: \"u\",\n    STRIKE: \"s\",\n    FONT: \"f\",\n    FONT_SIZE: \"fs\",\n    COLOR: \"c\",\n    BACKGROUND_COLOR: \"bc\",\n    ENTITY_SENTINEL: \"ent\",\n    LINE_SENTINEL: \"l\",\n    LINE_INDENT: \"li\",\n    LINE_ALIGN: \"la\",\n    LIST_TYPE: \"lt\"\n  }, n.sentinelConstants = {\n    LINE_SENTINEL_CHARACTER: \"\",\n    ENTITY_SENTINEL_CHARACTER: \"\"\n  }, (n = n || {}).EntityManager = function () {\n    var t = n.utils;\n\n    function e() {\n      this.entities_ = {};\n      var e = [\"src\", \"alt\", \"width\", \"height\", \"style\", \"class\"];\n      this.register(\"img\", {\n        render: function render(e) {\n          t.assert(e.src, \"image entity should have 'src'!\");\n\n          for (var r = [\"src\", \"alt\", \"width\", \"height\", \"style\", \"class\"], n = \"<img \", i = 0; i < r.length; i++) {\n            var o = r[i];\n            o in e && (n += \" \" + o + '=\"' + e[o] + '\"');\n          }\n\n          return n += \">\";\n        },\n        fromElement: function fromElement(t) {\n          for (var r = {}, n = 0; n < e.length; n++) {\n            var i = e[n];\n            t.hasAttribute(i) && (r[i] = t.getAttribute(i));\n          }\n\n          return r;\n        }\n      });\n    }\n\n    return e.prototype.register = function (t, e) {\n      n.utils.assert(e.render, \"Entity options should include a 'render' function!\"), n.utils.assert(e.fromElement, \"Entity options should include a 'fromElement' function!\"), this.entities_[t] = e;\n    }, e.prototype.renderToElement = function (t, e) {\n      return this.tryRenderToElement_(t, \"render\", e);\n    }, e.prototype.exportToElement = function (t) {\n      var e = this.tryRenderToElement_(t, \"export\") || this.tryRenderToElement_(t, \"getHtml\") || this.tryRenderToElement_(t, \"render\");\n      return e.setAttribute(\"data-firepad-entity\", t.type), e;\n    }, e.prototype.updateElement = function (t, e) {\n      var r = t.type,\n          n = t.info;\n      this.entities_[r] && void 0 !== this.entities_[r].update && this.entities_[r].update(n, e);\n    }, e.prototype.fromElement = function (t) {\n      var e = t.getAttribute(\"data-firepad-entity\");\n\n      if (e || (e = t.nodeName.toLowerCase()), e && this.entities_[e]) {\n        var r = this.entities_[e].fromElement(t);\n        return new n.Entity(e, r);\n      }\n    }, e.prototype.tryRenderToElement_ = function (t, e, r) {\n      var i = t.type,\n          o = t.info;\n\n      if (this.entities_[i] && this.entities_[i][e]) {\n        var s = n.document || window && window.document,\n            a = this.entities_[i][e](o, r, s);\n\n        if (a) {\n          if (\"string\" == typeof a) {\n            var h = (n.document || document).createElement(\"div\");\n            return h.innerHTML = a, h.childNodes[0];\n          }\n\n          if (\"object\" == typeof a) return n.utils.assert(void 0 !== a.nodeType, \"Error rendering \" + i + \" entity.  render() function must return an html string or a DOM element.\"), a;\n        }\n      }\n    }, e.prototype.entitySupportsUpdate = function (t) {\n      return this.entities_[t] && this.entities_[t].update;\n    }, e;\n  }(), (n = n || {}).Entity = function () {\n    var t = n.AttributeConstants.ENTITY_SENTINEL,\n        e = t + \"_\";\n\n    function r(t, e) {\n      if (!(this instanceof r)) return new r(t, e);\n      this.type = t, this.info = e || {};\n    }\n\n    return r.prototype.toAttributes = function () {\n      var r = {};\n\n      for (var n in r[t] = this.type, this.info) {\n        r[e + n] = this.info[n];\n      }\n\n      return r;\n    }, r.fromAttributes = function (n) {\n      var i = n[t],\n          o = {};\n\n      for (var s in n) {\n        0 === s.indexOf(e) && (o[s.substr(e.length)] = n[s]);\n      }\n\n      return new r(i, o);\n    }, r;\n  }(), (n = n || {}).RichTextCodeMirror = function () {\n    var t = n.AnnotationList,\n        e = n.Span,\n        r = n.utils,\n        i = n.AttributeConstants,\n        o = {\n      c: \"color\",\n      bc: \"background-color\",\n      fs: \"font-size\",\n      li: function li(t) {\n        return \"padding-left: \" + 40 * t + \"px\";\n      }\n    },\n        s = {};\n\n    function a(e, r, n) {\n      this.codeMirror = e, this.options_ = n || {}, this.entityManager_ = r, this.currentAttributes_ = null;\n      var i = this;\n      this.annotationList_ = new t(function (t, e) {\n        i.onAnnotationsChanged_(t, e);\n      }), this.initAnnotationList_(), f(this, \"onCodeMirrorBeforeChange_\"), f(this, \"onCodeMirrorChange_\"), f(this, \"onCursorActivity_\"), parseInt(CodeMirror.version) >= 4 ? this.codeMirror.on(\"changes\", this.onCodeMirrorChange_) : this.codeMirror.on(\"change\", this.onCodeMirrorChange_), this.codeMirror.on(\"beforeChange\", this.onCodeMirrorBeforeChange_), this.codeMirror.on(\"cursorActivity\", this.onCursorActivity_), this.changeId_ = 0, this.outstandingChanges_ = {}, this.dirtyLines_ = [];\n    }\n\n    r.makeEventEmitter(a, [\"change\", \"attributesChange\", \"newLine\"]);\n    var h = n.sentinelConstants.LINE_SENTINEL_CHARACTER,\n        c = n.sentinelConstants.ENTITY_SENTINEL_CHARACTER;\n\n    function u(t, e) {\n      return t.line - e.line || t.ch - e.ch;\n    }\n\n    function l(t, e) {\n      return u(t, e) <= 0;\n    }\n\n    function p(t) {\n      if (0 === t.length) return 0;\n\n      for (var e = 0, r = 0; r < t.length; r++) {\n        e += t[r].length;\n      }\n\n      return e + t.length - 1;\n    }\n\n    function d(t) {\n      this.attributes = t || {};\n    }\n\n    function f(t, e) {\n      var r = t[e];\n\n      t[e] = function () {\n        r.apply(t, arguments);\n      };\n    }\n\n    return a.prototype.detach = function () {\n      this.codeMirror.off(\"beforeChange\", this.onCodeMirrorBeforeChange_), this.codeMirror.off(\"change\", this.onCodeMirrorChange_), this.codeMirror.off(\"changes\", this.onCodeMirrorChange_), this.codeMirror.off(\"cursorActivity\", this.onCursorActivity_), this.clearAnnotations_();\n    }, a.prototype.toggleAttribute = function (t, e) {\n      var r = e || !0;\n\n      if (this.emptySelection_()) {\n        var n = this.getCurrentAttributes_();\n        n[t] === r ? delete n[t] : n[t] = r, this.currentAttributes_ = n;\n      } else {\n        var i = this.getCurrentAttributes_()[t] !== r && r;\n        this.setAttribute(t, i);\n      }\n    }, a.prototype.setAttribute = function (t, e) {\n      var r = this.codeMirror;\n\n      if (this.emptySelection_()) {\n        var n = this.getCurrentAttributes_();\n        !1 === e ? delete n[t] : n[t] = e, this.currentAttributes_ = n;\n      } else this.updateTextAttributes(r.indexFromPos(r.getCursor(\"start\")), r.indexFromPos(r.getCursor(\"end\")), function (r) {\n        !1 === e ? delete r[t] : r[t] = e;\n      }), this.updateCurrentAttributes_();\n    }, a.prototype.updateTextAttributes = function (t, r, n, o, s) {\n      var a = [],\n          h = t,\n          c = this;\n      this.annotationList_.updateSpan(new e(t, r - t), function (t, e) {\n        var r = {};\n\n        for (var u in t.attributes) {\n          r[u] = t.attributes[u];\n        }\n\n        r[i.LINE_SENTINEL] && !s || n(r);\n        var l = {},\n            p = {};\n        return c.computeChangedAttributes_(t.attributes, r, l, p), function (t) {\n          for (var e in t) {\n            return !1;\n          }\n\n          return !0;\n        }(l) || a.push({\n          start: h,\n          end: h + e,\n          attributes: l,\n          attributesInverse: p,\n          origin: o\n        }), h += e, new d(r);\n      }), a.length > 0 && this.trigger(\"attributesChange\", this, a);\n    }, a.prototype.computeChangedAttributes_ = function (t, e, r, n) {\n      var i,\n          o = {};\n\n      for (i in t) {\n        o[i] = !0;\n      }\n\n      for (i in e) {\n        o[i] = !0;\n      }\n\n      for (i in o) {\n        i in e ? i in t ? t[i] !== e[i] && (r[i] = e[i], n[i] = t[i]) : (r[i] = e[i], n[i] = !1) : (r[i] = !1, n[i] = t[i]);\n      }\n    }, a.prototype.toggleLineAttribute = function (t, e) {\n      var r,\n          n = this.getCurrentLineAttributes_();\n      r = !(t in n && n[t] === e) && e, this.setLineAttribute(t, r);\n    }, a.prototype.setLineAttribute = function (t, e) {\n      this.updateLineAttributesForSelection(function (r) {\n        !1 === e ? delete r[t] : r[t] = e;\n      });\n    }, a.prototype.updateLineAttributesForSelection = function (t) {\n      var e = this.codeMirror,\n          r = e.getCursor(\"start\"),\n          n = e.getCursor(\"end\"),\n          i = r.line,\n          o = n.line,\n          s = e.getLine(o),\n          a = this.areLineSentinelCharacters_(s.substr(0, n.ch));\n      o > i && a && o--, this.updateLineAttributes(i, o, t);\n    }, a.prototype.updateLineAttributes = function (t, e, r) {\n      for (var n = t; n <= e; n++) {\n        var o = this.codeMirror.getLine(n),\n            s = this.codeMirror.indexFromPos({\n          line: n,\n          ch: 0\n        });\n\n        if (o[0] !== h) {\n          var a = {};\n          a[i.LINE_SENTINEL] = !0, r(a), this.insertText(s, h, a);\n        } else this.updateTextAttributes(s, s + 1, r, null, !0);\n      }\n    }, a.prototype.replaceText = function (t, e, r, n, i) {\n      this.changeId_++;\n      var o = \"cmrt-\" + this.changeId_;\n      this.outstandingChanges_[o] = {\n        origOrigin: i,\n        attributes: n\n      };\n      var s = this.codeMirror,\n          a = s.posFromIndex(t),\n          h = \"number\" == typeof e ? s.posFromIndex(e) : null;\n      s.replaceRange(r, a, h, o);\n    }, a.prototype.insertText = function (t, e, r, n) {\n      var i = this.codeMirror,\n          o = i.getCursor(),\n          s = \"RTCMADAPTER\" == n && !i.somethingSelected() && t == i.indexFromPos(o);\n      this.replaceText(t, null, e, r, n), s && i.setCursor(o);\n    }, a.prototype.removeText = function (t, e, r) {\n      var n = this.codeMirror;\n      n.replaceRange(\"\", n.posFromIndex(t), n.posFromIndex(e), r);\n    }, a.prototype.insertEntityAtCursor = function (t, e, r) {\n      var n = this.codeMirror,\n          i = n.indexFromPos(n.getCursor(\"head\"));\n      this.insertEntityAt(i, t, e, r);\n    }, a.prototype.insertEntityAt = function (t, e, r, i) {\n      this.codeMirror;\n      this.insertEntity_(t, new n.Entity(e, r), i);\n    }, a.prototype.insertEntity_ = function (t, e, r) {\n      this.replaceText(t, null, c, e.toAttributes(), r);\n    }, a.prototype.getAttributeSpans = function (t, r) {\n      for (var n = [], i = this.annotationList_.getAnnotatedSpansForSpan(new e(t, r - t)), o = 0; o < i.length; o++) {\n        n.push({\n          length: i[o].length,\n          attributes: i[o].annotation.attributes\n        });\n      }\n\n      return n;\n    }, a.prototype.end = function () {\n      var t = this.codeMirror.lineCount() - 1;\n      return this.codeMirror.indexFromPos({\n        line: t,\n        ch: this.codeMirror.getLine(t).length\n      });\n    }, a.prototype.getRange = function (t, e) {\n      var r = this.codeMirror.posFromIndex(t),\n          n = this.codeMirror.posFromIndex(e);\n      return this.codeMirror.getRange(r, n);\n    }, a.prototype.initAnnotationList_ = function () {\n      var t = this.end();\n      0 !== t && this.annotationList_.insertAnnotatedSpan(new e(0, t), new d());\n    }, a.prototype.onAnnotationsChanged_ = function (t, e) {\n      var r,\n          n = {};\n      this.tryToUpdateEntitiesInPlace(t, e);\n\n      for (var o = 0; o < t.length; o++) {\n        var s = t[o].annotation.attributes;\n        i.LINE_SENTINEL in s && (n[this.codeMirror.posFromIndex(t[o].pos).line] = !0), (r = t[o].getAttachedObject()) && r.clear();\n      }\n\n      for (o = 0; o < e.length; o++) {\n        var a = e[o].annotation,\n            h = (i.LINE_SENTINEL in a.attributes),\n            c = (i.ENTITY_SENTINEL in a.attributes),\n            u = this.codeMirror.posFromIndex(e[o].pos);\n        if (h) n[u.line] = !0;else if (c) this.markEntity_(e[o]);else {\n          var l = this.getClassNameForAttributes_(a.attributes);\n\n          if (\"\" !== l) {\n            var p = this.codeMirror.posFromIndex(e[o].pos + e[o].length);\n            r = this.codeMirror.markText(u, p, {\n              className: l\n            }), e[o].attachObject(r);\n          }\n        }\n      }\n\n      for (var d in n) {\n        this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(d))), this.queueLineMarking_();\n      }\n    }, a.prototype.tryToUpdateEntitiesInPlace = function (t, e) {\n      for (var r = t.length; r--;) {\n        for (var n = t[r], i = e.length; i--;) {\n          var o = e[i];\n\n          if (n.pos == o.pos && n.length == o.length && n.annotation.attributes.ent && n.annotation.attributes.ent == o.annotation.attributes.ent) {\n            var s = o.annotation.attributes.ent;\n\n            if (this.entityManager_.entitySupportsUpdate(s)) {\n              t.splice(r, 1), e.splice(i, 1);\n              var a = n.getAttachedObject();\n              a.update(o.annotation.attributes), o.attachObject(a);\n            }\n          }\n        }\n      }\n    }, a.prototype.queueLineMarking_ = function () {\n      if (null == this.lineMarkTimeout_) {\n        var t = this;\n        this.lineMarkTimeout_ = setTimeout(function () {\n          t.lineMarkTimeout_ = null;\n\n          for (var e = [], r = 0; r < t.dirtyLines_.length; r++) {\n            var n = t.codeMirror.getLineNumber(t.dirtyLines_[r]);\n            e.push(Number(n));\n          }\n\n          t.dirtyLines_ = [], e.sort(function (t, e) {\n            return t - e;\n          });\n          var i = -1;\n\n          for (r = 0; r < e.length; r++) {\n            var o = e[r];\n            o > i && (i = t.markLineSentinelCharactersForChangedLines_(o, o));\n          }\n        }, 0);\n      }\n    }, a.prototype.addStyleWithCSS_ = function (t) {\n      var e = document.getElementsByTagName(\"head\")[0],\n          r = document.createElement(\"style\");\n      r.type = \"text/css\", r.styleSheet ? r.styleSheet.cssText = t : r.appendChild(document.createTextNode(t)), e.appendChild(r);\n    }, a.prototype.getClassNameForAttributes_ = function (t) {\n      var e = \"\";\n\n      for (var r in t) {\n        var a = t[r];\n        if (r === i.LINE_SENTINEL) n.utils.assert(!0 === a, \"LINE_SENTINEL attribute should be true if it exists.\");else {\n          var h = (this.options_.cssPrefix || \"cmrt-\") + r;\n\n          if (!0 !== a) {\n            r === i.FONT_SIZE && \"string\" != typeof a && (a += \"px\");\n            var c = a.toString().toLowerCase().replace(/[^a-z0-9-_]/g, \"-\");\n\n            if (h += \"-\" + c, o[r] && (s[r] || (s[r] = {}), !s[r][c])) {\n              s[r][c] = !0;\n              var u = o[r],\n                  l = \"function\" == typeof u ? u(a) : u + \": \" + a,\n                  p = r == i.LINE_INDENT ? \"pre.\" + h : \".\" + h;\n\n              if (this.addStyleWithCSS_(p + \" { \" + l + \" }\"), r === i.LINE_INDENT) {\n                p = \"pre.CodeMirror-line.\" + h;\n                this.addStyleWithCSS_(p + \" { \" + l + \" }\");\n              }\n            }\n          }\n\n          e = e + \" \" + h;\n        }\n      }\n\n      return e;\n    }, a.prototype.markEntity_ = function (t) {\n      for (var e = t.annotation.attributes, r = n.Entity.fromAttributes(e), i = this.codeMirror, o = this, s = [], a = 0; a < t.length; a++) {\n        var h = i.posFromIndex(t.pos + a),\n            c = i.posFromIndex(t.pos + a + 1),\n            u = {\n          collapsed: !0,\n          atomic: !0,\n          inclusiveLeft: !1,\n          inclusiveRight: !1\n        },\n            l = this.createEntityHandle_(r, t.pos),\n            p = this.entityManager_.renderToElement(r, l);\n        p && (u.replacedWith = p);\n        var d = i.markText(h, c, u);\n        s.push(d), l.setMarker(d);\n      }\n\n      t.attachObject({\n        clear: function clear() {\n          for (var t = 0; t < s.length; t++) {\n            s[t].clear();\n          }\n        },\n        update: function update(t) {\n          for (var e = n.Entity.fromAttributes(t), r = 0; r < s.length; r++) {\n            o.entityManager_.updateElement(e, s[r].replacedWith);\n          }\n        }\n      }), this.queueRefresh_();\n    }, a.prototype.queueRefresh_ = function () {\n      var t = this;\n      this.refreshTimer_ || (this.refreshTimer_ = setTimeout(function () {\n        t.codeMirror.refresh(), t.refreshTimer_ = null;\n      }, 0));\n    }, a.prototype.createEntityHandle_ = function (t, e) {\n      var r = null,\n          i = this;\n\n      function o() {\n        if (r) {\n          var t = r.find();\n          return t ? i.codeMirror.indexFromPos(t.from) : null;\n        }\n\n        return e;\n      }\n\n      return {\n        find: o,\n        remove: function remove() {\n          var t = o();\n          null != t && (i.codeMirror.focus(), i.removeText(t, t + 1));\n        },\n        replace: function replace(e) {\n          var r = n.AttributeConstants.ENTITY_SENTINEL,\n              s = r + \"_\",\n              a = o();\n          i.updateTextAttributes(a, a + 1, function (n) {\n            for (var i in n) {\n              delete n[i];\n            }\n\n            for (var o in n[r] = t.type, e) {\n              n[s + o] = e[o];\n            }\n          });\n        },\n        setMarker: function setMarker(t) {\n          r = t;\n        }\n      };\n    }, a.prototype.lineClassRemover_ = function (t) {\n      var e = this.codeMirror,\n          r = e.getLineHandle(t);\n      return {\n        clear: function clear() {\n          e.removeLineClass(r, \"text\", \".*\");\n        }\n      };\n    }, a.prototype.emptySelection_ = function () {\n      var t = this.codeMirror.getCursor(\"start\"),\n          e = this.codeMirror.getCursor(\"end\");\n      return t.line === e.line && t.ch === e.ch;\n    }, a.prototype.onCodeMirrorBeforeChange_ = function (t, e) {\n      if (\"+input\" === e.origin || \"paste\" === e.origin) {\n        for (var r = [], n = 0; n < e.text.length; n++) {\n          var i = e.text[n];\n          i = i.replace(new RegExp(\"[\" + h + c + \"]\", \"g\"), \"\"), r.push(i);\n        }\n\n        e.update(e.from, e.to, r);\n      }\n    }, a.prototype.onCodeMirrorChange_ = function (t, r) {\n      if (\"object\" == typeof r.from) {\n        for (var n = []; r;) {\n          n.push(r), r = r.next;\n        }\n\n        r = n;\n      }\n\n      for (var i = this.convertCoordinateSystemForChanges_(r), o = [], s = 0; s < i.length; s++) {\n        var a,\n            h = i[s],\n            c = h.start,\n            u = (h.end, h.text),\n            l = h.removed,\n            p = h.origin;\n\n        if (l.length > 0) {\n          for (var f = this.annotationList_.getAnnotatedSpansForSpan(new e(c, l.length)), g = 0, m = 0; m < f.length; m++) {\n            var y = f[m];\n            o.push({\n              start: c,\n              end: c + y.length,\n              removedAttributes: y.annotation.attributes,\n              removed: l.substr(g, y.length),\n              attributes: {},\n              text: \"\",\n              origin: h.origin\n            }), g += y.length;\n          }\n\n          this.annotationList_.removeSpan(new e(c, l.length));\n        }\n\n        if (u.length > 0) \"+input\" === h.origin || \"paste\" === h.origin ? a = this.currentAttributes_ || {} : p in this.outstandingChanges_ ? (a = this.outstandingChanges_[p].attributes, p = this.outstandingChanges_[p].origOrigin, delete this.outstandingChanges_[p]) : a = {}, this.annotationList_.insertAnnotatedSpan(new e(c, u.length), new d(a)), o.push({\n          start: c,\n          end: c,\n          removedAttributes: {},\n          removed: \"\",\n          text: u,\n          attributes: a,\n          origin: p\n        });\n      }\n\n      this.markLineSentinelCharactersForChanges_(r), o.length > 0 && this.trigger(\"change\", this, o);\n    }, a.prototype.convertCoordinateSystemForChanges_ = function (t) {\n      var e = this,\n          r = function r(t) {\n        return e.codeMirror.indexFromPos(t);\n      };\n\n      function n(t, e) {\n        return function (r) {\n          return l(r, e.from) ? t(r) : l(e.to, r) ? t({\n            line: r.line + e.text.length - 1 - (e.to.line - e.from.line),\n            ch: e.to.line < r.line ? r.ch : e.text.length <= 1 ? r.ch - (e.to.ch - e.from.ch) + p(e.text) : r.ch - e.to.ch + (n = e.text, n[n.length - 1]).length\n          }) + p(e.removed) - p(e.text) : e.from.line === r.line ? t(e.from) + r.ch - e.from.ch : t(e.from) + p(e.removed.slice(0, r.line - e.from.line)) + 1 + r.ch;\n          var n;\n        };\n      }\n\n      for (var i = [], o = t.length - 1; o >= 0; o--) {\n        var s = t[o],\n            a = (r = n(r, s))(s.from),\n            h = s.removed.join(\"\\n\"),\n            c = s.text.join(\"\\n\");\n        i.unshift({\n          start: a,\n          end: a + h.length,\n          removed: h,\n          text: c,\n          origin: s.origin\n        });\n      }\n\n      return i;\n    }, a.prototype.markLineSentinelCharactersForChanges_ = function (t) {\n      for (var e = Number.MAX_VALUE, r = -1, n = 0; n < t.length; n++) {\n        var i = t[n],\n            o = i.from.line;\n        i.from.ch;\n        (i.removed.length > 1 || i.removed[0].indexOf(h) >= 0) && (e = Math.min(e, o), r = Math.max(r, o)), i.text.length > 1 ? (e = Math.min(e, o), r = Math.max(r, o + i.text.length - 1)) : i.text[0].indexOf(h) >= 0 && (e = Math.min(e, o), r = Math.max(r, o));\n      }\n\n      r = Math.min(r, this.codeMirror.lineCount() - 1), this.markLineSentinelCharactersForChangedLines_(e, r);\n    }, a.prototype.markLineSentinelCharactersForChangedLines_ = function (t, e) {\n      if (t < Number.MAX_VALUE) for (; t > 0 && this.lineIsListItemOrIndented_(t - 1);) {\n        t--;\n      }\n      if (e > -1) for (var r = this.codeMirror.lineCount(); e + 1 < r && this.lineIsListItemOrIndented_(e + 1);) {\n        e++;\n      }\n\n      for (var n = [], i = this.codeMirror, o = t; o <= e; o++) {\n        var s = i.getLine(o),\n            a = i.getLineHandle(o);\n        if (i.removeLineClass(a, \"text\", \".*\"), s.length > 0) for (var c = s.indexOf(h); c >= 0;) {\n          for (var u = c; c < s.length && s[c] === h;) {\n            for (var l = i.findMarksAt({\n              line: o,\n              ch: c\n            }), p = 0; p < l.length; p++) {\n              l[p].isForLineSentinel && l[p].clear();\n            }\n\n            c++;\n          }\n\n          this.markLineSentinelCharacters_(o, u, c, n), c = s.indexOf(h, c);\n        } else n = [];\n      }\n\n      return e;\n    }, a.prototype.markLineSentinelCharacters_ = function (t, e, r, n) {\n      var o = this.codeMirror,\n          s = null,\n          a = null,\n          h = function h() {\n        var t = a.find();\n        return t ? t.from.line : null;\n      };\n\n      if (0 === e) {\n        var c = this.getLineAttributes_(t),\n            u = c[i.LIST_TYPE],\n            l = c[i.LINE_INDENT] || 0;\n\n        for (u && 0 === l && (l = 1); l >= n.length;) {\n          n.push(1);\n        }\n\n        \"o\" === u ? (s = this.makeOrderedListElement_(n[l]), n[l]++) : \"u\" === u ? (s = this.makeUnorderedListElement_(), n[l] = 1) : \"t\" === u ? (s = this.makeTodoListElement_(!1, h), n[l] = 1) : \"tc\" === u && (s = this.makeTodoListElement_(!0, h), n[l] = 1);\n        var p = this.getClassNameForAttributes_(c);\n        \"\" !== p && this.codeMirror.addLineClass(t, \"text\", p), n[l + 1] = 1;\n      }\n\n      var d = {\n        inclusiveLeft: !0,\n        collapsed: !0\n      };\n      s && (d.replacedWith = s), (a = o.markText({\n        line: t,\n        ch: e\n      }, {\n        line: t,\n        ch: r\n      }, d)).isForLineSentinel = !0;\n    }, a.prototype.makeOrderedListElement_ = function (t) {\n      return r.elt(\"div\", t + \".\", {\n        class: \"firepad-list-left\"\n      });\n    }, a.prototype.makeUnorderedListElement_ = function () {\n      return r.elt(\"div\", \"•\", {\n        class: \"firepad-list-left\"\n      });\n    }, a.prototype.toggleTodo = function (t) {\n      var e,\n          r = i.LIST_TYPE,\n          n = this.getCurrentLineAttributes_();\n      r in n && (\"t\" === n[r] || \"tc\" === n[r]) ? \"t\" === n[r] ? e = \"tc\" : \"tc\" === n[r] && (e = !!t && \"t\") : e = \"t\", this.setLineAttribute(r, e);\n    }, a.prototype.makeTodoListElement_ = function (t, e) {\n      var n = {\n        type: \"checkbox\",\n        class: \"firepad-todo-left\"\n      };\n      t && (n.checked = !0);\n      var i = r.elt(\"input\", !1, n),\n          o = this;\n      return r.on(i, \"click\", r.stopEventAnd(function (t) {\n        o.codeMirror.setCursor({\n          line: e(),\n          ch: 1\n        }), o.toggleTodo(!0);\n      })), i;\n    }, a.prototype.lineIsListItemOrIndented_ = function (t) {\n      var e = this.getLineAttributes_(t);\n      return !1 !== (e[i.LIST_TYPE] || !1) || 0 !== (e[i.LINE_INDENT] || 0);\n    }, a.prototype.onCursorActivity_ = function () {\n      var t = this;\n      setTimeout(function () {\n        t.updateCurrentAttributes_();\n      }, 1);\n    }, a.prototype.getCurrentAttributes_ = function () {\n      return this.currentAttributes_ || this.updateCurrentAttributes_(), this.currentAttributes_;\n    }, a.prototype.updateCurrentAttributes_ = function () {\n      var t = this.codeMirror,\n          e = t.indexFromPos(t.getCursor(\"anchor\")),\n          r = t.indexFromPos(t.getCursor(\"head\")),\n          o = r;\n\n      if (e > r) {\n        for (; o < this.end();) {\n          var s = this.getRange(o, o + 1);\n          if (\"\\n\" !== s && s !== h) break;\n          o++;\n        }\n\n        o < this.end() && o++;\n      } else for (; o > 0 && (\"\\n\" === (s = this.getRange(o - 1, o)) || s === h);) {\n        o--;\n      }\n\n      var a = this.annotationList_.getAnnotatedSpansForPos(o);\n      this.currentAttributes_ = {};\n      var c = {};\n\n      for (var u in a.length > 0 && !(i.LINE_SENTINEL in a[0].annotation.attributes) ? c = a[0].annotation.attributes : a.length > 1 && (n.utils.assert(!(i.LINE_SENTINEL in a[1].annotation.attributes), \"Cursor can't be between two line sentinel characters.\"), c = a[1].annotation.attributes), c) {\n        \"l\" !== u && \"lt\" !== u && \"li\" !== u && 0 !== u.indexOf(i.ENTITY_SENTINEL) && (this.currentAttributes_[u] = c[u]);\n      }\n    }, a.prototype.getCurrentLineAttributes_ = function () {\n      var t = this.codeMirror,\n          e = t.getCursor(\"anchor\"),\n          r = t.getCursor(\"head\"),\n          n = r.line;\n      return 0 === r.ch && e.line < r.line && n--, this.getLineAttributes_(n);\n    }, a.prototype.getLineAttributes_ = function (t) {\n      var r = {},\n          i = this.codeMirror.getLine(t);\n\n      if (i.length > 0 && i[0] === h) {\n        var o = this.codeMirror.indexFromPos({\n          line: t,\n          ch: 0\n        }),\n            s = this.annotationList_.getAnnotatedSpansForSpan(new e(o, 1));\n\n        for (var a in n.utils.assert(1 === s.length), s[0].annotation.attributes) {\n          r[a] = s[0].annotation.attributes[a];\n        }\n      }\n\n      return r;\n    }, a.prototype.clearAnnotations_ = function () {\n      this.annotationList_.updateSpan(new e(0, this.end()), function (t, e) {\n        return new d({});\n      });\n    }, a.prototype.newline = function () {\n      var t = this.codeMirror,\n          e = this;\n\n      if (this.emptySelection_()) {\n        var r = t.getCursor(\"head\").line,\n            n = this.getLineAttributes_(r),\n            o = n[i.LIST_TYPE];\n        o && 1 === t.getLine(r).length ? this.updateLineAttributes(r, r, function (t) {\n          delete t[i.LIST_TYPE], delete t[i.LINE_INDENT];\n        }) : (t.replaceSelection(\"\\n\", \"end\", \"+input\"), this.updateLineAttributes(r + 1, r + 1, function (t) {\n          for (var s in n) {\n            t[s] = n[s];\n          }\n\n          \"tc\" === o && (t[i.LIST_TYPE] = \"t\"), e.trigger(\"newLine\", {\n            line: r + 1,\n            attr: t\n          });\n        }));\n      } else t.replaceSelection(\"\\n\", \"end\", \"+input\");\n    }, a.prototype.deleteLeft = function () {\n      var t = this.codeMirror,\n          e = t.getCursor(\"head\"),\n          r = this.getLineAttributes_(e.line),\n          n = r[i.LIST_TYPE],\n          o = r[i.LINE_INDENT],\n          s = this.emptySelection_() && 1 === e.ch;\n      s && n ? this.updateLineAttributes(e.line, e.line, function (t) {\n        delete t[i.LIST_TYPE], delete t[i.LINE_INDENT];\n      }) : s && o && o > 0 ? this.unindent() : t.deleteH(-1, \"char\");\n    }, a.prototype.deleteRight = function () {\n      var t = this.codeMirror,\n          e = t.getCursor(\"head\"),\n          r = t.getLine(e.line),\n          n = this.areLineSentinelCharacters_(r),\n          i = e.line + 1 < t.lineCount() ? t.getLine(e.line + 1) : \"\";\n      this.emptySelection_() && n && i[0] === h ? (t.replaceRange(\"\", {\n        line: e.line,\n        ch: 0\n      }, {\n        line: e.line + 1,\n        ch: 0\n      }, \"+input\"), t.setCursor({\n        line: e.line,\n        ch: 0\n      })) : t.deleteH(1, \"char\");\n    }, a.prototype.indent = function () {\n      this.updateLineAttributesForSelection(function (t) {\n        var e = t[i.LINE_INDENT],\n            r = t[i.LIST_TYPE];\n        e ? t[i.LINE_INDENT]++ : t[i.LINE_INDENT] = r ? 2 : 1;\n      });\n    }, a.prototype.unindent = function () {\n      this.updateLineAttributesForSelection(function (t) {\n        var e = t[i.LINE_INDENT];\n        e && e > 1 ? t[i.LINE_INDENT] = e - 1 : (delete t[i.LIST_TYPE], delete t[i.LINE_INDENT]);\n      });\n    }, a.prototype.getText = function () {\n      return this.codeMirror.getValue().replace(new RegExp(h, \"g\"), \"\");\n    }, a.prototype.areLineSentinelCharacters_ = function (t) {\n      for (var e = 0; e < t.length; e++) {\n        if (t[e] !== h) return !1;\n      }\n\n      return !0;\n    }, d.prototype.equals = function (t) {\n      if (!(t instanceof d)) return !1;\n      var e;\n\n      for (e in this.attributes) {\n        if (t.attributes[e] !== this.attributes[e]) return !1;\n      }\n\n      for (e in t.attributes) {\n        if (t.attributes[e] !== this.attributes[e]) return !1;\n      }\n\n      return !0;\n    }, a;\n  }(), (n = n || {}).RichTextCodeMirrorAdapter = function () {\n    \"use strict\";\n\n    var t = n.TextOperation,\n        e = n.WrappedOperation,\n        r = n.Cursor;\n\n    function i(t) {\n      this.rtcm = t, this.cm = t.codeMirror, h(this, \"onChange\"), h(this, \"onAttributesChange\"), h(this, \"onCursorActivity\"), h(this, \"onFocus\"), h(this, \"onBlur\"), this.rtcm.on(\"change\", this.onChange), this.rtcm.on(\"attributesChange\", this.onAttributesChange), this.cm.on(\"cursorActivity\", this.onCursorActivity), this.cm.on(\"focus\", this.onFocus), this.cm.on(\"blur\", this.onBlur);\n    }\n\n    function o(t, e) {\n      return t.line < e.line ? -1 : t.line > e.line ? 1 : t.ch < e.ch ? -1 : t.ch > e.ch ? 1 : 0;\n    }\n\n    function s(t) {\n      var e = t.lineCount() - 1;\n      return t.indexFromPos({\n        line: e,\n        ch: t.getLine(e).length\n      });\n    }\n\n    function a(t, e) {\n      if (!t) throw new Error(e || \"assertion error\");\n    }\n\n    function h(t, e) {\n      var r = t[e];\n\n      t[e] = function () {\n        r.apply(t, arguments);\n      };\n    }\n\n    function c(t) {\n      for (var e in t) {\n        return !1;\n      }\n\n      return !0;\n    }\n\n    function u(t, e) {\n      if (\"string\" != typeof t) throw new TypeError(\"Expected a string\");\n      3 === (t = t.replace(/^#/, \"\")).length && (t = t[0] + t[0] + t[1] + t[1] + t[2] + t[2]);\n      var r,\n          n = parseInt(t, 16),\n          i = [n >> 16, n >> 8 & 255, 255 & n],\n          o = \"rgb\";\n      return null !== (r = e) && void 0 !== r && (o = \"rgba\", i.push(e)), o + \"(\" + i.join(\",\") + \")\";\n    }\n\n    return i.prototype.detach = function () {\n      this.rtcm.off(\"change\", this.onChange), this.rtcm.off(\"attributesChange\", this.onAttributesChange), this.cm.off(\"cursorActivity\", this.onCursorActivity), this.cm.off(\"focus\", this.onFocus), this.cm.off(\"blur\", this.onBlur);\n    }, i.operationFromCodeMirrorChanges = function (e, r) {\n      for (var n = s(r), i = new t().retain(n), o = new t().retain(n), a = e.length - 1; a >= 0; a--) {\n        var h = e[a],\n            c = h.start,\n            u = n - c - h.text.length;\n        i = new t().retain(c).delete(h.removed.length).insert(h.text, h.attributes).retain(u).compose(i), o = o.compose(new t().retain(c).delete(h.text.length).insert(h.removed, h.removedAttributes).retain(u)), n += h.removed.length - h.text.length;\n      }\n\n      return [i, o];\n    }, i.operationFromAttributesChanges = function (e, r) {\n      for (var n = s(r), i = new t(), o = new t(), h = 0, c = 0; c < e.length; c++) {\n        var u = e[c],\n            l = u.start - h;\n        a(l >= 0), i.retain(l), o.retain(l);\n        var p = u.end - u.start;\n        i.retain(p, u.attributes), o.retain(p, u.attributesInverse), h = u.start + p;\n      }\n\n      return i.retain(n - h), o.retain(n - h), [i, o];\n    }, i.prototype.registerCallbacks = function (t) {\n      this.callbacks = t;\n    }, i.prototype.onChange = function (t, e) {\n      if (\"RTCMADAPTER\" !== e[0].origin) {\n        var r = i.operationFromCodeMirrorChanges(e, this.cm);\n        this.trigger(\"change\", r[0], r[1]);\n      }\n    }, i.prototype.onAttributesChange = function (t, e) {\n      if (\"RTCMADAPTER\" !== e[0].origin) {\n        var r = i.operationFromAttributesChanges(e, this.cm);\n        this.trigger(\"change\", r[0], r[1]);\n      }\n    }, i.prototype.onCursorActivity = function () {\n      var t = this;\n      setTimeout(function () {\n        t.trigger(\"cursorActivity\");\n      }, 1);\n    }, i.prototype.onFocus = function () {\n      this.trigger(\"focus\");\n    }, i.prototype.onBlur = function () {\n      this.cm.somethingSelected() || this.trigger(\"blur\");\n    }, i.prototype.getValue = function () {\n      return this.cm.getValue();\n    }, i.prototype.getCursor = function () {\n      var t,\n          e = this.cm,\n          n = e.getCursor(),\n          i = e.indexFromPos(n);\n\n      if (e.somethingSelected()) {\n        var s = e.getCursor(!0),\n            a = 0 === o(n, s) ? e.getCursor(!1) : s;\n        t = e.indexFromPos(a);\n      } else t = i;\n\n      return new r(i, t);\n    }, i.prototype.setCursor = function (t) {\n      this.cm.setSelection(this.cm.posFromIndex(t.position), this.cm.posFromIndex(t.selectionEnd));\n    }, i.prototype.addStyleRule = function (t) {\n      if (\"undefined\" != typeof document && null !== document) {\n        if (!this.addedStyleRules) {\n          this.addedStyleRules = {};\n          var e = document.createElement(\"style\");\n          document.documentElement.getElementsByTagName(\"head\")[0].appendChild(e), this.addedStyleSheet = e.sheet;\n        }\n\n        if (!this.addedStyleRules[t]) return this.addedStyleRules[t] = !0, this.addedStyleSheet.insertRule(t, 0);\n      }\n    }, i.prototype.setOtherCursor = function (t, e, r) {\n      var n = this.cm.posFromIndex(t.position);\n\n      if (\"string\" == typeof e && e.match(/^#[a-fA-F0-9]{3,6}$/)) {\n        var i = this.rtcm.end();\n\n        if (\"object\" == typeof t && \"number\" == typeof t.position && \"number\" == typeof t.selectionEnd && !(t.position < 0 || t.position > i || t.selectionEnd < 0 || t.selectionEnd > i)) {\n          if (t.position === t.selectionEnd) {\n            var o = this.cm.cursorCoords(n),\n                s = document.createElement(\"span\");\n            return s.className = \"other-client\", s.style.borderLeftWidth = \"2px\", s.style.borderLeftStyle = \"solid\", s.style.borderLeftColor = e, s.style.marginLeft = s.style.marginRight = \"-1px\", s.style.height = .9 * (o.bottom - o.top) + \"px\", s.setAttribute(\"data-clientid\", r), s.style.zIndex = 0, this.cm.setBookmark(n, {\n              widget: s,\n              insertLeft: !0\n            });\n          }\n\n          var a,\n              h,\n              c = \"selection-\" + e.replace(\"#\", \"\"),\n              l = \".\" + c + \" { background: \" + u(e) + \";\\n background: \" + u(e, .4) + \";}\";\n          return this.addStyleRule(l), t.selectionEnd > t.position ? (a = n, h = this.cm.posFromIndex(t.selectionEnd)) : (a = this.cm.posFromIndex(t.selectionEnd), h = n), this.cm.markText(a, h, {\n            className: c\n          });\n        }\n      }\n    }, i.prototype.trigger = function (t) {\n      var e = Array.prototype.slice.call(arguments, 1),\n          r = this.callbacks && this.callbacks[t];\n      r && r.apply(this, e);\n    }, i.prototype.applyOperation = function (t) {\n      t.ops.length > 10 && this.rtcm.codeMirror.getWrapperElement().setAttribute(\"style\", \"display: none\");\n\n      for (var e = t.ops, r = 0, n = 0, i = e.length; n < i; n++) {\n        var o = e[n];\n        o.isRetain() ? (c(o.attributes) || this.rtcm.updateTextAttributes(r, r + o.chars, function (t) {\n          for (var e in o.attributes) {\n            !1 === o.attributes[e] ? delete t[e] : t[e] = o.attributes[e];\n          }\n        }, \"RTCMADAPTER\", !0), r += o.chars) : o.isInsert() ? (this.rtcm.insertText(r, o.text, o.attributes, \"RTCMADAPTER\"), r += o.text.length) : o.isDelete() && this.rtcm.removeText(r, r + o.chars, \"RTCMADAPTER\");\n      }\n\n      t.ops.length > 10 && (this.rtcm.codeMirror.getWrapperElement().setAttribute(\"style\", \"\"), this.rtcm.codeMirror.refresh());\n    }, i.prototype.registerUndo = function (t) {\n      this.cm.undo = t;\n    }, i.prototype.registerRedo = function (t) {\n      this.cm.redo = t;\n    }, i.prototype.invertOperation = function (r) {\n      for (var n, i, o = 0, s = this.rtcm.codeMirror, a = new t(), h = 0; h < r.wrapped.ops.length; h++) {\n        var u = r.wrapped.ops[h];\n        if (u.isRetain()) {\n          if (c(u.attributes)) a.retain(u.chars), o += u.chars;else for (n = this.rtcm.getAttributeSpans(o, o + u.chars), i = 0; i < n.length; i++) {\n            var l = {};\n\n            for (var p in u.attributes) {\n              var d = u.attributes[p],\n                  f = n[i].attributes[p];\n              !1 === d ? f && (l[p] = f) : d !== f && (l[p] = f || !1);\n            }\n\n            a.retain(n[i].length, l), o += n[i].length;\n          }\n        } else if (u.isInsert()) a.delete(u.text.length);else if (u.isDelete()) {\n          var g = s.getRange(s.posFromIndex(o), s.posFromIndex(o + u.chars));\n          n = this.rtcm.getAttributeSpans(o, o + u.chars);\n          var m = 0;\n\n          for (i = 0; i < n.length; i++) {\n            a.insert(g.substr(m, n[i].length), n[i].attributes), m += n[i].length;\n          }\n\n          o += u.chars;\n        }\n      }\n\n      return new e(a, r.meta.invert());\n    }, i;\n  }(), (n = n || {}).Formatting = function () {\n    var t = n.AttributeConstants;\n\n    function e(t) {\n      if (!(this instanceof e)) return new e(t);\n      this.attributes = t || {};\n    }\n\n    return e.prototype.cloneWithNewAttribute_ = function (t, r) {\n      var n = {};\n\n      for (var i in this.attributes) {\n        n[i] = this.attributes[i];\n      }\n\n      return !1 === r ? delete n[t] : n[t] = r, new e(n);\n    }, e.prototype.bold = function (e) {\n      return this.cloneWithNewAttribute_(t.BOLD, e);\n    }, e.prototype.italic = function (e) {\n      return this.cloneWithNewAttribute_(t.ITALIC, e);\n    }, e.prototype.underline = function (e) {\n      return this.cloneWithNewAttribute_(t.UNDERLINE, e);\n    }, e.prototype.strike = function (e) {\n      return this.cloneWithNewAttribute_(t.STRIKE, e);\n    }, e.prototype.font = function (e) {\n      return this.cloneWithNewAttribute_(t.FONT, e);\n    }, e.prototype.fontSize = function (e) {\n      return this.cloneWithNewAttribute_(t.FONT_SIZE, e);\n    }, e.prototype.color = function (e) {\n      return this.cloneWithNewAttribute_(t.COLOR, e);\n    }, e.prototype.backgroundColor = function (e) {\n      return this.cloneWithNewAttribute_(t.BACKGROUND_COLOR, e);\n    }, e;\n  }(), (n = n || {}).Text = function () {\n    return function t(e, r) {\n      if (!(this instanceof t)) return new t(e, r);\n      this.text = e, this.formatting = r || n.Formatting();\n    };\n  }(), (n = n || {}).LineFormatting = function () {\n    var t = n.AttributeConstants;\n\n    function e(r) {\n      if (!(this instanceof e)) return new e(r);\n      this.attributes = r || {}, this.attributes[t.LINE_SENTINEL] = !0;\n    }\n\n    return e.LIST_TYPE = {\n      NONE: !1,\n      ORDERED: \"o\",\n      UNORDERED: \"u\",\n      TODO: \"t\",\n      TODOCHECKED: \"tc\"\n    }, e.prototype.cloneWithNewAttribute_ = function (t, r) {\n      var n = {};\n\n      for (var i in this.attributes) {\n        n[i] = this.attributes[i];\n      }\n\n      return !1 === r ? delete n[t] : n[t] = r, new e(n);\n    }, e.prototype.indent = function (e) {\n      return this.cloneWithNewAttribute_(t.LINE_INDENT, e);\n    }, e.prototype.align = function (e) {\n      return this.cloneWithNewAttribute_(t.LINE_ALIGN, e);\n    }, e.prototype.listItem = function (e) {\n      return n.utils.assert(!1 === e || \"u\" === e || \"o\" === e || \"t\" === e || \"tc\" === e), this.cloneWithNewAttribute_(t.LIST_TYPE, e);\n    }, e.prototype.getIndent = function () {\n      return this.attributes[t.LINE_INDENT] || 0;\n    }, e.prototype.getAlign = function () {\n      return this.attributes[t.LINE_ALIGN] || 0;\n    }, e.prototype.getListItem = function () {\n      return this.attributes[t.LIST_TYPE] || !1;\n    }, e;\n  }(), (n = n || {}).Line = function () {\n    return function t(e, r) {\n      if (!(this instanceof t)) return new t(e, r);\n      \"[object Array]\" !== Object.prototype.toString.call(e) && (e = void 0 === e ? [] : [e]), this.textPieces = e, this.formatting = r || n.LineFormatting();\n    };\n  }(), (n = n || {}).ParseHtml = function () {\n    var t,\n        e = n.LineFormatting.LIST_TYPE;\n\n    function r(t, r, i) {\n      this.listType = t || e.UNORDERED, this.lineFormatting = r || n.LineFormatting(), this.textFormatting = i || n.Formatting();\n    }\n\n    function i() {\n      this.lines = [], this.currentLine = [], this.currentLineListItemType = null;\n    }\n\n    r.prototype.withTextFormatting = function (t) {\n      return new r(this.listType, this.lineFormatting, t);\n    }, r.prototype.withLineFormatting = function (t) {\n      return new r(this.listType, t, this.textFormatting);\n    }, r.prototype.withListType = function (t) {\n      return new r(t, this.lineFormatting, this.textFormatting);\n    }, r.prototype.withIncreasedIndent = function () {\n      var t = this.lineFormatting.indent(this.lineFormatting.getIndent() + 1);\n      return new r(this.listType, t, this.textFormatting);\n    }, r.prototype.withAlign = function (t) {\n      var e = this.lineFormatting.align(t);\n      return new r(this.listType, e, this.textFormatting);\n    }, i.prototype.newlineIfNonEmpty = function (t) {\n      this.cleanLine_(), this.currentLine.length > 0 && this.newline(t);\n    }, i.prototype.newlineIfNonEmptyOrListItem = function (t) {\n      this.cleanLine_(), (this.currentLine.length > 0 || null !== this.currentLineListItemType) && this.newline(t);\n    }, i.prototype.newline = function (t) {\n      this.cleanLine_();\n      var e = t.lineFormatting;\n      null !== this.currentLineListItemType && (e = e.listItem(this.currentLineListItemType), this.currentLineListItemType = null), this.lines.push(n.Line(this.currentLine, e)), this.currentLine = [];\n    }, i.prototype.makeListItem = function (t) {\n      this.currentLineListItemType = t;\n    }, i.prototype.cleanLine_ = function () {\n      if (this.currentLine.length > 0) {\n        var t = this.currentLine.length - 1;\n        this.currentLine[0].text = this.currentLine[0].text.replace(/^ +/, \"\"), this.currentLine[t].text = this.currentLine[t].text.replace(/ +$/g, \"\");\n\n        for (var e = 0; e < this.currentLine.length; e++) {\n          this.currentLine[e].text = this.currentLine[e].text.replace(/\\u00a0/g, \" \");\n        }\n      }\n\n      1 === this.currentLine.length && \"\" === this.currentLine[0].text && (this.currentLine = []);\n    };\n    var o = o || {\n      ELEMENT_NODE: 1,\n      TEXT_NODE: 3\n    };\n\n    function s(r, i, s) {\n      if (r.nodeType === o.ELEMENT_NODE) {\n        var h = t.fromElement(r);\n        if (h) return void s.currentLine.push(new n.Text(n.sentinelConstants.ENTITY_SENTINEL_CHARACTER, new n.Formatting(h.toAttributes())));\n      }\n\n      switch (r.nodeType) {\n        case o.TEXT_NODE:\n          var c = r.nodeValue.replace(/[ \\n\\t]+/g, \" \");\n          s.currentLine.push(n.Text(c, i.textFormatting));\n          break;\n\n        case o.ELEMENT_NODE:\n          switch (i = function (t, e) {\n            for (var r = t.textFormatting, i = t.lineFormatting, o = e.split(\";\"), s = 0; s < o.length; s++) {\n              var a = o[s].split(\":\");\n\n              if (2 === a.length) {\n                var h = n.utils.trim(a[0]).toLowerCase(),\n                    c = n.utils.trim(a[1]).toLowerCase();\n\n                switch (h) {\n                  case \"text-decoration\":\n                    var u = c.indexOf(\"underline\") >= 0,\n                        l = c.indexOf(\"line-through\") >= 0;\n                    r = r.underline(u).strike(l);\n                    break;\n\n                  case \"font-weight\":\n                    var p = \"bold\" === c || parseInt(c) >= 600;\n                    r = r.bold(p);\n                    break;\n\n                  case \"font-style\":\n                    var d = \"italic\" === c || \"oblique\" === c;\n                    r = r.italic(d);\n                    break;\n\n                  case \"color\":\n                    r = r.color(c);\n                    break;\n\n                  case \"background-color\":\n                    r = r.backgroundColor(c);\n                    break;\n\n                  case \"text-align\":\n                    i = i.align(c);\n                    break;\n\n                  case \"font-size\":\n                    var f = null;\n                    n.utils.stringEndsWith(c, [\"px\", \"pt\", \"%\", \"em\", \"xx-small\", \"x-small\", \"small\", \"medium\", \"large\", \"x-large\", \"xx-large\", \"smaller\", \"larger\"]) ? f = c : parseInt(c) && (f = parseInt(c) + \"px\"), f && (r = r.fontSize(f));\n                    break;\n\n                  case \"font-family\":\n                    var g = n.utils.trim(c.split(\",\")[0]);\n                    g = (g = g.replace(/['\"]/g, \"\")).replace(/\\w\\S*/g, function (t) {\n                      return t.charAt(0).toUpperCase() + t.substr(1).toLowerCase();\n                    }), r = r.font(g);\n                }\n              }\n            }\n\n            return t.withLineFormatting(i).withTextFormatting(r);\n          }(i, r.getAttribute(\"style\") || \"\"), r.nodeName.toLowerCase()) {\n            case \"div\":\n            case \"h1\":\n            case \"h2\":\n            case \"h3\":\n            case \"p\":\n              s.newlineIfNonEmpty(i), a(r, i, s), s.newlineIfNonEmpty(i);\n              break;\n\n            case \"center\":\n              i = i.withAlign(\"center\"), s.newlineIfNonEmpty(i), a(r, i.withAlign(\"center\"), s), s.newlineIfNonEmpty(i);\n              break;\n\n            case \"b\":\n            case \"strong\":\n              a(r, i.withTextFormatting(i.textFormatting.bold(!0)), s);\n              break;\n\n            case \"u\":\n              a(r, i.withTextFormatting(i.textFormatting.underline(!0)), s);\n              break;\n\n            case \"i\":\n            case \"em\":\n              a(r, i.withTextFormatting(i.textFormatting.italic(!0)), s);\n              break;\n\n            case \"s\":\n              a(r, i.withTextFormatting(i.textFormatting.strike(!0)), s);\n              break;\n\n            case \"font\":\n              var u = r.getAttribute(\"face\"),\n                  l = r.getAttribute(\"color\"),\n                  p = parseInt(r.getAttribute(\"size\"));\n              u && (i = i.withTextFormatting(i.textFormatting.font(u))), l && (i = i.withTextFormatting(i.textFormatting.color(l))), p && (i = i.withTextFormatting(i.textFormatting.fontSize(p))), a(r, i, s);\n              break;\n\n            case \"br\":\n              s.newline(i);\n              break;\n\n            case \"ul\":\n              s.newlineIfNonEmptyOrListItem(i);\n              var d = \"firepad-todo\" === r.getAttribute(\"class\") ? e.TODO : e.UNORDERED;\n              a(r, i.withListType(d).withIncreasedIndent(), s), s.newlineIfNonEmpty(i);\n              break;\n\n            case \"ol\":\n              s.newlineIfNonEmptyOrListItem(i), a(r, i.withListType(e.ORDERED).withIncreasedIndent(), s), s.newlineIfNonEmpty(i);\n              break;\n\n            case \"li\":\n              !function (t, r, n) {\n                n.newlineIfNonEmptyOrListItem(r);\n                var i = \"firepad-checked\" === t.getAttribute(\"class\") ? e.TODOCHECKED : r.listType;\n                n.makeListItem(i);\n                var o = n.currentLine;\n                a(t, r, n), (o === n.currentLine || n.currentLine.length > 0) && n.newline(r);\n              }(r, i, s);\n              break;\n\n            case \"style\":\n              break;\n\n            default:\n              a(r, i, s);\n          }\n\n      }\n    }\n\n    function a(t, e, r) {\n      if (t.hasChildNodes()) for (var n = 0; n < t.childNodes.length; n++) {\n        s(t.childNodes[n], e, r);\n      }\n    }\n\n    return function (e, o) {\n      var a = (n.document || document).createElement(\"div\");\n      a.innerHTML = e, t = o;\n      var h = new i();\n      return s(a, new r(), h), h.lines;\n    };\n  }(), (n = n || {}).SerializeHtml = function () {\n    var t = n.utils,\n        e = n.AttributeConstants,\n        r = n.LineFormatting.LIST_TYPE,\n        i = '<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: \"\\\\2610\"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: \"\\\\2611\"; padding-right: 5px; }</style>\\n';\n\n    function o(t) {\n      return t === r.ORDERED ? \"<ol>\" : t === r.UNORDERED ? \"<ul>\" : '<ul class=\"firepad-todo\">';\n    }\n\n    function s(t) {\n      return t === r.ORDERED ? \"</ol>\" : \"</ul>\";\n    }\n\n    function a(t) {\n      return t.replace(/&/g, \"&amp;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\\u00a0/g, \"&nbsp;\");\n    }\n\n    return function (h, c) {\n      for (var u, l, p = \"\", d = !0, f = [], g = !1, m = !0, y = !0, v = 0, _ = h.ops[v], b = !1; _;) {\n        t.assert(_.isInsert());\n        var E = _.attributes;\n\n        if (d) {\n          d = !1;\n          var C = 0,\n              x = null,\n              w = \"left\";\n          e.LINE_SENTINEL in E && (C = E[e.LINE_INDENT] || 0, x = E[e.LIST_TYPE] || null, w = E[e.LINE_ALIGN] || \"left\"), x && (C = C || 1), g ? (p += \"</li>\", g = !1) : m || (y && (p += \"<br/>\"), p += \"</div>\"), m = !1, t.assert(C >= 0, \"Indent must not be negative.\");\n\n          for (; f.length > C || C === f.length && null !== x && (u = x, l = f[f.length - 1], !(u === l || u === r.TODO && l === r.TODOCHECKED || u === r.TODOCHECKED && l === r.TODO));) {\n            p += s(f.pop());\n          }\n\n          for (; f.length < C;) {\n            var A = x || r.UNORDERED;\n            b = x == r.TODO || x == r.TODOCHECKED || b, p += o(A), f.push(A);\n          }\n\n          var T = \"left\" !== w ? ' style=\"text-align:' + w + '\"' : \"\";\n\n          if (x) {\n            var L = \"\";\n\n            switch (x) {\n              case r.TODOCHECKED:\n                L = ' class=\"firepad-checked\"';\n                break;\n\n              case r.TODO:\n                L = ' class=\"firepad-unchecked\"';\n            }\n\n            p += \"<li\" + L + T + \">\", g = !0;\n          } else p += \"<div\" + T + \">\";\n\n          y = !0;\n        }\n\n        if (e.LINE_SENTINEL in E) _ = h.ops[++v];else if (e.ENTITY_SENTINEL in E) {\n          for (var I = 0; I < _.text.length; I++) {\n            var M = n.Entity.fromAttributes(E);\n            p += c.exportToElement(M).outerHTML;\n          }\n\n          _ = h.ops[++v];\n        } else {\n          var S = \"\",\n              N = \"\";\n\n          for (var k in E) {\n            var R,\n                O,\n                F = E[k];\n            k === e.BOLD || k === e.ITALIC || k === e.UNDERLINE || k === e.STRIKE ? (t.assert(!0 === F), R = O = k) : k === e.FONT_SIZE ? (R = 'span style=\"font-size: ' + F, R += \"string\" != typeof F || -1 === F.indexOf(\"px\", F.length - 2) ? 'px\"' : '\"', O = \"span\") : k === e.FONT ? (R = 'span style=\"font-family: ' + F + '\"', O = \"span\") : k === e.COLOR ? (R = 'span style=\"color: ' + F + '\"', O = \"span\") : k === e.BACKGROUND_COLOR ? (R = 'span style=\"background-color: ' + F + '\"', O = \"span\") : t.log(!1, \"Encountered unknown attribute while rendering html: \" + k), R && (S += \"<\" + R + \">\"), O && (N = \"</\" + O + \">\" + N);\n          }\n\n          var D = _.text,\n              P = D.indexOf(\"\\n\");\n          P >= 0 ? (d = !0, _ = P < D.length - 1 ? new n.TextOp(\"insert\", D.substr(P + 1), E) : h.ops[++v], D = D.substr(0, P)) : _ = h.ops[++v], (D = D.replace(/  +/g, function (t) {\n            return new Array(t.length + 1).join(\" \");\n          }).replace(/^ /, \" \").replace(/ $/, \" \")).length > 0 && (y = !1), p += S + a(D) + N;\n        }\n      }\n\n      for (g ? p += \"</li>\" : m || (y && (p += \"&nbsp;\"), p += \"</div>\"); f.length > 0;) {\n        p += s(f.pop());\n      }\n\n      return b && (p = i + p), p;\n    };\n  }(), (n = n || {}).textPiecesToInserts = function (t, e) {\n    var r = [];\n\n    function i(e, i) {\n      e instanceof n.Text && (i = e.formatting.attributes, e = e.text), r.push({\n        string: e,\n        attributes: i\n      }), t = \"\\n\" === e[e.length - 1];\n    }\n\n    function o(e, r) {\n      t && i(n.sentinelConstants.LINE_SENTINEL_CHARACTER, e.formatting.attributes);\n\n      for (var o = 0; o < e.textPieces.length; o++) {\n        i(e.textPieces[o]);\n      }\n\n      r && i(\"\\n\");\n    }\n\n    for (var s = 0; s < e.length; s++) {\n      e[s] instanceof n.Line ? o(e[s], s < e.length - 1) : i(e[s]);\n    }\n\n    return r;\n  }, (n = n || {}).Headless = function () {\n    var t = n.TextOperation,\n        e = n.FirebaseAdapter,\n        r = n.EntityManager,\n        i = n.ParseHtml;\n\n    function o(t) {\n      if (!(this instanceof o)) return new o(t);\n      var n, i;\n      \"string\" == typeof t ? (void 0 === window.firebase && \"object\" != typeof n ? (console.log(\"REQUIRING\"), n = require(\"firebase/app\"), require(\"firebase/database\")) : n = window.firebase, i = n.database().refFromURL(t)) : i = t, this.entityManager_ = new r(), this.firebaseAdapter_ = new e(i), this.ready_ = !1, this.zombie_ = !1;\n    }\n\n    return o.prototype.getDocument = function (t) {\n      var e = this;\n      if (e.ready_) return t(e.firebaseAdapter_.getDocument());\n      e.firebaseAdapter_.on(\"ready\", function () {\n        e.ready_ = !0, t(e.firebaseAdapter_.getDocument());\n      });\n    }, o.prototype.getText = function (t) {\n      if (this.zombie_) throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");\n      this.getDocument(function (e) {\n        var r = e.apply(\"\");\n\n        for (var i in n.sentinelConstants) {\n          r = r.replace(new RegExp(n.sentinelConstants[i], \"g\"), \"\");\n        }\n\n        t(r);\n      });\n    }, o.prototype.setText = function (e, r) {\n      if (this.zombie_) throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");\n      var n = t().insert(e);\n      this.sendOperationWithRetry(n, r);\n    }, o.prototype.initializeFakeDom = function (t) {\n      if (\"object\" == typeof document || \"object\" == typeof n.document) t();else {\n        var _e = require(\"jsdom\"),\n            _r = _e.JSDOM,\n            _r2 = new _r(\"<head></head><body></body>\"),\n            _i = _r2.window;\n\n        if (n.document) return _i.close(), t();\n        n.document = _i.document, t();\n      }\n    }, o.prototype.getHtml = function (t) {\n      var e = this;\n      if (this.zombie_) throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");\n      e.initializeFakeDom(function () {\n        e.getDocument(function (r) {\n          t(n.SerializeHtml(r, e.entityManager_));\n        });\n      });\n    }, o.prototype.setHtml = function (e, r) {\n      var o = this;\n      if (this.zombie_) throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");\n      o.initializeFakeDom(function () {\n        for (var s = i(e, o.entityManager_), a = n.textPiecesToInserts(!0, s), h = new t(), c = 0; c < a.length; c++) {\n          h.insert(a[c].string, a[c].attributes);\n        }\n\n        o.sendOperationWithRetry(h, r);\n      });\n    }, o.prototype.sendOperationWithRetry = function (t, e) {\n      var r = this;\n      r.getDocument(function (n) {\n        var i = t.clone().delete(n.targetLength);\n        r.firebaseAdapter_.sendOperation(i, function (n, i) {\n          i ? void 0 !== e && e(null, i) : r.sendOperationWithRetry(t, e);\n        });\n      });\n    }, o.prototype.dispose = function () {\n      this.zombie_ = !0, this.firebaseAdapter_.dispose();\n    }, o;\n  }(), (n = n || {}).Firepad = function (t) {\n    if (!n.RichTextCodeMirrorAdapter) throw new Error(\"Oops! It looks like you're trying to include lib/firepad.js directly.  This is actually one of many source files that make up firepad.  You want dist/firepad.js instead.\");\n    var e = n.RichTextCodeMirrorAdapter,\n        r = n.RichTextCodeMirror,\n        i = n.RichTextToolbar,\n        o = n.ACEAdapter,\n        s = n.MonacoAdapter,\n        a = n.FirebaseAdapter,\n        h = n.EditorClient,\n        c = n.EntityManager,\n        u = n.AttributeConstants,\n        l = n.utils,\n        p = (n.LineFormatting.LIST_TYPE, t.CodeMirror),\n        d = t.ace;\n    t.monaco;\n\n    function f(n, i, u) {\n      if (!(this instanceof f)) return new f(n, i, u);\n      if (!p && !d && !t.monaco) throw new Error(\"Couldn't find CodeMirror, ACE or Monaco.  Did you forget to include codemirror.js/ace.js or import monaco?\");\n\n      if (this.zombie_ = !1, p && i instanceof p) {\n        this.codeMirror_ = this.editor_ = i;\n        var m = this.codeMirror_.getValue();\n        if (\"\" !== m) throw new Error(\"Can't initialize Firepad with a CodeMirror instance that already contains text.\");\n      } else if (d && i && i.session instanceof d.EditSession) {\n        if (this.ace_ = this.editor_ = i, \"\" !== (m = this.ace_.getValue())) throw new Error(\"Can't initialize Firepad with an ACE instance that already contains text.\");\n      } else if (t.monaco && i && i instanceof t.monaco.constructor) {\n        if (t.monaco, this.monaco_ = this.editor_ = i, \"\" !== (m = this.monaco_.getValue())) throw new Error(\"Can't initialize Firepad with a Monaco instance that already contains text.\");\n      } else this.codeMirror_ = this.editor_ = new p(i);\n\n      var y;\n      y = this.codeMirror_ ? this.codeMirror_.getWrapperElement() : this.ace_ ? this.ace_.container : this.monaco_.getDomNode(), this.firepadWrapper_ = l.elt(\"div\", null, {\n        class: \"firepad\"\n      }), y.parentNode.replaceChild(this.firepadWrapper_, y), this.firepadWrapper_.appendChild(y), this.editor_.firepad = this, this.options_ = u || {}, this.getOption(\"richTextShortcuts\", !1) && (p.keyMap.richtext || this.initializeKeyMap_(), this.codeMirror_.setOption(\"keyMap\", \"richtext\"), this.firepadWrapper_.className += \" firepad-richtext\"), this.imageInsertionUI = this.getOption(\"imageInsertionUI\", !0), this.getOption(\"richTextToolbar\", !1) && (this.addToolbar_(), this.firepadWrapper_.className += \" firepad-richtext firepad-with-toolbar\"), this.addPoweredByLogo_(), this.codeMirror_ && this.codeMirror_.refresh();\n\n      var v = this.getOption(\"userId\", n.push().key),\n          _ = this.getOption(\"userColor\", function (t) {\n        for (var e = 1, r = 0; r < t.length; r++) {\n          e = 17 * (e + t.charCodeAt(r)) % 360;\n        }\n\n        return function (t, e, r) {\n          if (0 === e) return g(r, r, r);\n\n          var n = r < .5 ? r * (1 + e) : r + e - e * r,\n              i = 2 * r - n,\n              o = function o(t) {\n            return t < 0 && (t += 1), t > 1 && (t -= 1), 6 * t < 1 ? i + 6 * (n - i) * t : 2 * t < 1 ? n : 3 * t < 2 ? i + 6 * (n - i) * (2 / 3 - t) : i;\n          };\n\n          return g(o(t + 1 / 3), o(t), o(t - 1 / 3));\n        }(e / 360, 1, .75);\n      }(v));\n\n      this.entityManager_ = new c(), this.firebaseAdapter_ = new a(n, v, _), this.codeMirror_ ? (this.richTextCodeMirror_ = new r(this.codeMirror_, this.entityManager_, {\n        cssPrefix: \"firepad-\"\n      }), this.editorAdapter_ = new e(this.richTextCodeMirror_)) : this.ace_ ? this.editorAdapter_ = new o(this.ace_) : this.editorAdapter_ = new s(this.monaco_), this.client_ = new h(this.firebaseAdapter_, this.editorAdapter_);\n      var b = this;\n      this.firebaseAdapter_.on(\"cursor\", function () {\n        b.trigger.apply(b, [\"cursor\"].concat([].slice.call(arguments)));\n      }), this.codeMirror_ && this.richTextCodeMirror_.on(\"newLine\", function () {\n        b.trigger.apply(b, [\"newLine\"].concat([].slice.call(arguments)));\n      }), this.firebaseAdapter_.on(\"ready\", function () {\n        b.ready_ = !0, this.ace_ && this.editorAdapter_.grabDocumentState(), this.monaco_ && this.editorAdapter_.grabDocumentState();\n        var t = b.getOption(\"defaultText\", null);\n        t && b.isHistoryEmpty() && b.setText(t), b.trigger(\"ready\");\n      }), this.client_.on(\"synced\", function (t) {\n        b.trigger(\"synced\", t);\n      }), \"Microsoft Internet Explorer\" == navigator.appName && navigator.userAgent.match(/MSIE 8\\./) && (window.onload = function () {\n        var t = document.getElementsByTagName(\"head\")[0],\n            e = document.createElement(\"style\");\n        e.type = \"text/css\", e.styleSheet.cssText = \":before,:after{content:none !important;}\", t.appendChild(e), setTimeout(function () {\n          t.removeChild(e);\n        }, 0);\n      });\n    }\n\n    function g(t, e, r) {\n      function n(t) {\n        var e = Math.round(255 * t).toString(16);\n        return 1 === e.length ? \"0\" + e : e;\n      }\n\n      return \"#\" + n(t) + n(e) + n(r);\n    }\n\n    return l.makeEventEmitter(f), f.fromCodeMirror = f, f.fromACE = f, f.fromMonaco = f, f.prototype.dispose = function () {\n      this.zombie_ = !0, this.codeMirror_ ? editorWrapper = this.codeMirror_.getWrapperElement() : this.ace_ ? editorWrapper = this.ace_.container : editorWrapper = this.monaco_.getDomNode(), this.firepadWrapper_.removeChild(editorWrapper), this.firepadWrapper_.parentNode.replaceChild(editorWrapper, this.firepadWrapper_), this.editor_.firepad = null, this.codeMirror_ && \"richtext\" === this.codeMirror_.getOption(\"keyMap\") && this.codeMirror_.setOption(\"keyMap\", \"default\"), this.firebaseAdapter_.dispose(), this.editorAdapter_.detach(), this.richTextCodeMirror_ && this.richTextCodeMirror_.detach();\n    }, f.prototype.setUserId = function (t) {\n      this.firebaseAdapter_.setUserId(t);\n    }, f.prototype.setUserColor = function (t) {\n      this.firebaseAdapter_.setColor(t);\n    }, f.prototype.getText = function () {\n      return this.assertReady_(\"getText\"), this.codeMirror_ ? this.richTextCodeMirror_.getText() : this.ace_ ? this.ace_.getSession().getDocument().getValue() : this.monaco_.getModel().getValue();\n    }, f.prototype.setText = function (t) {\n      return this.assertReady_(\"setText\"), this.monaco_ ? this.monaco_.getModel().setValue(t) : this.ace_ ? this.ace_.getSession().getDocument().setValue(t) : (this.codeMirror_.getWrapperElement().style.display = \"none\", this.codeMirror_.setValue(\"\"), this.insertText(0, t), this.codeMirror_.getWrapperElement().style.display = \"\", this.codeMirror_.refresh(), void this.editorAdapter_.setCursor({\n        position: 0,\n        selectionEnd: 0\n      }));\n    }, f.prototype.insertTextAtCursor = function (t) {\n      this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()), t);\n    }, f.prototype.insertText = function (t, e) {\n      l.assert(!this.ace_, \"Not supported for ace yet.\"), l.assert(!this.monaco_, \"Not supported for monaco yet.\"), this.assertReady_(\"insertText\"), \"[object Array]\" !== Object.prototype.toString.call(e) && (e = [e]);\n      var r = this;\n      r.codeMirror_.operation(function () {\n        for (var i = 0 === t, o = n.textPiecesToInserts(i, e), s = 0; s < o.length; s++) {\n          var a = o[s].string,\n              h = o[s].attributes;\n          r.richTextCodeMirror_.insertText(t, a, h), t += a.length;\n        }\n      });\n    }, f.prototype.getOperationForSpan = function (t, e) {\n      for (var r = this.richTextCodeMirror_.getRange(t, e), i = this.richTextCodeMirror_.getAttributeSpans(t, e), o = 0, s = new n.TextOperation(), a = 0; a < i.length; a++) {\n        s.insert(r.substr(o, i[a].length), i[a].attributes), o += i[a].length;\n      }\n\n      return s;\n    }, f.prototype.getHtml = function () {\n      return this.getHtmlFromRange(null, null);\n    }, f.prototype.getHtmlFromSelection = function () {\n      var t = this.codeMirror_.getCursor(\"start\"),\n          e = this.codeMirror_.getCursor(\"end\"),\n          r = this.codeMirror_.indexFromPos(t),\n          n = this.codeMirror_.indexFromPos(e);\n      return this.getHtmlFromRange(r, n);\n    }, f.prototype.getHtmlFromRange = function (t, e) {\n      this.assertReady_(\"getHtmlFromRange\");\n      var r = null != t && null != e ? this.getOperationForSpan(t, e) : this.getOperationForSpan(0, this.codeMirror_.getValue().length);\n      return n.SerializeHtml(r, this.entityManager_);\n    }, f.prototype.insertHtml = function (t, e) {\n      var r = n.ParseHtml(e, this.entityManager_);\n      this.insertText(t, r);\n    }, f.prototype.insertHtmlAtCursor = function (t) {\n      this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()), t);\n    }, f.prototype.setHtml = function (t) {\n      var e = n.ParseHtml(t, this.entityManager_);\n      this.setText(e);\n    }, f.prototype.isHistoryEmpty = function () {\n      return this.assertReady_(\"isHistoryEmpty\"), this.firebaseAdapter_.isHistoryEmpty();\n    }, f.prototype.bold = function () {\n      this.richTextCodeMirror_.toggleAttribute(u.BOLD), this.codeMirror_.focus();\n    }, f.prototype.italic = function () {\n      this.richTextCodeMirror_.toggleAttribute(u.ITALIC), this.codeMirror_.focus();\n    }, f.prototype.underline = function () {\n      this.richTextCodeMirror_.toggleAttribute(u.UNDERLINE), this.codeMirror_.focus();\n    }, f.prototype.strike = function () {\n      this.richTextCodeMirror_.toggleAttribute(u.STRIKE), this.codeMirror_.focus();\n    }, f.prototype.fontSize = function (t) {\n      this.richTextCodeMirror_.setAttribute(u.FONT_SIZE, t), this.codeMirror_.focus();\n    }, f.prototype.font = function (t) {\n      this.richTextCodeMirror_.setAttribute(u.FONT, t), this.codeMirror_.focus();\n    }, f.prototype.color = function (t) {\n      this.richTextCodeMirror_.setAttribute(u.COLOR, t), this.codeMirror_.focus();\n    }, f.prototype.highlight = function () {\n      this.richTextCodeMirror_.toggleAttribute(u.BACKGROUND_COLOR, \"rgba(255,255,0,.65)\"), this.codeMirror_.focus();\n    }, f.prototype.align = function (t) {\n      if (\"left\" !== t && \"center\" !== t && \"right\" !== t) throw new Error('align() must be passed \"left\", \"center\", or \"right\".');\n      this.richTextCodeMirror_.setLineAttribute(u.LINE_ALIGN, t), this.codeMirror_.focus();\n    }, f.prototype.orderedList = function () {\n      this.richTextCodeMirror_.toggleLineAttribute(u.LIST_TYPE, \"o\"), this.codeMirror_.focus();\n    }, f.prototype.unorderedList = function () {\n      this.richTextCodeMirror_.toggleLineAttribute(u.LIST_TYPE, \"u\"), this.codeMirror_.focus();\n    }, f.prototype.todo = function () {\n      this.richTextCodeMirror_.toggleTodo(), this.codeMirror_.focus();\n    }, f.prototype.newline = function () {\n      this.richTextCodeMirror_.newline();\n    }, f.prototype.deleteLeft = function () {\n      this.richTextCodeMirror_.deleteLeft();\n    }, f.prototype.deleteRight = function () {\n      this.richTextCodeMirror_.deleteRight();\n    }, f.prototype.indent = function () {\n      this.richTextCodeMirror_.indent(), this.codeMirror_.focus();\n    }, f.prototype.unindent = function () {\n      this.richTextCodeMirror_.unindent(), this.codeMirror_.focus();\n    }, f.prototype.undo = function () {\n      this.codeMirror_.undo();\n    }, f.prototype.redo = function () {\n      this.codeMirror_.redo();\n    }, f.prototype.insertEntity = function (t, e, r) {\n      this.richTextCodeMirror_.insertEntityAtCursor(t, e, r);\n    }, f.prototype.insertEntityAt = function (t, e, r, n) {\n      this.richTextCodeMirror_.insertEntityAt(t, e, r, n);\n    }, f.prototype.registerEntity = function (t, e) {\n      this.entityManager_.register(t, e);\n    }, f.prototype.getOption = function (t, e) {\n      return t in this.options_ ? this.options_[t] : e;\n    }, f.prototype.assertReady_ = function (t) {\n      if (!this.ready_) throw new Error('You must wait for the \"ready\" event before calling ' + t + \".\");\n      if (this.zombie_) throw new Error(\"You can't use a Firepad after calling dispose()!  [called \" + t + \"]\");\n    }, f.prototype.makeImageDialog_ = function () {\n      this.makeDialog_(\"img\", \"Insert image url\");\n    }, f.prototype.makeDialog_ = function (t, e) {\n      var r = this,\n          n = l.elt(\"input\", null, {\n        class: \"firepad-dialog-input\",\n        id: t,\n        type: \"text\",\n        placeholder: e,\n        autofocus: \"autofocus\"\n      }),\n          i = l.elt(\"a\", \"Submit\", {\n        class: \"firepad-btn\",\n        id: \"submitbtn\"\n      });\n      l.on(i, \"click\", l.stopEventAnd(function () {\n        var e = document.getElementById(\"overlay\");\n        e.style.visibility = \"hidden\";\n        var n = document.getElementById(t).value;\n        null !== n && r.insertEntity(t, {\n          src: n\n        }), r.firepadWrapper_.removeChild(e);\n      }));\n      var o = l.elt(\"a\", \"Cancel\", {\n        class: \"firepad-btn\"\n      });\n      l.on(o, \"click\", l.stopEventAnd(function () {\n        var t = document.getElementById(\"overlay\");\n        t.style.visibility = \"hidden\", r.firepadWrapper_.removeChild(t);\n      }));\n      var s = l.elt(\"div\", [i, o], {\n        class: \"firepad-btn-group\"\n      }),\n          a = l.elt(\"div\", [n, s], {\n        class: \"firepad-dialog-div\"\n      }),\n          h = l.elt(\"div\", [a], {\n        class: \"firepad-dialog\",\n        id: \"overlay\"\n      });\n      this.firepadWrapper_.appendChild(h);\n    }, f.prototype.addToolbar_ = function () {\n      this.toolbar = new i(this.imageInsertionUI), this.toolbar.on(\"undo\", this.undo, this), this.toolbar.on(\"redo\", this.redo, this), this.toolbar.on(\"bold\", this.bold, this), this.toolbar.on(\"italic\", this.italic, this), this.toolbar.on(\"underline\", this.underline, this), this.toolbar.on(\"strike\", this.strike, this), this.toolbar.on(\"font-size\", this.fontSize, this), this.toolbar.on(\"font\", this.font, this), this.toolbar.on(\"color\", this.color, this), this.toolbar.on(\"left\", function () {\n        this.align(\"left\");\n      }, this), this.toolbar.on(\"center\", function () {\n        this.align(\"center\");\n      }, this), this.toolbar.on(\"right\", function () {\n        this.align(\"right\");\n      }, this), this.toolbar.on(\"ordered-list\", this.orderedList, this), this.toolbar.on(\"unordered-list\", this.unorderedList, this), this.toolbar.on(\"todo-list\", this.todo, this), this.toolbar.on(\"indent-increase\", this.indent, this), this.toolbar.on(\"indent-decrease\", this.unindent, this), this.toolbar.on(\"insert-image\", this.makeImageDialog_, this), this.firepadWrapper_.insertBefore(this.toolbar.element(), this.firepadWrapper_.firstChild);\n    }, f.prototype.addPoweredByLogo_ = function () {\n      var t = l.elt(\"a\", null, {\n        class: \"powered-by-firepad\"\n      });\n      t.setAttribute(\"href\", \"http://www.firepad.io/\"), t.setAttribute(\"target\", \"_blank\"), this.firepadWrapper_.appendChild(t);\n    }, f.prototype.initializeKeyMap_ = function () {\n      function t(t) {\n        return function (e) {\n          setTimeout(function () {\n            t.call(e.firepad);\n          }, 0);\n        };\n      }\n\n      p.keyMap.richtext = {\n        \"Ctrl-B\": t(this.bold),\n        \"Cmd-B\": t(this.bold),\n        \"Ctrl-I\": t(this.italic),\n        \"Cmd-I\": t(this.italic),\n        \"Ctrl-U\": t(this.underline),\n        \"Cmd-U\": t(this.underline),\n        \"Ctrl-H\": t(this.highlight),\n        \"Cmd-H\": t(this.highlight),\n        Enter: t(this.newline),\n        Delete: t(this.deleteRight),\n        Backspace: t(this.deleteLeft),\n        Tab: t(this.indent),\n        \"Shift-Tab\": t(this.unindent),\n        fallthrough: [\"default\"]\n      };\n    }, f;\n  }(this), n.Firepad.Formatting = n.Formatting, n.Firepad.Text = n.Text, n.Firepad.Entity = n.Entity, n.Firepad.LineFormatting = n.LineFormatting, n.Firepad.Line = n.Line, n.Firepad.TextOperation = n.TextOperation, n.Firepad.Headless = n.Headless, n.Firepad.RichTextCodeMirrorAdapter = n.RichTextCodeMirrorAdapter, n.Firepad.ACEAdapter = n.ACEAdapter, n.Firepad.MonacoAdapter = n.MonacoAdapter, n.Firepad;\n}, this);","map":{"version":3,"sources":["C:/Users/mohammed/Documents/collab-edit/my-app/node_modules/firepad/dist/firepad.min.js"],"names":["t","e","r","module","exports","define","amd","Firepad","Array","isArray","Symbol","iterator","Object","from","n","prototype","toString","call","slice","constructor","name","test","TypeError","length","enumerable","configurable","writable","defineProperty","key","utils","makeEventEmitter","allowedEvents_","on","validateEventType_","eventListeners_","push","callback","context","off","splice","trigger","apply","arguments","Error","elt","i","document","createElement","setTextContent","o","appendChild","s","setAttribute","innerHTML","createTextNode","addEventListener","attachEvent","removeEventListener","detachEvent","preventDefault","returnValue","stopPropagation","cancelBubble","stopEvent","stopEventAnd","trim","replace","stringEndsWith","indexOf","assert","log","console","Span","pos","end","TextOp","type","chars","text","attributes","isInsert","isDelete","isRetain","equals","attributesEqual","hasEmptyAttributes","TextOperation","ops","baseLength","targetLength","retain","insert","delete","isNoop","clone","map","join","toJSON","fromJSON","a","h","c","u","l","p","d","f","g","m","invert","compose","JSON","stringify","shouldBeComposedWith","shouldBeComposedWithInverted","transformAttributes","transform","AnnotationList","annotation","attachedObject_","attachedObject","node_","getAttachedObject","attachObject","head_","changeHandler_","next","insertAnnotatedSpan","wrapOperation_","removeSpan","updateSpan","getAffectedNodes_","start","succ","startPos","mergeNodesWithSameAnnotations_","pred","beforePred","predPos","beforeStart","forEach","getAnnotatedSpansForPos","getAnnotatedSpansForSpan","Math","max","min","count","spanLength","Cursor","position","selectionEnd","FirebaseAdapter","firebase","require","Firebase","ref_","ready_","firebaseCallbacks_","zombie_","document_","revision_","pendingReceivedRevisions_","setUserId","setColor","root","child","firebaseOn_","val","initializeUserData_","monitorCursors_","userId_","setTimeout","monitorHistory_","dispose","removeFirebaseCallbacks_","handleInitialRevisions_","userRef_","remove","onDisconnect","cancel","isHistoryEmpty","sendOperation","sent_","id","op","transaction","message","database","ServerValue","TIMESTAMP","sendCursor","set","cursor_","color_","getDocument","registerCallbacks","cursor","color","once","checkpointRevision_","monitorHistoryStartingAt_","startAt","handlePendingReceivedRevisions_","parseRevision_","operation","author","saveCheckpoint_","ref","eventType","firebaseOff_","RichTextToolbar","imageInsertionUI","element_","makeElement_","element","makeButton_","class","makeFontDropdown_","makeFontSizeDropdown_","makeColorDropdown_","content","value","makeDropdown_","className","style","display","String","WrappedOperation","wrapped","meta","hasOwnProperty","UndoManager","maxItems","state","dontCompose","undoStack","redoStack","reverse","add","pop","shift","performUndo","performRedo","canUndo","canRedo","isUndoing","isRedoing","Client","setState","applyClient","applyServer","serverAck","serverRetry","applyOperation","Synchronized","outstanding","buffer","AwaitingConfirm","AwaitingWithBuffer","EditorClient","cursorBefore","cursorAfter","editorAdapter","serverAdapter","undoManager","clients","change","onChange","cursorActivity","onCursorActivity","blur","onBlur","focus","onFocus","registerUndo","undo","registerRedo","redo","ack","focused","updateCursor","emitStatus","retry","getClientObject","removeCursor","mark","setOtherCursor","clear","applyUnredo","invertOperation","setCursor","getCursor","ACEAdapter","bind","ace","aceSession","getSession","aceDoc","setNewLineMode","grabDocumentState","selection","aceRange","Range","lastDocLines","getAllLines","lastCursorRange","getRange","removeListener","ignoreChanges","operationFromACEChange","concat","isEmpty","data","action","lines","getNewLineCharacter","indexFromPos","range","posFromIndex","fromPoints","$lines","row","column","getValue","setSelectionRange","otherCursors","detach","removeMarker","addStyleRule","clipRows","createAnchor","addMarker","addedStyleRules","documentElement","getElementsByTagName","addedStyleSheet","sheet","insertRule","callbacks","applyOperationToACE","head","getModel","monaco","monacoModel","getLinesContent","getSelection","changeHandler","onDidChangeModelContent","didBlurHandler","onDidBlurEditorWidget","didFocusHandler","onDidFocusEditorWidget","didChangeCursorPositionHandler","onDidChangeCursorPosition","getStartPosition","getEndPosition","getOffsetAt","getPositionAt","setSelection","lineNumber","match","find","clientID","decoration","deltaDecorations","options","assign","operationFromMonacoChanges","rangeLength","rangeOffset","getEOL","changes","executeEdits","forceMoveMarkers","MonacoAdapter","AttributeConstants","BOLD","ITALIC","UNDERLINE","STRIKE","FONT","FONT_SIZE","COLOR","BACKGROUND_COLOR","ENTITY_SENTINEL","LINE_SENTINEL","LINE_INDENT","LINE_ALIGN","LIST_TYPE","sentinelConstants","LINE_SENTINEL_CHARACTER","ENTITY_SENTINEL_CHARACTER","EntityManager","entities_","register","render","src","fromElement","hasAttribute","getAttribute","renderToElement","tryRenderToElement_","exportToElement","updateElement","info","update","nodeName","toLowerCase","Entity","window","childNodes","nodeType","entitySupportsUpdate","toAttributes","fromAttributes","substr","RichTextCodeMirror","bc","fs","li","codeMirror","options_","entityManager_","currentAttributes_","annotationList_","onAnnotationsChanged_","initAnnotationList_","parseInt","CodeMirror","version","onCodeMirrorChange_","onCodeMirrorBeforeChange_","onCursorActivity_","changeId_","outstandingChanges_","dirtyLines_","line","ch","clearAnnotations_","toggleAttribute","emptySelection_","getCurrentAttributes_","updateTextAttributes","updateCurrentAttributes_","computeChangedAttributes_","attributesInverse","origin","toggleLineAttribute","getCurrentLineAttributes_","setLineAttribute","updateLineAttributesForSelection","getLine","areLineSentinelCharacters_","updateLineAttributes","insertText","replaceText","origOrigin","replaceRange","somethingSelected","removeText","insertEntityAtCursor","insertEntityAt","insertEntity_","getAttributeSpans","lineCount","tryToUpdateEntitiesInPlace","markEntity_","getClassNameForAttributes_","markText","getLineHandle","Number","queueLineMarking_","ent","lineMarkTimeout_","getLineNumber","sort","markLineSentinelCharactersForChangedLines_","addStyleWithCSS_","styleSheet","cssText","cssPrefix","collapsed","atomic","inclusiveLeft","inclusiveRight","createEntityHandle_","replacedWith","setMarker","queueRefresh_","refreshTimer_","refresh","lineClassRemover_","removeLineClass","RegExp","to","convertCoordinateSystemForChanges_","removed","y","removedAttributes","markLineSentinelCharactersForChanges_","unshift","MAX_VALUE","lineIsListItemOrIndented_","findMarksAt","isForLineSentinel","markLineSentinelCharacters_","getLineAttributes_","makeOrderedListElement_","makeUnorderedListElement_","makeTodoListElement_","addLineClass","toggleTodo","checked","newline","replaceSelection","attr","deleteLeft","unindent","deleteH","deleteRight","indent","getText","RichTextCodeMirrorAdapter","rtcm","cm","onAttributesChange","operationFromCodeMirrorChanges","operationFromAttributesChanges","cursorCoords","borderLeftWidth","borderLeftStyle","borderLeftColor","marginLeft","marginRight","height","bottom","top","zIndex","setBookmark","widget","insertLeft","getWrapperElement","Formatting","cloneWithNewAttribute_","bold","italic","underline","strike","font","fontSize","backgroundColor","Text","formatting","LineFormatting","NONE","ORDERED","UNORDERED","TODO","TODOCHECKED","align","listItem","getIndent","getAlign","getListItem","Line","textPieces","ParseHtml","listType","lineFormatting","textFormatting","currentLine","currentLineListItemType","withTextFormatting","withLineFormatting","withListType","withIncreasedIndent","withAlign","newlineIfNonEmpty","cleanLine_","newlineIfNonEmptyOrListItem","makeListItem","ELEMENT_NODE","TEXT_NODE","nodeValue","split","charAt","toUpperCase","hasChildNodes","SerializeHtml","v","_","b","E","C","x","w","A","T","L","I","M","outerHTML","S","N","k","R","O","F","D","P","textPiecesToInserts","string","Headless","refFromURL","firebaseAdapter_","setText","sendOperationWithRetry","initializeFakeDom","JSDOM","close","getHtml","setHtml","codeMirror_","editor_","session","EditSession","ace_","monaco_","container","getDomNode","firepadWrapper_","parentNode","replaceChild","firepad","getOption","keyMap","richtext","initializeKeyMap_","setOption","addToolbar_","addPoweredByLogo_","charCodeAt","richTextCodeMirror_","editorAdapter_","client_","navigator","appName","userAgent","onload","removeChild","round","fromCodeMirror","fromACE","fromMonaco","editorWrapper","setUserColor","assertReady_","setValue","insertTextAtCursor","getOperationForSpan","getHtmlFromRange","getHtmlFromSelection","insertHtml","insertHtmlAtCursor","highlight","orderedList","unorderedList","todo","insertEntity","registerEntity","makeImageDialog_","makeDialog_","placeholder","autofocus","getElementById","visibility","toolbar","insertBefore","firstChild","Enter","Delete","Backspace","Tab","fallthrough"],"mappings":"AAAA,CAAC,UAASA,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,iBAAa,OAAOC,MAApB,IAA4BA,MAAM,CAACC,OAAnC,GAA2CD,MAAM,CAACC,OAAP,GAAeH,CAAC,EAA3D,GAA8D,cAAY,OAAOC,CAAC,CAACG,MAArB,IAA6BH,CAAC,CAACG,MAAF,CAASC,GAAtC,GAA0CD,MAAM,CAACJ,CAAD,CAAhD,GAAoDC,CAAC,CAACK,OAAF,GAAUN,CAAC,EAA7H;AAAgI,CAAhJ,CAAiJ,CAAjJ,EAAmJ,YAAU;AAAC,WAASD,CAAT,CAAWA,CAAX,EAAa;AAAC,WAAO,UAASA,CAAT,EAAW;AAAC,UAAGQ,KAAK,CAACC,OAAN,CAAcT,CAAd,CAAH,EAAoB,OAAOC,CAAC,CAACD,CAAD,CAAR;AAAY,KAA5C,CAA6CA,CAA7C,KAAiD,UAASA,CAAT,EAAW;AAAC,UAAG,eAAa,OAAOU,MAApB,IAA4BA,MAAM,CAACC,QAAP,IAAmBC,MAAM,CAACZ,CAAD,CAAxD,EAA4D,OAAOQ,KAAK,CAACK,IAAN,CAAWb,CAAX,CAAP;AAAqB,KAA7F,CAA8FA,CAA9F,CAAjD,IAAmJ,UAASA,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAG,CAACF,CAAJ,EAAM;AAAO,UAAG,YAAU,OAAOA,CAApB,EAAsB,OAAOC,CAAC,CAACD,CAAD,EAAGE,CAAH,CAAR;AAAc,UAAIY,CAAC,GAACF,MAAM,CAACG,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BjB,CAA/B,EAAkCkB,KAAlC,CAAwC,CAAxC,EAA0C,CAAC,CAA3C,CAAN;AAAoD,mBAAWJ,CAAX,IAAcd,CAAC,CAACmB,WAAhB,KAA8BL,CAAC,GAACd,CAAC,CAACmB,WAAF,CAAcC,IAA9C;AAAoD,UAAG,UAAQN,CAAR,IAAW,UAAQA,CAAtB,EAAwB,OAAON,KAAK,CAACK,IAAN,CAAWC,CAAX,CAAP;AAAqB,UAAG,gBAAcA,CAAd,IAAiB,2CAA2CO,IAA3C,CAAgDP,CAAhD,CAApB,EAAuE,OAAOb,CAAC,CAACD,CAAD,EAAGE,CAAH,CAAR;AAAc,KAAzS,CAA0SF,CAA1S,CAAnJ,IAAic,YAAU;AAAC,YAAM,IAAIsB,SAAJ,CAAc,sIAAd,CAAN;AAA4J,KAAvK,EAAxc;AAAknB;;AAAA,WAASrB,CAAT,CAAWD,CAAX,EAAaC,CAAb,EAAe;AAAC,KAAC,QAAMA,CAAN,IAASA,CAAC,GAACD,CAAC,CAACuB,MAAd,MAAwBtB,CAAC,GAACD,CAAC,CAACuB,MAA5B;;AAAoC,SAAI,IAAIrB,CAAC,GAAC,CAAN,EAAQY,CAAC,GAAC,IAAIN,KAAJ,CAAUP,CAAV,CAAd,EAA2BC,CAAC,GAACD,CAA7B,EAA+BC,CAAC,EAAhC;AAAmCY,MAAAA,CAAC,CAACZ,CAAD,CAAD,GAAKF,CAAC,CAACE,CAAD,CAAN;AAAnC;;AAA6C,WAAOY,CAAP;AAAS;;AAAA,WAASZ,CAAT,CAAWF,CAAX,EAAaC,CAAb,EAAe;AAAC,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,CAAC,CAACsB,MAAhB,EAAuBrB,CAAC,EAAxB,EAA2B;AAAC,UAAIY,CAAC,GAACb,CAAC,CAACC,CAAD,CAAP;AAAWY,MAAAA,CAAC,CAACU,UAAF,GAAaV,CAAC,CAACU,UAAF,IAAc,CAAC,CAA5B,EAA8BV,CAAC,CAACW,YAAF,GAAe,CAAC,CAA9C,EAAgD,WAAUX,CAAV,KAAcA,CAAC,CAACY,QAAF,GAAW,CAAC,CAA1B,CAAhD,EAA6Ed,MAAM,CAACe,cAAP,CAAsB3B,CAAtB,EAAwBc,CAAC,CAACc,GAA1B,EAA8Bd,CAA9B,CAA7E;AAA8G;AAAC;;AAAA,GAACA,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUe,KAAV,GAAgB,EAAhB,EAAmBf,CAAC,CAACe,KAAF,CAAQC,gBAAR,GAAyB,UAAS9B,CAAT,EAAWC,CAAX,EAAa;AAACD,IAAAA,CAAC,CAACe,SAAF,CAAYgB,cAAZ,GAA2B9B,CAA3B,EAA6BD,CAAC,CAACe,SAAF,CAAYiB,EAAZ,GAAe,UAAShC,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAK+B,kBAAL,CAAwBjC,CAAxB,GAA2B,KAAKkC,eAAL,GAAqB,KAAKA,eAAL,IAAsB,EAAtE,EAAyE,KAAKA,eAAL,CAAqBlC,CAArB,IAAwB,KAAKkC,eAAL,CAAqBlC,CAArB,KAAyB,EAA1H,EAA6H,KAAKkC,eAAL,CAAqBlC,CAArB,EAAwBmC,IAAxB,CAA6B;AAACC,QAAAA,QAAQ,EAACnC,CAAV;AAAYoC,QAAAA,OAAO,EAACnC;AAApB,OAA7B,CAA7H;AAAkL,KAA9O,EAA+OF,CAAC,CAACe,SAAF,CAAYuB,GAAZ,GAAgB,UAAStC,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAKgC,kBAAL,CAAwBjC,CAAxB,GAA2B,KAAKkC,eAAL,GAAqB,KAAKA,eAAL,IAAsB,EAAtE;;AAAyE,WAAI,IAAIhC,CAAC,GAAC,KAAKgC,eAAL,CAAqBlC,CAArB,KAAyB,EAA/B,EAAkCc,CAAC,GAAC,CAAxC,EAA0CA,CAAC,GAACZ,CAAC,CAACqB,MAA9C,EAAqDT,CAAC,EAAtD;AAAyD,YAAGZ,CAAC,CAACY,CAAD,CAAD,CAAKsB,QAAL,KAAgBnC,CAAnB,EAAqB,OAAO,KAAKC,CAAC,CAACqC,MAAF,CAASzB,CAAT,EAAW,CAAX,CAAZ;AAA9E;AAAwG,KAA9b,EAA+bd,CAAC,CAACe,SAAF,CAAYyB,OAAZ,GAAoB,UAASxC,CAAT,EAAW;AAAC,WAAKkC,eAAL,GAAqB,KAAKA,eAAL,IAAsB,EAA3C;;AAA8C,WAAI,IAAIjC,CAAC,GAAC,KAAKiC,eAAL,CAAqBlC,CAArB,KAAyB,EAA/B,EAAkCE,CAAC,GAAC,CAAxC,EAA0CA,CAAC,GAACD,CAAC,CAACsB,MAA9C,EAAqDrB,CAAC,EAAtD;AAAyDD,QAAAA,CAAC,CAACC,CAAD,CAAD,CAAKkC,QAAL,CAAcK,KAAd,CAAoBxC,CAAC,CAACC,CAAD,CAAD,CAAKmC,OAAzB,EAAiC7B,KAAK,CAACO,SAAN,CAAgBG,KAAhB,CAAsBD,IAAtB,CAA2ByB,SAA3B,EAAqC,CAArC,CAAjC;AAAzD;AAAmI,KAAhpB,EAAipB1C,CAAC,CAACe,SAAF,CAAYkB,kBAAZ,GAA+B,UAASjC,CAAT,EAAW;AAAC,UAAG,KAAK+B,cAAR,EAAuB;AAAC,aAAI,IAAI9B,CAAC,GAAC,CAAC,CAAP,EAASC,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAAC,KAAK6B,cAAL,CAAoBR,MAAvC,EAA8CrB,CAAC,EAA/C;AAAkD,cAAG,KAAK6B,cAAL,CAAoB7B,CAApB,MAAyBF,CAA5B,EAA8B;AAACC,YAAAA,CAAC,GAAC,CAAC,CAAH;AAAK;AAAM;AAA5F;;AAA4F,YAAG,CAACA,CAAJ,EAAM,MAAM,IAAI0C,KAAJ,CAAU,oBAAkB3C,CAAlB,GAAoB,GAA9B,CAAN;AAAyC;AAAC,KAAh2B;AAAi2B,GAA35B,EAA45Bc,CAAC,CAACe,KAAF,CAAQe,GAAR,GAAY,UAAS5C,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAI2C,CAAC,GAACC,QAAQ,CAACC,aAAT,CAAuB/C,CAAvB,CAAN;AAAgC,QAAG,YAAU,OAAOC,CAApB,EAAsBa,CAAC,CAACe,KAAF,CAAQmB,cAAR,CAAuBH,CAAvB,EAAyB5C,CAAzB,EAAtB,KAAuD,IAAGA,CAAH,EAAK,KAAI,IAAIgD,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAChD,CAAC,CAACsB,MAAhB,EAAuB,EAAE0B,CAAzB;AAA2BJ,MAAAA,CAAC,CAACK,WAAF,CAAcjD,CAAC,CAACgD,CAAD,CAAf;AAA3B;;AAA+C,SAAI,IAAIE,CAAR,IAAajD,CAAC,IAAE,EAAhB;AAAmB2C,MAAAA,CAAC,CAACO,YAAF,CAAeD,CAAf,EAAiBjD,CAAC,CAACiD,CAAD,CAAlB;AAAnB;;AAA0C,WAAON,CAAP;AAAS,GAAtnC,EAAunC/B,CAAC,CAACe,KAAF,CAAQmB,cAAR,GAAuB,UAAShD,CAAT,EAAWC,CAAX,EAAa;AAACD,IAAAA,CAAC,CAACqD,SAAF,GAAY,EAAZ,EAAerD,CAAC,CAACkD,WAAF,CAAcJ,QAAQ,CAACQ,cAAT,CAAwBrD,CAAxB,CAAd,CAAf;AAAyD,GAArtC,EAAstCa,CAAC,CAACe,KAAF,CAAQG,EAAR,GAAW,UAAShC,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAACd,IAAAA,CAAC,CAACuD,gBAAF,GAAmBvD,CAAC,CAACuD,gBAAF,CAAmBtD,CAAnB,EAAqBC,CAArB,EAAuBY,CAAC,IAAE,CAAC,CAA3B,CAAnB,GAAiDd,CAAC,CAACwD,WAAF,IAAexD,CAAC,CAACwD,WAAF,CAAc,OAAKvD,CAAnB,EAAqBC,CAArB,CAAhE;AAAwF,GAA30C,EAA40CY,CAAC,CAACe,KAAF,CAAQS,GAAR,GAAY,UAAStC,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAACd,IAAAA,CAAC,CAACyD,mBAAF,GAAsBzD,CAAC,CAACyD,mBAAF,CAAsBxD,CAAtB,EAAwBC,CAAxB,EAA0BY,CAAC,IAAE,CAAC,CAA9B,CAAtB,GAAuDd,CAAC,CAAC0D,WAAF,IAAe1D,CAAC,CAAC0D,WAAF,CAAc,OAAKzD,CAAnB,EAAqBC,CAArB,CAAtE;AAA8F,GAAx8C,EAAy8CY,CAAC,CAACe,KAAF,CAAQ8B,cAAR,GAAuB,UAAS3D,CAAT,EAAW;AAACA,IAAAA,CAAC,CAAC2D,cAAF,GAAiB3D,CAAC,CAAC2D,cAAF,EAAjB,GAAoC3D,CAAC,CAAC4D,WAAF,GAAc,CAAC,CAAnD;AAAqD,GAAjiD,EAAkiD9C,CAAC,CAACe,KAAF,CAAQgC,eAAR,GAAwB,UAAS7D,CAAT,EAAW;AAACA,IAAAA,CAAC,CAAC6D,eAAF,GAAkB7D,CAAC,CAAC6D,eAAF,EAAlB,GAAsC7D,CAAC,CAAC8D,YAAF,GAAe,CAAC,CAAtD;AAAwD,GAA9nD,EAA+nDhD,CAAC,CAACe,KAAF,CAAQkC,SAAR,GAAkB,UAAS/D,CAAT,EAAW;AAACc,IAAAA,CAAC,CAACe,KAAF,CAAQ8B,cAAR,CAAuB3D,CAAvB,GAA0Bc,CAAC,CAACe,KAAF,CAAQgC,eAAR,CAAwB7D,CAAxB,CAA1B;AAAqD,GAAltD,EAAmtDc,CAAC,CAACe,KAAF,CAAQmC,YAAR,GAAqB,UAAShE,CAAT,EAAW;AAAC,WAAO,UAASC,CAAT,EAAW;AAAC,aAAOD,CAAC,CAACC,CAAD,CAAD,EAAKa,CAAC,CAACe,KAAF,CAAQkC,SAAR,CAAkB9D,CAAlB,CAAL,EAA0B,CAAC,CAAlC;AAAoC,KAAvD;AAAwD,GAA5yD,EAA6yDa,CAAC,CAACe,KAAF,CAAQoC,IAAR,GAAa,UAASjE,CAAT,EAAW;AAAC,WAAOA,CAAC,CAACkE,OAAF,CAAU,OAAV,EAAkB,EAAlB,EAAsBA,OAAtB,CAA8B,OAA9B,EAAsC,EAAtC,CAAP;AAAiD,GAAv3D,EAAw3DpD,CAAC,CAACe,KAAF,CAAQsC,cAAR,GAAuB,UAASnE,CAAT,EAAWC,CAAX,EAAa;AAAC,SAAI,IAAIC,CAAC,GAAC,YAAU,OAAOD,CAAjB,GAAmB,CAACA,CAAD,CAAnB,GAAuBA,CAA7B,EAA+Ba,CAAC,GAAC,CAArC,EAAuCA,CAAC,GAACZ,CAAC,CAACqB,MAA3C,EAAkDT,CAAC,EAAnD,EAAsD;AAACb,MAAAA,CAAC,GAACC,CAAC,CAACY,CAAD,CAAH;AAAO,UAAG,CAAC,CAAD,KAAKd,CAAC,CAACoE,OAAF,CAAUnE,CAAV,EAAYD,CAAC,CAACuB,MAAF,GAAStB,CAAC,CAACsB,MAAvB,CAAR,EAAuC,OAAM,CAAC,CAAP;AAAS;;AAAA,WAAM,CAAC,CAAP;AAAS,GAAphE,EAAqhET,CAAC,CAACe,KAAF,CAAQwC,MAAR,GAAe,UAASrE,CAAT,EAAWC,CAAX,EAAa;AAAC,QAAG,CAACD,CAAJ,EAAM,MAAM,IAAI2C,KAAJ,CAAU1C,CAAC,IAAE,iBAAb,CAAN;AAAsC,GAA9lE,EAA+lEa,CAAC,CAACe,KAAF,CAAQyC,GAAR,GAAY,YAAU;AAAC,QAAG,eAAa,OAAOC,OAApB,IAA6B,KAAK,CAAL,KAASA,OAAO,CAACD,GAAjD,EAAqD;AAAC,WAAI,IAAItE,CAAC,GAAC,CAAC,UAAD,CAAN,EAAmBC,CAAC,GAAC,CAAzB,EAA2BA,CAAC,GAACyC,SAAS,CAACnB,MAAvC,EAA8CtB,CAAC,EAA/C;AAAkDD,QAAAA,CAAC,CAACmC,IAAF,CAAOO,SAAS,CAACzC,CAAD,CAAhB;AAAlD;;AAAuEsE,MAAAA,OAAO,CAACD,GAAR,CAAY7B,KAAZ,CAAkB8B,OAAlB,EAA0BvE,CAA1B;AAA6B;AAAC,GAAjxE,EAAkxE,CAACc,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU0D,IAAV,GAAe,YAAU;AAAC,aAASxE,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKwE,GAAL,GAASzE,CAAT,EAAW,KAAKuB,MAAL,GAAYtB,CAAvB;AAAyB;;AAAA,WAAOD,CAAC,CAACe,SAAF,CAAY2D,GAAZ,GAAgB,YAAU;AAAC,aAAO,KAAKD,GAAL,GAAS,KAAKlD,MAArB;AAA4B,KAAvD,EAAwDvB,CAA/D;AAAiE,GAArH,EAAjyE,EAAy5E,CAACc,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU6D,MAAV,GAAiB,YAAU;AAAC,QAAI3E,CAAC,GAACc,CAAC,CAACe,KAAR;;AAAc,aAAS5B,CAAT,CAAWA,CAAX,EAAa;AAAC,WAAK2E,IAAL,GAAU3E,CAAV,EAAY,KAAK4E,KAAL,GAAW,IAAvB,EAA4B,KAAKC,IAAL,GAAU,IAAtC,EAA2C,KAAKC,UAAL,GAAgB,IAA3D,EAAgE,aAAW9E,CAAX,IAAc,KAAK6E,IAAL,GAAUpC,SAAS,CAAC,CAAD,CAAnB,EAAuB1C,CAAC,CAACqE,MAAF,CAAS,YAAU,OAAO,KAAKS,IAA/B,CAAvB,EAA4D,KAAKC,UAAL,GAAgBrC,SAAS,CAAC,CAAD,CAAT,IAAc,EAA1F,EAA6F1C,CAAC,CAACqE,MAAF,CAAS,YAAU,OAAO,KAAKU,UAA/B,CAA3G,IAAuJ,aAAW9E,CAAX,IAAc,KAAK4E,KAAL,GAAWnC,SAAS,CAAC,CAAD,CAApB,EAAwB1C,CAAC,CAACqE,MAAF,CAAS,YAAU,OAAO,KAAKQ,KAA/B,CAAtC,IAA6E,aAAW5E,CAAX,KAAe,KAAK4E,KAAL,GAAWnC,SAAS,CAAC,CAAD,CAApB,EAAwB1C,CAAC,CAACqE,MAAF,CAAS,YAAU,OAAO,KAAKQ,KAA/B,CAAxB,EAA8D,KAAKE,UAAL,GAAgBrC,SAAS,CAAC,CAAD,CAAT,IAAc,EAA5F,EAA+F1C,CAAC,CAACqE,MAAF,CAAS,YAAU,OAAO,KAAKU,UAA/B,CAA9G,CAApS;AAA8b;;AAAA,WAAO9E,CAAC,CAACc,SAAF,CAAYiE,QAAZ,GAAqB,YAAU;AAAC,aAAM,aAAW,KAAKJ,IAAtB;AAA2B,KAA3D,EAA4D3E,CAAC,CAACc,SAAF,CAAYkE,QAAZ,GAAqB,YAAU;AAAC,aAAM,aAAW,KAAKL,IAAtB;AAA2B,KAAvH,EAAwH3E,CAAC,CAACc,SAAF,CAAYmE,QAAZ,GAAqB,YAAU;AAAC,aAAM,aAAW,KAAKN,IAAtB;AAA2B,KAAnL,EAAoL3E,CAAC,CAACc,SAAF,CAAYoE,MAAZ,GAAmB,UAASnF,CAAT,EAAW;AAAC,aAAO,KAAK4E,IAAL,KAAY5E,CAAC,CAAC4E,IAAd,IAAoB,KAAKE,IAAL,KAAY9E,CAAC,CAAC8E,IAAlC,IAAwC,KAAKD,KAAL,KAAa7E,CAAC,CAAC6E,KAAvD,IAA8D,KAAKO,eAAL,CAAqBpF,CAAC,CAAC+E,UAAvB,CAArE;AAAwG,KAA3T,EAA4T9E,CAAC,CAACc,SAAF,CAAYqE,eAAZ,GAA4B,UAASpF,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAR,IAAa,KAAK8E,UAAlB;AAA6B,YAAG,KAAKA,UAAL,CAAgB9E,CAAhB,MAAqBD,CAAC,CAACC,CAAD,CAAzB,EAA6B,OAAM,CAAC,CAAP;AAA1D;;AAAmE,WAAIA,CAAJ,IAASD,CAAT;AAAW,YAAG,KAAK+E,UAAL,CAAgB9E,CAAhB,MAAqBD,CAAC,CAACC,CAAD,CAAzB,EAA6B,OAAM,CAAC,CAAP;AAAxC;;AAAiD,aAAM,CAAC,CAAP;AAAS,KAAje,EAAkeA,CAAC,CAACc,SAAF,CAAYsE,kBAAZ,GAA+B,YAAU;AAAC,UAAIrF,CAAC,GAAC,CAAC,CAAP;;AAAS,WAAI,IAAIC,CAAR,IAAa,KAAK8E,UAAlB,EAA6B;AAAC/E,QAAAA,CAAC,GAAC,CAAC,CAAH;AAAK;AAAM;;AAAA,aAAOA,CAAP;AAAS,KAAvkB,EAAwkBC,CAA/kB;AAAilB,GAAtjC,EAA16E,EAAm+G,CAACa,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUwE,aAAV,GAAwB,YAAU;AAAC;;AAAa,QAAItF,CAAC,GAACc,CAAC,CAAC6D,MAAR;AAAA,QAAe1E,CAAC,GAACa,CAAC,CAACe,KAAnB;;AAAyB,aAAS3B,CAAT,GAAY;AAAC,UAAG,CAAC,IAAD,IAAO,KAAKiB,WAAL,KAAmBjB,CAA7B,EAA+B,OAAO,IAAIA,CAAJ,EAAP;AAAa,WAAKqF,GAAL,GAAS,EAAT,EAAY,KAAKC,UAAL,GAAgB,CAA5B,EAA8B,KAAKC,YAAL,GAAkB,CAAhD;AAAkD;;AAAA,aAAS5C,CAAT,CAAW7C,CAAX,EAAa;AAAC,UAAIC,CAAC,GAACD,CAAC,CAACuF,GAAR;;AAAY,cAAOtF,CAAC,CAACsB,MAAT;AAAiB,aAAK,CAAL;AAAO,iBAAOtB,CAAC,CAAC,CAAD,CAAR;;AAAY,aAAK,CAAL;AAAO,iBAAOA,CAAC,CAAC,CAAD,CAAD,CAAKiF,QAAL,KAAgBjF,CAAC,CAAC,CAAD,CAAjB,GAAqBA,CAAC,CAAC,CAAD,CAAD,CAAKiF,QAAL,KAAgBjF,CAAC,CAAC,CAAD,CAAjB,GAAqB,IAAjD;;AAAsD,aAAK,CAAL;AAAO,cAAGA,CAAC,CAAC,CAAD,CAAD,CAAKiF,QAAL,MAAiBjF,CAAC,CAAC,CAAD,CAAD,CAAKiF,QAAL,EAApB,EAAoC,OAAOjF,CAAC,CAAC,CAAD,CAAR;AAA5I;;AAAwJ,aAAO,IAAP;AAAY;;AAAA,aAASgD,CAAT,CAAWjD,CAAX,EAAa;AAAC,aAAOA,CAAC,CAACuF,GAAF,CAAM,CAAN,EAASL,QAAT,KAAoBlF,CAAC,CAACuF,GAAF,CAAM,CAAN,EAASV,KAA7B,GAAmC,CAA1C;AAA4C;;AAAA,WAAO3E,CAAC,CAACa,SAAF,CAAYoE,MAAZ,GAAmB,UAASnF,CAAT,EAAW;AAAC,UAAG,KAAKwF,UAAL,KAAkBxF,CAAC,CAACwF,UAAvB,EAAkC,OAAM,CAAC,CAAP;AAAS,UAAG,KAAKC,YAAL,KAAoBzF,CAAC,CAACyF,YAAzB,EAAsC,OAAM,CAAC,CAAP;AAAS,UAAG,KAAKF,GAAL,CAAShE,MAAT,KAAkBvB,CAAC,CAACuF,GAAF,CAAMhE,MAA3B,EAAkC,OAAM,CAAC,CAAP;;AAAS,WAAI,IAAItB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKsF,GAAL,CAAShE,MAAvB,EAA8BtB,CAAC,EAA/B;AAAkC,YAAG,CAAC,KAAKsF,GAAL,CAAStF,CAAT,EAAYkF,MAAZ,CAAmBnF,CAAC,CAACuF,GAAF,CAAMtF,CAAN,CAAnB,CAAJ,EAAiC,OAAM,CAAC,CAAP;AAAnE;;AAA4E,aAAM,CAAC,CAAP;AAAS,KAAzP,EAA0PC,CAAC,CAACa,SAAF,CAAY2E,MAAZ,GAAmB,UAASzF,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,YAAU,OAAOD,CAAjB,IAAoBA,CAAC,GAAC,CAAzB,EAA2B,MAAM,IAAI0C,KAAJ,CAAU,oCAAV,CAAN;AAAsD,UAAG,MAAI1C,CAAP,EAAS,OAAO,IAAP;AAAY,WAAKuF,UAAL,IAAiBvF,CAAjB,EAAmB,KAAKwF,YAAL,IAAmBxF,CAAtC,EAAwCC,CAAC,GAACA,CAAC,IAAE,EAA7C;AAAgD,UAAIY,CAAC,GAAC,KAAKyE,GAAL,CAAShE,MAAT,GAAgB,CAAhB,GAAkB,KAAKgE,GAAL,CAAS,KAAKA,GAAL,CAAShE,MAAT,GAAgB,CAAzB,CAAlB,GAA8C,IAApD;AAAyD,aAAOT,CAAC,IAAEA,CAAC,CAACoE,QAAF,EAAH,IAAiBpE,CAAC,CAACsE,eAAF,CAAkBlF,CAAlB,CAAjB,GAAsCY,CAAC,CAAC+D,KAAF,IAAS5E,CAA/C,GAAiD,KAAKsF,GAAL,CAASpD,IAAT,CAAc,IAAInC,CAAJ,CAAM,QAAN,EAAeC,CAAf,EAAiBC,CAAjB,CAAd,CAAjD,EAAoF,IAA3F;AAAgG,KAA1kB,EAA2kBA,CAAC,CAACa,SAAF,CAAY4E,MAAZ,GAAmB,UAAS1F,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,YAAU,OAAOD,CAApB,EAAsB,MAAM,IAAI0C,KAAJ,CAAU,yBAAV,CAAN;AAA2C,UAAG,OAAK1C,CAAR,EAAU,OAAO,IAAP;AAAYC,MAAAA,CAAC,GAACA,CAAC,IAAE,EAAL,EAAQ,KAAKuF,YAAL,IAAmBxF,CAAC,CAACsB,MAA7B;AAAoC,UAAIT,CAAC,GAAC,KAAKyE,GAAL,CAAShE,MAAT,GAAgB,CAAhB,GAAkB,KAAKgE,GAAL,CAAS,KAAKA,GAAL,CAAShE,MAAT,GAAgB,CAAzB,CAAlB,GAA8C,IAApD;AAAA,UAAyDsB,CAAC,GAAC,KAAK0C,GAAL,CAAShE,MAAT,GAAgB,CAAhB,GAAkB,KAAKgE,GAAL,CAAS,KAAKA,GAAL,CAAShE,MAAT,GAAgB,CAAzB,CAAlB,GAA8C,IAAzG;AAA8G,aAAOT,CAAC,IAAEA,CAAC,CAACkE,QAAF,EAAH,IAAiBlE,CAAC,CAACsE,eAAF,CAAkBlF,CAAlB,CAAjB,GAAsCY,CAAC,CAACgE,IAAF,IAAQ7E,CAA9C,GAAgDa,CAAC,IAAEA,CAAC,CAACmE,QAAF,EAAH,GAAgBpC,CAAC,IAAEA,CAAC,CAACmC,QAAF,EAAH,IAAiBnC,CAAC,CAACuC,eAAF,CAAkBlF,CAAlB,CAAjB,GAAsC2C,CAAC,CAACiC,IAAF,IAAQ7E,CAA9C,IAAiD,KAAKsF,GAAL,CAAS,KAAKA,GAAL,CAAShE,MAAT,GAAgB,CAAzB,IAA4B,IAAIvB,CAAJ,CAAM,QAAN,EAAeC,CAAf,EAAiBC,CAAjB,CAA5B,EAAgD,KAAKqF,GAAL,CAASpD,IAAT,CAAcrB,CAAd,CAAjG,CAAhB,GAAmI,KAAKyE,GAAL,CAASpD,IAAT,CAAc,IAAInC,CAAJ,CAAM,QAAN,EAAeC,CAAf,EAAiBC,CAAjB,CAAd,CAAnL,EAAsN,IAA7N;AAAkO,KAAvjC,EAAwjCA,CAAC,CAACa,SAAF,CAAY6E,MAAZ,GAAmB,UAAS3F,CAAT,EAAW;AAAC,UAAG,YAAU,OAAOA,CAAjB,KAAqBA,CAAC,GAACA,CAAC,CAACsB,MAAzB,GAAiC,YAAU,OAAOtB,CAAjB,IAAoBA,CAAC,GAAC,CAA1D,EAA4D,MAAM,IAAI0C,KAAJ,CAAU,+CAAV,CAAN;AAAiE,UAAG,MAAI1C,CAAP,EAAS,OAAO,IAAP;AAAY,WAAKuF,UAAL,IAAiBvF,CAAjB;AAAmB,UAAIC,CAAC,GAAC,KAAKqF,GAAL,CAAShE,MAAT,GAAgB,CAAhB,GAAkB,KAAKgE,GAAL,CAAS,KAAKA,GAAL,CAAShE,MAAT,GAAgB,CAAzB,CAAlB,GAA8C,IAApD;AAAyD,aAAOrB,CAAC,IAAEA,CAAC,CAAC+E,QAAF,EAAH,GAAgB/E,CAAC,CAAC2E,KAAF,IAAS5E,CAAzB,GAA2B,KAAKsF,GAAL,CAASpD,IAAT,CAAc,IAAInC,CAAJ,CAAM,QAAN,EAAeC,CAAf,CAAd,CAA3B,EAA4D,IAAnE;AAAwE,KAA73C,EAA83CC,CAAC,CAACa,SAAF,CAAY8E,MAAZ,GAAmB,YAAU;AAAC,aAAO,MAAI,KAAKN,GAAL,CAAShE,MAAb,IAAqB,MAAI,KAAKgE,GAAL,CAAShE,MAAb,IAAqB,KAAKgE,GAAL,CAAS,CAAT,EAAYL,QAAZ,EAArB,IAA6C,KAAKK,GAAL,CAAS,CAAT,EAAYF,kBAAZ,EAAzE;AAA0G,KAAtgD,EAAugDnF,CAAC,CAACa,SAAF,CAAY+E,KAAZ,GAAkB,YAAU;AAAC,WAAI,IAAI9F,CAAC,GAAC,IAAIE,CAAJ,EAAN,EAAYD,CAAC,GAAC,CAAlB,EAAoBA,CAAC,GAAC,KAAKsF,GAAL,CAAShE,MAA/B,EAAsCtB,CAAC,EAAvC;AAA0C,aAAKsF,GAAL,CAAStF,CAAT,EAAYiF,QAAZ,KAAuBlF,CAAC,CAAC0F,MAAF,CAAS,KAAKH,GAAL,CAAStF,CAAT,EAAY4E,KAArB,EAA2B,KAAKU,GAAL,CAAStF,CAAT,EAAY8E,UAAvC,CAAvB,GAA0E,KAAKQ,GAAL,CAAStF,CAAT,EAAY+E,QAAZ,KAAuBhF,CAAC,CAAC2F,MAAF,CAAS,KAAKJ,GAAL,CAAStF,CAAT,EAAY6E,IAArB,EAA0B,KAAKS,GAAL,CAAStF,CAAT,EAAY8E,UAAtC,CAAvB,GAAyE/E,CAAC,CAAC4F,MAAF,CAAS,KAAKL,GAAL,CAAStF,CAAT,EAAY4E,KAArB,CAAnJ;AAA1C;;AAAyN,aAAO7E,CAAP;AAAS,KAAtwD,EAAuwDE,CAAC,CAACa,SAAF,CAAYC,QAAZ,GAAqB,YAAU;AAAC,aAAM,CAACR,KAAK,CAACO,SAAN,CAAgBgF,GAAhB,IAAqB,UAAS/F,CAAT,EAAW;AAAC,aAAI,IAAIC,CAAC,GAAC,EAAN,EAASC,CAAC,GAAC,CAAX,EAAaY,CAAC,GAAC,KAAKS,MAAxB,EAA+BrB,CAAC,GAACY,CAAjC,EAAmCZ,CAAC,EAApC;AAAuCD,UAAAA,CAAC,CAACC,CAAD,CAAD,GAAKF,CAAC,CAAC,KAAKE,CAAL,CAAD,CAAN;AAAvC;;AAAuD,eAAOD,CAAP;AAAS,OAAlG,EAAoGgB,IAApG,CAAyG,KAAKsE,GAA9G,EAAkH,UAASvF,CAAT,EAAW;AAAC,eAAOA,CAAC,CAACkF,QAAF,KAAa,YAAUlF,CAAC,CAAC6E,KAAzB,GAA+B7E,CAAC,CAACgF,QAAF,KAAa,aAAWhF,CAAC,CAAC8E,IAAb,GAAkB,GAA/B,GAAmC,YAAU9E,CAAC,CAAC6E,KAArF;AAA2F,OAAzN,EAA2NmB,IAA3N,CAAgO,IAAhO,CAAN;AAA4O,KAAnhE,EAAohE9F,CAAC,CAACa,SAAF,CAAYkF,MAAZ,GAAmB,YAAU;AAAC,WAAI,IAAIjG,CAAC,GAAC,EAAN,EAASC,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAAC,KAAKsF,GAAL,CAAShE,MAA5B,EAAmCtB,CAAC,EAApC;AAAuC,aAAKsF,GAAL,CAAStF,CAAT,EAAYoF,kBAAZ,MAAkCrF,CAAC,CAACmC,IAAF,CAAO,KAAKoD,GAAL,CAAStF,CAAT,EAAY8E,UAAnB,CAAlC,EAAiE,aAAW,KAAKQ,GAAL,CAAStF,CAAT,EAAY2E,IAAvB,GAA4B5E,CAAC,CAACmC,IAAF,CAAO,KAAKoD,GAAL,CAAStF,CAAT,EAAY4E,KAAnB,CAA5B,GAAsD,aAAW,KAAKU,GAAL,CAAStF,CAAT,EAAY2E,IAAvB,GAA4B5E,CAAC,CAACmC,IAAF,CAAO,KAAKoD,GAAL,CAAStF,CAAT,EAAY6E,IAAnB,CAA5B,GAAqD,aAAW,KAAKS,GAAL,CAAStF,CAAT,EAAY2E,IAAvB,IAA6B5E,CAAC,CAACmC,IAAF,CAAO,CAAC,KAAKoD,GAAL,CAAStF,CAAT,EAAY4E,KAApB,CAAzM;AAAvC;;AAA2Q,aAAO,MAAI7E,CAAC,CAACuB,MAAN,IAAcvB,CAAC,CAACmC,IAAF,CAAO,CAAP,CAAd,EAAwBnC,CAA/B;AAAiC,KAA91E,EAA+1EE,CAAC,CAACgG,QAAF,GAAW,UAASlG,CAAT,EAAW;AAAC,WAAI,IAAIc,CAAC,GAAC,IAAIZ,CAAJ,EAAN,EAAY2C,CAAC,GAAC,CAAd,EAAgBI,CAAC,GAACjD,CAAC,CAACuB,MAAxB,EAA+BsB,CAAC,GAACI,CAAjC,EAAmCJ,CAAC,EAApC,EAAuC;AAAC,YAAIM,CAAC,GAACnD,CAAC,CAAC6C,CAAD,CAAP;AAAA,YAAWsD,CAAC,GAAC,EAAb;AAAgB,oBAAU,OAAOhD,CAAjB,KAAqBgD,CAAC,GAAChD,CAAF,EAAIA,CAAC,GAACnD,CAAC,CAAC,EAAE6C,CAAH,CAA5B,GAAmC,YAAU,OAAOM,CAAjB,GAAmBA,CAAC,GAAC,CAAF,GAAIrC,CAAC,CAAC4E,MAAF,CAASvC,CAAT,EAAWgD,CAAX,CAAJ,GAAkBrF,CAAC,CAAC8E,MAAF,CAAS,CAACzC,CAAV,CAArC,IAAmDlD,CAAC,CAACoE,MAAF,CAAS,YAAU,OAAOlB,CAA1B,GAA6BrC,CAAC,CAAC6E,MAAF,CAASxC,CAAT,EAAWgD,CAAX,CAAhF,CAAnC;AAAkI;;AAAA,aAAOrF,CAAP;AAAS,KAAzjF,EAA0jFZ,CAAC,CAACa,SAAF,CAAY0B,KAAZ,GAAkB,UAASzC,CAAT,EAAWE,CAAX,EAAaY,CAAb,EAAe;AAAC,UAAGZ,CAAC,GAACA,CAAC,IAAE,EAAL,EAAQY,CAAC,GAACA,CAAC,IAAE,EAAb,EAAgBd,CAAC,CAACuB,MAAF,KAAW,KAAKiE,UAAnC,EAA8C,MAAM,IAAI7C,KAAJ,CAAU,mEAAV,CAAN;;AAAqF,WAAI,IAAIE,CAAJ,EAAMI,CAAN,EAAQE,CAAC,GAAC,EAAV,EAAagD,CAAC,GAAC,CAAf,EAAiBC,CAAC,GAAC,CAAnB,EAAqBC,CAAC,GAAC,KAAKd,GAA5B,EAAgCe,CAAC,GAAC,CAAlC,EAAoCC,CAAC,GAACF,CAAC,CAAC9E,MAA5C,EAAmD+E,CAAC,GAACC,CAArD,EAAuDD,CAAC,EAAxD,EAA2D;AAAC,YAAIE,CAAC,GAACH,CAAC,CAACC,CAAD,CAAP;;AAAW,YAAGE,CAAC,CAACtB,QAAF,EAAH,EAAgB;AAAC,cAAGkB,CAAC,GAACI,CAAC,CAAC3B,KAAJ,GAAU7E,CAAC,CAACuB,MAAf,EAAsB,MAAM,IAAIoB,KAAJ,CAAU,qEAAV,CAAN;;AAAuF,eAAIQ,CAAC,CAACgD,CAAC,EAAF,CAAD,GAAOnG,CAAC,CAACkB,KAAF,CAAQkF,CAAR,EAAUA,CAAC,GAACI,CAAC,CAAC3B,KAAd,CAAP,EAA4BhC,CAAC,GAAC,CAAlC,EAAoCA,CAAC,GAAC2D,CAAC,CAAC3B,KAAxC,EAA8ChC,CAAC,EAA/C,EAAkD;AAAC,gBAAI4D,CAAC,GAACvG,CAAC,CAACkG,CAAC,GAACvD,CAAH,CAAD,IAAQ,EAAd;AAAA,gBAAiB6D,CAAC,GAAC,EAAnB;;AAAsB,iBAAIzD,CAAJ,IAASwD,CAAT;AAAWC,cAAAA,CAAC,CAACzD,CAAD,CAAD,GAAKwD,CAAC,CAACxD,CAAD,CAAN,EAAUhD,CAAC,CAACoE,MAAF,CAAS,CAAC,CAAD,KAAKqC,CAAC,CAACzD,CAAD,CAAf,CAAV;AAAX;;AAAyC,iBAAIA,CAAJ,IAASuD,CAAC,CAACzB,UAAX;AAAsB,eAAC,CAAD,KAAKyB,CAAC,CAACzB,UAAF,CAAa9B,CAAb,CAAL,GAAqB,OAAOyD,CAAC,CAACzD,CAAD,CAA7B,GAAiCyD,CAAC,CAACzD,CAAD,CAAD,GAAKuD,CAAC,CAACzB,UAAF,CAAa9B,CAAb,CAAtC,EAAsDhD,CAAC,CAACoE,MAAF,CAAS,CAAC,CAAD,KAAKqC,CAAC,CAACzD,CAAD,CAAf,CAAtD;AAAtB;;AAAgGnC,YAAAA,CAAC,CAACqB,IAAF,CAAOuE,CAAP;AAAU;;AAAAN,UAAAA,CAAC,IAAEI,CAAC,CAAC3B,KAAL;AAAW,SAArW,MAA0W,IAAG2B,CAAC,CAACxB,QAAF,EAAH,EAAgB,KAAI7B,CAAC,CAACgD,CAAC,EAAF,CAAD,GAAOK,CAAC,CAAC1B,IAAT,EAAcjC,CAAC,GAAC,CAApB,EAAsBA,CAAC,GAAC2D,CAAC,CAAC1B,IAAF,CAAOvD,MAA/B,EAAsCsB,CAAC,EAAvC,EAA0C;AAAC,cAAI8D,CAAC,GAAC,EAAN;;AAAS,eAAI1D,CAAJ,IAASuD,CAAC,CAACzB,UAAX;AAAsB4B,YAAAA,CAAC,CAAC1D,CAAD,CAAD,GAAKuD,CAAC,CAACzB,UAAF,CAAa9B,CAAb,CAAL,EAAqBhD,CAAC,CAACoE,MAAF,CAAS,CAAC,CAAD,KAAKsC,CAAC,CAAC1D,CAAD,CAAf,CAArB;AAAtB;;AAA+DnC,UAAAA,CAAC,CAACqB,IAAF,CAAOwE,CAAP;AAAU,SAA7I,MAAkJP,CAAC,IAAEI,CAAC,CAAC3B,KAAL;AAAW;;AAAA,UAAGuB,CAAC,KAAGpG,CAAC,CAACuB,MAAT,EAAgB,MAAM,IAAIoB,KAAJ,CAAU,mDAAV,CAAN;AAAqE,UAAIiE,CAAC,GAACzD,CAAC,CAAC6C,IAAF,CAAO,EAAP,CAAN;AAAiB,aAAO/F,CAAC,CAACoE,MAAF,CAASuC,CAAC,CAACrF,MAAF,KAAWT,CAAC,CAACS,MAAtB,GAA8BqF,CAArC;AAAuC,KAA17G,EAA27G1G,CAAC,CAACa,SAAF,CAAY8F,MAAZ,GAAmB,UAAS7G,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAAC,CAAN,EAAQa,CAAC,GAAC,IAAIZ,CAAJ,EAAV,EAAgB2C,CAAC,GAAC,KAAK0C,GAAvB,EAA2BtC,CAAC,GAAC,CAA7B,EAA+BE,CAAC,GAACN,CAAC,CAACtB,MAAvC,EAA8C0B,CAAC,GAACE,CAAhD,EAAkDF,CAAC,EAAnD,EAAsD;AAAC,YAAIkD,CAAC,GAACtD,CAAC,CAACI,CAAD,CAAP;AAAWkD,QAAAA,CAAC,CAACjB,QAAF,MAAcpE,CAAC,CAAC4E,MAAF,CAASS,CAAC,CAACtB,KAAX,GAAkB5E,CAAC,IAAEkG,CAAC,CAACtB,KAArC,IAA4CsB,CAAC,CAACnB,QAAF,KAAalE,CAAC,CAAC8E,MAAF,CAASO,CAAC,CAACrB,IAAF,CAAOvD,MAAhB,CAAb,IAAsCT,CAAC,CAAC6E,MAAF,CAAS3F,CAAC,CAACkB,KAAF,CAAQjB,CAAR,EAAUA,CAAC,GAACkG,CAAC,CAACtB,KAAd,CAAT,GAA+B5E,CAAC,IAAEkG,CAAC,CAACtB,KAA1E,CAA5C;AAA6H;;AAAA,aAAO/D,CAAP;AAAS,KAAlqH,EAAmqHZ,CAAC,CAACa,SAAF,CAAY+F,OAAZ,GAAoB,UAAS9G,CAAT,EAAW;AAAC,UAAG,KAAKyF,YAAL,KAAoBzF,CAAC,CAACwF,UAAzB,EAAoC,MAAM,IAAI7C,KAAJ,CAAU,4FAAV,CAAN;;AAA8G,eAAS1C,CAAT,CAAWD,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,YAAIY,CAAJ;AAAA,YAAM+B,CAAC,GAAC,EAAR;;AAAW,aAAI/B,CAAJ,IAASd,CAAT;AAAW6C,UAAAA,CAAC,CAAC/B,CAAD,CAAD,GAAKd,CAAC,CAACc,CAAD,CAAN;AAAX;;AAAqB,aAAIA,CAAJ,IAASb,CAAT;AAAWC,UAAAA,CAAC,IAAE,CAAC,CAAD,KAAKD,CAAC,CAACa,CAAD,CAAT,GAAa,OAAO+B,CAAC,CAAC/B,CAAD,CAArB,GAAyB+B,CAAC,CAAC/B,CAAD,CAAD,GAAKb,CAAC,CAACa,CAAD,CAA/B;AAAX;;AAA8C,eAAO+B,CAAP;AAAS;;AAAA,WAAI,IAAI/B,CAAJ,EAAM+B,CAAC,GAAC,IAAI3C,CAAJ,EAAR,EAAc+C,CAAC,GAAC,KAAK6C,KAAL,GAAaP,GAA7B,EAAiCpC,CAAC,GAACnD,CAAC,CAAC8F,KAAF,GAAUP,GAA7C,EAAiDY,CAAC,GAAC,CAAnD,EAAqDC,CAAC,GAAC,CAAvD,EAAyDC,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA5D,EAAkEG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAzE,EAA+E,KAAK,CAAL,KAASC,CAAT,IAAY,KAAK,CAAL,KAASC,CAApG;AAAuG,YAAGD,CAAC,IAAEA,CAAC,CAACpB,QAAF,EAAN,EAAmBpC,CAAC,CAAC+C,MAAF,CAASS,CAAC,CAACxB,KAAX,GAAkBwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAArB,CAAnB,KAAmD,IAAGG,CAAC,IAAEA,CAAC,CAACtB,QAAF,EAAN,EAAmBnC,CAAC,CAAC8C,MAAF,CAASW,CAAC,CAACxB,IAAX,EAAgBwB,CAAC,CAACvB,UAAlB,GAA8BuB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAjC,CAAnB,KAA8D;AAAC,cAAG,KAAK,CAAL,KAASC,CAAZ,EAAc,MAAM,IAAI1D,KAAJ,CAAU,0DAAV,CAAN;AAA4E,cAAG,KAAK,CAAL,KAAS2D,CAAZ,EAAc,MAAM,IAAI3D,KAAJ,CAAU,yDAAV,CAAN;AAA2E,cAAG0D,CAAC,CAACnB,QAAF,MAAcoB,CAAC,CAACpB,QAAF,EAAjB,EAA8BpE,CAAC,GAACb,CAAC,CAACoG,CAAC,CAACtB,UAAH,EAAcuB,CAAC,CAACvB,UAAhB,CAAH,EAA+BsB,CAAC,CAACxB,KAAF,GAAQyB,CAAC,CAACzB,KAAV,IAAiBhC,CAAC,CAAC6C,MAAF,CAASY,CAAC,CAACzB,KAAX,EAAiB/D,CAAjB,GAAoBuF,CAAC,CAACxB,KAAF,IAASyB,CAAC,CAACzB,KAA/B,EAAqCyB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAzD,IAAgEC,CAAC,CAACxB,KAAF,KAAUyB,CAAC,CAACzB,KAAZ,IAAmBhC,CAAC,CAAC6C,MAAF,CAASW,CAAC,CAACxB,KAAX,EAAiB/D,CAAjB,GAAoBuF,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAvB,EAA6BG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAnD,KAA2DvD,CAAC,CAAC6C,MAAF,CAASW,CAAC,CAACxB,KAAX,EAAiB/D,CAAjB,GAAoBwF,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACxB,KAA/B,EAAqCwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAnG,CAA/F,CAA9B,KAA4O,IAAGE,CAAC,CAACrB,QAAF,MAAcsB,CAAC,CAACrB,QAAF,EAAjB,EAA8BoB,CAAC,CAACvB,IAAF,CAAOvD,MAAP,GAAc+E,CAAC,CAACzB,KAAhB,IAAuBwB,CAAC,CAACvB,IAAF,GAAOuB,CAAC,CAACvB,IAAF,CAAO5D,KAAP,CAAaoF,CAAC,CAACzB,KAAf,CAAP,EAA6ByB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAvD,IAA8DC,CAAC,CAACvB,IAAF,CAAOvD,MAAP,KAAgB+E,CAAC,CAACzB,KAAlB,IAAyBwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAH,EAASG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAArC,KAA6CE,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACvB,IAAF,CAAOvD,MAAhB,EAAuB8E,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAvE,CAA9D,CAA9B,KAA+K,IAAGE,CAAC,CAACrB,QAAF,MAAcsB,CAAC,CAACpB,QAAF,EAAjB,EAA8BpE,CAAC,GAACb,CAAC,CAACoG,CAAC,CAACtB,UAAH,EAAcuB,CAAC,CAACvB,UAAhB,EAA2B,CAAC,CAA5B,CAAH,EAAkCsB,CAAC,CAACvB,IAAF,CAAOvD,MAAP,GAAc+E,CAAC,CAACzB,KAAhB,IAAuBhC,CAAC,CAAC8C,MAAF,CAASU,CAAC,CAACvB,IAAF,CAAO5D,KAAP,CAAa,CAAb,EAAeoF,CAAC,CAACzB,KAAjB,CAAT,EAAiC/D,CAAjC,GAAoCuF,CAAC,CAACvB,IAAF,GAAOuB,CAAC,CAACvB,IAAF,CAAO5D,KAAP,CAAaoF,CAAC,CAACzB,KAAf,CAA3C,EAAiEyB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAA3F,IAAkGC,CAAC,CAACvB,IAAF,CAAOvD,MAAP,KAAgB+E,CAAC,CAACzB,KAAlB,IAAyBhC,CAAC,CAAC8C,MAAF,CAASU,CAAC,CAACvB,IAAX,EAAgBhE,CAAhB,GAAmBuF,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAtB,EAA4BG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAxD,KAAgEvD,CAAC,CAAC8C,MAAF,CAASU,CAAC,CAACvB,IAAX,EAAgBhE,CAAhB,GAAmBwF,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACvB,IAAF,CAAOvD,MAAnC,EAA0C8E,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA7G,CAApI,CAA9B,KAA0R;AAAC,gBAAG,CAACE,CAAC,CAACnB,QAAF,EAAD,IAAe,CAACoB,CAAC,CAACrB,QAAF,EAAnB,EAAgC,MAAM,IAAItC,KAAJ,CAAU,iCAA+BoE,IAAI,CAACC,SAAL,CAAeX,CAAf,CAA/B,GAAiD,SAAjD,GAA2DU,IAAI,CAACC,SAAL,CAAeV,CAAf,CAArE,CAAN;AAA8FD,YAAAA,CAAC,CAACxB,KAAF,GAAQyB,CAAC,CAACzB,KAAV,IAAiBhC,CAAC,CAAC+C,MAAF,CAASU,CAAC,CAACzB,KAAX,GAAkBwB,CAAC,CAACxB,KAAF,IAASyB,CAAC,CAACzB,KAA7B,EAAmCyB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAvD,IAA8DC,CAAC,CAACxB,KAAF,KAAUyB,CAAC,CAACzB,KAAZ,IAAmBhC,CAAC,CAAC+C,MAAF,CAASU,CAAC,CAACzB,KAAX,GAAkBwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAArB,EAA2BG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAjD,KAAyDvD,CAAC,CAAC+C,MAAF,CAASS,CAAC,CAACxB,KAAX,GAAkByB,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACxB,KAA7B,EAAmCwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA/F,CAA9D;AAAoK;AAAC;AAAr2C;;AAAq2C,aAAOtD,CAAP;AAAS,KAA5yK,EAA6yK3C,CAAC,CAACa,SAAF,CAAYkG,oBAAZ,GAAiC,UAASjH,CAAT,EAAW;AAAC,UAAG,KAAK6F,MAAL,MAAe7F,CAAC,CAAC6F,MAAF,EAAlB,EAA6B,OAAM,CAAC,CAAP;AAAS,UAAI5F,CAAC,GAACgD,CAAC,CAAC,IAAD,CAAP;AAAA,UAAc/C,CAAC,GAAC+C,CAAC,CAACjD,CAAD,CAAjB;AAAA,UAAqBc,CAAC,GAAC+B,CAAC,CAAC,IAAD,CAAxB;AAAA,UAA+BM,CAAC,GAACN,CAAC,CAAC7C,CAAD,CAAlC;AAAsC,aAAM,EAAE,CAACc,CAAD,IAAI,CAACqC,CAAP,MAAYrC,CAAC,CAACkE,QAAF,MAAc7B,CAAC,CAAC6B,QAAF,EAAd,GAA2B/E,CAAC,GAACa,CAAC,CAACgE,IAAF,CAAOvD,MAAT,KAAkBrB,CAA7C,GAA+C,EAAE,CAACY,CAAC,CAACmE,QAAF,EAAD,IAAe,CAAC9B,CAAC,CAAC8B,QAAF,EAAlB,MAAkC/E,CAAC,GAACiD,CAAC,CAAC0B,KAAJ,KAAY5E,CAAZ,IAAeA,CAAC,KAAGC,CAArD,CAA3D,CAAN;AAA0H,KAAhiL,EAAiiLA,CAAC,CAACa,SAAF,CAAYmG,4BAAZ,GAAyC,UAASlH,CAAT,EAAW;AAAC,UAAG,KAAK6F,MAAL,MAAe7F,CAAC,CAAC6F,MAAF,EAAlB,EAA6B,OAAM,CAAC,CAAP;AAAS,UAAI5F,CAAC,GAACgD,CAAC,CAAC,IAAD,CAAP;AAAA,UAAc/C,CAAC,GAAC+C,CAAC,CAACjD,CAAD,CAAjB;AAAA,UAAqBc,CAAC,GAAC+B,CAAC,CAAC,IAAD,CAAxB;AAAA,UAA+BM,CAAC,GAACN,CAAC,CAAC7C,CAAD,CAAlC;AAAsC,aAAM,EAAE,CAACc,CAAD,IAAI,CAACqC,CAAP,MAAYrC,CAAC,CAACkE,QAAF,MAAc7B,CAAC,CAAC6B,QAAF,EAAd,GAA2B/E,CAAC,GAACa,CAAC,CAACgE,IAAF,CAAOvD,MAAT,KAAkBrB,CAAlB,IAAqBD,CAAC,KAAGC,CAApD,GAAsD,EAAE,CAACY,CAAC,CAACmE,QAAF,EAAD,IAAe,CAAC9B,CAAC,CAAC8B,QAAF,EAAlB,KAAiC/E,CAAC,GAACiD,CAAC,CAAC0B,KAAJ,KAAY5E,CAA/G,CAAN;AAAwH,KAA1xL,EAA2xLC,CAAC,CAACiH,mBAAF,GAAsB,UAASnH,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAIY,CAAJ;AAAA,UAAM+B,CAAC,GAAC,EAAR;AAAA,UAAWI,CAAC,GAAC,EAAb;AAAA,UAAgBE,CAAC,GAAC,EAAlB;;AAAqB,WAAIrC,CAAJ,IAASd,CAAT;AAAWmD,QAAAA,CAAC,CAACrC,CAAD,CAAD,GAAK,CAAC,CAAN;AAAX;;AAAmB,WAAIA,CAAJ,IAASZ,CAAT;AAAWiD,QAAAA,CAAC,CAACrC,CAAD,CAAD,GAAK,CAAC,CAAN;AAAX;;AAAmB,WAAIA,CAAJ,IAASqC,CAAT,EAAW;AAAC,YAAIgD,CAAC,GAACnG,CAAC,CAACc,CAAD,CAAP;AAAA,YAAWsF,CAAC,GAAClG,CAAC,CAACY,CAAD,CAAd;AAAkBb,QAAAA,CAAC,CAACoE,MAAF,CAAS,QAAM8B,CAAN,IAAS,QAAMC,CAAxB,GAA2B,QAAMD,CAAN,GAAQlD,CAAC,CAACnC,CAAD,CAAD,GAAKsF,CAAb,GAAe,QAAMA,CAAN,GAAQvD,CAAC,CAAC/B,CAAD,CAAD,GAAKqF,CAAb,GAAeA,CAAC,KAAGC,CAAJ,KAAQvD,CAAC,CAAC/B,CAAD,CAAD,GAAKqF,CAAb,CAAzD;AAAyE;;AAAA,aAAM,CAACtD,CAAD,EAAGI,CAAH,CAAN;AAAY,KAA7+L,EAA8+L/C,CAAC,CAACkH,SAAF,GAAY,UAASpH,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAGD,CAAC,CAACwF,UAAF,KAAevF,CAAC,CAACuF,UAApB,EAA+B,MAAM,IAAI7C,KAAJ,CAAU,mDAAV,CAAN;;AAAqE,WAAI,IAAI7B,CAAC,GAAC,IAAIZ,CAAJ,EAAN,EAAY2C,CAAC,GAAC,IAAI3C,CAAJ,EAAd,EAAoB+C,CAAC,GAACjD,CAAC,CAAC8F,KAAF,GAAUP,GAAhC,EAAoCpC,CAAC,GAAClD,CAAC,CAAC6F,KAAF,GAAUP,GAAhD,EAAoDY,CAAC,GAAC,CAAtD,EAAwDC,CAAC,GAAC,CAA1D,EAA4DC,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA/D,EAAqEG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAA5E,EAAkF,KAAK,CAAL,KAASC,CAAT,IAAY,KAAK,CAAL,KAASC,CAAvG;AAA0G,YAAGD,CAAC,IAAEA,CAAC,CAACrB,QAAF,EAAN,EAAmBlE,CAAC,CAAC6E,MAAF,CAASU,CAAC,CAACvB,IAAX,EAAgBuB,CAAC,CAACtB,UAAlB,GAA8BlC,CAAC,CAAC6C,MAAF,CAASW,CAAC,CAACvB,IAAF,CAAOvD,MAAhB,CAA9B,EAAsD8E,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAzD,CAAnB,KAAuF,IAAGG,CAAC,IAAEA,CAAC,CAACtB,QAAF,EAAN,EAAmBlE,CAAC,CAAC4E,MAAF,CAASY,CAAC,CAACxB,IAAF,CAAOvD,MAAhB,GAAwBsB,CAAC,CAAC8C,MAAF,CAASW,CAAC,CAACxB,IAAX,EAAgBwB,CAAC,CAACvB,UAAlB,CAAxB,EAAsDuB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAzD,CAAnB,KAAsF;AAAC,cAAG,KAAK,CAAL,KAASC,CAAZ,EAAc,MAAM,IAAI1D,KAAJ,CAAU,4DAAV,CAAN;AAA8E,cAAG,KAAK,CAAL,KAAS2D,CAAZ,EAAc,MAAM,IAAI3D,KAAJ,CAAU,2DAAV,CAAN;AAA6E,cAAI4D,CAAJ;;AAAM,cAAGF,CAAC,CAACnB,QAAF,MAAcoB,CAAC,CAACpB,QAAF,EAAjB,EAA8B;AAAC,gBAAIsB,CAAC,GAACtG,CAAC,CAACiH,mBAAF,CAAsBd,CAAC,CAACtB,UAAxB,EAAmCuB,CAAC,CAACvB,UAArC,CAAN;AAAuDsB,YAAAA,CAAC,CAACxB,KAAF,GAAQyB,CAAC,CAACzB,KAAV,IAAiB0B,CAAC,GAACD,CAAC,CAACzB,KAAJ,EAAUwB,CAAC,CAACxB,KAAF,IAASyB,CAAC,CAACzB,KAArB,EAA2ByB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAA/C,IAAsDC,CAAC,CAACxB,KAAF,KAAUyB,CAAC,CAACzB,KAAZ,IAAmB0B,CAAC,GAACD,CAAC,CAACzB,KAAJ,EAAUwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAb,EAAmBG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAzC,KAAiDG,CAAC,GAACF,CAAC,CAACxB,KAAJ,EAAUyB,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACxB,KAArB,EAA2BwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA/E,CAAtD,EAA4IrF,CAAC,CAAC4E,MAAF,CAASa,CAAT,EAAWC,CAAC,CAAC,CAAD,CAAZ,CAA5I,EAA6J3D,CAAC,CAAC6C,MAAF,CAASa,CAAT,EAAWC,CAAC,CAAC,CAAD,CAAZ,CAA7J;AAA8K,WAApQ,MAAyQ,IAAGH,CAAC,CAACpB,QAAF,MAAcqB,CAAC,CAACrB,QAAF,EAAjB,EAA8BoB,CAAC,CAACxB,KAAF,GAAQyB,CAAC,CAACzB,KAAV,IAAiBwB,CAAC,CAACxB,KAAF,IAASyB,CAAC,CAACzB,KAAX,EAAiByB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAArC,IAA4CC,CAAC,CAACxB,KAAF,KAAUyB,CAAC,CAACzB,KAAZ,IAAmBwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAH,EAASG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAA/B,KAAuCE,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACxB,KAAX,EAAiBwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA3D,CAA5C,CAA9B,KAAiJ,IAAGE,CAAC,CAACpB,QAAF,MAAcqB,CAAC,CAACpB,QAAF,EAAjB,EAA8BmB,CAAC,CAACxB,KAAF,GAAQyB,CAAC,CAACzB,KAAV,IAAiB0B,CAAC,GAACD,CAAC,CAACzB,KAAJ,EAAUwB,CAAC,CAACxB,KAAF,IAASyB,CAAC,CAACzB,KAArB,EAA2ByB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAA/C,IAAsDC,CAAC,CAACxB,KAAF,KAAUyB,CAAC,CAACzB,KAAZ,IAAmB0B,CAAC,GAACD,CAAC,CAACzB,KAAJ,EAAUwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAb,EAAmBG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAzC,KAAiDG,CAAC,GAACF,CAAC,CAACxB,KAAJ,EAAUyB,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACxB,KAArB,EAA2BwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA/E,CAAtD,EAA4IrF,CAAC,CAAC8E,MAAF,CAASW,CAAT,CAA5I,CAA9B,KAA0L;AAAC,gBAAG,CAACF,CAAC,CAACnB,QAAF,EAAD,IAAe,CAACoB,CAAC,CAACrB,QAAF,EAAnB,EAAgC,MAAM,IAAItC,KAAJ,CAAU,sCAAV,CAAN;AAAwD0D,YAAAA,CAAC,CAACxB,KAAF,GAAQyB,CAAC,CAACzB,KAAV,IAAiB0B,CAAC,GAACD,CAAC,CAACzB,KAAJ,EAAUwB,CAAC,CAACxB,KAAF,IAASyB,CAAC,CAACzB,KAArB,EAA2ByB,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAA/C,IAAsDC,CAAC,CAACxB,KAAF,KAAUyB,CAAC,CAACzB,KAAZ,IAAmB0B,CAAC,GAACF,CAAC,CAACxB,KAAJ,EAAUwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAAb,EAAmBG,CAAC,GAACnD,CAAC,CAACiD,CAAC,EAAF,CAAzC,KAAiDG,CAAC,GAACF,CAAC,CAACxB,KAAJ,EAAUyB,CAAC,CAACzB,KAAF,IAASwB,CAAC,CAACxB,KAArB,EAA2BwB,CAAC,GAACpD,CAAC,CAACkD,CAAC,EAAF,CAA/E,CAAtD,EAA4ItD,CAAC,CAAC+C,MAAF,CAASW,CAAT,CAA5I;AAAwJ;AAAC;AAA3xC;;AAA2xC,aAAM,CAACzF,CAAD,EAAG+B,CAAH,CAAN;AAAY,KAAn5O,EAAo5O3C,CAAC,CAACa,SAAF,CAAYqG,SAAZ,GAAsB,UAASpH,CAAT,EAAW;AAAC,aAAOE,CAAC,CAACkH,SAAF,CAAY,IAAZ,EAAiBpH,CAAjB,CAAP;AAA2B,KAAj9O,EAAk9OE,CAAz9O;AAA29O,GAA/2P,EAA3/G,EAA62W,CAACY,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUuG,cAAV,GAAyB,YAAU;AAAC,QAAIrH,CAAC,GAACc,CAAC,CAAC0D,IAAR;;AAAa,aAASvE,CAAT,CAAWD,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,CAACD,CAAJ,EAAM,MAAM,IAAI2C,KAAJ,CAAU,qCAAmC1C,CAAC,GAAC,OAAKA,CAAN,GAAQ,EAA5C,CAAV,CAAN;AAAiE;;AAAA,aAASC,CAAT,CAAWF,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKwE,GAAL,GAASzE,CAAT,EAAW,KAAKuB,MAAL,GAAYtB,CAAC,CAACsB,MAAzB,EAAgC,KAAK+F,UAAL,GAAgBrH,CAAC,CAACqH,UAAlD,EAA6D,KAAKC,eAAL,GAAqBtH,CAAC,CAACuH,cAApF;AAAmG;;AAAA,aAAS3E,CAAT,CAAW7C,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKwE,GAAL,GAASzE,CAAT,EAAW,KAAKuB,MAAL,GAAYtB,CAAC,CAACsB,MAAzB,EAAgC,KAAK+F,UAAL,GAAgBrH,CAAC,CAACqH,UAAlD,EAA6D,KAAKG,KAAL,GAAWxH,CAAxE;AAA0E;;AAAAC,IAAAA,CAAC,CAACa,SAAF,CAAY2G,iBAAZ,GAA8B,YAAU;AAAC,aAAO,KAAKH,eAAZ;AAA4B,KAArE,EAAsE1E,CAAC,CAAC9B,SAAF,CAAY4G,YAAZ,GAAyB,UAAS3H,CAAT,EAAW;AAAC,WAAKyH,KAAL,CAAWD,cAAX,GAA0BxH,CAA1B;AAA4B,KAAvI;AAAwI,QAAIiD,CAAC,GAAC;AAACkC,MAAAA,MAAM,EAAC,kBAAU;AAAC,eAAM,CAAC,CAAP;AAAS;AAA5B,KAAN;;AAAoC,aAAShC,CAAT,CAAWnD,CAAX,EAAa;AAAC,WAAK4H,KAAL,GAAW,IAAIzB,CAAJ,CAAM,CAAN,EAAQlD,CAAR,CAAX,EAAsB,KAAK4E,cAAL,GAAoB7H,CAA1C;AAA4C;;AAAA,aAASmG,CAAT,CAAWnG,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKsB,MAAL,GAAYvB,CAAZ,EAAc,KAAKsH,UAAL,GAAgBrH,CAA9B,EAAgC,KAAKuH,cAAL,GAAoB,IAApD,EAAyD,KAAKM,IAAL,GAAU,IAAnE;AAAwE;;AAAA,WAAO3E,CAAC,CAACpC,SAAF,CAAYgH,mBAAZ,GAAgC,UAAS7H,CAAT,EAAWY,CAAX,EAAa;AAAC,WAAKkH,cAAL,CAAoB,IAAIhI,CAAJ,CAAME,CAAC,CAACuE,GAAR,EAAY,CAAZ,CAApB,EAAmC,UAASzE,CAAT,EAAW6C,CAAX,EAAa;AAAC5C,QAAAA,CAAC,CAAC,CAAC4C,CAAD,IAAI,SAAOA,CAAC,CAACiF,IAAd,CAAD;AAAqB,YAAI3E,CAAC,GAAC,IAAIgD,CAAJ,CAAMjG,CAAC,CAACqB,MAAR,EAAeT,CAAf,CAAN;;AAAwB,YAAG+B,CAAH,EAAK;AAAC5C,UAAAA,CAAC,CAACC,CAAC,CAACuE,GAAF,GAAMzE,CAAN,IAASE,CAAC,CAACuE,GAAF,GAAMzE,CAAC,GAAC6C,CAAC,CAACtB,MAApB,CAAD;AAA6B,cAAI6E,CAAC,GAAC,IAAID,CAAJ,CAAM,CAAN,EAAQlD,CAAR,CAAN;AAAiB,iBAAOmD,CAAC,CAAC0B,IAAF,GAAO,IAAI3B,CAAJ,CAAMjG,CAAC,CAACuE,GAAF,GAAMzE,CAAZ,EAAc6C,CAAC,CAACyE,UAAhB,CAAP,EAAmClB,CAAC,CAAC0B,IAAF,CAAOA,IAAP,GAAY3E,CAA/C,EAAiDA,CAAC,CAAC2E,IAAF,GAAO,IAAI3B,CAAJ,CAAMnG,CAAC,GAAC6C,CAAC,CAACtB,MAAJ,GAAWrB,CAAC,CAACuE,GAAnB,EAAuB5B,CAAC,CAACyE,UAAzB,CAAxD,EAA6FlB,CAAC,CAAC0B,IAAtG;AAA2G;;AAAA,eAAO3E,CAAP;AAAS,OAAtQ;AAAwQ,KAAtT,EAAuTA,CAAC,CAACpC,SAAF,CAAYkH,UAAZ,GAAuB,UAASjI,CAAT,EAAW;AAAC,YAAIA,CAAC,CAACuB,MAAN,IAAc,KAAKyG,cAAL,CAAoBhI,CAApB,EAAsB,UAASE,CAAT,EAAWY,CAAX,EAAa;AAACb,QAAAA,CAAC,CAAC,SAAOa,CAAR,CAAD;AAAY,YAAI+B,CAAC,GAAC,IAAIsD,CAAJ,CAAM,CAAN,EAAQlD,CAAR,CAAN;AAAA,YAAiBE,CAAC,GAACN,CAAnB;;AAAqB,aAAI7C,CAAC,CAACyE,GAAF,GAAMvE,CAAN,KAAUiD,CAAC,CAAC2E,IAAF,GAAO,IAAI3B,CAAJ,CAAMnG,CAAC,CAACyE,GAAF,GAAMvE,CAAZ,EAAcY,CAAC,CAACwG,UAAhB,CAAP,EAAmCnE,CAAC,GAACA,CAAC,CAAC2E,IAAjD,CAAJ,EAA2D9H,CAAC,CAAC0E,GAAF,KAAQxE,CAAC,GAACY,CAAC,CAACS,MAAvE;AAA+ErB,UAAAA,CAAC,IAAEY,CAAC,CAACS,MAAL,EAAYT,CAAC,GAACA,CAAC,CAACgH,IAAhB;AAA/E;;AAAoG,YAAI1B,CAAC,GAAClG,CAAC,GAACY,CAAC,CAACS,MAAJ,GAAWvB,CAAC,CAAC0E,GAAF,EAAjB;AAAyB,eAAO0B,CAAC,GAAC,CAAF,KAAMjD,CAAC,CAAC2E,IAAF,GAAO,IAAI3B,CAAJ,CAAMC,CAAN,EAAQtF,CAAC,CAACwG,UAAV,CAAb,GAAoCzE,CAAC,CAACiF,IAA7C;AAAkD,OAApP,CAAd;AAAoQ,KAA9lB,EAA+lB3E,CAAC,CAACpC,SAAF,CAAYmH,UAAZ,GAAuB,UAASlI,CAAT,EAAWE,CAAX,EAAa;AAAC,YAAIF,CAAC,CAACuB,MAAN,IAAc,KAAKyG,cAAL,CAAoBhI,CAApB,EAAsB,UAASc,CAAT,EAAW+B,CAAX,EAAa;AAAC5C,QAAAA,CAAC,CAAC,SAAO4C,CAAR,CAAD;AAAY,YAAIM,CAAC,GAAC,IAAIgD,CAAJ,CAAM,CAAN,EAAQlD,CAAR,CAAN;AAAA,YAAiBmD,CAAC,GAACjD,CAAnB;AAAA,YAAqBkD,CAAC,GAACvF,CAAvB;AAAA,YAAyBwF,CAAC,GAACtG,CAAC,CAACyE,GAAF,GAAM4B,CAAjC;;AAAmC,aAAIpG,CAAC,CAACqG,CAAC,GAACzD,CAAC,CAACtB,MAAL,CAAD,EAAc+E,CAAC,GAAC,CAAF,KAAMF,CAAC,CAAC0B,IAAF,GAAO,IAAI3B,CAAJ,CAAMG,CAAN,EAAQzD,CAAC,CAACyE,UAAV,CAAP,EAA6BjB,CAAC,IAAE,CAACD,CAAC,GAACA,CAAC,CAAC0B,IAAL,EAAWvG,MAAjD,CAAlB,EAA2E,SAAOsB,CAAP,IAAU7C,CAAC,CAAC0E,GAAF,MAAS5D,CAAC,GAAC+B,CAAC,CAACtB,MAAlG,GAA0G;AAAC,cAAIgF,CAAC,GAACzF,CAAC,GAAC+B,CAAC,CAACtB,MAAJ,GAAW8E,CAAjB;AAAmBD,UAAAA,CAAC,CAAC0B,IAAF,GAAO,IAAI3B,CAAJ,CAAMI,CAAN,EAAQrG,CAAC,CAAC2C,CAAC,CAACyE,UAAH,EAAcf,CAAd,CAAT,CAAP,EAAkCH,CAAC,GAACA,CAAC,CAAC0B,IAAtC,EAA2ChH,CAAC,IAAE+B,CAAC,CAACtB,MAAhD,EAAuDsB,CAAC,GAACA,CAAC,CAACiF,IAA3D,EAAgEzB,CAAC,GAACvF,CAAlE;AAAoE;;AAAA,YAAI0F,CAAC,GAACxG,CAAC,CAAC0E,GAAF,KAAQ2B,CAAd;AAAgB,eAAOG,CAAC,GAAC,CAAF,KAAMvG,CAAC,CAACuG,CAAC,GAAC3D,CAAC,CAACtB,MAAL,CAAD,EAAc6E,CAAC,CAAC0B,IAAF,GAAO,IAAI3B,CAAJ,CAAMK,CAAN,EAAQtG,CAAC,CAAC2C,CAAC,CAACyE,UAAH,EAAcd,CAAd,CAAT,CAArB,EAAgDH,CAAC,IAAE,CAACD,CAAC,GAACA,CAAC,CAAC0B,IAAL,EAAWvG,MAA9D,EAAqE6E,CAAC,CAAC0B,IAAF,GAAO,IAAI3B,CAAJ,CAAMrF,CAAC,GAAC+B,CAAC,CAACtB,MAAJ,GAAW8E,CAAjB,EAAmBxD,CAAC,CAACyE,UAArB,CAAlF,GAAoHnE,CAAC,CAAC2E,IAA7H;AAAkI,OAAva,CAAd;AAAub,KAA3jC,EAA4jC3E,CAAC,CAACpC,SAAF,CAAYiH,cAAZ,GAA2B,UAAShI,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAGD,CAAC,CAACyE,GAAF,GAAM,CAAT,EAAW,MAAM,IAAI9B,KAAJ,CAAU,gCAAV,CAAN;AAAkD,UAAI7B,CAAJ;AAAA,UAAMmC,CAAC,GAAC,EAAR;AAAA,UAAWE,CAAC,GAAC,EAAb;AAAA,UAAgBiD,CAAC,GAAC,KAAK+B,iBAAL,CAAuBnI,CAAvB,CAAlB;AAA4C,eAAOoG,CAAC,CAACgC,KAAT,IAAgBtH,CAAC,GAACsF,CAAC,CAAC1B,GAAF,CAAMoD,IAAR,EAAa1B,CAAC,CAAC1B,GAAF,CAAMoD,IAAN,GAAW,IAAxC,IAA8ChH,CAAC,GAACsF,CAAC,CAACiC,IAAlD;AAAuD,UAAIhC,CAAC,GAACpG,CAAC,CAACmG,CAAC,CAACkC,QAAH,EAAYlC,CAAC,CAACgC,KAAd,CAAP;AAAA,UAA4B9B,CAAC,GAAC,CAAC,CAA/B;AAAA,UAAiCC,CAAC,GAAC,CAAC,CAApC;;AAAsC,UAAGF,CAAH,EAAK;AAAC,YAAIG,CAAJ;;AAAM,aAAI,KAAK+B,8BAAL,CAAoClC,CAApC,GAAuCD,CAAC,CAACoC,IAAF,IAAQpC,CAAC,CAACoC,IAAF,CAAOlB,UAAP,CAAkBnC,MAAlB,CAAyBkB,CAAC,CAACiB,UAA3B,CAAR,IAAgDhB,CAAC,GAAC,CAAC,CAAH,EAAKD,CAAC,CAAC9E,MAAF,IAAU6E,CAAC,CAACoC,IAAF,CAAOjH,MAAtB,EAA6B6E,CAAC,CAACqC,UAAF,CAAaX,IAAb,GAAkBzB,CAA/C,EAAiDG,CAAC,GAACJ,CAAC,CAACsC,OAArG,KAA+GtC,CAAC,CAACuC,WAAF,CAAcb,IAAd,GAAmBzB,CAAnB,EAAqBG,CAAC,GAACJ,CAAC,CAACkC,QAAxI,CAA3C,EAA6LjC,CAAC,CAACyB,IAA/L;AAAqM3E,UAAAA,CAAC,CAAChB,IAAF,CAAO,IAAIU,CAAJ,CAAM2D,CAAN,EAAQH,CAAR,CAAP,GAAmBG,CAAC,IAAEH,CAAC,CAAC9E,MAAxB,EAA+B8E,CAAC,GAACA,CAAC,CAACyB,IAAnC;AAArM;;AAA6O1B,QAAAA,CAAC,CAACiC,IAAF,IAAQjC,CAAC,CAACiC,IAAF,CAAOf,UAAP,CAAkBnC,MAAlB,CAAyBkB,CAAC,CAACiB,UAA3B,CAAR,IAAgDjB,CAAC,CAAC9E,MAAF,IAAU6E,CAAC,CAACiC,IAAF,CAAO9G,MAAjB,EAAwBgF,CAAC,GAAC,CAAC,CAA3B,EAA6BF,CAAC,CAACyB,IAAF,GAAO1B,CAAC,CAACiC,IAAF,CAAOP,IAA3F,IAAiGzB,CAAC,CAACyB,IAAF,GAAOhH,CAAxG,EAA0GqC,CAAC,CAAChB,IAAF,CAAO,IAAIU,CAAJ,CAAM2D,CAAN,EAAQH,CAAR,CAAP,CAA1G;AAA6H,OAAtX,MAA2XD,CAAC,CAACoC,IAAF,IAAQpC,CAAC,CAACiC,IAAV,IAAgBjC,CAAC,CAACoC,IAAF,CAAOlB,UAAP,CAAkBnC,MAAlB,CAAyBiB,CAAC,CAACiC,IAAF,CAAOf,UAAhC,CAAhB,IAA6DhB,CAAC,GAAC,CAAC,CAAH,EAAKC,CAAC,GAAC,CAAC,CAAR,EAAUF,CAAC,GAAC,IAAIF,CAAJ,CAAMC,CAAC,CAACoC,IAAF,CAAOjH,MAAP,GAAc6E,CAAC,CAACiC,IAAF,CAAO9G,MAA3B,EAAkC6E,CAAC,CAACoC,IAAF,CAAOlB,UAAzC,CAAZ,EAAiElB,CAAC,CAACqC,UAAF,CAAaX,IAAb,GAAkBzB,CAAnF,EAAqFA,CAAC,CAACyB,IAAF,GAAO1B,CAAC,CAACiC,IAAF,CAAOP,IAAnG,EAAwG3E,CAAC,CAAChB,IAAF,CAAO,IAAIU,CAAJ,CAAMuD,CAAC,CAACkC,QAAF,GAAWlC,CAAC,CAACoC,IAAF,CAAOjH,MAAxB,EAA+B8E,CAA/B,CAAP,CAArK,IAAgND,CAAC,CAACuC,WAAF,CAAcb,IAAd,GAAmBhH,CAAnO;;AAAqOwF,MAAAA,CAAC,IAAErD,CAAC,CAACd,IAAF,CAAO,IAAIjC,CAAJ,CAAMkG,CAAC,CAACsC,OAAR,EAAgBtC,CAAC,CAACoC,IAAlB,CAAP,CAAH;;AAAmC,WAAI,IAAI/B,CAAC,GAACL,CAAC,CAACkC,QAAR,EAAiB5B,CAAC,GAACN,CAAC,CAACgC,KAAzB,EAA+B,SAAO1B,CAAtC;AAAyCzD,QAAAA,CAAC,CAACd,IAAF,CAAO,IAAIjC,CAAJ,CAAMuG,CAAN,EAAQC,CAAR,CAAP,GAAmBD,CAAC,IAAEC,CAAC,CAACnF,MAAxB,EAA+BmF,CAAC,GAACA,CAAC,CAACoB,IAAnC;AAAzC;;AAAiFvB,MAAAA,CAAC,IAAEtD,CAAC,CAACd,IAAF,CAAO,IAAIjC,CAAJ,CAAMuG,CAAN,EAAQL,CAAC,CAACiC,IAAV,CAAP,CAAH,EAA2B,KAAKR,cAAL,CAAoB5E,CAApB,EAAsBE,CAAtB,CAA3B;AAAoD,KAAnjE,EAAojEA,CAAC,CAACpC,SAAF,CAAYoH,iBAAZ,GAA8B,UAASnI,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAAC,EAAN,EAASC,CAAC,GAAC,IAAX,EAAgBY,CAAC,GAAC,KAAK8G,KAAvB,EAA6B/E,CAAC,GAAC/B,CAAC,CAACgH,IAAjC,EAAsC7E,CAAC,GAAC,CAA5C,EAA8C,SAAOJ,CAAP,IAAU7C,CAAC,CAACyE,GAAF,IAAOxB,CAAC,GAACJ,CAAC,CAACtB,MAAnE;AAA2E0B,QAAAA,CAAC,IAAEJ,CAAC,CAACtB,MAAL,EAAYrB,CAAC,GAACY,CAAd,EAAgBA,CAAC,GAAC+B,CAAlB,EAAoBA,CAAC,GAACA,CAAC,CAACiF,IAAxB;AAA3E;;AAAwG,UAAG,SAAOjF,CAAP,KAAW,MAAI7C,CAAC,CAACuB,MAAN,IAAcvB,CAAC,CAACyE,GAAF,KAAQxB,CAAjC,CAAH,EAAuC,MAAM,IAAIN,KAAJ,CAAU,sDAAV,CAAN;;AAAwE,WAAI1C,CAAC,CAACqI,QAAF,GAAWrF,CAAX,EAAa,MAAIjD,CAAC,CAACuB,MAAN,IAAcvB,CAAC,CAACyE,GAAF,KAAQxB,CAAtB,GAAwBhD,CAAC,CAACmI,KAAF,GAAQ,IAAhC,GAAqCnI,CAAC,CAACmI,KAAF,GAAQvF,CAA1D,EAA4D5C,CAAC,CAAC0I,WAAF,GAAc7H,CAA1E,EAA4EmC,CAAC,KAAGjD,CAAC,CAACyE,GAAN,IAAWxB,CAAC,GAAC,CAAb,IAAgBhD,CAAC,CAACuI,IAAF,GAAO1H,CAAP,EAASb,CAAC,CAACyI,OAAF,GAAUzF,CAAC,GAACnC,CAAC,CAACS,MAAvB,EAA8BtB,CAAC,CAACwI,UAAF,GAAavI,CAA3D,IAA8DD,CAAC,CAACuI,IAAF,GAAO,IAArJ,EAA0J,SAAO3F,CAAP,IAAU7C,CAAC,CAAC0E,GAAF,KAAQzB,CAA5K;AAA+KA,QAAAA,CAAC,IAAEJ,CAAC,CAACtB,MAAL,EAAYT,CAAC,GAAC+B,CAAd,EAAgBA,CAAC,GAACA,CAAC,CAACiF,IAApB;AAA/K;;AAAwM,UAAG9H,CAAC,CAAC0E,GAAF,KAAQzB,CAAX,EAAa,MAAM,IAAIN,KAAJ,CAAU,oDAAV,CAAN;AAAsE,aAAO,MAAI3C,CAAC,CAACuB,MAAN,IAAcvB,CAAC,CAAC0E,GAAF,OAAUzB,CAAxB,GAA0BhD,CAAC,CAACyE,GAAF,GAAM,IAAhC,GAAqCzE,CAAC,CAACyE,GAAF,GAAM5D,CAA3C,EAA6Cb,CAAC,CAACoI,IAAF,GAAOpF,CAAC,KAAGjD,CAAC,CAAC0E,GAAF,EAAJ,GAAY7B,CAAZ,GAAc,IAAlE,EAAuE5C,CAA9E;AAAgF,KAAhqF,EAAiqFkD,CAAC,CAACpC,SAAF,CAAYwH,8BAAZ,GAA2C,UAASvI,CAAT,EAAW;AAAC,UAAGA,CAAH,EAAK,KAAI,IAAIC,CAAC,GAAC,IAAN,EAAWC,CAAC,GAACF,CAAjB,EAAmBE,CAAnB;AAAsBD,QAAAA,CAAC,IAAEA,CAAC,CAACqH,UAAF,CAAanC,MAAb,CAAoBjF,CAAC,CAACoH,UAAtB,CAAH,IAAsCrH,CAAC,CAACsB,MAAF,IAAUrB,CAAC,CAACqB,MAAZ,EAAmBtB,CAAC,CAAC6H,IAAF,GAAO5H,CAAC,CAAC4H,IAAlE,IAAwE7H,CAAC,GAACC,CAA1E,EAA4EA,CAAC,GAACA,CAAC,CAAC4H,IAAhF;AAAtB;AAA2G,KAAx0F,EAAy0F3E,CAAC,CAACpC,SAAF,CAAY6H,OAAZ,GAAoB,UAAS5I,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAAC,KAAK2H,KAAL,CAAWE,IAArB,EAA0B,SAAO7H,CAAjC;AAAoCD,QAAAA,CAAC,CAACC,CAAC,CAACsB,MAAH,EAAUtB,CAAC,CAACqH,UAAZ,EAAuBrH,CAAC,CAACuH,cAAzB,CAAD,EAA0CvH,CAAC,GAACA,CAAC,CAAC6H,IAA9C;AAApC;AAAuF,KAAh8F,EAAi8F3E,CAAC,CAACpC,SAAF,CAAY8H,uBAAZ,GAAoC,UAAS7I,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAAC,CAAN,EAAQa,CAAC,GAAC,KAAK8G,KAAL,CAAWE,IAArB,EAA0BjF,CAAC,GAAC,IAAhC,EAAqC,SAAO/B,CAAP,IAAUb,CAAC,GAACa,CAAC,CAACS,MAAJ,IAAYvB,CAA3D;AAA8DC,QAAAA,CAAC,IAAEa,CAAC,CAACS,MAAL,EAAYsB,CAAC,GAAC/B,CAAd,EAAgBA,CAAC,GAACA,CAAC,CAACgH,IAApB;AAA9D;;AAAuF,UAAG,SAAOhH,CAAP,IAAUb,CAAC,KAAGD,CAAjB,EAAmB,MAAM,IAAI2C,KAAJ,CAAU,8CAAV,CAAN;AAAgE,UAAIM,CAAC,GAAC,EAAN;AAAS,aAAOhD,CAAC,KAAGD,CAAJ,IAAO6C,CAAP,IAAUI,CAAC,CAACd,IAAF,CAAO,IAAIjC,CAAJ,CAAMD,CAAC,GAAC4C,CAAC,CAACtB,MAAV,EAAiBsB,CAAjB,CAAP,CAAV,EAAsC/B,CAAC,IAAEmC,CAAC,CAACd,IAAF,CAAO,IAAIjC,CAAJ,CAAMD,CAAN,EAAQa,CAAR,CAAP,CAAzC,EAA4DmC,CAAnE;AAAqE,KAAzuG,EAA0uGE,CAAC,CAACpC,SAAF,CAAY+H,wBAAZ,GAAqC,UAAS7I,CAAT,EAAW;AAAC,UAAG,MAAIA,CAAC,CAACsB,MAAT,EAAgB,OAAM,EAAN;;AAAS,WAAI,IAAIrB,CAAC,GAAC,EAAN,EAASY,CAAC,GAAC,KAAKqH,iBAAL,CAAuBlI,CAAvB,CAAX,EAAqC4C,CAAC,GAAC/B,CAAC,CAACwH,QAAzC,EAAkDrF,CAAC,GAACnC,CAAC,CAACsH,KAA1D,EAAgE,SAAOnF,CAAP,IAAUJ,CAAC,GAAC5C,CAAC,CAACyE,GAAF,EAA5E,GAAqF;AAAC,YAAIvB,CAAC,GAAC4F,IAAI,CAACC,GAAL,CAASnG,CAAT,EAAW5C,CAAC,CAACwE,GAAb,CAAN;AAAA,YAAwB0B,CAAC,GAAC4C,IAAI,CAACE,GAAL,CAASpG,CAAC,GAACI,CAAC,CAAC1B,MAAb,EAAoBtB,CAAC,CAACyE,GAAF,EAApB,CAA1B;AAAA,YAAuD0B,CAAC,GAAC,IAAIpG,CAAJ,CAAMmD,CAAN,EAAQgD,CAAC,GAAChD,CAAV,CAAzD;AAAsEiD,QAAAA,CAAC,CAACkB,UAAF,GAAarE,CAAC,CAACqE,UAAf,EAA0BpH,CAAC,CAACiC,IAAF,CAAOiE,CAAP,CAA1B,EAAoCvD,CAAC,IAAEI,CAAC,CAAC1B,MAAzC,EAAgD0B,CAAC,GAACA,CAAC,CAAC6E,IAApD;AAAyD;;AAAA,aAAO5H,CAAP;AAAS,KAAlhH,EAAmhHiD,CAAC,CAACpC,SAAF,CAAYmI,KAAZ,GAAkB,YAAU;AAAC,WAAI,IAAIlJ,CAAC,GAAC,CAAN,EAAQE,CAAC,GAAC,KAAK0H,KAAL,CAAWE,IAArB,EAA0BhH,CAAC,GAAC,IAAhC,EAAqC,SAAOZ,CAA5C;AAA+CY,QAAAA,CAAC,IAAEb,CAAC,CAAC,CAACa,CAAC,CAACwG,UAAF,CAAanC,MAAb,CAAoBjF,CAAC,CAACoH,UAAtB,CAAF,CAAJ,EAAyCxG,CAAC,GAACZ,CAA3C,EAA6CA,CAAC,GAACA,CAAC,CAAC4H,IAAjD,EAAsD9H,CAAC,EAAvD;AAA/C;;AAAyG,aAAOA,CAAP;AAAS,KAAlqH,EAAmqHmG,CAAC,CAACpF,SAAF,CAAY+E,KAAZ,GAAkB,YAAU;AAAC,UAAI9F,CAAC,GAAC,IAAImG,CAAJ,CAAM,KAAKgD,UAAX,EAAsB,KAAK7B,UAA3B,CAAN;AAA6C,aAAOtH,CAAC,CAAC8H,IAAF,GAAO,KAAKA,IAAZ,EAAiB9H,CAAxB;AAA0B,KAAvwH,EAAwwHmD,CAA/wH;AAAixH,GAA34I,EAAt4W,EAAoxf,CAACrC,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUsI,MAAV,GAAiB,YAAU;AAAC;;AAAa,aAASpJ,CAAT,CAAWA,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKoJ,QAAL,GAAcrJ,CAAd,EAAgB,KAAKsJ,YAAL,GAAkBrJ,CAAlC;AAAoC;;AAAA,WAAOD,CAAC,CAACkG,QAAF,GAAW,UAASjG,CAAT,EAAW;AAAC,aAAO,IAAID,CAAJ,CAAMC,CAAC,CAACoJ,QAAR,EAAiBpJ,CAAC,CAACqJ,YAAnB,CAAP;AAAwC,KAA/D,EAAgEtJ,CAAC,CAACe,SAAF,CAAYoE,MAAZ,GAAmB,UAASnF,CAAT,EAAW;AAAC,aAAO,KAAKqJ,QAAL,KAAgBrJ,CAAC,CAACqJ,QAAlB,IAA4B,KAAKC,YAAL,KAAoBtJ,CAAC,CAACsJ,YAAzD;AAAsE,KAArK,EAAsKtJ,CAAC,CAACe,SAAF,CAAY+F,OAAZ,GAAoB,UAAS9G,CAAT,EAAW;AAAC,aAAOA,CAAP;AAAS,KAA/M,EAAgNA,CAAC,CAACe,SAAF,CAAYqG,SAAZ,GAAsB,UAASnH,CAAT,EAAW;AAAC,eAASC,CAAT,CAAWF,CAAX,EAAa;AAAC,aAAI,IAAIE,CAAC,GAACF,CAAN,EAAQc,CAAC,GAACb,CAAC,CAACsF,GAAZ,EAAgB1C,CAAC,GAAC,CAAlB,EAAoBI,CAAC,GAAChD,CAAC,CAACsF,GAAF,CAAMhE,MAAhC,EAAuCsB,CAAC,GAACI,CAAF,KAAMnC,CAAC,CAAC+B,CAAD,CAAD,CAAKqC,QAAL,KAAgBlF,CAAC,IAAEc,CAAC,CAAC+B,CAAD,CAAD,CAAKgC,KAAxB,GAA8B/D,CAAC,CAAC+B,CAAD,CAAD,CAAKmC,QAAL,KAAgB9E,CAAC,IAAEY,CAAC,CAAC+B,CAAD,CAAD,CAAKiC,IAAL,CAAUvD,MAA7B,IAAqCrB,CAAC,IAAE6I,IAAI,CAACE,GAAL,CAASjJ,CAAT,EAAWc,CAAC,CAAC+B,CAAD,CAAD,CAAKgC,KAAhB,CAAH,EAA0B7E,CAAC,IAAEc,CAAC,CAAC+B,CAAD,CAAD,CAAKgC,KAAvE,CAA9B,EAA4G,EAAE7E,CAAC,GAAC,CAAJ,CAAlH,CAAvC,EAAiK6C,CAAC,EAAlK;AAAqK;AAArK;;AAAsK,eAAO3C,CAAP;AAAS;;AAAA,UAAIY,CAAC,GAACZ,CAAC,CAAC,KAAKmJ,QAAN,CAAP;AAAuB,aAAO,KAAKA,QAAL,KAAgB,KAAKC,YAArB,GAAkC,IAAItJ,CAAJ,CAAMc,CAAN,EAAQA,CAAR,CAAlC,GAA6C,IAAId,CAAJ,CAAMc,CAAN,EAAQZ,CAAC,CAAC,KAAKoJ,YAAN,CAAT,CAApD;AAAkF,KAAxhB,EAAyhBtJ,CAAhiB;AAAkiB,GAA9mB,EAAryf,EAAs5gB,CAACc,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUyI,eAAV,GAA0B,UAASvJ,CAAT,EAAW;AAAC,mBAAa,OAAOwJ,QAApB,IAA8B,cAAY,OAAOC,OAAjD,IAA0D,cAAY,OAAOC,QAA7E,KAAwFF,QAAQ,GAACC,OAAO,CAAC,cAAD,CAAhB,EAAiCA,OAAO,CAAC,mBAAD,CAAhI;AAAuJ,QAAIxJ,CAAC,GAACa,CAAC,CAACwE,aAAR;AAAA,QAAsBpF,CAAC,GAACY,CAAC,CAACe,KAA1B;;AAAgC,aAASgB,CAAT,CAAW7C,CAAX,EAAaE,CAAb,EAAeY,CAAf,EAAiB;AAAC,WAAK6I,IAAL,GAAU3J,CAAV,EAAY,KAAK4J,MAAL,GAAY,CAAC,CAAzB,EAA2B,KAAKC,kBAAL,GAAwB,EAAnD,EAAsD,KAAKC,OAAL,GAAa,CAAC,CAApE,EAAsE,KAAKC,SAAL,GAAe,IAAI9J,CAAJ,EAArF,EAA2F,KAAK+J,SAAL,GAAe,CAA1G,EAA4G,KAAKC,yBAAL,GAA+B,EAA3I;AAA8I,UAAIpH,CAAC,GAAC,IAAN;;AAAW,UAAG3C,CAAH,EAAK;AAAC,aAAKgK,SAAL,CAAehK,CAAf,GAAkB,KAAKiK,QAAL,CAAcrJ,CAAd,CAAlB;AAAmC,YAAImC,CAAC,GAACjD,CAAC,CAACoK,IAAF,CAAOC,KAAP,CAAa,iBAAb,CAAN;AAAsC,aAAKC,WAAL,CAAiBrH,CAAjB,EAAmB,OAAnB,EAA2B,UAASjD,CAAT,EAAW;AAAC,WAAC,CAAD,KAAKA,CAAC,CAACuK,GAAF,EAAL,IAAc1H,CAAC,CAAC2H,mBAAF,EAAd;AAAsC,SAA7E,EAA8E,IAA9E,GAAoF,KAAKxI,EAAL,CAAQ,OAAR,EAAgB,YAAU;AAACa,UAAAA,CAAC,CAAC4H,eAAF;AAAoB,SAA/C,CAApF;AAAqI,OAApN,MAAyN,KAAKC,OAAL,GAAa1K,CAAC,CAACmC,IAAF,GAASP,GAAtB;;AAA0B+I,MAAAA,UAAU,CAAC,YAAU;AAAC9H,QAAAA,CAAC,CAAC+H,eAAF;AAAoB,OAAhC,EAAiC,CAAjC,CAAV;AAA8C;;AAAA,aAAS3H,CAAT,CAAWjD,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,CAACD,CAAJ,EAAM,MAAM,IAAI2C,KAAJ,CAAU1C,CAAC,IAAE,iBAAb,CAAN;AAAsC;;AAAAC,IAAAA,CAAC,CAAC4B,gBAAF,CAAmBe,CAAnB,EAAqB,CAAC,OAAD,EAAS,QAAT,EAAkB,WAAlB,EAA8B,KAA9B,EAAoC,OAApC,CAArB,GAAmEA,CAAC,CAAC9B,SAAF,CAAY8J,OAAZ,GAAoB,YAAU;AAAC,UAAI7K,CAAC,GAAC,IAAN;AAAW,WAAK8K,wBAAL,IAAgC,KAAKC,uBAAL,GAA8B,YAAI,CAAE,CAApE,EAAsE,KAAKnB,MAAL,IAAa,KAAKoB,QAAL,KAAgB,KAAKA,QAAL,CAAcX,KAAd,CAAoB,QAApB,EAA8BY,MAA9B,IAAuC,KAAKD,QAAL,CAAcX,KAAd,CAAoB,OAApB,EAA6BY,MAA7B,EAAvD,GAA8F,KAAKtB,IAAL,GAAU,IAAxG,EAA6G,KAAKI,SAAL,GAAe,IAA5H,EAAiI,KAAKD,OAAL,GAAa,CAAC,CAA5J,IAA+J,KAAK9H,EAAL,CAAQ,OAAR,EAAgB,YAAU;AAAChC,QAAAA,CAAC,CAAC6K,OAAF;AAAY,OAAvC,CAArO;AAA8Q,KAA3X,EAA4XhI,CAAC,CAAC9B,SAAF,CAAYmJ,SAAZ,GAAsB,UAASlK,CAAT,EAAW;AAAC,WAAKgL,QAAL,KAAgB,KAAKA,QAAL,CAAcX,KAAd,CAAoB,QAApB,EAA8BY,MAA9B,IAAuC,KAAKD,QAAL,CAAcX,KAAd,CAAoB,QAApB,EAA8Ba,YAA9B,GAA6CC,MAA7C,EAAvC,EAA6F,KAAKH,QAAL,CAAcX,KAAd,CAAoB,OAApB,EAA6BY,MAA7B,EAA7F,EAAmI,KAAKD,QAAL,CAAcX,KAAd,CAAoB,OAApB,EAA6Ba,YAA7B,GAA4CC,MAA5C,EAAnJ,GAAyM,KAAKT,OAAL,GAAa1K,CAAtN,EAAwN,KAAKgL,QAAL,GAAc,KAAKrB,IAAL,CAAUU,KAAV,CAAgB,OAAhB,EAAyBA,KAAzB,CAA+BrK,CAA/B,CAAtO,EAAwQ,KAAKwK,mBAAL,EAAxQ;AAAmS,KAAjsB,EAAksB3H,CAAC,CAAC9B,SAAF,CAAYqK,cAAZ,GAA2B,YAAU;AAAC,aAAOnI,CAAC,CAAC,KAAK2G,MAAN,EAAa,gBAAb,CAAD,EAAgC,MAAI,KAAKI,SAAhD;AAA0D,KAAlyB,EAAmyBnH,CAAC,CAAC9B,SAAF,CAAYsK,aAAZ,GAA0B,UAASrL,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIa,CAAC,GAAC,IAAN;;AAAW,UAAG,KAAK8I,MAAR,EAAe;AAAC3G,QAAAA,CAAC,CAAC,KAAK8G,SAAL,CAAetE,YAAf,KAA8BzF,CAAC,CAACwF,UAAjC,EAA4C,gDAA5C,CAAD;AAA+F,YAAI3C,CAAC,GAACsD,CAAC,CAAC,KAAK6D,SAAN,CAAP;AAAwB,aAAKsB,KAAL,GAAW;AAACC,UAAAA,EAAE,EAAC1I,CAAJ;AAAM2I,UAAAA,EAAE,EAACxL;AAAT,SAAX,EAAuB,SAASA,CAAT,CAAW6C,CAAX,EAAaI,CAAb,EAAe;AAACnC,UAAAA,CAAC,CAAC6I,IAAF,CAAOU,KAAP,CAAa,SAAb,EAAwBA,KAAxB,CAA8BxH,CAA9B,EAAiC4I,WAAjC,CAA6C,UAASzL,CAAT,EAAW;AAAC,gBAAG,SAAOA,CAAV,EAAY,OAAOiD,CAAP;AAAS,WAA9E,EAA+E,UAASE,CAAT,EAAWgD,CAAX,EAAaC,CAAb,EAAe;AAAC,gBAAGjD,CAAH,EAAK;AAAC,kBAAG,iBAAeA,CAAC,CAACuI,OAApB,EAA4B,MAAMxL,CAAC,CAACoE,GAAF,CAAM,sBAAN,EAA6BnB,CAA7B,GAAgCA,CAAtC;AAAwCrC,cAAAA,CAAC,CAACwK,KAAF,IAASxK,CAAC,CAACwK,KAAF,CAAQC,EAAR,KAAa1I,CAAtB,GAAwB8H,UAAU,CAAC,YAAU;AAAC3K,gBAAAA,CAAC,CAAC6C,CAAD,EAAGI,CAAH,CAAD;AAAO,eAAnB,EAAoB,CAApB,CAAlC,GAAyDhD,CAAC,IAAEA,CAAC,CAACkD,CAAD,EAAG,CAAC,CAAJ,CAA7D;AAAoE,aAA9I,MAAmJlD,CAAC,IAAEA,CAAC,CAAC,IAAD,EAAMkG,CAAN,CAAJ;AAAa,WAA/P,EAAgQ,CAAC,CAAjQ;AAAoQ,SAApR,CAAqRtD,CAArR,EAAuR;AAACsD,UAAAA,CAAC,EAACrF,CAAC,CAAC4J,OAAL;AAAazH,UAAAA,CAAC,EAACjD,CAAC,CAACiG,MAAF,EAAf;AAA0BjG,UAAAA,CAAC,EAACwJ,QAAQ,CAACmC,QAAT,CAAkBC,WAAlB,CAA8BC;AAA1D,SAAvR,CAAvB;AAAoX,OAA3f,MAAggB,KAAK7J,EAAL,CAAQ,OAAR,EAAgB,YAAU;AAAClB,QAAAA,CAAC,CAAC0B,OAAF,CAAU,OAAV;AAAmB,OAA9C;AAAgD,KAAt4C,EAAu4CK,CAAC,CAAC9B,SAAF,CAAY+K,UAAZ,GAAuB,UAAS9L,CAAT,EAAW;AAAC,WAAKgL,QAAL,CAAcX,KAAd,CAAoB,QAApB,EAA8B0B,GAA9B,CAAkC/L,CAAlC,GAAqC,KAAKgM,OAAL,GAAahM,CAAlD;AAAoD,KAA99C,EAA+9C6C,CAAC,CAAC9B,SAAF,CAAYoJ,QAAZ,GAAqB,UAASnK,CAAT,EAAW;AAAC,WAAKgL,QAAL,CAAcX,KAAd,CAAoB,OAApB,EAA6B0B,GAA7B,CAAiC/L,CAAjC,GAAoC,KAAKiM,MAAL,GAAYjM,CAAhD;AAAkD,KAAljD,EAAmjD6C,CAAC,CAAC9B,SAAF,CAAYmL,WAAZ,GAAwB,YAAU;AAAC,aAAO,KAAKnC,SAAZ;AAAsB,KAA5mD,EAA6mDlH,CAAC,CAAC9B,SAAF,CAAYoL,iBAAZ,GAA8B,UAASnM,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAR,IAAaD,CAAb;AAAe,aAAKgC,EAAL,CAAQ/B,CAAR,EAAUD,CAAC,CAACC,CAAD,CAAX;AAAf;AAA+B,KAAtrD,EAAurD4C,CAAC,CAAC9B,SAAF,CAAYyJ,mBAAZ,GAAgC,YAAU;AAAC,WAAKQ,QAAL,CAAcX,KAAd,CAAoB,QAApB,EAA8Ba,YAA9B,GAA6CD,MAA7C,IAAsD,KAAKD,QAAL,CAAcX,KAAd,CAAoB,OAApB,EAA6Ba,YAA7B,GAA4CD,MAA5C,EAAtD,EAA2G,KAAKa,UAAL,CAAgB,KAAKE,OAAL,IAAc,IAA9B,CAA3G,EAA+I,KAAK7B,QAAL,CAAc,KAAK8B,MAAL,IAAa,IAA3B,CAA/I;AAAgL,KAAl5D,EAAm5DpJ,CAAC,CAAC9B,SAAF,CAAY0J,eAAZ,GAA4B,YAAU;AAAC,UAAIzK,CAAC,GAAC,KAAK2J,IAAL,CAAUU,KAAV,CAAgB,OAAhB,CAAN;AAAA,UAA+BpK,CAAC,GAAC,IAAjC;;AAAsC,eAASC,CAAT,CAAWF,CAAX,EAAa;AAAC,YAAIE,CAAC,GAACF,CAAC,CAAC4B,GAAR;AAAA,YAAYd,CAAC,GAACd,CAAC,CAACuK,GAAF,EAAd;AAAsBtK,QAAAA,CAAC,CAACuC,OAAF,CAAU,QAAV,EAAmBtC,CAAnB,EAAqBY,CAAC,CAACsL,MAAvB,EAA8BtL,CAAC,CAACuL,KAAhC;AAAuC;;AAAA,WAAK/B,WAAL,CAAiBtK,CAAjB,EAAmB,aAAnB,EAAiCE,CAAjC,GAAoC,KAAKoK,WAAL,CAAiBtK,CAAjB,EAAmB,eAAnB,EAAmCE,CAAnC,CAApC,EAA0E,KAAKoK,WAAL,CAAiBtK,CAAjB,EAAmB,eAAnB,EAAmC,UAASA,CAAT,EAAW;AAAC,YAAIE,CAAC,GAACF,CAAC,CAAC4B,GAAR;AAAY3B,QAAAA,CAAC,CAACuC,OAAF,CAAU,QAAV,EAAmBtC,CAAnB,EAAqB,IAArB;AAA2B,OAAtF,CAA1E;AAAkK,KAA7sE,EAA8sE2C,CAAC,CAAC9B,SAAF,CAAY6J,eAAZ,GAA4B,YAAU;AAAC,UAAI5K,CAAC,GAAC,IAAN;AAAW,WAAK2J,IAAL,CAAUU,KAAV,CAAgB,YAAhB,EAA8BiC,IAA9B,CAAmC,OAAnC,EAA2C,UAASrM,CAAT,EAAW;AAAC,YAAG,CAACD,CAAC,CAAC8J,OAAN,EAAc;AAAC,cAAI5J,CAAC,GAACD,CAAC,CAACoK,KAAF,CAAQ,IAAR,EAAcE,GAAd,EAAN;AAAA,cAA0BzJ,CAAC,GAACb,CAAC,CAACoK,KAAF,CAAQ,GAAR,EAAaE,GAAb,EAA5B;AAAA,cAA+C1H,CAAC,GAAC5C,CAAC,CAACoK,KAAF,CAAQ,GAAR,EAAaE,GAAb,EAAjD;AAAoE,kBAAMzJ,CAAN,IAAS,QAAMZ,CAAf,IAAkB,SAAO2C,CAAzB,IAA4B7C,CAAC,CAACiK,yBAAF,CAA4B/J,CAA5B,IAA+B;AAAC+C,YAAAA,CAAC,EAACnC,CAAH;AAAKqF,YAAAA,CAAC,EAACtD;AAAP,WAA/B,EAAyC7C,CAAC,CAACuM,mBAAF,GAAsB,UAASvM,CAAT,EAAW;AAACiD,YAAAA,CAAC,CAACjD,CAAC,CAACuB,MAAF,GAAS,CAAT,IAAYvB,CAAC,CAAC,CAAD,CAAD,KAAOmD,CAAC,CAACnD,CAAC,CAACuB,MAAF,GAAS,CAAV,CAArB,CAAD;;AAAoC,iBAAI,IAAItB,CAAC,GAAC,CAAN,EAAQC,CAAC,GAAC,CAAd,EAAgBA,CAAC,GAACF,CAAC,CAACuB,MAApB,EAA2BrB,CAAC,EAA5B;AAA+BD,cAAAA,CAAC,IAAEkD,CAAC,CAAC5B,MAAL,EAAYtB,CAAC,IAAEkD,CAAC,CAACiB,OAAF,CAAUpE,CAAC,CAACE,CAAD,CAAX,CAAf;AAA/B;;AAA8D,mBAAOD,CAAP;AAAS,WAAvH,CAAwHC,CAAxH,CAA/D,EAA0LF,CAAC,CAACwM,yBAAF,CAA4BxM,CAAC,CAACuM,mBAAF,GAAsB,CAAlD,CAAtN,KAA6QvM,CAAC,CAACuM,mBAAF,GAAsB,CAAtB,EAAwBvM,CAAC,CAACwM,yBAAF,CAA4BxM,CAAC,CAACuM,mBAA9B,CAArS;AAAyV;AAAC,OAApe;AAAse,KAAtuF,EAAuuF1J,CAAC,CAAC9B,SAAF,CAAYyL,yBAAZ,GAAsC,UAASxM,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAK0J,IAAL,CAAUU,KAAV,CAAgB,SAAhB,EAA2BoC,OAA3B,CAAmC,IAAnC,EAAwCtG,CAAC,CAACnG,CAAD,CAAzC,CAAN;AAAA,UAAoDE,CAAC,GAAC,IAAtD;AAA2DyK,MAAAA,UAAU,CAAC,YAAU;AAACzK,QAAAA,CAAC,CAACoK,WAAF,CAAcrK,CAAd,EAAgB,aAAhB,EAA8B,UAASD,CAAT,EAAW;AAAC,cAAIC,CAAC,GAACD,CAAC,CAAC4B,GAAR;AAAY1B,UAAAA,CAAC,CAAC+J,yBAAF,CAA4BhK,CAA5B,IAA+BD,CAAC,CAACuK,GAAF,EAA/B,EAAuCrK,CAAC,CAAC0J,MAAF,IAAU1J,CAAC,CAACwM,+BAAF,EAAjD;AAAqF,SAA3I,GAA6IzM,CAAC,CAACqM,IAAF,CAAO,OAAP,EAAe,YAAU;AAACpM,UAAAA,CAAC,CAAC6K,uBAAF;AAA4B,SAAtD,CAA7I;AAAqM,OAAjN,EAAkN,CAAlN,CAAV;AAA+N,KAAnjG,EAAojGlI,CAAC,CAAC9B,SAAF,CAAYgK,uBAAZ,GAAoC,YAAU;AAAC9H,MAAAA,CAAC,CAAC,CAAC,KAAK2G,MAAP,EAAc,sCAAd,CAAD,EAAuD,KAAKI,SAAL,GAAe,KAAKuC,mBAA3E;;AAA+F,WAAI,IAAIvM,CAAC,GAACmG,CAAC,CAAC,KAAK6D,SAAN,CAAP,EAAwB/J,CAAC,GAAC,KAAKgK,yBAAnC,EAA6D,QAAMhK,CAAC,CAACD,CAAD,CAApE,GAAyE;AAAC,YAAIc,CAAC,GAAC,KAAK6L,cAAL,CAAoB1M,CAAC,CAACD,CAAD,CAArB,CAAN;AAAgCc,QAAAA,CAAC,GAAC,KAAKiJ,SAAL,GAAe,KAAKA,SAAL,CAAejD,OAAf,CAAuBhG,CAAC,CAAC8L,SAAzB,CAAhB,GAAoD1M,CAAC,CAACoE,GAAF,CAAM,oBAAN,EAA2B,KAAKqF,IAAL,CAAU3I,QAAV,EAA3B,EAAgDhB,CAAhD,EAAkDC,CAAC,CAACD,CAAD,CAAnD,CAArD,EAA6G,OAAOC,CAAC,CAACD,CAAD,CAArH,EAAyH,KAAKgK,SAAL,EAAzH,EAA0IhK,CAAC,GAACmG,CAAC,CAAC,KAAK6D,SAAN,CAA7I;AAA8J;;AAAA,WAAKxH,OAAL,CAAa,WAAb,EAAyB,KAAKuH,SAA9B,GAAyC,KAAKH,MAAL,GAAY,CAAC,CAAtD;AAAwD,UAAI/G,CAAC,GAAC,IAAN;AAAW8H,MAAAA,UAAU,CAAC,YAAU;AAAC9H,QAAAA,CAAC,CAACL,OAAF,CAAU,OAAV;AAAmB,OAA/B,EAAgC,CAAhC,CAAV;AAA6C,KAA1jH,EAA2jHK,CAAC,CAAC9B,SAAF,CAAY2L,+BAAZ,GAA4C,YAAU;AAAC,WAAI,IAAI1M,CAAC,GAAC,KAAKiK,yBAAX,EAAqChK,CAAC,GAACkG,CAAC,CAAC,KAAK6D,SAAN,CAAxC,EAAyDlJ,CAAC,GAAC,CAAC,CAAhE,EAAkE,QAAMd,CAAC,CAACC,CAAD,CAAzE,GAA8E;AAAC,aAAK+J,SAAL;AAAiB,YAAInH,CAAC,GAAC,KAAK8J,cAAL,CAAoB3M,CAAC,CAACC,CAAD,CAArB,CAAN;AAAgC4C,QAAAA,CAAC,IAAE,KAAKkH,SAAL,GAAe,KAAKA,SAAL,CAAejD,OAAf,CAAuBjE,CAAC,CAAC+J,SAAzB,CAAf,EAAmD,KAAKtB,KAAL,IAAYrL,CAAC,KAAG,KAAKqL,KAAL,CAAWC,EAA3B,GAA8B,KAAKD,KAAL,CAAWE,EAAX,CAAcrG,MAAd,CAAqBtC,CAAC,CAAC+J,SAAvB,KAAmC/J,CAAC,CAACgK,MAAF,KAAW,KAAKnC,OAAnD,IAA4D,KAAKV,SAAL,GAAe,GAAf,IAAoB,CAApB,IAAuB,KAAK8C,eAAL,EAAvB,EAA8C,KAAKxB,KAAL,GAAW,IAAzD,EAA8D,KAAK9I,OAAL,CAAa,KAAb,CAA1H,KAAgJ1B,CAAC,GAAC,CAAC,CAAH,EAAK,KAAK0B,OAAL,CAAa,WAAb,EAAyBK,CAAC,CAAC+J,SAA3B,CAArJ,CAA9B,GAA0N,KAAKpK,OAAL,CAAa,WAAb,EAAyBK,CAAC,CAAC+J,SAA3B,CAA/Q,IAAsT1M,CAAC,CAACoE,GAAF,CAAM,oBAAN,EAA2B,KAAKqF,IAAL,CAAU3I,QAAV,EAA3B,EAAgDf,CAAhD,EAAkDD,CAAC,CAACC,CAAD,CAAnD,CAAvT,EAA+W,OAAOD,CAAC,CAACC,CAAD,CAAvX,EAA2XA,CAAC,GAACkG,CAAC,CAAC,KAAK6D,SAAN,CAA9X;AAA+Y;;AAAAlJ,MAAAA,CAAC,KAAG,KAAKwK,KAAL,GAAW,IAAX,EAAgB,KAAK9I,OAAL,CAAa,OAAb,CAAnB,CAAD;AAA2C,KAA5qI,EAA6qIK,CAAC,CAAC9B,SAAF,CAAY4L,cAAZ,GAA2B,UAAS3M,CAAT,EAAW;AAAC,UAAG,YAAU,OAAOA,CAApB,EAAsB,OAAO,IAAP;AAAY,UAAG,YAAU,OAAOA,CAAC,CAACmG,CAAnB,IAAsB,YAAU,OAAOnG,CAAC,CAACiD,CAA5C,EAA8C,OAAO,IAAP;AAAY,UAAI/C,CAAC,GAAC,IAAN;;AAAW,UAAG;AAACA,QAAAA,CAAC,GAACD,CAAC,CAACiG,QAAF,CAAWlG,CAAC,CAACiD,CAAb,CAAF;AAAkB,OAAtB,CAAsB,OAAMjD,CAAN,EAAQ;AAAC,eAAO,IAAP;AAAY;;AAAA,aAAOE,CAAC,CAACsF,UAAF,KAAe,KAAKuE,SAAL,CAAetE,YAA9B,GAA2C,IAA3C,GAAgD;AAACoH,QAAAA,MAAM,EAAC7M,CAAC,CAACmG,CAAV;AAAYyG,QAAAA,SAAS,EAAC1M;AAAtB,OAAvD;AAAgF,KAAt7I,EAAu7I2C,CAAC,CAAC9B,SAAF,CAAY+L,eAAZ,GAA4B,YAAU;AAAC,WAAKnD,IAAL,CAAUU,KAAV,CAAgB,YAAhB,EAA8B0B,GAA9B,CAAkC;AAAC5F,QAAAA,CAAC,EAAC,KAAKuE,OAAR;AAAgBzH,QAAAA,CAAC,EAAC,KAAK8G,SAAL,CAAe9D,MAAf,EAAlB;AAA0CsF,QAAAA,EAAE,EAACpF,CAAC,CAAC,KAAK6D,SAAL,GAAe,CAAhB;AAA9C,OAAlC;AAAqG,KAAnkJ,EAAokJnH,CAAC,CAAC9B,SAAF,CAAYuJ,WAAZ,GAAwB,UAAStK,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAAC,aAAO,KAAK+I,kBAAL,CAAwB1H,IAAxB,CAA6B;AAAC4K,QAAAA,GAAG,EAAC/M,CAAL;AAAOgN,QAAAA,SAAS,EAAC/M,CAAjB;AAAmBmC,QAAAA,QAAQ,EAAClC,CAA5B;AAA8BmC,QAAAA,OAAO,EAACvB;AAAtC,OAA7B,GAAuEd,CAAC,CAACgC,EAAF,CAAK/B,CAAL,EAAOC,CAAP,EAASY,CAAT,CAAvE,EAAmFZ,CAA1F;AAA4F,KAA1sJ,EAA2sJ2C,CAAC,CAAC9B,SAAF,CAAYkM,YAAZ,GAAyB,UAASjN,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAACd,MAAAA,CAAC,CAACsC,GAAF,CAAMrC,CAAN,EAAQC,CAAR,EAAUY,CAAV;;AAAa,WAAI,IAAI+B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKgH,kBAAL,CAAwBtI,MAAtC,EAA6CsB,CAAC,EAA9C,EAAiD;AAAC,YAAII,CAAC,GAAC,KAAK4G,kBAAL,CAAwBhH,CAAxB,CAAN;;AAAiC,YAAGI,CAAC,CAAC8J,GAAF,KAAQ/M,CAAR,IAAWiD,CAAC,CAAC+J,SAAF,KAAc/M,CAAzB,IAA4BgD,CAAC,CAACb,QAAF,KAAalC,CAAzC,IAA4C+C,CAAC,CAACZ,OAAF,KAAYvB,CAA3D,EAA6D;AAAC,eAAK+I,kBAAL,CAAwBtH,MAAxB,CAA+BM,CAA/B,EAAiC,CAAjC;AAAoC;AAAM;AAAC;AAAC,KAAh8J,EAAi8JA,CAAC,CAAC9B,SAAF,CAAY+J,wBAAZ,GAAqC,YAAU;AAAC,WAAI,IAAI9K,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK6J,kBAAL,CAAwBtI,MAAtC,EAA6CvB,CAAC,EAA9C,EAAiD;AAAC,YAAIC,CAAC,GAAC,KAAK4J,kBAAL,CAAwB7J,CAAxB,CAAN;AAAiCC,QAAAA,CAAC,CAAC8M,GAAF,CAAMzK,GAAN,CAAUrC,CAAC,CAAC+M,SAAZ,EAAsB/M,CAAC,CAACmC,QAAxB,EAAiCnC,CAAC,CAACoC,OAAnC;AAA4C;;AAAA,WAAKwH,kBAAL,GAAwB,EAAxB;AAA2B,KAA3oK;AAA4oK,QAAI1G,CAAC,GAAC,gEAAN;;AAAuE,aAASgD,CAAT,CAAWnG,CAAX,EAAa;AAAC,UAAG,MAAIA,CAAP,EAAS,OAAM,IAAN;;AAAW,WAAI,IAAIC,CAAC,GAAC,EAAV,EAAaD,CAAC,GAAC,CAAf,GAAkB;AAAC,YAAIE,CAAC,GAACF,CAAC,GAACmD,CAAC,CAAC5B,MAAV;AAAiBtB,QAAAA,CAAC,GAACkD,CAAC,CAACjD,CAAD,CAAD,GAAKD,CAAP,EAASD,CAAC,IAAEE,CAAZ,EAAcF,CAAC,IAAEmD,CAAC,CAAC5B,MAAnB;AAA0B;;AAAA,aAAO4B,CAAC,CAAClD,CAAC,CAACsB,MAAF,GAAS,CAAV,CAAD,GAActB,CAArB;AAAuB;;AAAA,WAAO4C,CAAP;AAAS,GAA9hM,EAAh7gB,EAAi9sB,CAAC/B,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUoM,eAAV,GAA0B,UAASlN,CAAT,EAAW;AAAC,QAAIC,CAAC,GAACa,CAAC,CAACe,KAAR;;AAAc,aAAS3B,CAAT,CAAWF,CAAX,EAAa;AAAC,WAAKmN,gBAAL,GAAsBnN,CAAtB,EAAwB,KAAKoN,QAAL,GAAc,KAAKC,YAAL,EAAtC;AAA0D;;AAAA,WAAOpN,CAAC,CAAC6B,gBAAF,CAAmB5B,CAAnB,EAAqB,CAAC,MAAD,EAAQ,QAAR,EAAiB,WAAjB,EAA6B,QAA7B,EAAsC,MAAtC,EAA6C,WAA7C,EAAyD,OAAzD,EAAiE,MAAjE,EAAwE,QAAxE,EAAiF,OAAjF,EAAyF,gBAAzF,EAA0G,cAA1G,EAAyH,WAAzH,EAAqI,iBAArI,EAAuJ,iBAAvJ,EAAyK,MAAzK,EAAgL,MAAhL,EAAuL,cAAvL,CAArB,GAA6NA,CAAC,CAACa,SAAF,CAAYuM,OAAZ,GAAoB,YAAU;AAAC,aAAO,KAAKF,QAAZ;AAAqB,KAAjR,EAAkRlN,CAAC,CAACa,SAAF,CAAYwM,WAAZ,GAAwB,UAASvN,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAIY,CAAC,GAAC,IAAN;AAAWZ,MAAAA,CAAC,GAACA,CAAC,IAAEF,CAAL;AAAO,UAAI6C,CAAC,GAAC5C,CAAC,CAAC2C,GAAF,CAAM,GAAN,EAAU,CAAC3C,CAAC,CAAC2C,GAAF,CAAM,MAAN,EAAa,EAAb,EAAgB;AAAC4K,QAAAA,KAAK,EAAC,gBAActN;AAArB,OAAhB,CAAD,CAAV,EAAqD;AAACsN,QAAAA,KAAK,EAAC;AAAP,OAArD,CAAN;AAAkF,aAAOvN,CAAC,CAAC+B,EAAF,CAAKa,CAAL,EAAO,OAAP,EAAe5C,CAAC,CAAC+D,YAAF,CAAe,YAAU;AAAClD,QAAAA,CAAC,CAAC0B,OAAF,CAAUxC,CAAV;AAAa,OAAvC,CAAf,GAAyD6C,CAAhE;AAAkE,KAA9d,EAA+d3C,CAAC,CAACa,SAAF,CAAYsM,YAAZ,GAAyB,YAAU;AAAC,UAAIrN,CAAC,GAAC,KAAKyN,iBAAL,EAAN;AAAA,UAA+BvN,CAAC,GAAC,KAAKwN,qBAAL,EAAjC;AAAA,UAA8D5M,CAAC,GAAC,KAAK6M,kBAAL,EAAhE;AAAA,UAA0F9K,CAAC,GAAC,CAAC5C,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC5C,CAAD,CAAZ,EAAgB;AAACwN,QAAAA,KAAK,EAAC;AAAP,OAAhB,CAAD,EAA8CvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC1C,CAAD,CAAZ,EAAgB;AAACsN,QAAAA,KAAK,EAAC;AAAP,OAAhB,CAA9C,EAA2FvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC9B,CAAD,CAAZ,EAAgB;AAAC0M,QAAAA,KAAK,EAAC;AAAP,OAAhB,CAA3F,EAAwIvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC,KAAK2K,WAAL,CAAiB,MAAjB,CAAD,EAA0B,KAAKA,WAAL,CAAiB,QAAjB,CAA1B,EAAqD,KAAKA,WAAL,CAAiB,WAAjB,CAArD,EAAmF,KAAKA,WAAL,CAAiB,QAAjB,EAA0B,eAA1B,CAAnF,CAAZ,EAA2I;AAACC,QAAAA,KAAK,EAAC;AAAP,OAA3I,CAAxI,EAAgTvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC,KAAK2K,WAAL,CAAiB,gBAAjB,EAAkC,QAAlC,CAAD,EAA6C,KAAKA,WAAL,CAAiB,cAAjB,EAAgC,eAAhC,CAA7C,EAA8F,KAAKA,WAAL,CAAiB,WAAjB,EAA6B,MAA7B,CAA9F,CAAZ,EAAgJ;AAACC,QAAAA,KAAK,EAAC;AAAP,OAAhJ,CAAhT,EAA6dvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC,KAAK2K,WAAL,CAAiB,iBAAjB,CAAD,EAAqC,KAAKA,WAAL,CAAiB,iBAAjB,CAArC,CAAZ,EAAsF;AAACC,QAAAA,KAAK,EAAC;AAAP,OAAtF,CAA7d,EAAglBvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC,KAAK2K,WAAL,CAAiB,MAAjB,EAAwB,gBAAxB,CAAD,EAA2C,KAAKA,WAAL,CAAiB,QAAjB,EAA0B,kBAA1B,CAA3C,EAAyF,KAAKA,WAAL,CAAiB,OAAjB,EAAyB,iBAAzB,CAAzF,CAAZ,EAAkJ;AAACC,QAAAA,KAAK,EAAC;AAAP,OAAlJ,CAAhlB,EAA+vBvN,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC,KAAK2K,WAAL,CAAiB,MAAjB,CAAD,EAA0B,KAAKA,WAAL,CAAiB,MAAjB,CAA1B,CAAZ,EAAgE;AAACC,QAAAA,KAAK,EAAC;AAAP,OAAhE,CAA/vB,CAA5F;AAAy7B,WAAKL,gBAAL,IAAuBtK,CAAC,CAACV,IAAF,CAAOlC,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,CAAC,KAAK2K,WAAL,CAAiB,cAAjB,CAAD,CAAZ,EAA+C;AAACC,QAAAA,KAAK,EAAC;AAAP,OAA/C,CAAP,CAAvB;AAA2G,UAAIvK,CAAC,GAAChD,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAYC,CAAZ,EAAc;AAAC2K,QAAAA,KAAK,EAAC;AAAP,OAAd,CAAN;AAAA,UAAuDrK,CAAC,GAAClD,CAAC,CAAC2C,GAAF,CAAM,KAAN,EAAY,IAAZ,EAAiB;AAAC4K,QAAAA,KAAK,EAAC;AAAP,OAAjB,CAAzD;AAAqG,aAAOrK,CAAC,CAACD,WAAF,CAAcD,CAAd,GAAiBE,CAAxB;AAA0B,KAAtqD,EAAuqDjD,CAAC,CAACa,SAAF,CAAY0M,iBAAZ,GAA8B,YAAU;AAAC,WAAI,IAAIzN,CAAC,GAAC,CAAC,OAAD,EAAS,eAAT,EAAyB,aAAzB,EAAuC,QAAvC,EAAgD,iBAAhD,EAAkE,SAAlE,CAAN,EAAmFE,CAAC,GAAC,EAArF,EAAwFY,CAAC,GAAC,CAA9F,EAAgGA,CAAC,GAACd,CAAC,CAACuB,MAApG,EAA2GT,CAAC,EAA5G,EAA+G;AAAC,YAAI+B,CAAC,GAAC5C,CAAC,CAAC2C,GAAF,CAAM,MAAN,EAAa5C,CAAC,CAACc,CAAD,CAAd,CAAN;AAAyB+B,QAAAA,CAAC,CAACO,YAAF,CAAe,OAAf,EAAuB,iBAAepD,CAAC,CAACc,CAAD,CAAvC,GAA4CZ,CAAC,CAACiC,IAAF,CAAO;AAACyL,UAAAA,OAAO,EAAC/K,CAAT;AAAWgL,UAAAA,KAAK,EAAC7N,CAAC,CAACc,CAAD;AAAlB,SAAP,CAA5C;AAA2E;;AAAA,aAAO,KAAKgN,aAAL,CAAmB,MAAnB,EAA0B,MAA1B,EAAiC5N,CAAjC,CAAP;AAA2C,KAA/8D,EAAg9DA,CAAC,CAACa,SAAF,CAAY2M,qBAAZ,GAAkC,YAAU;AAAC,WAAI,IAAI1N,CAAC,GAAC,CAAC,CAAD,EAAG,EAAH,EAAM,EAAN,EAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,EAAkB,EAAlB,EAAqB,EAArB,CAAN,EAA+BE,CAAC,GAAC,EAAjC,EAAoCY,CAAC,GAAC,CAA1C,EAA4CA,CAAC,GAACd,CAAC,CAACuB,MAAhD,EAAuDT,CAAC,EAAxD,EAA2D;AAAC,YAAI+B,CAAC,GAAC5C,CAAC,CAAC2C,GAAF,CAAM,MAAN,EAAa5C,CAAC,CAACc,CAAD,CAAD,CAAKE,QAAL,EAAb,CAAN;AAAoC6B,QAAAA,CAAC,CAACO,YAAF,CAAe,OAAf,EAAuB,eAAapD,CAAC,CAACc,CAAD,CAAd,GAAkB,kBAAlB,IAAsCd,CAAC,CAACc,CAAD,CAAD,GAAK,CAA3C,IAA8C,KAArE,GAA4EZ,CAAC,CAACiC,IAAF,CAAO;AAACyL,UAAAA,OAAO,EAAC/K,CAAT;AAAWgL,UAAAA,KAAK,EAAC7N,CAAC,CAACc,CAAD;AAAlB,SAAP,CAA5E;AAA2G;;AAAA,aAAO,KAAKgN,aAAL,CAAmB,MAAnB,EAA0B,WAA1B,EAAsC5N,CAAtC,EAAwC,IAAxC,CAAP;AAAqD,KAA7vE,EAA8vEA,CAAC,CAACa,SAAF,CAAY4M,kBAAZ,GAA+B,YAAU;AAAC,WAAI,IAAI3N,CAAC,GAAC,CAAC,OAAD,EAAS,KAAT,EAAe,OAAf,EAAuB,MAAvB,EAA8B,QAA9B,EAAuC,MAAvC,EAA8C,SAA9C,EAAwD,MAAxD,CAAN,EAAsEE,CAAC,GAAC,EAAxE,EAA2EY,CAAC,GAAC,CAAjF,EAAmFA,CAAC,GAACd,CAAC,CAACuB,MAAvF,EAA8FT,CAAC,EAA/F,EAAkG;AAAC,YAAI+B,CAAC,GAAC5C,CAAC,CAAC2C,GAAF,CAAM,KAAN,CAAN;AAAmBC,QAAAA,CAAC,CAACkL,SAAF,GAAY,6BAAZ,EAA0ClL,CAAC,CAACO,YAAF,CAAe,OAAf,EAAuB,sBAAoBpD,CAAC,CAACc,CAAD,CAA5C,CAA1C,EAA2FZ,CAAC,CAACiC,IAAF,CAAO;AAACyL,UAAAA,OAAO,EAAC/K,CAAT;AAAWgL,UAAAA,KAAK,EAAC7N,CAAC,CAACc,CAAD;AAAlB,SAAP,CAA3F;AAA0H;;AAAA,aAAO,KAAKgN,aAAL,CAAmB,OAAnB,EAA2B,OAA3B,EAAmC5N,CAAnC,CAAP;AAA6C,KAArkF,EAAskFA,CAAC,CAACa,SAAF,CAAY+M,aAAZ,GAA0B,UAAS9N,CAAT,EAAWE,CAAX,EAAaY,CAAb,EAAe+B,CAAf,EAAiB;AAACA,MAAAA,CAAC,GAACA,CAAC,IAAE,EAAL;AAAQ,UAAII,CAAC,GAAC,IAAN;AAAA,UAAWE,CAAC,GAAClD,CAAC,CAAC2C,GAAF,CAAM,GAAN,EAAU5C,CAAC,GAAC,IAAZ,EAAiB;AAACwN,QAAAA,KAAK,EAAC;AAAP,OAAjB,CAAb;AAAA,UAAsErH,CAAC,GAAClG,CAAC,CAAC2C,GAAF,CAAM,IAAN,EAAW,EAAX,EAAc;AAAC4K,QAAAA,KAAK,EAAC;AAAP,OAAd,CAAxE;AAAuHrK,MAAAA,CAAC,CAACD,WAAF,CAAciD,CAAd;AAAiB,UAAIC,CAAC,GAAC,CAAC,CAAP;AAAS,UAAIC,CAAC,GAAC,CAAC,CAAP;;AAAS,eAASC,CAAT,GAAY;AAACF,QAAAA,CAAC,KAAGD,CAAC,CAAC6H,KAAF,CAAQC,OAAR,GAAgB,EAAhB,EAAmBhO,CAAC,CAACqC,GAAF,CAAMQ,QAAN,EAAe,OAAf,EAAuBwD,CAAvB,EAAyB,CAAC,CAA1B,CAAnB,EAAgDF,CAAC,GAAC,CAAC,CAAtD,CAAD,EAA0DC,CAAC,GAAC,CAAC,CAA7D,EAA+DsE,UAAU,CAAC,YAAU;AAACtE,UAAAA,CAAC,GAAC,CAAC,CAAH;AAAK,SAAjB,EAAkB,CAAlB,CAAzE;AAA8F;;AAAA,eAASE,CAAT,CAAWvG,CAAX,EAAac,CAAb,EAAe;AAAC,oBAAU,OAAOd,CAAjB,KAAqBA,CAAC,GAAC8C,QAAQ,CAACQ,cAAT,CAAwB4K,MAAM,CAAClO,CAAD,CAA9B,CAAvB;AAA2D,YAAImD,CAAC,GAAClD,CAAC,CAAC2C,GAAF,CAAM,GAAN,EAAU,CAAC5C,CAAD,CAAV,CAAN;AAAqBC,QAAAA,CAAC,CAAC+B,EAAF,CAAKmB,CAAL,EAAO,OAAP,EAAelD,CAAC,CAAC+D,YAAF,CAAe,YAAU;AAACsC,UAAAA,CAAC,IAAGrD,CAAC,CAACT,OAAF,CAAUtC,CAAV,EAAYY,CAAC,GAAC+B,CAAd,CAAJ;AAAqB,SAA/C,CAAf,GAAiEsD,CAAC,CAACjD,WAAF,CAAcC,CAAd,CAAjE;AAAkF;;AAAA,WAAI,IAAIqD,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC1F,CAAC,CAACS,MAAhB,EAAuBiF,CAAC,EAAxB,EAA2B;AAACD,QAAAA,CAAC,CAACzF,CAAC,CAAC0F,CAAD,CAAD,CAAKoH,OAAN,EAAc9M,CAAC,CAAC0F,CAAD,CAAD,CAAKqH,KAAnB,CAAD;AAA2B;;AAAA,aAAO5N,CAAC,CAAC+B,EAAF,CAAKmB,CAAL,EAAO,OAAP,EAAelD,CAAC,CAAC+D,YAAF,CAAe,YAAU;AAACqC,QAAAA,CAAC,IAAED,CAAH,KAAOD,CAAC,CAAC6H,KAAF,CAAQC,OAAR,GAAgB,OAAhB,EAAwBhO,CAAC,CAAC+B,EAAF,CAAKc,QAAL,EAAc,OAAd,EAAsBwD,CAAtB,EAAwB,CAAC,CAAzB,CAAxB,EAAoDF,CAAC,GAAC,CAAC,CAA9D;AAAiE,OAA3F,CAAf,GAA6GjD,CAApH;AAAsH,KAA9tG,EAA+tGjD,CAAtuG;AAAwuG,GAA10G,EAA3+sB,EAAwzzB,CAACY,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUqN,gBAAV,GAA2B,UAASnO,CAAT,EAAW;AAAC;;AAAa,aAASC,CAAT,CAAWD,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKmO,OAAL,GAAapO,CAAb,EAAe,KAAKqO,IAAL,GAAUpO,CAAzB;AAA2B;;AAAA,aAASC,CAAT,CAAWF,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAI,IAAIC,CAAR,IAAaF,CAAb;AAAeA,QAAAA,CAAC,CAACsO,cAAF,CAAiBpO,CAAjB,MAAsBD,CAAC,CAACC,CAAD,CAAD,GAAKF,CAAC,CAACE,CAAD,CAA5B;AAAf;AAAgD;;AAAA,aAASY,CAAT,CAAWd,CAAX,EAAaC,CAAb,EAAe;AAAC,aAAOD,CAAC,IAAE,YAAU,OAAOA,CAApB,IAAuB,cAAY,OAAOA,CAAC,CAACoH,SAA5C,GAAsDpH,CAAC,CAACoH,SAAF,CAAYnH,CAAZ,CAAtD,GAAqED,CAA5E;AAA8E;;AAAA,WAAOC,CAAC,CAACc,SAAF,CAAY0B,KAAZ,GAAkB,YAAU;AAAC,aAAO,KAAK2L,OAAL,CAAa3L,KAAb,CAAmBA,KAAnB,CAAyB,KAAK2L,OAA9B,EAAsC1L,SAAtC,CAAP;AAAwD,KAArF,EAAsFzC,CAAC,CAACc,SAAF,CAAY8F,MAAZ,GAAmB,YAAU;AAAC,UAAI7G,CAAC,GAAC,KAAKqO,IAAX;AAAgB,aAAO,IAAIpO,CAAJ,CAAM,KAAKmO,OAAL,CAAavH,MAAb,CAAoBpE,KAApB,CAA0B,KAAK2L,OAA/B,EAAuC1L,SAAvC,CAAN,EAAwD1C,CAAC,IAAE,YAAU,OAAOA,CAApB,IAAuB,cAAY,OAAOA,CAAC,CAAC6G,MAA5C,GAAmD7G,CAAC,CAAC6G,MAAF,CAASpE,KAAT,CAAezC,CAAf,EAAiB0C,SAAjB,CAAnD,GAA+E1C,CAAvI,CAAP;AAAiJ,KAArR,EAAsRC,CAAC,CAACc,SAAF,CAAY+F,OAAZ,GAAoB,UAAS9G,CAAT,EAAW;AAAC,aAAO,IAAIC,CAAJ,CAAM,KAAKmO,OAAL,CAAatH,OAAb,CAAqB9G,CAAC,CAACoO,OAAvB,CAAN,EAAsC,UAASpO,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAGD,CAAC,IAAE,YAAU,OAAOA,CAAvB,EAAyB;AAAC,cAAG,cAAY,OAAOA,CAAC,CAAC8G,OAAxB,EAAgC,OAAO9G,CAAC,CAAC8G,OAAF,CAAU7G,CAAV,CAAP;AAAoB,cAAIa,CAAC,GAAC,EAAN;AAAS,iBAAOZ,CAAC,CAACF,CAAD,EAAGc,CAAH,CAAD,EAAOZ,CAAC,CAACD,CAAD,EAAGa,CAAH,CAAR,EAAcA,CAArB;AAAuB;;AAAA,eAAOb,CAAP;AAAS,OAArI,CAAsI,KAAKoO,IAA3I,EAAgJrO,CAAC,CAACqO,IAAlJ,CAAtC,CAAP;AAAsM,KAA5f,EAA6fpO,CAAC,CAACmH,SAAF,GAAY,UAASpH,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAI2C,CAAC,GAAC7C,CAAC,CAACoO,OAAF,CAAUhH,SAAV,CAAoBlH,CAAC,CAACkO,OAAtB,CAAN;AAAqC,aAAM,CAAC,IAAInO,CAAJ,CAAM4C,CAAC,CAAC,CAAD,CAAP,EAAW/B,CAAC,CAACd,CAAC,CAACqO,IAAH,EAAQnO,CAAC,CAACkO,OAAV,CAAZ,CAAD,EAAiC,IAAInO,CAAJ,CAAM4C,CAAC,CAAC,CAAD,CAAP,EAAW/B,CAAC,CAACZ,CAAC,CAACmO,IAAH,EAAQrO,CAAC,CAACoO,OAAV,CAAZ,CAAjC,CAAN;AAAwE,KAApoB,EAAqoBnO,CAAC,CAACc,SAAF,CAAYqG,SAAZ,GAAsB,UAASpH,CAAT,EAAW;AAAC,aAAOC,CAAC,CAACmH,SAAF,CAAY,IAAZ,EAAiBpH,CAAjB,CAAP;AAA2B,KAAlsB,EAAmsBC,CAA1sB;AAA4sB,GAA96B,EAAn1zB,EAAow1B,CAACa,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUyN,WAAV,GAAsB,YAAU;AAAC;;AAAa,QAAIvO,CAAC,GAAC,QAAN;;AAAe,aAASC,CAAT,CAAWA,CAAX,EAAa;AAAC,WAAKuO,QAAL,GAAcvO,CAAC,IAAE,EAAjB,EAAoB,KAAKwO,KAAL,GAAWzO,CAA/B,EAAiC,KAAK0O,WAAL,GAAiB,CAAC,CAAnD,EAAqD,KAAKC,SAAL,GAAe,EAApE,EAAuE,KAAKC,SAAL,GAAe,EAAtF;AAAyF;;AAAA,aAAS1O,CAAT,CAAWF,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAI,IAAIC,CAAC,GAAC,EAAN,EAASY,CAAC,GAACb,CAAC,CAACkB,WAAb,EAAyB0B,CAAC,GAAC7C,CAAC,CAACuB,MAAF,GAAS,CAAxC,EAA0CsB,CAAC,IAAE,CAA7C,EAA+CA,CAAC,EAAhD,EAAmD;AAAC,YAAII,CAAC,GAACnC,CAAC,CAACsG,SAAF,CAAYpH,CAAC,CAAC6C,CAAD,CAAb,EAAiB5C,CAAjB,CAAN;AAA0B,sBAAY,OAAOgD,CAAC,CAAC,CAAD,CAAD,CAAK4C,MAAxB,IAAgC5C,CAAC,CAAC,CAAD,CAAD,CAAK4C,MAAL,EAAhC,IAA+C3F,CAAC,CAACiC,IAAF,CAAOc,CAAC,CAAC,CAAD,CAAR,CAA/C,EAA4DhD,CAAC,GAACgD,CAAC,CAAC,CAAD,CAA/D;AAAmE;;AAAA,aAAO/C,CAAC,CAAC2O,OAAF,EAAP;AAAmB;;AAAA,WAAO5O,CAAC,CAACc,SAAF,CAAY+N,GAAZ,GAAgB,UAAS9O,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,cAAY,KAAKwO,KAApB,EAA0B,KAAKG,SAAL,CAAezM,IAAf,CAAoBnC,CAApB,GAAuB,KAAK0O,WAAL,GAAiB,CAAC,CAAzC,CAA1B,KAA0E,IAAG,cAAY,KAAKD,KAApB,EAA0B,KAAKE,SAAL,CAAexM,IAAf,CAAoBnC,CAApB,GAAuB,KAAK0O,WAAL,GAAiB,CAAC,CAAzC,CAA1B,KAAyE;AAAC,YAAIxO,CAAC,GAAC,KAAKyO,SAAX;AAAqB,SAAC,KAAKD,WAAN,IAAmBzO,CAAnB,IAAsBC,CAAC,CAACqB,MAAF,GAAS,CAA/B,GAAiCrB,CAAC,CAACiC,IAAF,CAAOnC,CAAC,CAAC8G,OAAF,CAAU5G,CAAC,CAAC6O,GAAF,EAAV,CAAP,CAAjC,IAA6D7O,CAAC,CAACiC,IAAF,CAAOnC,CAAP,GAAUE,CAAC,CAACqB,MAAF,GAAS,KAAKiN,QAAd,IAAwBtO,CAAC,CAAC8O,KAAF,EAA/F,GAA0G,KAAKN,WAAL,GAAiB,CAAC,CAA5H,EAA8H,KAAKE,SAAL,GAAe,EAA7I;AAAgJ;AAAC,KAAxV,EAAyV3O,CAAC,CAACc,SAAF,CAAYqG,SAAZ,GAAsB,UAASpH,CAAT,EAAW;AAAC,WAAK2O,SAAL,GAAezO,CAAC,CAAC,KAAKyO,SAAN,EAAgB3O,CAAhB,CAAhB,EAAmC,KAAK4O,SAAL,GAAe1O,CAAC,CAAC,KAAK0O,SAAN,EAAgB5O,CAAhB,CAAnD;AAAsE,KAAjc,EAAkcC,CAAC,CAACc,SAAF,CAAYkO,WAAZ,GAAwB,UAAShP,CAAT,EAAW;AAAC,UAAG,KAAKwO,KAAL,GAAW,SAAX,EAAqB,MAAI,KAAKE,SAAL,CAAepN,MAA3C,EAAkD,MAAM,IAAIoB,KAAJ,CAAU,mBAAV,CAAN;AAAqC1C,MAAAA,CAAC,CAAC,KAAK0O,SAAL,CAAeI,GAAf,EAAD,CAAD,EAAwB,KAAKN,KAAL,GAAWzO,CAAnC;AAAqC,KAAlmB,EAAmmBC,CAAC,CAACc,SAAF,CAAYmO,WAAZ,GAAwB,UAASjP,CAAT,EAAW;AAAC,UAAG,KAAKwO,KAAL,GAAW,SAAX,EAAqB,MAAI,KAAKG,SAAL,CAAerN,MAA3C,EAAkD,MAAM,IAAIoB,KAAJ,CAAU,mBAAV,CAAN;AAAqC1C,MAAAA,CAAC,CAAC,KAAK2O,SAAL,CAAeG,GAAf,EAAD,CAAD,EAAwB,KAAKN,KAAL,GAAWzO,CAAnC;AAAqC,KAAnwB,EAAowBC,CAAC,CAACc,SAAF,CAAYoO,OAAZ,GAAoB,YAAU;AAAC,aAAO,MAAI,KAAKR,SAAL,CAAepN,MAA1B;AAAiC,KAAp0B,EAAq0BtB,CAAC,CAACc,SAAF,CAAYqO,OAAZ,GAAoB,YAAU;AAAC,aAAO,MAAI,KAAKR,SAAL,CAAerN,MAA1B;AAAiC,KAAr4B,EAAs4BtB,CAAC,CAACc,SAAF,CAAYsO,SAAZ,GAAsB,YAAU;AAAC,aAAM,cAAY,KAAKZ,KAAvB;AAA6B,KAAp8B,EAAq8BxO,CAAC,CAACc,SAAF,CAAYuO,SAAZ,GAAsB,YAAU;AAAC,aAAM,cAAY,KAAKb,KAAvB;AAA6B,KAAngC,EAAogCxO,CAA3gC;AAA6gC,GAA/0C,EAA1x1B,EAA4m4B,CAACa,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUyO,MAAV,GAAiB,YAAU;AAAC;;AAAa,aAASvP,CAAT,GAAY;AAAC,WAAKyO,KAAL,GAAWvO,CAAX;AAAa;;AAAA,aAASD,CAAT,GAAY,CAAE;;AAAAD,IAAAA,CAAC,CAACe,SAAF,CAAYyO,QAAZ,GAAqB,UAASxP,CAAT,EAAW;AAAC,WAAKyO,KAAL,GAAWzO,CAAX;AAAa,KAA9C,EAA+CA,CAAC,CAACe,SAAF,CAAY0O,WAAZ,GAAwB,UAASzP,CAAT,EAAW;AAAC,WAAKwP,QAAL,CAAc,KAAKf,KAAL,CAAWgB,WAAX,CAAuB,IAAvB,EAA4BzP,CAA5B,CAAd;AAA8C,KAAjI,EAAkIA,CAAC,CAACe,SAAF,CAAY2O,WAAZ,GAAwB,UAAS1P,CAAT,EAAW;AAAC,WAAKwP,QAAL,CAAc,KAAKf,KAAL,CAAWiB,WAAX,CAAuB,IAAvB,EAA4B1P,CAA5B,CAAd;AAA8C,KAApN,EAAqNA,CAAC,CAACe,SAAF,CAAY4O,SAAZ,GAAsB,YAAU;AAAC,WAAKH,QAAL,CAAc,KAAKf,KAAL,CAAWkB,SAAX,CAAqB,IAArB,CAAd;AAA0C,KAAhS,EAAiS3P,CAAC,CAACe,SAAF,CAAY6O,WAAZ,GAAwB,YAAU;AAAC,WAAKJ,QAAL,CAAc,KAAKf,KAAL,CAAWmB,WAAX,CAAuB,IAAvB,CAAd;AAA4C,KAAhX,EAAiX5P,CAAC,CAACe,SAAF,CAAYsK,aAAZ,GAA0B,UAASrL,CAAT,EAAW;AAAC,YAAM,IAAI2C,KAAJ,CAAU,8CAAV,CAAN;AAAgE,KAAvd,EAAwd3C,CAAC,CAACe,SAAF,CAAY8O,cAAZ,GAA2B,UAAS7P,CAAT,EAAW;AAAC,YAAM,IAAI2C,KAAJ,CAAU,+CAAV,CAAN;AAAiE,KAAhkB,EAAikB3C,CAAC,CAAC8P,YAAF,GAAe7P,CAAhlB,EAAklBA,CAAC,CAACc,SAAF,CAAY0O,WAAZ,GAAwB,UAASzP,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOD,CAAC,CAACqL,aAAF,CAAgBpL,CAAhB,GAAmB,IAAIa,CAAJ,CAAMb,CAAN,CAA1B;AAAmC,KAA3pB,EAA4pBA,CAAC,CAACc,SAAF,CAAY2O,WAAZ,GAAwB,UAAS1P,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOD,CAAC,CAAC6P,cAAF,CAAiB5P,CAAjB,GAAoB,IAA3B;AAAgC,KAAluB,EAAmuBA,CAAC,CAACc,SAAF,CAAY4O,SAAZ,GAAsB,UAAS3P,CAAT,EAAW;AAAC,YAAM,IAAI2C,KAAJ,CAAU,gCAAV,CAAN;AAAkD,KAAvzB,EAAwzB1C,CAAC,CAACc,SAAF,CAAY6O,WAAZ,GAAwB,UAAS5P,CAAT,EAAW;AAAC,YAAM,IAAI2C,KAAJ,CAAU,gCAAV,CAAN;AAAkD,KAA94B;AAA+4B,QAAIzC,CAAC,GAAC,IAAID,CAAJ,EAAN;;AAAY,aAASa,CAAT,CAAWd,CAAX,EAAa;AAAC,WAAK+P,WAAL,GAAiB/P,CAAjB;AAAmB;;AAAA,aAAS6C,CAAT,CAAW7C,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAK8P,WAAL,GAAiB/P,CAAjB,EAAmB,KAAKgQ,MAAL,GAAY/P,CAA/B;AAAiC;;AAAA,WAAOD,CAAC,CAACiQ,eAAF,GAAkBnP,CAAlB,EAAoBA,CAAC,CAACC,SAAF,CAAY0O,WAAZ,GAAwB,UAASzP,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAO,IAAI4C,CAAJ,CAAM,KAAKkN,WAAX,EAAuB9P,CAAvB,CAAP;AAAiC,KAA3F,EAA4Fa,CAAC,CAACC,SAAF,CAAY2O,WAAZ,GAAwB,UAAS1P,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,KAAK6P,WAAL,CAAiB3I,SAAjB,CAA2BnH,CAA3B,CAAN;AAAoC,aAAOD,CAAC,CAAC6P,cAAF,CAAiB3P,CAAC,CAAC,CAAD,CAAlB,GAAuB,IAAIY,CAAJ,CAAMZ,CAAC,CAAC,CAAD,CAAP,CAA9B;AAA0C,KAAhN,EAAiNY,CAAC,CAACC,SAAF,CAAY4O,SAAZ,GAAsB,UAAS3P,CAAT,EAAW;AAAC,aAAOE,CAAP;AAAS,KAA5P,EAA6PY,CAAC,CAACC,SAAF,CAAY6O,WAAZ,GAAwB,UAAS5P,CAAT,EAAW;AAAC,aAAOA,CAAC,CAACqL,aAAF,CAAgB,KAAK0E,WAArB,GAAkC,IAAzC;AAA8C,KAA/U,EAAgV/P,CAAC,CAACkQ,kBAAF,GAAqBrN,CAArW,EAAuWA,CAAC,CAAC9B,SAAF,CAAY0O,WAAZ,GAAwB,UAASzP,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,KAAK8P,MAAL,CAAYlJ,OAAZ,CAAoB7G,CAApB,CAAN;AAA6B,aAAO,IAAI4C,CAAJ,CAAM,KAAKkN,WAAX,EAAuB7P,CAAvB,CAAP;AAAiC,KAA3c,EAA4c2C,CAAC,CAAC9B,SAAF,CAAY2O,WAAZ,GAAwB,UAAS1P,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,KAAK6P,WAAL,CAAiB3I,SAAjB,CAA2BnH,CAA3B,CAAN;AAAA,UAAoCa,CAAC,GAAC,KAAKkP,MAAL,CAAY5I,SAAZ,CAAsBlH,CAAC,CAAC,CAAD,CAAvB,CAAtC;AAAkE,aAAOF,CAAC,CAAC6P,cAAF,CAAiB/O,CAAC,CAAC,CAAD,CAAlB,GAAuB,IAAI+B,CAAJ,CAAM3C,CAAC,CAAC,CAAD,CAAP,EAAWY,CAAC,CAAC,CAAD,CAAZ,CAA9B;AAA+C,KAAnmB,EAAomB+B,CAAC,CAAC9B,SAAF,CAAY6O,WAAZ,GAAwB,UAAS5P,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAK8P,WAAL,CAAiBjJ,OAAjB,CAAyB,KAAKkJ,MAA9B,CAAN;AAA4C,aAAOhQ,CAAC,CAACqL,aAAF,CAAgBpL,CAAhB,GAAmB,IAAIa,CAAJ,CAAMb,CAAN,CAA1B;AAAmC,KAAvtB,EAAwtB4C,CAAC,CAAC9B,SAAF,CAAY4O,SAAZ,GAAsB,UAAS3P,CAAT,EAAW;AAAC,aAAOA,CAAC,CAACqL,aAAF,CAAgB,KAAK2E,MAArB,GAA6B,IAAIlP,CAAJ,CAAM,KAAKkP,MAAX,CAApC;AAAuD,KAAjzB,EAAkzBhQ,CAAzzB;AAA2zB,GAAx2D,EAA7n4B,EAAw+7B,CAACc,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUqP,YAAV,GAAuB,YAAU;AAAC;;AAAa,QAAInQ,CAAC,GAACc,CAAC,CAACyO,MAAR;AAAA,QAAetP,CAAC,GAACa,CAAC,CAACsI,MAAnB;AAAA,QAA0BlJ,CAAC,GAACY,CAAC,CAACyN,WAA9B;AAAA,QAA0C1L,CAAC,GAAC/B,CAAC,CAACqN,gBAA9C;;AAA+D,aAASlL,CAAT,CAAWjD,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKmQ,YAAL,GAAkBpQ,CAAlB,EAAoB,KAAKqQ,WAAL,GAAiBpQ,CAArC;AAAuC;;AAAA,aAASkD,CAAT,CAAWnD,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKsL,EAAL,GAAQvL,CAAR,EAAU,KAAKsQ,aAAL,GAAmBrQ,CAA7B;AAA+B;;AAAA,aAASkG,CAAT,CAAWrF,CAAX,EAAa+B,CAAb,EAAe;AAAC7C,MAAAA,CAAC,CAACiB,IAAF,CAAO,IAAP,GAAa,KAAKsP,aAAL,GAAmBzP,CAAhC,EAAkC,KAAKwP,aAAL,GAAmBzN,CAArD,EAAuD,KAAK2N,WAAL,GAAiB,IAAItQ,CAAJ,EAAxE,EAA8E,KAAKuQ,OAAL,GAAa,EAA3F;AAA8F,UAAIxN,CAAC,GAAC,IAAN;AAAW,WAAKqN,aAAL,CAAmBnE,iBAAnB,CAAqC;AAACuE,QAAAA,MAAM,EAAC,gBAAS1Q,CAAT,EAAWC,CAAX,EAAa;AAACgD,UAAAA,CAAC,CAAC0N,QAAF,CAAW3Q,CAAX,EAAaC,CAAb;AAAgB,SAAtC;AAAuC2Q,QAAAA,cAAc,EAAC,0BAAU;AAAC3N,UAAAA,CAAC,CAAC4N,gBAAF;AAAqB,SAAtF;AAAuFC,QAAAA,IAAI,EAAC,gBAAU;AAAC7N,UAAAA,CAAC,CAAC8N,MAAF;AAAW,SAAlH;AAAmHC,QAAAA,KAAK,EAAC,iBAAU;AAAC/N,UAAAA,CAAC,CAACgO,OAAF;AAAY;AAAhJ,OAArC,GAAwL,KAAKX,aAAL,CAAmBY,YAAnB,CAAgC,YAAU;AAACjO,QAAAA,CAAC,CAACkO,IAAF;AAAS,OAApD,CAAxL,EAA8O,KAAKb,aAAL,CAAmBc,YAAnB,CAAgC,YAAU;AAACnO,QAAAA,CAAC,CAACoO,IAAF;AAAS,OAApD,CAA9O,EAAoS,KAAKd,aAAL,CAAmBpE,iBAAnB,CAAqC;AAACmF,QAAAA,GAAG,EAAC,eAAU;AAACrO,UAAAA,CAAC,CAAC0M,SAAF,IAAc1M,CAAC,CAACsO,OAAF,IAAWtO,CAAC,CAACwL,KAAF,YAAmBzO,CAAC,CAAC8P,YAAhC,KAA+C7M,CAAC,CAACuO,YAAF,IAAiBvO,CAAC,CAAC6I,UAAF,CAAa7I,CAAC,CAACmJ,MAAf,CAAhE,CAAd,EAAsGnJ,CAAC,CAACwO,UAAF,EAAtG;AAAqH,SAArI;AAAsIC,QAAAA,KAAK,EAAC,iBAAU;AAACzO,UAAAA,CAAC,CAAC2M,WAAF;AAAgB,SAAvK;AAAwKhD,QAAAA,SAAS,EAAC,mBAAS5M,CAAT,EAAW;AAACiD,UAAAA,CAAC,CAACyM,WAAF,CAAc1P,CAAd;AAAiB,SAA/M;AAAgNoM,QAAAA,MAAM,EAAC,gBAASlM,CAAT,EAAWY,CAAX,EAAa+B,CAAb,EAAe;AAAC,cAAGI,CAAC,CAACsN,aAAF,CAAgB7F,OAAhB,KAA0BxK,CAA1B,IAA6B+C,CAAC,CAACwL,KAAF,YAAmBzO,CAAC,CAAC8P,YAArD,EAAkE;AAAC,gBAAI3M,CAAC,GAACF,CAAC,CAAC0O,eAAF,CAAkBzR,CAAlB,CAAN;AAA2BY,YAAAA,CAAC,IAAE+B,CAAC,IAAEM,CAAC,CAACgH,QAAF,CAAWtH,CAAX,CAAH,EAAiBM,CAAC,CAACqO,YAAF,CAAevR,CAAC,CAACiG,QAAF,CAAWpF,CAAX,CAAf,CAAnB,IAAkDqC,CAAC,CAACyO,YAAF,EAAnD;AAAoE;AAAC;AAA1Y,OAArC,CAApS;AAAstB;;AAAA,WAAO3O,CAAC,CAAClC,SAAF,CAAY8F,MAAZ,GAAmB,YAAU;AAAC,aAAO,IAAI5D,CAAJ,CAAM,KAAKoN,WAAX,EAAuB,KAAKD,YAA5B,CAAP;AAAiD,KAA/E,EAAgFnN,CAAC,CAAClC,SAAF,CAAY+F,OAAZ,GAAoB,UAAS9G,CAAT,EAAW;AAAC,aAAO,IAAIiD,CAAJ,CAAM,KAAKmN,YAAX,EAAwBpQ,CAAC,CAACqQ,WAA1B,CAAP;AAA8C,KAA9J,EAA+JpN,CAAC,CAAClC,SAAF,CAAYqG,SAAZ,GAAsB,UAASpH,CAAT,EAAW;AAAC,aAAO,IAAIiD,CAAJ,CAAM,KAAKmN,YAAL,GAAkB,KAAKA,YAAL,CAAkBhJ,SAAlB,CAA4BpH,CAA5B,CAAlB,GAAiD,IAAvD,EAA4D,KAAKqQ,WAAL,GAAiB,KAAKA,WAAL,CAAiBjJ,SAAjB,CAA2BpH,CAA3B,CAAjB,GAA+C,IAA3G,CAAP;AAAwH,KAAzT,EAA0TmD,CAAC,CAACpC,SAAF,CAAYoJ,QAAZ,GAAqB,UAASnK,CAAT,EAAW;AAAC,WAAKqM,KAAL,GAAWrM,CAAX;AAAa,KAAxW,EAAyWmD,CAAC,CAACpC,SAAF,CAAYyQ,YAAZ,GAAyB,UAASxR,CAAT,EAAW;AAAC,WAAK4R,YAAL,IAAoB,KAAKxF,MAAL,GAAYpM,CAAhC,EAAkC,KAAK6R,IAAL,GAAU,KAAKvB,aAAL,CAAmBwB,cAAnB,CAAkC9R,CAAlC,EAAoC,KAAKqM,KAAzC,EAA+C,KAAKd,EAApD,CAA5C;AAAoG,KAAlf,EAAmfpI,CAAC,CAACpC,SAAF,CAAY6Q,YAAZ,GAAyB,YAAU;AAAC,WAAKC,IAAL,IAAW,KAAKA,IAAL,CAAUE,KAAV,EAAX;AAA6B,KAApjB,EAAqjB,UAAS/R,CAAT,EAAWC,CAAX,EAAa;AAAC,eAASC,CAAT,GAAY,CAAE;;AAAAA,MAAAA,CAAC,CAACa,SAAF,GAAYd,CAAC,CAACc,SAAd,EAAwBf,CAAC,CAACe,SAAF,GAAY,IAAIb,CAAJ,EAApC,EAA0CF,CAAC,CAACe,SAAF,CAAYI,WAAZ,GAAwBnB,CAAlE;AAAoE,KAAhG,CAAiGmG,CAAjG,EAAmGnG,CAAnG,CAArjB,EAA2pBmG,CAAC,CAACpF,SAAF,CAAY4Q,eAAZ,GAA4B,UAAS3R,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAKwQ,OAAL,CAAazQ,CAAb,CAAN;AAAsB,aAAOC,CAAC,KAAG,KAAKwQ,OAAL,CAAazQ,CAAb,IAAgB,IAAImD,CAAJ,CAAMnD,CAAN,EAAQ,KAAKsQ,aAAb,CAAnB,CAAR;AAAwD,KAAjxB,EAAkxBnK,CAAC,CAACpF,SAAF,CAAYiR,WAAZ,GAAwB,UAAShS,CAAT,EAAW;AAAC,WAAKwQ,WAAL,CAAiB1B,GAAjB,CAAqB,KAAKwB,aAAL,CAAmB2B,eAAnB,CAAmCjS,CAAnC,CAArB,GAA4D,KAAKsQ,aAAL,CAAmBT,cAAnB,CAAkC7P,CAAC,CAACoO,OAApC,CAA5D,EAAyG,KAAKhC,MAAL,GAAYpM,CAAC,CAACqO,IAAF,CAAOgC,WAA5H,EAAwI,KAAKjE,MAAL,IAAa,KAAKkE,aAAL,CAAmB4B,SAAnB,CAA6B,KAAK9F,MAAlC,CAArJ,EAA+L,KAAKqD,WAAL,CAAiBzP,CAAC,CAACoO,OAAnB,CAA/L;AAA2N,KAAjhC,EAAkhCjI,CAAC,CAACpF,SAAF,CAAYoQ,IAAZ,GAAiB,YAAU;AAAC,UAAInR,CAAC,GAAC,IAAN;AAAW,WAAKwQ,WAAL,CAAiBrB,OAAjB,MAA4B,KAAKqB,WAAL,CAAiBvB,WAAjB,CAA6B,UAAShP,CAAT,EAAW;AAACD,QAAAA,CAAC,CAACgS,WAAF,CAAc/R,CAAd;AAAiB,OAA1D,CAA5B;AAAwF,KAAjpC,EAAkpCkG,CAAC,CAACpF,SAAF,CAAYsQ,IAAZ,GAAiB,YAAU;AAAC,UAAIrR,CAAC,GAAC,IAAN;AAAW,WAAKwQ,WAAL,CAAiBpB,OAAjB,MAA4B,KAAKoB,WAAL,CAAiBtB,WAAjB,CAA6B,UAASjP,CAAT,EAAW;AAACD,QAAAA,CAAC,CAACgS,WAAF,CAAc/R,CAAd;AAAiB,OAA1D,CAA5B;AAAwF,KAAjxC,EAAkxCkG,CAAC,CAACpF,SAAF,CAAY4P,QAAZ,GAAqB,UAAS3Q,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,KAAKkM,MAAX;AAAkB,WAAKoF,YAAL;AAAoB,UAAI1Q,CAAJ;AAAA,UAAMqC,CAAC,GAAC,KAAKqN,WAAL,CAAiB7B,SAAjB,CAA2BpN,MAA3B,GAAkC,CAAlC,IAAqCtB,CAAC,CAACiH,4BAAF,CAA+B,CAACpG,CAAC,GAAC,KAAK0P,WAAL,CAAiB7B,SAAnB,EAA6B7N,CAAC,CAACA,CAAC,CAACS,MAAF,GAAS,CAAV,CAA/B,EAA6C6M,OAA5E,CAA7C;AAAA,UAAkIjI,CAAC,GAAC,IAAIlD,CAAJ,CAAM,KAAKmJ,MAAX,EAAkBlM,CAAlB,CAApI;AAAyJ,WAAKsQ,WAAL,CAAiB1B,GAAjB,CAAqB,IAAIjM,CAAJ,CAAM5C,CAAN,EAAQkG,CAAR,CAArB,EAAgChD,CAAhC,GAAmC,KAAKsM,WAAL,CAAiBzP,CAAjB,CAAnC;AAAuD,KAA3iD,EAA4iDmG,CAAC,CAACpF,SAAF,CAAYyQ,YAAZ,GAAyB,YAAU;AAAC,WAAKpF,MAAL,GAAY,KAAKkE,aAAL,CAAmB6B,SAAnB,EAAZ;AAA2C,KAA3nD,EAA4nDhM,CAAC,CAACpF,SAAF,CAAY8P,gBAAZ,GAA6B,YAAU;AAAC,UAAI7Q,CAAC,GAAC,KAAKoM,MAAX;AAAkB,WAAKoF,YAAL,IAAoB,CAAC,KAAKD,OAAN,IAAevR,CAAC,IAAE,KAAKoM,MAAL,CAAYjH,MAAZ,CAAmBnF,CAAnB,CAAlB,IAAyC,KAAK8L,UAAL,CAAgB,KAAKM,MAArB,CAA7D;AAA0F,KAAhxD,EAAixDjG,CAAC,CAACpF,SAAF,CAAYgQ,MAAZ,GAAmB,YAAU;AAAC,WAAK3E,MAAL,GAAY,IAAZ,EAAiB,KAAKN,UAAL,CAAgB,IAAhB,CAAjB,EAAuC,KAAKyF,OAAL,GAAa,CAAC,CAArD;AAAuD,KAAt2D,EAAu2DpL,CAAC,CAACpF,SAAF,CAAYkQ,OAAZ,GAAoB,YAAU;AAAC,WAAKM,OAAL,GAAa,CAAC,CAAd,EAAgB,KAAKV,gBAAL,EAAhB;AAAwC,KAA96D,EAA+6D1K,CAAC,CAACpF,SAAF,CAAY+K,UAAZ,GAAuB,UAAS7L,CAAT,EAAW;AAAC,WAAKwO,KAAL,YAAsBzO,CAAC,CAACkQ,kBAAxB,IAA4C,KAAKK,aAAL,CAAmBzE,UAAnB,CAA8B7L,CAA9B,CAA5C;AAA6E,KAA/hE,EAAgiEkG,CAAC,CAACpF,SAAF,CAAYsK,aAAZ,GAA0B,UAASrL,CAAT,EAAW;AAAC,WAAKuQ,aAAL,CAAmBlF,aAAnB,CAAiCrL,CAAjC,GAAoC,KAAKyR,UAAL,EAApC;AAAsD,KAA5nE,EAA6nEtL,CAAC,CAACpF,SAAF,CAAY8O,cAAZ,GAA2B,UAAS7P,CAAT,EAAW;AAAC,WAAKsQ,aAAL,CAAmBT,cAAnB,CAAkC7P,CAAlC,GAAqC,KAAKwR,YAAL,EAArC,EAAyD,KAAKhB,WAAL,CAAiBpJ,SAAjB,CAA2B,IAAIvE,CAAJ,CAAM7C,CAAN,EAAQ,IAAR,CAA3B,CAAzD;AAAmG,KAAvwE,EAAwwEmG,CAAC,CAACpF,SAAF,CAAY0Q,UAAZ,GAAuB,YAAU;AAAC,UAAIxR,CAAC,GAAC,IAAN;AAAW0K,MAAAA,UAAU,CAAC,YAAU;AAAC1K,QAAAA,CAAC,CAACuC,OAAF,CAAU,QAAV,EAAmBvC,CAAC,CAACwO,KAAF,YAAmBzO,CAAC,CAAC8P,YAAxC;AAAsD,OAAlE,EAAmE,CAAnE,CAAV;AAAgF,KAAr4E,EAAs4E3J,CAA74E;AAA+4E,GAA35G,EAA//7B,EAA65iCrF,CAAC,CAACe,KAAF,CAAQC,gBAAR,CAAyBhB,CAAC,CAACqP,YAA3B,EAAwC,CAAC,QAAD,CAAxC,CAA75iC,EAAi9iC,KAAK,CAAL,KAASrP,CAAT,IAAY,SAAOA,CAAnB,KAAuBA,CAAC,GAAC,EAAzB,CAAj9iC,EAA8+iCA,CAAC,CAACsR,UAAF,GAAa,YAAU;AAAC,QAAInS,CAAC,GAAC,YAAU;AAAC,eAASA,CAAT,CAAWD,CAAX,EAAa;AAAC,YAAIE,CAAJ;AAAM,SAAC,UAASF,CAAT,EAAWC,CAAX,EAAa;AAAC,cAAG,EAAED,CAAC,YAAYC,CAAf,CAAH,EAAqB,MAAM,IAAIqB,SAAJ,CAAc,mCAAd,CAAN;AAAyD,SAA5F,CAA6F,IAA7F,EAAkGrB,CAAlG,CAAD,EAAsG,KAAK0Q,QAAL,GAAc,KAAKA,QAAL,CAAc0B,IAAd,CAAmB,IAAnB,CAApH,EAA6I,KAAKtB,MAAL,GAAY,KAAKA,MAAL,CAAYsB,IAAZ,CAAiB,IAAjB,CAAzJ,EAAgL,KAAKpB,OAAL,GAAa,KAAKA,OAAL,CAAaoB,IAAb,CAAkB,IAAlB,CAA7L,EAAqN,KAAKxB,gBAAL,GAAsB,KAAKA,gBAAL,CAAsBwB,IAAtB,CAA2B,IAA3B,CAA3O,EAA4Q,KAAKC,GAAL,GAAStS,CAArR,EAAuR,KAAKuS,UAAL,GAAgB,KAAKD,GAAL,CAASE,UAAT,EAAvS,EAA6T,KAAKC,MAAL,GAAY,KAAKF,UAAL,CAAgBrG,WAAhB,EAAzU,EAAuW,KAAKuG,MAAL,CAAYC,cAAZ,CAA2B,MAA3B,CAAvW,EAA0Y,KAAKC,iBAAL,EAA1Y,EAAma,KAAKL,GAAL,CAAStQ,EAAT,CAAY,QAAZ,EAAqB,KAAK2O,QAA1B,CAAna,EAAuc,KAAK2B,GAAL,CAAStQ,EAAT,CAAY,MAAZ,EAAmB,KAAK+O,MAAxB,CAAvc,EAAue,KAAKuB,GAAL,CAAStQ,EAAT,CAAY,OAAZ,EAAoB,KAAKiP,OAAzB,CAAve,EAAygB,KAAKsB,UAAL,CAAgBK,SAAhB,CAA0B5Q,EAA1B,CAA6B,cAA7B,EAA4C,KAAK6O,gBAAjD,CAAzgB,EAA4kB,QAAM,KAAKgC,QAAX,KAAsB,KAAKA,QAAL,GAAc,CAAC,SAAO3S,CAAC,GAACoS,GAAG,CAAC7I,OAAb,IAAsBvJ,CAAtB,GAAwBuJ,OAAzB,EAAkC,WAAlC,EAA+CqJ,KAAnF,CAA5kB;AAAsqB;;AAAA,UAAIjQ,CAAJ,EAAMI,CAAN,EAAQE,CAAR;AAAU,aAAON,CAAC,GAAC5C,CAAF,EAAI,CAACgD,CAAC,GAAC,CAAC;AAACrB,QAAAA,GAAG,EAAC,mBAAL;AAAyBiM,QAAAA,KAAK,EAAC,iBAAU;AAAC,iBAAO,KAAKkF,YAAL,GAAkB,KAAKN,MAAL,CAAYO,WAAZ,EAAlB,EAA4C,KAAKC,eAAL,GAAqB,KAAKV,UAAL,CAAgBK,SAAhB,CAA0BM,QAA1B,EAAxE;AAA6G;AAAvJ,OAAD,EAA0J;AAACtR,QAAAA,GAAG,EAAC,QAAL;AAAciM,QAAAA,KAAK,EAAC,iBAAU;AAAC,iBAAO,KAAKyE,GAAL,CAASa,cAAT,CAAwB,QAAxB,EAAiC,KAAKxC,QAAtC,GAAgD,KAAK2B,GAAL,CAASa,cAAT,CAAwB,MAAxB,EAA+B,KAAKpC,MAApC,CAAhD,EAA4F,KAAKuB,GAAL,CAASa,cAAT,CAAwB,OAAxB,EAAgC,KAAKlC,OAArC,CAA5F,EAA0I,KAAKsB,UAAL,CAAgBK,SAAhB,CAA0BO,cAA1B,CAAyC,cAAzC,EAAwD,KAAKtC,gBAA7D,CAAjJ;AAAgO;AAA/P,OAA1J,EAA2Z;AAACjP,QAAAA,GAAG,EAAC,UAAL;AAAgBiM,QAAAA,KAAK,EAAC,eAAS5N,CAAT,EAAW;AAAC,cAAIC,CAAJ;AAAM,cAAG,CAAC,KAAKkT,aAAT,EAAuB,OAAOlT,CAAC,GAAC,KAAKmT,sBAAL,CAA4BpT,CAA5B,CAAF,EAAiC,KAAKuC,OAAL,CAAaC,KAAb,CAAmB,IAAnB,EAAwB,CAAC,QAAD,EAAW6Q,MAAX,CAAkBtT,CAAC,CAACE,CAAD,CAAnB,CAAxB,CAAjC,EAAkF,KAAKyS,iBAAL,EAAzF;AAAkH;AAAjL,OAA3Z,EAA8kB;AAAC/Q,QAAAA,GAAG,EAAC,QAAL;AAAciM,QAAAA,KAAK,EAAC,iBAAU;AAAC,cAAG,KAAKyE,GAAL,CAASM,SAAT,CAAmBW,OAAnB,EAAH,EAAgC,OAAO,KAAK/Q,OAAL,CAAa,MAAb,CAAP;AAA4B;AAA3F,OAA9kB,EAA2qB;AAACZ,QAAAA,GAAG,EAAC,SAAL;AAAeiM,QAAAA,KAAK,EAAC,iBAAU;AAAC,iBAAO,KAAKrL,OAAL,CAAa,OAAb,CAAP;AAA6B;AAA7D,OAA3qB,EAA0uB;AAACZ,QAAAA,GAAG,EAAC,kBAAL;AAAwBiM,QAAAA,KAAK,EAAC,iBAAU;AAAC,cAAI7N,CAAC,GAAC,IAAN;AAAW,iBAAO2K,UAAU,CAAC,YAAU;AAAC,mBAAO3K,CAAC,CAACwC,OAAF,CAAU,gBAAV,CAAP;AAAmC,WAA/C,EAAgD,CAAhD,CAAjB;AAAoE;AAAxH,OAA1uB,EAAo2B;AAACZ,QAAAA,GAAG,EAAC,wBAAL;AAA8BiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,cAAIC,CAAJ,EAAMC,CAAN,EAAQ2C,CAAR,EAAUI,CAAV,EAAYE,CAAZ,EAAcgD,CAAd,EAAgBC,CAAhB;AAAkB,iBAAOpG,CAAC,CAACwT,IAAF,IAAQ,mBAAiBvQ,CAAC,GAAC,CAAC/C,CAAC,GAACF,CAAC,CAACwT,IAAL,EAAWC,MAA9B,KAAuC,kBAAgBxQ,CAAvD,IAA0DmD,CAAC,GAAClG,CAAC,CAACwT,KAAF,CAAQ1N,IAAR,CAAa,IAAb,IAAmB,IAArB,EAA0B9F,CAAC,CAACuT,MAAF,CAASvP,OAAT,CAAiB,OAAjB,EAAyB,EAAzB,CAApF,KAAmHkC,CAAC,GAAClG,CAAC,CAAC4E,IAAF,CAAOZ,OAAP,CAAe,KAAKuO,MAAL,CAAYkB,mBAAZ,EAAf,EAAiD,IAAjD,CAAF,EAAyDzT,CAAC,CAACuT,MAAF,CAASvP,OAAT,CAAiB,MAAjB,EAAwB,EAAxB,CAA5K,GAAyMiC,CAAC,GAAC,KAAKyN,YAAL,CAAkB1T,CAAC,CAAC2T,KAAF,CAAQzL,KAA1B,CAAnN,KAAsPhC,CAAC,GAACpG,CAAC,CAAC0T,KAAF,CAAQ1N,IAAR,CAAa,IAAb,CAAF,EAAqBG,CAAC,GAAC,KAAKyN,YAAL,CAAkB5T,CAAC,CAACoI,KAApB,CAA7Q,GAAySjF,CAAC,GAAC,KAAK4P,YAAL,CAAkB/M,IAAlB,CAAuB,IAAvB,EAA6BzE,MAA7B,GAAoC4E,CAA/U,EAAiV,aAAWnG,CAAC,CAACyT,MAAb,KAAsBtQ,CAAC,IAAEiD,CAAC,CAAC7E,MAA3B,CAAjV,EAAoXsB,CAAC,GAAE,IAAI/B,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BS,CAA7B,EAAgCR,MAAhC,CAAuCS,CAAvC,EAA0CV,MAA1C,CAAiDvC,CAAjD,CAAtX,EAA0alD,CAAC,GAAE,IAAIa,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BS,CAA7B,EAAgCP,MAAhC,CAAuCQ,CAAvC,EAA0CV,MAA1C,CAAiDvC,CAAjD,CAA5a,EAAge,aAAWnD,CAAC,CAACyT,MAAb,GAAoB,CAACxT,CAAD,EAAG4C,CAAH,CAApB,GAA0B,CAACA,CAAD,EAAG5C,CAAH,CAAjgB;AAAugB;AAAzkB,OAAp2B,EAA+6C;AAAC2B,QAAAA,GAAG,EAAC,qBAAL;AAA2BiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,cAAIC,CAAJ,EAAMC,CAAN,EAAQY,CAAR,EAAU+B,CAAV,EAAYI,CAAZ,EAAcE,CAAd,EAAgBgD,CAAhB,EAAkBC,CAAlB;;AAAoB,eAAIlG,CAAC,GAAC,CAAF,EAAIY,CAAC,GAAC,CAAN,EAAQ+B,CAAC,GAAC,CAACsD,CAAC,GAACnG,CAAC,CAACuF,GAAL,EAAUhE,MAAxB,EAA+BT,CAAC,GAAC+B,CAAjC,EAAmC/B,CAAC,EAApC;AAAuC,aAACmC,CAAC,GAACkD,CAAC,CAACrF,CAAD,CAAJ,EAASoE,QAAT,KAAoBhF,CAAC,IAAE+C,CAAC,CAAC4B,KAAzB,GAA+B5B,CAAC,CAAC+B,QAAF,MAAc,KAAKyN,MAAL,CAAY9M,MAAZ,CAAmB,KAAKmO,YAAL,CAAkB5T,CAAlB,CAAnB,EAAwC+C,CAAC,CAAC6B,IAA1C,GAAgD5E,CAAC,IAAE+C,CAAC,CAAC6B,IAAF,CAAOvD,MAAxE,IAAgF0B,CAAC,CAACgC,QAAF,OAAehF,CAAC,GAAC,KAAK6T,YAAL,CAAkB5T,CAAlB,CAAF,EAAuBkG,CAAC,GAAC,KAAK0N,YAAL,CAAkB5T,CAAC,GAAC+C,CAAC,CAAC4B,KAAtB,CAAzB,EAAsD1B,CAAC,GAAC,KAAK0P,QAAL,CAAckB,UAAd,CAAyB9T,CAAzB,EAA2BmG,CAA3B,CAAxD,EAAsF,KAAKqM,MAAL,CAAYxH,MAAZ,CAAmB9H,CAAnB,CAArG,CAA/G;AAAvC;;AAAkR,iBAAO,KAAKwP,iBAAL,EAAP;AAAgC;AAAnX,OAA/6C,EAAoyD;AAAC/Q,QAAAA,GAAG,EAAC,cAAL;AAAoBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,cAAIC,CAAJ,EAAMC,CAAN,EAAQY,CAAR,EAAU+B,CAAV,EAAYI,CAAZ;;AAAc,eAAIA,CAAC,GAAChD,CAAC,GAAC,CAAJ,EAAMC,CAAC,GAAC,CAAC2C,CAAC,GAAC,KAAK4P,MAAL,CAAYuB,MAAf,EAAuBzS,MAAnC,EAA0CtB,CAAC,GAACC,CAAF,IAAK,EAAEF,CAAC,IAAE,CAACc,CAAC,GAAC+B,CAAC,CAACI,CAAD,CAAJ,EAAS1B,MAAd,CAA/C,EAAqE0B,CAAC,GAAC,EAAEhD,CAAzE;AAA2ED,YAAAA,CAAC,IAAEc,CAAC,CAACS,MAAF,GAAS,CAAZ;AAA3E;;AAAyF,iBAAM;AAAC0S,YAAAA,GAAG,EAAChR,CAAL;AAAOiR,YAAAA,MAAM,EAAClU;AAAd,WAAN;AAAuB;AAApK,OAApyD,EAA08D;AAAC4B,QAAAA,GAAG,EAAC,cAAL;AAAoBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAWC,CAAX,EAAa;AAAC,cAAIC,CAAJ,EAAMY,CAAN,EAAQ+B,CAAR,EAAUI,CAAV;;AAAY,eAAI,QAAMhD,CAAN,KAAUA,CAAC,GAAC,KAAK8S,YAAjB,GAA+BjS,CAAC,GAAC,CAAjC,EAAmCZ,CAAC,GAAC2C,CAAC,GAAC,CAAvC,EAAyCI,CAAC,GAACjD,CAAC,CAACiU,GAAjD,EAAqD,KAAGhR,CAAH,GAAKJ,CAAC,GAACI,CAAP,GAASJ,CAAC,GAACI,CAAhE,EAAkE/C,CAAC,GAAC,KAAG+C,CAAH,GAAK,EAAEJ,CAAP,GAAS,EAAEA,CAA/E;AAAiF/B,YAAAA,CAAC,IAAE,KAAKiS,YAAL,CAAkB7S,CAAlB,EAAqBqB,MAArB,GAA4B,CAA/B;AAAjF;;AAAkH,iBAAOT,CAAC,GAACd,CAAC,CAACkU,MAAX;AAAkB;AAAxL,OAA18D,EAAooE;AAACtS,QAAAA,GAAG,EAAC,UAAL;AAAgBiM,QAAAA,KAAK,EAAC,iBAAU;AAAC,iBAAO,KAAK4E,MAAL,CAAY0B,QAAZ,EAAP;AAA8B;AAA/D,OAApoE,EAAqsE;AAACvS,QAAAA,GAAG,EAAC,WAAL;AAAiBiM,QAAAA,KAAK,EAAC,iBAAU;AAAC,cAAI7N,CAAJ,EAAMC,CAAN,EAAQC,CAAR;;AAAU,cAAG;AAACA,YAAAA,CAAC,GAAC,KAAK0T,YAAL,CAAkB,KAAKrB,UAAL,CAAgBK,SAAhB,CAA0BM,QAA1B,GAAqC9K,KAAvD,EAA6D,KAAKqK,MAAL,CAAYuB,MAAzE,CAAF,EAAmF/T,CAAC,GAAC,KAAK2T,YAAL,CAAkB,KAAKrB,UAAL,CAAgBK,SAAhB,CAA0BM,QAA1B,GAAqCxO,GAAvD,EAA2D,KAAK+N,MAAL,CAAYuB,MAAvE,CAArF;AAAoK,WAAxK,CAAwK,OAAMlT,CAAN,EAAQ;AAACA,YAAAA,CAAC;;AAAC,gBAAG;AAACZ,cAAAA,CAAC,GAAC,KAAK0T,YAAL,CAAkB,KAAKX,eAAL,CAAqB7K,KAAvC,CAAF,EAAgDnI,CAAC,GAAC,KAAK2T,YAAL,CAAkB,KAAKX,eAAL,CAAqBvO,GAAvC,CAAlD;AAA8F,aAAlG,CAAkG,OAAM5D,CAAN,EAAQ;AAACd,cAAAA,CAAC,GAACc,CAAF,EAAIyD,OAAO,CAACD,GAAR,CAAY,uCAAZ,EAAoDtE,CAApD,EAAsD,uBAAtD,CAAJ,EAAmFE,CAAC,GAAC,CAArF,EAAuFD,CAAC,GAAC,CAAzF;AAA2F;AAAC;;AAAA,cAAGC,CAAC,GAACD,CAAL,EAAO;AAAC,gBAAI4C,CAAC,GAAC,CAAC5C,CAAD,EAAGC,CAAH,CAAN;AAAYA,YAAAA,CAAC,GAAC2C,CAAC,CAAC,CAAD,CAAH,EAAO5C,CAAC,GAAC4C,CAAC,CAAC,CAAD,CAAV;AAAc;;AAAA,iBAAO,IAAI/B,CAAC,CAACsI,MAAN,CAAalJ,CAAb,EAAeD,CAAf,CAAP;AAAyB;AAAje,OAArsE,EAAwqF;AAAC2B,QAAAA,GAAG,EAAC,WAAL;AAAiBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,cAAIC,CAAJ,EAAMC,CAAN;;AAAQ,cAAGA,CAAC,GAAC,KAAK4T,YAAL,CAAkB9T,CAAC,CAACqJ,QAApB,CAAF,EAAgCpJ,CAAC,GAAC,KAAK6T,YAAL,CAAkB9T,CAAC,CAACsJ,YAApB,CAAlC,EAAoEtJ,CAAC,CAACqJ,QAAF,GAAWrJ,CAAC,CAACsJ,YAApF,EAAiG;AAAC,gBAAIxI,CAAC,GAAC,CAACb,CAAD,EAAGC,CAAH,CAAN;AAAYA,YAAAA,CAAC,GAACY,CAAC,CAAC,CAAD,CAAH,EAAOb,CAAC,GAACa,CAAC,CAAC,CAAD,CAAV;AAAc;;AAAA,iBAAO,KAAKyR,UAAL,CAAgBK,SAAhB,CAA0BwB,iBAA1B,CAA4C,IAAI,KAAKvB,QAAT,CAAkB3S,CAAC,CAAC+T,GAApB,EAAwB/T,CAAC,CAACgU,MAA1B,EAAiCjU,CAAC,CAACgU,GAAnC,EAAuChU,CAAC,CAACiU,MAAzC,CAA5C,CAAP;AAAqG;AAA5Q,OAAxqF,EAAs7F;AAACtS,QAAAA,GAAG,EAAC,gBAAL;AAAsBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,cAAIY,CAAJ;AAAA,cAAM+B,CAAN;AAAA,cAAQI,CAAR;AAAA,cAAUE,CAAV;AAAA,cAAYgD,CAAZ;AAAA,cAAcC,CAAd;AAAA,cAAgBC,CAAhB;AAAA,cAAkBC,CAAC,GAAC,IAApB;;AAAyB,cAAG,QAAM,KAAK+N,YAAX,KAA0B,KAAKA,YAAL,GAAkB,EAA5C,GAAgD,CAACpR,CAAC,GAAC,KAAKoR,YAAL,CAAkBnU,CAAlB,CAAH,MAA2B+C,CAAC,CAACmF,KAAF,CAAQkM,MAAR,IAAiBrR,CAAC,CAACyB,GAAF,CAAM4P,MAAN,EAAjB,EAAgC,KAAK/B,UAAL,CAAgBgC,YAAhB,CAA6BtR,CAAC,CAACsI,EAA/B,CAA3D,CAAhD,EAA+IlF,CAAC,GAAC,KAAKyN,YAAL,CAAkB9T,CAAC,CAACqJ,QAApB,CAAjJ,EAA+KlG,CAAC,GAAC,KAAK2Q,YAAL,CAAkB9T,CAAC,CAACsJ,YAApB,CAAjL,EAAmNtJ,CAAC,CAACsJ,YAAF,GAAetJ,CAAC,CAACqJ,QAAvO,EAAgP;AAAC,gBAAI9C,CAAC,GAAC,CAACpD,CAAD,EAAGkD,CAAH,CAAN;AAAYA,YAAAA,CAAC,GAACE,CAAC,CAAC,CAAD,CAAH,EAAOpD,CAAC,GAACoD,CAAC,CAAC,CAAD,CAAV;AAAc;;AAAA,iBAAOzF,CAAC,GAAC,0BAA0BwS,MAA1B,CAAiCrT,CAAC,CAACiE,OAAF,CAAU,GAAV,EAAc,EAAd,CAAjC,CAAF,EAAsD,CAACiC,CAAC,GAACnG,CAAC,CAACqJ,QAAF,KAAarJ,CAAC,CAACsJ,YAAlB,MAAkCxI,CAAC,GAACA,CAAC,CAACoD,OAAF,CAAU,WAAV,EAAsB,QAAtB,CAApC,CAAtD,EAA2HrB,CAAC,GAAC,IAAIyQ,MAAJ,CAAWxS,CAAX,EAAa,iDAAb,EAAgEwS,MAAhE,CAAuEnN,CAAC,GAAC,aAAD,GAAelG,CAAvF,EAAyF,8BAAzF,EAAyHqT,MAAzH,CAAgIrT,CAAhI,EAAkI,MAAlI,CAA7H,EAAuQ,KAAKuU,YAAL,CAAkB3R,CAAlB,CAAvQ,EAA4R,KAAKwR,YAAL,CAAkBnU,CAAlB,IAAqB+C,CAAC,GAAC,IAAI,KAAK4P,QAAT,CAAkBxM,CAAC,CAAC4N,GAApB,EAAwB5N,CAAC,CAAC6N,MAA1B,EAAiC/Q,CAAC,CAAC8Q,GAAnC,EAAuC9Q,CAAC,CAAC+Q,MAAzC,CAAnT,EAAoW9N,CAAC,GAAC,IAAtW,EAA2WnD,CAAC,CAACwR,QAAF,GAAW,YAAU;AAAC,gBAAIzU,CAAJ;AAAM,mBAAM,CAACA,CAAC,GAACoG,CAAC,CAACyM,QAAF,CAAW9R,SAAX,CAAqB0T,QAArB,CAA8BhS,KAA9B,CAAoC,IAApC,EAAyCC,SAAzC,CAAH,EAAwD6Q,OAAxD,GAAgE,YAAU;AAAC,qBAAM,CAAC,CAAP;AAAS,aAApF,EAAqFvT,CAA3F;AAA6F,WAApe,EAAqeiD,CAAC,CAACmF,KAAF,GAAQ,KAAKqK,MAAL,CAAYiC,YAAZ,CAAyBzR,CAAC,CAACmF,KAA3B,CAA7e,EAA+gBnF,CAAC,CAACyB,GAAF,GAAM,KAAK+N,MAAL,CAAYiC,YAAZ,CAAyBzR,CAAC,CAACyB,GAA3B,CAArhB,EAAqjBzB,CAAC,CAACsI,EAAF,GAAK,KAAKgH,UAAL,CAAgBoC,SAAhB,CAA0B1R,CAA1B,EAA4BnC,CAA5B,EAA8B,MAA9B,CAA1jB,EAAgmB;AAACiR,YAAAA,KAAK,EAAC,iBAAU;AAAC,qBAAO9O,CAAC,CAACmF,KAAF,CAAQkM,MAAR,IAAiBrR,CAAC,CAACyB,GAAF,CAAM4P,MAAN,EAAjB,EAAgChO,CAAC,CAACiM,UAAF,CAAagC,YAAb,CAA0BtR,CAAC,CAACsI,EAA5B,CAAvC;AAAuE;AAAzF,WAAvmB;AAAksB;AAAlhC,OAAt7F,EAA08H;AAAC3J,QAAAA,GAAG,EAAC,cAAL;AAAoBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,cAAIC,CAAJ;AAAM,cAAG,eAAa,OAAO6C,QAApB,IAA8B,SAAOA,QAArC,KAAgD,KAAK8R,eAAL,KAAuB,KAAKA,eAAL,GAAqB,EAArB,EAAwB3U,CAAC,GAAC6C,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAA1B,EAA0DD,QAAQ,CAAC+R,eAAT,CAAyBC,oBAAzB,CAA8C,MAA9C,EAAsD,CAAtD,EAAyD5R,WAAzD,CAAqEjD,CAArE,CAA1D,EAAkI,KAAK8U,eAAL,GAAqB9U,CAAC,CAAC+U,KAAhL,GAAuL,CAAC,KAAKJ,eAAL,CAAqB5U,CAArB,CAAxO,CAAH,EAAoQ,OAAO,KAAK4U,eAAL,CAAqB5U,CAArB,IAAwB,CAAC,CAAzB,EAA2B,KAAK+U,eAAL,CAAqBE,UAArB,CAAgCjV,CAAhC,EAAkC,CAAlC,CAAlC;AAAuE;AAAvX,OAA18H,EAAm0I;AAAC4B,QAAAA,GAAG,EAAC,mBAAL;AAAyBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,eAAKkV,SAAL,GAAelV,CAAf;AAAiB;AAA5D,OAAn0I,EAAi4I;AAAC4B,QAAAA,GAAG,EAAC,SAAL;AAAeiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,eAAI,IAAIC,CAAJ,EAAMC,CAAN,EAAQY,CAAC,GAAC4B,SAAS,CAACnB,MAApB,EAA2BsB,CAAC,GAAC,IAAIrC,KAAJ,CAAUM,CAAC,GAAC,CAAF,GAAIA,CAAC,GAAC,CAAN,GAAQ,CAAlB,CAA7B,EAAkDmC,CAAC,GAAC,CAAxD,EAA0DA,CAAC,GAACnC,CAA5D,EAA8DmC,CAAC,EAA/D;AAAkEJ,YAAAA,CAAC,CAACI,CAAC,GAAC,CAAH,CAAD,GAAOP,SAAS,CAACO,CAAD,CAAhB;AAAlE;;AAAsF,iBAAO,SAAOhD,CAAC,GAAC,KAAKiV,SAAd,KAA0B,SAAOhV,CAAC,GAACD,CAAC,CAACD,CAAD,CAAV,CAA1B,GAAyCE,CAAC,CAACuC,KAAF,CAAQ,IAAR,EAAaI,CAAb,CAAzC,GAAyD,KAAK,CAArE;AAAuE;AAA9L,OAAj4I,EAAikJ;AAACjB,QAAAA,GAAG,EAAC,gBAAL;AAAsBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,iBAAOA,CAAC,CAAC6F,MAAF,OAAa,KAAKuN,aAAL,GAAmB,CAAC,CAAjC,GAAoC,KAAK+B,mBAAL,CAAyBnV,CAAzB,CAApC,EAAgE,KAAKoT,aAAL,GAAmB,CAAC,CAA3F;AAA6F;AAArI,OAAjkJ,EAAwsJ;AAACxR,QAAAA,GAAG,EAAC,cAAL;AAAoBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,iBAAO,KAAKsS,GAAL,CAASnB,IAAT,GAAcnR,CAArB;AAAuB;AAA7D,OAAxsJ,EAAuwJ;AAAC4B,QAAAA,GAAG,EAAC,cAAL;AAAoBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,iBAAO,KAAKsS,GAAL,CAASjB,IAAT,GAAcrR,CAArB;AAAuB;AAA7D,OAAvwJ,EAAs0J;AAAC4B,QAAAA,GAAG,EAAC,iBAAL;AAAuBiM,QAAAA,KAAK,EAAC,eAAS7N,CAAT,EAAW;AAAC,iBAAOA,CAAC,CAAC6G,MAAF,CAAS,KAAKsN,QAAL,EAAT,CAAP;AAAiC;AAA1E,OAAt0J,CAAH,KAAw5JjU,CAAC,CAAC2C,CAAC,CAAC9B,SAAH,EAAakC,CAAb,CAA75J,EAA66JE,CAAC,IAAEjD,CAAC,CAAC2C,CAAD,EAAGM,CAAH,CAAj7J,EAAu7JlD,CAA97J;AAAg8J,KAA/oL,EAAN;;AAAwpL,WAAOA,CAAC,CAACc,SAAF,CAAYqS,aAAZ,GAA0B,CAAC,CAA3B,EAA6BnT,CAApC;AAAsC,GAAzsL,CAA0sLgB,IAA1sL,CAA+sL,KAAK,CAAptL,CAA3/iC;;AAAktuC,MAAIH,CAAJ;AAAA,MAAM+B,CAAC,GAAC,SAAFA,CAAE,CAAS7C,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAM,MAAIF,CAAJ,GAAM,+CAAN,GAAsDC,CAAtD,GAAwD,4BAAxD,GAAqFC,CAArF,GAAuF,MAA7F;AAAoG,GAA5H;AAAA,MAA6H+C,CAAC,GAAC,SAAFA,CAAE,CAASjD,CAAT,EAAWC,CAAX,EAAa;AAAC,QAAG,eAAa,OAAO6C,QAApB,IAA8B,SAAOA,QAAxC,EAAiD,OAAM,CAAC,CAAP;;AAAS,QAAG,CAAC,CAAD,KAAK,KAAK8R,eAAL,CAAqBxQ,OAArB,CAA6BpE,CAA7B,CAAR,EAAwC;AAAC,UAAIE,CAAC,GAAC4C,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAN;AAAA,UAAsCjC,CAAC,GAACgC,QAAQ,CAACQ,cAAT,CAAwBrD,CAAxB,CAAxC;AAAmEC,MAAAA,CAAC,CAACgD,WAAF,CAAcpC,CAAd,GAAiBgC,QAAQ,CAACsS,IAAT,CAAclS,WAAd,CAA0BhD,CAA1B,CAAjB,EAA8C,KAAK0U,eAAL,CAAqBzS,IAArB,CAA0BnC,CAA1B,CAA9C;AAA2E;AAAC,GAA/X;AAAA,MAAgYmD,CAAC,GAAC,YAAU;AAAC,aAASnD,CAAT,CAAWA,CAAX,EAAa;AAAC,UAAG,CAACA,CAAD,IAAI,cAAY,OAAOA,CAAC,CAACqV,QAA5B,EAAqC,MAAM,IAAI1S,KAAJ,CAAU,4FAAV,CAAN;AAA8G,WAAK2S,MAAL,GAAYtV,CAAZ,EAAc,KAAKuV,WAAL,GAAiB,KAAKD,MAAL,CAAYD,QAAZ,EAA/B,EAAsD,KAAKtC,YAAL,GAAkB,KAAKwC,WAAL,CAAiBC,eAAjB,EAAxE,EAA2G,KAAKvC,eAAL,GAAqB,KAAKqC,MAAL,CAAYG,YAAZ,EAAhI,EAA2J,KAAKP,SAAL,GAAe,EAA1K,EAA6K,KAAKb,YAAL,GAAkB,EAA/L,EAAkM,KAAKO,eAAL,GAAqB,EAAvN,EAA0N,KAAKxB,aAAL,GAAmB,CAAC,CAA9O,EAAgP,KAAKzC,QAAL,GAAc,KAAKA,QAAL,CAAc0B,IAAd,CAAmB,IAAnB,CAA9P,EAAuR,KAAKtB,MAAL,GAAY,KAAKA,MAAL,CAAYsB,IAAZ,CAAiB,IAAjB,CAAnS,EAA0T,KAAKpB,OAAL,GAAa,KAAKA,OAAL,CAAaoB,IAAb,CAAkB,IAAlB,CAAvU,EAA+V,KAAKxB,gBAAL,GAAsB,KAAKA,gBAAL,CAAsBwB,IAAtB,CAA2B,IAA3B,CAArX,EAAsZ,KAAKqD,aAAL,GAAmB,KAAKJ,MAAL,CAAYK,uBAAZ,CAAoC,KAAKhF,QAAzC,CAAza,EAA4d,KAAKiF,cAAL,GAAoB,KAAKN,MAAL,CAAYO,qBAAZ,CAAkC,KAAK9E,MAAvC,CAAhf,EAA+hB,KAAK+E,eAAL,GAAqB,KAAKR,MAAL,CAAYS,sBAAZ,CAAmC,KAAK9E,OAAxC,CAApjB,EAAqmB,KAAK+E,8BAAL,GAAoC,KAAKV,MAAL,CAAYW,yBAAZ,CAAsC,KAAKpF,gBAA3C,CAAzoB;AAAssB;;AAAA,WAAO7Q,CAAC,CAACe,SAAF,CAAYuT,MAAZ,GAAmB,YAAU;AAAC,WAAKoB,aAAL,CAAmB7K,OAAnB,IAA6B,KAAK+K,cAAL,CAAoB/K,OAApB,EAA7B,EAA2D,KAAKiL,eAAL,CAAqBjL,OAArB,EAA3D,EAA0F,KAAKmL,8BAAL,CAAoCnL,OAApC,EAA1F;AAAwI,KAAtK,EAAuK7K,CAAC,CAACe,SAAF,CAAYoR,SAAZ,GAAsB,YAAU;AAAC,UAAInS,CAAC,GAAC,KAAKsV,MAAL,CAAYG,YAAZ,EAAN;AAAiC,WAAK,CAAL,KAASzV,CAAT,IAAY,SAAOA,CAAnB,KAAuBA,CAAC,GAAC,KAAKiT,eAA9B;AAA+C,UAAIhT,CAAC,GAACD,CAAC,CAACkW,gBAAF,EAAN;AAAA,UAA2BhW,CAAC,GAACF,CAAC,CAACmW,cAAF,EAA7B;AAAA,UAAgDtT,CAAC,GAAC,KAAK0S,WAAL,CAAiBa,WAAjB,CAA6BnW,CAA7B,CAAlD;AAAA,UAAkFgD,CAAC,GAAC,KAAKsS,WAAL,CAAiBa,WAAjB,CAA6BlW,CAA7B,CAApF;;AAAoH,UAAG2C,CAAC,GAACI,CAAL,EAAO;AAAC,YAAIE,CAAC,GAAC,CAACF,CAAD,EAAGJ,CAAH,CAAN;AAAYA,QAAAA,CAAC,GAACM,CAAC,CAAC,CAAD,CAAH,EAAOF,CAAC,GAACE,CAAC,CAAC,CAAD,CAAV;AAAc;;AAAA,aAAO,IAAIrC,CAAC,CAACsI,MAAN,CAAavG,CAAb,EAAeI,CAAf,CAAP;AAAyB,KAAvc,EAAwcjD,CAAC,CAACe,SAAF,CAAYmR,SAAZ,GAAsB,UAASlS,CAAT,EAAW;AAAC,UAAIC,CAAC,GAACD,CAAC,CAACqJ,QAAR;AAAA,UAAiBnJ,CAAC,GAACF,CAAC,CAACsJ,YAArB;AAAA,UAAkCxI,CAAC,GAAC,KAAKyU,WAAL,CAAiBc,aAAjB,CAA+BpW,CAA/B,CAApC;AAAA,UAAsE4C,CAAC,GAAC,KAAK0S,WAAL,CAAiBc,aAAjB,CAA+BnW,CAA/B,CAAxE;;AAA0G,UAAGD,CAAC,GAACC,CAAL,EAAO;AAAC,YAAI+C,CAAC,GAAC,CAACJ,CAAD,EAAG/B,CAAH,CAAN;AAAYA,QAAAA,CAAC,GAACmC,CAAC,CAAC,CAAD,CAAH,EAAOJ,CAAC,GAACI,CAAC,CAAC,CAAD,CAAV;AAAc;;AAAA,WAAKqS,MAAL,CAAYgB,YAAZ,CAAyB,IAAIhB,MAAM,CAACxC,KAAX,CAAiBhS,CAAC,CAACyV,UAAnB,EAA8BzV,CAAC,CAACoT,MAAhC,EAAuCrR,CAAC,CAAC0T,UAAzC,EAAoD1T,CAAC,CAACqR,MAAtD,CAAzB;AAAwF,KAA9sB,EAA+sBlU,CAAC,CAACe,SAAF,CAAY+Q,cAAZ,GAA2B,UAAS9R,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,YAAU,OAAOF,CAAjB,IAAoB,YAAU,OAAOA,CAAC,CAACqJ,QAAvC,IAAiD,YAAU,OAAOrJ,CAAC,CAACsJ,YAAvE,EAAoF,OAAM,CAAC,CAAP;AAAS,UAAG,YAAU,OAAOrJ,CAAjB,IAAoB,CAACA,CAAC,CAACuW,KAAF,CAAQ,qBAAR,CAAxB,EAAuD,OAAM,CAAC,CAAP;AAAS,UAAI1V,CAAC,GAACd,CAAC,CAACqJ,QAAR;AAAA,UAAiBlG,CAAC,GAACnD,CAAC,CAACsJ,YAArB;AAAkC,UAAGxI,CAAC,GAAC,CAAF,IAAKqC,CAAC,GAAC,CAAV,EAAY,OAAM,CAAC,CAAP;AAAS,UAAIgD,CAAC,GAAC,KAAKkO,YAAL,CAAkBoC,IAAlB,CAAuB,UAASzW,CAAT,EAAW;AAAC,eAAOA,CAAC,CAAC0W,QAAF,KAAaxW,CAApB;AAAsB,OAAzD,CAAN;AAAiEiG,MAAAA,CAAC,KAAGA,CAAC,GAAC;AAACuQ,QAAAA,QAAQ,EAACxW,CAAV;AAAYyW,QAAAA,UAAU,EAAC;AAAvB,OAAF,EAA6B,KAAKtC,YAAL,CAAkBlS,IAAlB,CAAuBgE,CAAvB,CAAhC,CAAD,EAA4DA,CAAC,CAACwQ,UAAF,GAAa,KAAKrB,MAAL,CAAYsB,gBAAZ,CAA6BzQ,CAAC,CAACwQ,UAA/B,EAA0C,EAA1C,CAAzE;AAAuH,UAAIvQ,CAAJ;AAAA,UAAMC,CAAN;AAAA,UAAQC,CAAC,GAAC,4BAA0BrG,CAAC,CAACiE,OAAF,CAAU,GAAV,EAAc,EAAd,CAApC;AAAsDpD,MAAAA,CAAC,KAAGqC,CAAJ,IAAOmD,CAAC,GAACA,CAAC,CAACpC,OAAF,CAAU,WAAV,EAAsB,QAAtB,CAAF,EAAkCkC,CAAC,GAACvD,CAAC,CAACyD,CAAD,EAAG,aAAH,EAAiBrG,CAAjB,CAArC,EAAyDoG,CAAC,GAACpD,CAAC,CAAChC,IAAF,CAAO,IAAP,EAAYqF,CAAZ,EAAcF,CAAd,CAAlE,KAAqFA,CAAC,GAACvD,CAAC,CAACyD,CAAD,EAAGrG,CAAH,EAAKA,CAAL,CAAH,EAAWoG,CAAC,GAACpD,CAAC,CAAChC,IAAF,CAAO,IAAP,EAAYqF,CAAZ,EAAcF,CAAd,CAAlG,GAAoH,KAAGC,CAAH,IAAM9B,OAAO,CAACD,GAAR,CAAY,0GAAZ,CAA1H;AAAkP,UAAIiC,CAAC,GAAC,KAAKgP,WAAL,CAAiBc,aAAjB,CAA+BvV,CAA/B,CAAN;AAAA,UAAwC0F,CAAC,GAAC,KAAK+O,WAAL,CAAiBc,aAAjB,CAA+BlT,CAA/B,CAA1C;;AAA4E,UAAGrC,CAAC,GAACqC,CAAL,EAAO;AAAC,YAAIsD,CAAC,GAAC,CAACD,CAAD,EAAGD,CAAH,CAAN;AAAYA,QAAAA,CAAC,GAACE,CAAC,CAAC,CAAD,CAAH,EAAOD,CAAC,GAACC,CAAC,CAAC,CAAD,CAAV;AAAc;;AAAAN,MAAAA,CAAC,CAACwQ,UAAF,GAAa,KAAKrB,MAAL,CAAYsB,gBAAZ,CAA6BzQ,CAAC,CAACwQ,UAA/B,EAA0C,CAAC;AAAC9C,QAAAA,KAAK,EAAC,IAAIyB,MAAM,CAACxC,KAAX,CAAiBvM,CAAC,CAACgQ,UAAnB,EAA8BhQ,CAAC,CAAC2N,MAAhC,EAAuC1N,CAAC,CAAC+P,UAAzC,EAAoD/P,CAAC,CAAC0N,MAAtD,CAAP;AAAqE2C,QAAAA,OAAO,EAAC;AAAC9I,UAAAA,SAAS,EAACzH;AAAX;AAA7E,OAAD,CAA1C,CAAb;AAAsJ,UAAII,CAAC,GAAC,IAAN;AAAW,aAAM;AAACqL,QAAAA,KAAK,EAAC,iBAAU;AAAC5L,UAAAA,CAAC,CAACwQ,UAAF,GAAajQ,CAAC,CAAC4O,MAAF,CAASsB,gBAAT,CAA0BzQ,CAAC,CAACwQ,UAA5B,EAAuC,EAAvC,CAAb;AAAwD;AAA1E,OAAN;AAAkF,KAA/wD,EAAgxD3W,CAAC,CAACe,SAAF,CAAYoL,iBAAZ,GAA8B,UAASnM,CAAT,EAAW;AAAC,WAAKkV,SAAL,GAAetU,MAAM,CAACkW,MAAP,CAAc,EAAd,EAAiB,KAAK5B,SAAtB,EAAgClV,CAAhC,CAAf;AAAkD,KAA52D,EAA62DA,CAAC,CAACe,SAAF,CAAYmQ,YAAZ,GAAyB,UAASlR,CAAT,EAAW;AAAC,UAAG,cAAY,OAAOA,CAAtB,EAAwB,MAAM,IAAI2C,KAAJ,CAAU,6EAAV,CAAN;AAA+F,WAAKuS,SAAL,CAAe/D,IAAf,GAAoBnR,CAApB;AAAsB,KAA/hE,EAAgiEA,CAAC,CAACe,SAAF,CAAYqQ,YAAZ,GAAyB,UAASpR,CAAT,EAAW;AAAC,UAAG,cAAY,OAAOA,CAAtB,EAAwB,MAAM,IAAI2C,KAAJ,CAAU,6EAAV,CAAN;AAA+F,WAAKuS,SAAL,CAAe7D,IAAf,GAAoBrR,CAApB;AAAsB,KAAltE,EAAmtEA,CAAC,CAACe,SAAF,CAAYgW,0BAAZ,GAAuC,UAAS/W,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAI2C,CAAJ;AAAA,UAAMI,CAAN;AAAA,UAAQE,CAAR;AAAA,UAAUgD,CAAC,GAACnG,CAAC,CAAC8E,IAAd;AAAA,UAAmBsB,CAAC,GAACpG,CAAC,CAACgX,WAAvB;AAAA,UAAmC3Q,CAAC,GAACrG,CAAC,CAACiX,WAAvC;AAAA,UAAmD3Q,CAAC,GAACrG,CAAC,CAACsB,MAAF,GAASrB,CAAT,GAAWmG,CAAhE;AAAkE,aAAO,MAAIF,CAAC,CAAC5E,MAAN,IAAc6E,CAAC,GAAC,CAAhB,IAAmBjD,CAAC,GAAClD,CAAC,CAACiB,KAAF,CAAQmF,CAAR,EAAUA,CAAC,GAACD,CAAZ,CAAF,EAAiBvD,CAAC,GAAE,IAAI/B,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BW,CAA7B,EAAgCT,MAAhC,CAAuCQ,CAAvC,EAA0CV,MAA1C,CAAiDY,CAAC,GAACF,CAAnD,CAAnB,EAAyEnD,CAAC,GAAE,IAAInC,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BW,CAA7B,EAAgCV,MAAhC,CAAuCxC,CAAvC,EAA0CuC,MAA1C,CAAiDY,CAAC,GAACF,CAAnD,CAA9F,IAAqJD,CAAC,CAAC5E,MAAF,GAAS,CAAT,IAAY6E,CAAC,GAAC,CAAd,IAAiBjD,CAAC,GAAClD,CAAC,CAACiB,KAAF,CAAQmF,CAAR,EAAUA,CAAC,GAACD,CAAZ,CAAF,EAAiBvD,CAAC,GAAE,IAAI/B,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BW,CAA7B,EAAgCT,MAAhC,CAAuCQ,CAAvC,EAA0CT,MAA1C,CAAiDQ,CAAjD,EAAoDT,MAApD,CAA2DY,CAAC,GAACF,CAA7D,CAAnB,EAAmFnD,CAAC,GAAE,IAAInC,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BW,CAA7B,EAAgCT,MAAhC,CAAuCO,CAAC,CAAC5E,MAAzC,EAAiDoE,MAAjD,CAAwDxC,CAAxD,EAA2DuC,MAA3D,CAAkEY,CAAC,GAACF,CAApE,CAAtG,KAA+KvD,CAAC,GAAE,IAAI/B,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BW,CAA7B,EAAgCV,MAAhC,CAAuCQ,CAAvC,EAA0CT,MAA1C,CAAiDY,CAAjD,CAAF,EAAsDrD,CAAC,GAAE,IAAInC,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BW,CAA7B,EAAgCT,MAAhC,CAAuCO,CAAvC,EAA0CT,MAA1C,CAAiDY,CAAjD,CAAvO,CAArJ,EAAib,CAACzD,CAAD,EAAGI,CAAH,CAAxb;AAA8b,KAA1wF,EAA2wFjD,CAAC,CAACe,SAAF,CAAY4P,QAAZ,GAAqB,UAAS3Q,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,IAAN;;AAAW,UAAG,CAAC,KAAKmT,aAAT,EAAuB;AAAC,YAAIlT,CAAC,GAAC,KAAK6S,YAAL,CAAkB/M,IAAlB,CAAuB,KAAKuP,WAAL,CAAiB2B,MAAjB,EAAvB,CAAN;AAAA,YAAwDrU,CAAC,GAAC,CAA1D;;AAA4D,YAAG,CAAC7C,CAAC,CAACmX,OAAN,EAAc;AAAC,cAAIlU,CAAC,GAAE,IAAInC,CAAC,CAACwE,aAAN,EAAD,CAAsBI,MAAtB,CAA6BxF,CAAC,CAACqB,MAA/B,CAAN;AAA6C,eAAKiB,OAAL,CAAa,QAAb,EAAsBS,CAAtB,EAAwBA,CAAxB;AAA2B;;AAAAjD,QAAAA,CAAC,CAACmX,OAAF,CAAUvO,OAAV,CAAkB,UAAS5I,CAAT,EAAW;AAAC,cAAIc,CAAC,GAACb,CAAC,CAAC8W,0BAAF,CAA6B/W,CAA7B,EAA+BE,CAA/B,EAAiC2C,CAAjC,CAAN;AAA0CA,UAAAA,CAAC,IAAE/B,CAAC,CAAC,CAAD,CAAD,CAAK2E,YAAL,GAAkB3E,CAAC,CAAC,CAAD,CAAD,CAAK0E,UAA1B,EAAqCvF,CAAC,CAACuC,OAAF,CAAUC,KAAV,CAAgBxC,CAAhB,EAAkB,CAAC,QAAD,EAAWqT,MAAX,CAAkBxS,CAAlB,CAAlB,CAArC;AAA6E,SAArJ,GAAuJ,KAAKiS,YAAL,GAAkB,KAAKwC,WAAL,CAAiBC,eAAjB,EAAzK;AAA4M;AAAC,KAA/qG,EAAgrGxV,CAAC,CAACe,SAAF,CAAYyB,OAAZ,GAAoB,UAASxC,CAAT,EAAW;AAAC,UAAG,KAAKkV,SAAL,CAAe5G,cAAf,CAA8BtO,CAA9B,CAAH,EAAoC;AAAC,YAAIC,CAAC,GAAC,KAAKiV,SAAL,CAAelV,CAAf,CAAN;AAAwB;AAAE,YAAIE,CAAC,GAAC,EAAN;AAAS,YAAGwC,SAAS,CAACnB,MAAV,GAAiB,CAApB,EAAsB,KAAI,IAAIT,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC4B,SAAS,CAACnB,MAAxB,EAA+BT,CAAC,EAAhC;AAAmCZ,UAAAA,CAAC,CAACiC,IAAF,CAAOO,SAAS,CAAC5B,CAAD,CAAhB;AAAnC;AAAwDb,QAAAA,CAAC,CAACwC,KAAF,CAAQ,IAAR,EAAavC,CAAb;AAAgB;AAAC,KAAv3G,EAAw3GF,CAAC,CAACe,SAAF,CAAYgQ,MAAZ,GAAmB,YAAU;AAAC,WAAKuE,MAAL,CAAYG,YAAZ,GAA2BlC,OAA3B,MAAsC,KAAK/Q,OAAL,CAAa,MAAb,CAAtC;AAA2D,KAAj9G,EAAk9GxC,CAAC,CAACe,SAAF,CAAYkQ,OAAZ,GAAoB,YAAU;AAAC,WAAKzO,OAAL,CAAa,OAAb;AAAsB,KAAvgH,EAAwgHxC,CAAC,CAACe,SAAF,CAAY8P,gBAAZ,GAA6B,YAAU;AAAC,UAAI7Q,CAAC,GAAC,IAAN;AAAW2K,MAAAA,UAAU,CAAC,YAAU;AAAC,eAAO3K,CAAC,CAACwC,OAAF,CAAU,gBAAV,CAAP;AAAmC,OAA/C,EAAgD,CAAhD,CAAV;AAA6D,KAAxnH,EAAynHxC,CAAC,CAACe,SAAF,CAAY8O,cAAZ,GAA2B,UAAS7P,CAAT,EAAW;AAACA,MAAAA,CAAC,CAAC6F,MAAF,OAAa,KAAKuN,aAAL,GAAmB,CAAC,CAAjC;AAAoC,UAAInT,CAAC,GAAC,CAAN;AAAA,UAAQC,CAAC,GAAC,IAAV;AAAeF,MAAAA,CAAC,CAACuF,GAAF,CAAMqD,OAAN,CAAc,UAAS5I,CAAT,EAAW;AAAC,YAAGA,CAAC,CAACkF,QAAF,EAAH,EAAgBjF,CAAC,IAAED,CAAC,CAAC6E,KAAL,CAAhB,KAAgC,IAAG7E,CAAC,CAACgF,QAAF,EAAH,EAAgB;AAAC,cAAIlE,CAAC,GAACZ,CAAC,CAACqV,WAAF,CAAcc,aAAd,CAA4BpW,CAA5B,CAAN;AAAqCC,UAAAA,CAAC,CAACoV,MAAF,CAAS8B,YAAT,CAAsB,WAAtB,EAAkC,CAAC;AAACvD,YAAAA,KAAK,EAAC,IAAIyB,MAAM,CAACxC,KAAX,CAAiBhS,CAAC,CAACyV,UAAnB,EAA8BzV,CAAC,CAACoT,MAAhC,EAAuCpT,CAAC,CAACyV,UAAzC,EAAoDzV,CAAC,CAACoT,MAAtD,CAAP;AAAqEpP,YAAAA,IAAI,EAAC9E,CAAC,CAAC8E,IAA5E;AAAiFuS,YAAAA,gBAAgB,EAAC,CAAC;AAAnG,WAAD,CAAlC,GAA2IpX,CAAC,IAAED,CAAC,CAAC8E,IAAF,CAAOvD,MAArJ;AAA4J,SAAlN,MAAuN,IAAGvB,CAAC,CAACiF,QAAF,EAAH,EAAgB;AAAC,cAAIpC,CAAC,GAAC3C,CAAC,CAACqV,WAAF,CAAcc,aAAd,CAA4BpW,CAA5B,CAAN;AAAA,cAAqCgD,CAAC,GAAC/C,CAAC,CAACqV,WAAF,CAAcc,aAAd,CAA4BpW,CAAC,GAACD,CAAC,CAAC6E,KAAhC,CAAvC;AAA8E3E,UAAAA,CAAC,CAACoV,MAAF,CAAS8B,YAAT,CAAsB,WAAtB,EAAkC,CAAC;AAACvD,YAAAA,KAAK,EAAC,IAAIyB,MAAM,CAACxC,KAAX,CAAiBjQ,CAAC,CAAC0T,UAAnB,EAA8B1T,CAAC,CAACqR,MAAhC,EAAuCjR,CAAC,CAACsT,UAAzC,EAAoDtT,CAAC,CAACiR,MAAtD,CAAP;AAAqEpP,YAAAA,IAAI,EAAC,EAA1E;AAA6EuS,YAAAA,gBAAgB,EAAC,CAAC;AAA/F,WAAD,CAAlC;AAAuI;AAAC,OAAxf,GAA0f,KAAKtE,YAAL,GAAkB,KAAKwC,WAAL,CAAiBC,eAAjB,EAA5gB,EAA+iB,KAAKpC,aAAL,GAAmB,CAAC,CAAnkB;AAAqkB,KAAxxI,EAAyxIpT,CAAC,CAACe,SAAF,CAAYkR,eAAZ,GAA4B,UAASjS,CAAT,EAAW;AAACA,MAAAA,CAAC,CAAC6G,MAAF,CAAS,KAAKsN,QAAL,EAAT;AAA0B,KAA31I,EAA41InU,CAAn2I;AAAq2I,GAAvtK,EAAlY;;AAA4lL,SAAOc,CAAC,CAACwW,aAAF,GAAgBnU,CAAhB,EAAkB,CAACrC,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUyW,kBAAV,GAA6B;AAACC,IAAAA,IAAI,EAAC,GAAN;AAAUC,IAAAA,MAAM,EAAC,GAAjB;AAAqBC,IAAAA,SAAS,EAAC,GAA/B;AAAmCC,IAAAA,MAAM,EAAC,GAA1C;AAA8CC,IAAAA,IAAI,EAAC,GAAnD;AAAuDC,IAAAA,SAAS,EAAC,IAAjE;AAAsEC,IAAAA,KAAK,EAAC,GAA5E;AAAgFC,IAAAA,gBAAgB,EAAC,IAAjG;AAAsGC,IAAAA,eAAe,EAAC,KAAtH;AAA4HC,IAAAA,aAAa,EAAC,GAA1I;AAA8IC,IAAAA,WAAW,EAAC,IAA1J;AAA+JC,IAAAA,UAAU,EAAC,IAA1K;AAA+KC,IAAAA,SAAS,EAAC;AAAzL,GAA/C,EAA8OtX,CAAC,CAACuX,iBAAF,GAAoB;AAACC,IAAAA,uBAAuB,EAAC,GAAzB;AAA6BC,IAAAA,yBAAyB,EAAC;AAAvD,GAAlQ,EAA8T,CAACzX,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU0X,aAAV,GAAwB,YAAU;AAAC,QAAIxY,CAAC,GAACc,CAAC,CAACe,KAAR;;AAAc,aAAS5B,CAAT,GAAY;AAAC,WAAKwY,SAAL,GAAe,EAAf;AAAkB,UAAIxY,CAAC,GAAC,CAAC,KAAD,EAAO,KAAP,EAAa,OAAb,EAAqB,QAArB,EAA8B,OAA9B,EAAsC,OAAtC,CAAN;AAAqD,WAAKyY,QAAL,CAAc,KAAd,EAAoB;AAACC,QAAAA,MAAM,EAAC,gBAAS1Y,CAAT,EAAW;AAACD,UAAAA,CAAC,CAACqE,MAAF,CAASpE,CAAC,CAAC2Y,GAAX,EAAe,iCAAf;;AAAkD,eAAI,IAAI1Y,CAAC,GAAC,CAAC,KAAD,EAAO,KAAP,EAAa,OAAb,EAAqB,QAArB,EAA8B,OAA9B,EAAsC,OAAtC,CAAN,EAAqDY,CAAC,GAAC,OAAvD,EAA+D+B,CAAC,GAAC,CAArE,EAAuEA,CAAC,GAAC3C,CAAC,CAACqB,MAA3E,EAAkFsB,CAAC,EAAnF,EAAsF;AAAC,gBAAII,CAAC,GAAC/C,CAAC,CAAC2C,CAAD,CAAP;AAAWI,YAAAA,CAAC,IAAIhD,CAAL,KAASa,CAAC,IAAE,MAAImC,CAAJ,GAAM,IAAN,GAAWhD,CAAC,CAACgD,CAAD,CAAZ,GAAgB,GAA5B;AAAiC;;AAAA,iBAAOnC,CAAC,IAAE,GAAV;AAAc,SAAvN;AAAwN+X,QAAAA,WAAW,EAAC,qBAAS7Y,CAAT,EAAW;AAAC,eAAI,IAAIE,CAAC,GAAC,EAAN,EAASY,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACb,CAAC,CAACsB,MAArB,EAA4BT,CAAC,EAA7B,EAAgC;AAAC,gBAAI+B,CAAC,GAAC5C,CAAC,CAACa,CAAD,CAAP;AAAWd,YAAAA,CAAC,CAAC8Y,YAAF,CAAejW,CAAf,MAAoB3C,CAAC,CAAC2C,CAAD,CAAD,GAAK7C,CAAC,CAAC+Y,YAAF,CAAelW,CAAf,CAAzB;AAA4C;;AAAA,iBAAO3C,CAAP;AAAS;AAAjV,OAApB;AAAwW;;AAAA,WAAOD,CAAC,CAACc,SAAF,CAAY2X,QAAZ,GAAqB,UAAS1Y,CAAT,EAAWC,CAAX,EAAa;AAACa,MAAAA,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAepE,CAAC,CAAC0Y,MAAjB,EAAwB,oDAAxB,GAA8E7X,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAepE,CAAC,CAAC4Y,WAAjB,EAA6B,yDAA7B,CAA9E,EAAsK,KAAKJ,SAAL,CAAezY,CAAf,IAAkBC,CAAxL;AAA0L,KAA7N,EAA8NA,CAAC,CAACc,SAAF,CAAYiY,eAAZ,GAA4B,UAAShZ,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAO,KAAKgZ,mBAAL,CAAyBjZ,CAAzB,EAA2B,QAA3B,EAAoCC,CAApC,CAAP;AAA8C,KAAtT,EAAuTA,CAAC,CAACc,SAAF,CAAYmY,eAAZ,GAA4B,UAASlZ,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAKgZ,mBAAL,CAAyBjZ,CAAzB,EAA2B,QAA3B,KAAsC,KAAKiZ,mBAAL,CAAyBjZ,CAAzB,EAA2B,SAA3B,CAAtC,IAA6E,KAAKiZ,mBAAL,CAAyBjZ,CAAzB,EAA2B,QAA3B,CAAnF;AAAwH,aAAOC,CAAC,CAACmD,YAAF,CAAe,qBAAf,EAAqCpD,CAAC,CAAC4E,IAAvC,GAA6C3E,CAApD;AAAsD,KAA7gB,EAA8gBA,CAAC,CAACc,SAAF,CAAYoY,aAAZ,GAA0B,UAASnZ,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAACF,CAAC,CAAC4E,IAAR;AAAA,UAAa9D,CAAC,GAACd,CAAC,CAACoZ,IAAjB;AAAsB,WAAKX,SAAL,CAAevY,CAAf,KAAmB,KAAK,CAAL,KAAS,KAAKuY,SAAL,CAAevY,CAAf,EAAkBmZ,MAA9C,IAAsD,KAAKZ,SAAL,CAAevY,CAAf,EAAkBmZ,MAAlB,CAAyBvY,CAAzB,EAA2Bb,CAA3B,CAAtD;AAAoF,KAAhqB,EAAiqBA,CAAC,CAACc,SAAF,CAAY8X,WAAZ,GAAwB,UAAS7Y,CAAT,EAAW;AAAC,UAAIC,CAAC,GAACD,CAAC,CAAC+Y,YAAF,CAAe,qBAAf,CAAN;;AAA4C,UAAG9Y,CAAC,KAAGA,CAAC,GAACD,CAAC,CAACsZ,QAAF,CAAWC,WAAX,EAAL,CAAD,EAAgCtZ,CAAC,IAAE,KAAKwY,SAAL,CAAexY,CAAf,CAAtC,EAAwD;AAAC,YAAIC,CAAC,GAAC,KAAKuY,SAAL,CAAexY,CAAf,EAAkB4Y,WAAlB,CAA8B7Y,CAA9B,CAAN;AAAuC,eAAO,IAAIc,CAAC,CAAC0Y,MAAN,CAAavZ,CAAb,EAAeC,CAAf,CAAP;AAAyB;AAAC,KAA32B,EAA42BD,CAAC,CAACc,SAAF,CAAYkY,mBAAZ,GAAgC,UAASjZ,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAI2C,CAAC,GAAC7C,CAAC,CAAC4E,IAAR;AAAA,UAAa3B,CAAC,GAACjD,CAAC,CAACoZ,IAAjB;;AAAsB,UAAG,KAAKX,SAAL,CAAe5V,CAAf,KAAmB,KAAK4V,SAAL,CAAe5V,CAAf,EAAkB5C,CAAlB,CAAtB,EAA2C;AAAC,YAAIkD,CAAC,GAACrC,CAAC,CAACgC,QAAF,IAAY2W,MAAM,IAAEA,MAAM,CAAC3W,QAAjC;AAAA,YAA0CqD,CAAC,GAAC,KAAKsS,SAAL,CAAe5V,CAAf,EAAkB5C,CAAlB,EAAqBgD,CAArB,EAAuB/C,CAAvB,EAAyBiD,CAAzB,CAA5C;;AAAwE,YAAGgD,CAAH,EAAK;AAAC,cAAG,YAAU,OAAOA,CAApB,EAAsB;AAAC,gBAAIC,CAAC,GAAC,CAACtF,CAAC,CAACgC,QAAF,IAAYA,QAAb,EAAuBC,aAAvB,CAAqC,KAArC,CAAN;AAAkD,mBAAOqD,CAAC,CAAC/C,SAAF,GAAY8C,CAAZ,EAAcC,CAAC,CAACsT,UAAF,CAAa,CAAb,CAArB;AAAqC;;AAAA,cAAG,YAAU,OAAOvT,CAApB,EAAsB,OAAOrF,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAe,KAAK,CAAL,KAAS8B,CAAC,CAACwT,QAA1B,EAAmC,qBAAmB9W,CAAnB,GAAqB,0EAAxD,GAAoIsD,CAA3I;AAA6I;AAAC;AAAC,KAA/zC,EAAg0ClG,CAAC,CAACc,SAAF,CAAY6Y,oBAAZ,GAAiC,UAAS5Z,CAAT,EAAW;AAAC,aAAO,KAAKyY,SAAL,CAAezY,CAAf,KAAmB,KAAKyY,SAAL,CAAezY,CAAf,EAAkBqZ,MAA5C;AAAmD,KAAh6C,EAAi6CpZ,CAAx6C;AAA06C,GAA/3D,EAAtV,EAAwtE,CAACa,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU0Y,MAAV,GAAiB,YAAU;AAAC,QAAIxZ,CAAC,GAACc,CAAC,CAACyW,kBAAF,CAAqBS,eAA3B;AAAA,QAA2C/X,CAAC,GAACD,CAAC,GAAC,GAA/C;;AAAmD,aAASE,CAAT,CAAWF,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,EAAE,gBAAgBC,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAMF,CAAN,EAAQC,CAAR,CAAP;AAAkB,WAAK2E,IAAL,GAAU5E,CAAV,EAAY,KAAKoZ,IAAL,GAAUnZ,CAAC,IAAE,EAAzB;AAA4B;;AAAA,WAAOC,CAAC,CAACa,SAAF,CAAY8Y,YAAZ,GAAyB,YAAU;AAAC,UAAI3Z,CAAC,GAAC,EAAN;;AAAS,WAAI,IAAIY,CAAR,IAAaZ,CAAC,CAACF,CAAD,CAAD,GAAK,KAAK4E,IAAV,EAAe,KAAKwU,IAAjC;AAAsClZ,QAAAA,CAAC,CAACD,CAAC,GAACa,CAAH,CAAD,GAAO,KAAKsY,IAAL,CAAUtY,CAAV,CAAP;AAAtC;;AAA0D,aAAOZ,CAAP;AAAS,KAAhH,EAAiHA,CAAC,CAAC4Z,cAAF,GAAiB,UAAShZ,CAAT,EAAW;AAAC,UAAI+B,CAAC,GAAC/B,CAAC,CAACd,CAAD,CAAP;AAAA,UAAWiD,CAAC,GAAC,EAAb;;AAAgB,WAAI,IAAIE,CAAR,IAAarC,CAAb;AAAe,cAAIqC,CAAC,CAACiB,OAAF,CAAUnE,CAAV,CAAJ,KAAmBgD,CAAC,CAACE,CAAC,CAAC4W,MAAF,CAAS9Z,CAAC,CAACsB,MAAX,CAAD,CAAD,GAAsBT,CAAC,CAACqC,CAAD,CAA1C;AAAf;;AAA8D,aAAO,IAAIjD,CAAJ,CAAM2C,CAAN,EAAQI,CAAR,CAAP;AAAkB,KAA9O,EAA+O/C,CAAtP;AAAwP,GAA5Y,EAAzuE,EAAwnF,CAACY,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUkZ,kBAAV,GAA6B,YAAU;AAAC,QAAIha,CAAC,GAACc,CAAC,CAACuG,cAAR;AAAA,QAAuBpH,CAAC,GAACa,CAAC,CAAC0D,IAA3B;AAAA,QAAgCtE,CAAC,GAACY,CAAC,CAACe,KAApC;AAAA,QAA0CgB,CAAC,GAAC/B,CAAC,CAACyW,kBAA9C;AAAA,QAAiEtU,CAAC,GAAC;AAACoD,MAAAA,CAAC,EAAC,OAAH;AAAW4T,MAAAA,EAAE,EAAC,kBAAd;AAAiCC,MAAAA,EAAE,EAAC,WAApC;AAAgDC,MAAAA,EAAE,EAAC,YAASna,CAAT,EAAW;AAAC,eAAM,mBAAiB,KAAGA,CAApB,GAAsB,IAA5B;AAAiC;AAAhG,KAAnE;AAAA,QAAqKmD,CAAC,GAAC,EAAvK;;AAA0K,aAASgD,CAAT,CAAWlG,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAAC,WAAKsZ,UAAL,GAAgBna,CAAhB,EAAkB,KAAKoa,QAAL,GAAcvZ,CAAC,IAAE,EAAnC,EAAsC,KAAKwZ,cAAL,GAAoBpa,CAA1D,EAA4D,KAAKqa,kBAAL,GAAwB,IAApF;AAAyF,UAAI1X,CAAC,GAAC,IAAN;AAAW,WAAK2X,eAAL,GAAqB,IAAIxa,CAAJ,CAAM,UAASA,CAAT,EAAWC,CAAX,EAAa;AAAC4C,QAAAA,CAAC,CAAC4X,qBAAF,CAAwBza,CAAxB,EAA0BC,CAA1B;AAA6B,OAAjD,CAArB,EAAwE,KAAKya,mBAAL,EAAxE,EAAmGhU,CAAC,CAAC,IAAD,EAAM,2BAAN,CAApG,EAAuIA,CAAC,CAAC,IAAD,EAAM,qBAAN,CAAxI,EAAqKA,CAAC,CAAC,IAAD,EAAM,mBAAN,CAAtK,EAAiMiU,QAAQ,CAACC,UAAU,CAACC,OAAZ,CAAR,IAA8B,CAA9B,GAAgC,KAAKT,UAAL,CAAgBpY,EAAhB,CAAmB,SAAnB,EAA6B,KAAK8Y,mBAAlC,CAAhC,GAAuF,KAAKV,UAAL,CAAgBpY,EAAhB,CAAmB,QAAnB,EAA4B,KAAK8Y,mBAAjC,CAAxR,EAA8U,KAAKV,UAAL,CAAgBpY,EAAhB,CAAmB,cAAnB,EAAkC,KAAK+Y,yBAAvC,CAA9U,EAAgZ,KAAKX,UAAL,CAAgBpY,EAAhB,CAAmB,gBAAnB,EAAoC,KAAKgZ,iBAAzC,CAAhZ,EAA4c,KAAKC,SAAL,GAAe,CAA3d,EAA6d,KAAKC,mBAAL,GAAyB,EAAtf,EAAyf,KAAKC,WAAL,GAAiB,EAA1gB;AAA6gB;;AAAAjb,IAAAA,CAAC,CAAC4B,gBAAF,CAAmBqE,CAAnB,EAAqB,CAAC,QAAD,EAAU,kBAAV,EAA6B,SAA7B,CAArB;AAA8D,QAAIC,CAAC,GAACtF,CAAC,CAACuX,iBAAF,CAAoBC,uBAA1B;AAAA,QAAkDjS,CAAC,GAACvF,CAAC,CAACuX,iBAAF,CAAoBE,yBAAxE;;AAAkG,aAASjS,CAAT,CAAWtG,CAAX,EAAaC,CAAb,EAAe;AAAC,aAAOD,CAAC,CAACob,IAAF,GAAOnb,CAAC,CAACmb,IAAT,IAAepb,CAAC,CAACqb,EAAF,GAAKpb,CAAC,CAACob,EAA7B;AAAgC;;AAAA,aAAS9U,CAAT,CAAWvG,CAAX,EAAaC,CAAb,EAAe;AAAC,aAAOqG,CAAC,CAACtG,CAAD,EAAGC,CAAH,CAAD,IAAQ,CAAf;AAAiB;;AAAA,aAASuG,CAAT,CAAWxG,CAAX,EAAa;AAAC,UAAG,MAAIA,CAAC,CAACuB,MAAT,EAAgB,OAAO,CAAP;;AAAS,WAAI,IAAItB,CAAC,GAAC,CAAN,EAAQC,CAAC,GAAC,CAAd,EAAgBA,CAAC,GAACF,CAAC,CAACuB,MAApB,EAA2BrB,CAAC,EAA5B;AAA+BD,QAAAA,CAAC,IAAED,CAAC,CAACE,CAAD,CAAD,CAAKqB,MAAR;AAA/B;;AAA8C,aAAOtB,CAAC,GAACD,CAAC,CAACuB,MAAJ,GAAW,CAAlB;AAAoB;;AAAA,aAASkF,CAAT,CAAWzG,CAAX,EAAa;AAAC,WAAK+E,UAAL,GAAgB/E,CAAC,IAAE,EAAnB;AAAsB;;AAAA,aAAS0G,CAAT,CAAW1G,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAIC,CAAC,GAACF,CAAC,CAACC,CAAD,CAAP;;AAAWD,MAAAA,CAAC,CAACC,CAAD,CAAD,GAAK,YAAU;AAACC,QAAAA,CAAC,CAACuC,KAAF,CAAQzC,CAAR,EAAU0C,SAAV;AAAqB,OAArC;AAAsC;;AAAA,WAAOyD,CAAC,CAACpF,SAAF,CAAYuT,MAAZ,GAAmB,YAAU;AAAC,WAAK8F,UAAL,CAAgB9X,GAAhB,CAAoB,cAApB,EAAmC,KAAKyY,yBAAxC,GAAmE,KAAKX,UAAL,CAAgB9X,GAAhB,CAAoB,QAApB,EAA6B,KAAKwY,mBAAlC,CAAnE,EAA0H,KAAKV,UAAL,CAAgB9X,GAAhB,CAAoB,SAApB,EAA8B,KAAKwY,mBAAnC,CAA1H,EAAkL,KAAKV,UAAL,CAAgB9X,GAAhB,CAAoB,gBAApB,EAAqC,KAAK0Y,iBAA1C,CAAlL,EAA+O,KAAKM,iBAAL,EAA/O;AAAwQ,KAAtS,EAAuSnV,CAAC,CAACpF,SAAF,CAAYwa,eAAZ,GAA4B,UAASvb,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAACD,CAAC,IAAE,CAAC,CAAV;;AAAY,UAAG,KAAKub,eAAL,EAAH,EAA0B;AAAC,YAAI1a,CAAC,GAAC,KAAK2a,qBAAL,EAAN;AAAmC3a,QAAAA,CAAC,CAACd,CAAD,CAAD,KAAOE,CAAP,GAAS,OAAOY,CAAC,CAACd,CAAD,CAAjB,GAAqBc,CAAC,CAACd,CAAD,CAAD,GAAKE,CAA1B,EAA4B,KAAKqa,kBAAL,GAAwBzZ,CAApD;AAAsD,OAApH,MAAwH;AAAC,YAAI+B,CAAC,GAAC,KAAK4Y,qBAAL,GAA6Bzb,CAA7B,MAAkCE,CAAlC,IAAqCA,CAA3C;AAA6C,aAAKkD,YAAL,CAAkBpD,CAAlB,EAAoB6C,CAApB;AAAuB;AAAC,KAA3hB,EAA4hBsD,CAAC,CAACpF,SAAF,CAAYqC,YAAZ,GAAyB,UAASpD,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,KAAKka,UAAX;;AAAsB,UAAG,KAAKoB,eAAL,EAAH,EAA0B;AAAC,YAAI1a,CAAC,GAAC,KAAK2a,qBAAL,EAAN;AAAmC,SAAC,CAAD,KAAKxb,CAAL,GAAO,OAAOa,CAAC,CAACd,CAAD,CAAf,GAAmBc,CAAC,CAACd,CAAD,CAAD,GAAKC,CAAxB,EAA0B,KAAKsa,kBAAL,GAAwBzZ,CAAlD;AAAoD,OAAlH,MAAuH,KAAK4a,oBAAL,CAA0Bxb,CAAC,CAAC0T,YAAF,CAAe1T,CAAC,CAACiS,SAAF,CAAY,OAAZ,CAAf,CAA1B,EAA+DjS,CAAC,CAAC0T,YAAF,CAAe1T,CAAC,CAACiS,SAAF,CAAY,KAAZ,CAAf,CAA/D,EAAkG,UAASjS,CAAT,EAAW;AAAC,SAAC,CAAD,KAAKD,CAAL,GAAO,OAAOC,CAAC,CAACF,CAAD,CAAf,GAAmBE,CAAC,CAACF,CAAD,CAAD,GAAKC,CAAxB;AAA0B,OAAxI,GAA0I,KAAK0b,wBAAL,EAA1I;AAA0K,KAA13B,EAA23BxV,CAAC,CAACpF,SAAF,CAAY2a,oBAAZ,GAAiC,UAAS1b,CAAT,EAAWE,CAAX,EAAaY,CAAb,EAAemC,CAAf,EAAiBE,CAAjB,EAAmB;AAAC,UAAIgD,CAAC,GAAC,EAAN;AAAA,UAASC,CAAC,GAACpG,CAAX;AAAA,UAAaqG,CAAC,GAAC,IAAf;AAAoB,WAAKmU,eAAL,CAAqBtS,UAArB,CAAgC,IAAIjI,CAAJ,CAAMD,CAAN,EAAQE,CAAC,GAACF,CAAV,CAAhC,EAA6C,UAASA,CAAT,EAAWC,CAAX,EAAa;AAAC,YAAIC,CAAC,GAAC,EAAN;;AAAS,aAAI,IAAIoG,CAAR,IAAatG,CAAC,CAAC+E,UAAf;AAA0B7E,UAAAA,CAAC,CAACoG,CAAD,CAAD,GAAKtG,CAAC,CAAC+E,UAAF,CAAauB,CAAb,CAAL;AAA1B;;AAA+CpG,QAAAA,CAAC,CAAC2C,CAAC,CAACoV,aAAH,CAAD,IAAoB,CAAC9U,CAArB,IAAwBrC,CAAC,CAACZ,CAAD,CAAzB;AAA6B,YAAIqG,CAAC,GAAC,EAAN;AAAA,YAASC,CAAC,GAAC,EAAX;AAAc,eAAOH,CAAC,CAACuV,yBAAF,CAA4B5b,CAAC,CAAC+E,UAA9B,EAAyC7E,CAAzC,EAA2CqG,CAA3C,EAA6CC,CAA7C,GAAgD,UAASxG,CAAT,EAAW;AAAC,eAAI,IAAIC,CAAR,IAAaD,CAAb;AAAe,mBAAM,CAAC,CAAP;AAAf;;AAAwB,iBAAM,CAAC,CAAP;AAAS,SAA7C,CAA8CuG,CAA9C,KAAkDJ,CAAC,CAAChE,IAAF,CAAO;AAACiG,UAAAA,KAAK,EAAChC,CAAP;AAAS1B,UAAAA,GAAG,EAAC0B,CAAC,GAACnG,CAAf;AAAiB8E,UAAAA,UAAU,EAACwB,CAA5B;AAA8BsV,UAAAA,iBAAiB,EAACrV,CAAhD;AAAkDsV,UAAAA,MAAM,EAAC7Y;AAAzD,SAAP,CAAlG,EAAsKmD,CAAC,IAAEnG,CAAzK,EAA2K,IAAIwG,CAAJ,CAAMvG,CAAN,CAAlL;AAA2L,OAAzV,GAA2ViG,CAAC,CAAC5E,MAAF,GAAS,CAAT,IAAY,KAAKiB,OAAL,CAAa,kBAAb,EAAgC,IAAhC,EAAqC2D,CAArC,CAAvW;AAA+Y,KAAn1C,EAAo1CA,CAAC,CAACpF,SAAF,CAAY6a,yBAAZ,GAAsC,UAAS5b,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAAC,UAAI+B,CAAJ;AAAA,UAAMI,CAAC,GAAC,EAAR;;AAAW,WAAIJ,CAAJ,IAAS7C,CAAT;AAAWiD,QAAAA,CAAC,CAACJ,CAAD,CAAD,GAAK,CAAC,CAAN;AAAX;;AAAmB,WAAIA,CAAJ,IAAS5C,CAAT;AAAWgD,QAAAA,CAAC,CAACJ,CAAD,CAAD,GAAK,CAAC,CAAN;AAAX;;AAAmB,WAAIA,CAAJ,IAASI,CAAT;AAAWJ,QAAAA,CAAC,IAAI5C,CAAL,GAAO4C,CAAC,IAAI7C,CAAL,GAAOA,CAAC,CAAC6C,CAAD,CAAD,KAAO5C,CAAC,CAAC4C,CAAD,CAAR,KAAc3C,CAAC,CAAC2C,CAAD,CAAD,GAAK5C,CAAC,CAAC4C,CAAD,CAAN,EAAU/B,CAAC,CAAC+B,CAAD,CAAD,GAAK7C,CAAC,CAAC6C,CAAD,CAA9B,CAAP,IAA2C3C,CAAC,CAAC2C,CAAD,CAAD,GAAK5C,CAAC,CAAC4C,CAAD,CAAN,EAAU/B,CAAC,CAAC+B,CAAD,CAAD,GAAK,CAAC,CAA3D,CAAP,IAAsE3C,CAAC,CAAC2C,CAAD,CAAD,GAAK,CAAC,CAAN,EAAQ/B,CAAC,CAAC+B,CAAD,CAAD,GAAK7C,CAAC,CAAC6C,CAAD,CAApF;AAAX;AAAoG,KAAjiD,EAAkiDsD,CAAC,CAACpF,SAAF,CAAYgb,mBAAZ,GAAgC,UAAS/b,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAJ;AAAA,UAAMY,CAAC,GAAC,KAAKkb,yBAAL,EAAR;AAAyC9b,MAAAA,CAAC,GAAC,EAAEF,CAAC,IAAIc,CAAL,IAAQA,CAAC,CAACd,CAAD,CAAD,KAAOC,CAAjB,KAAqBA,CAAvB,EAAyB,KAAKgc,gBAAL,CAAsBjc,CAAtB,EAAwBE,CAAxB,CAAzB;AAAoD,KAA7qD,EAA8qDiG,CAAC,CAACpF,SAAF,CAAYkb,gBAAZ,GAA6B,UAASjc,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAKic,gCAAL,CAAsC,UAAShc,CAAT,EAAW;AAAC,SAAC,CAAD,KAAKD,CAAL,GAAO,OAAOC,CAAC,CAACF,CAAD,CAAf,GAAmBE,CAAC,CAACF,CAAD,CAAD,GAAKC,CAAxB;AAA0B,OAA5E;AAA8E,KAAvyD,EAAwyDkG,CAAC,CAACpF,SAAF,CAAYmb,gCAAZ,GAA6C,UAASlc,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAKma,UAAX;AAAA,UAAsBla,CAAC,GAACD,CAAC,CAACkS,SAAF,CAAY,OAAZ,CAAxB;AAAA,UAA6CrR,CAAC,GAACb,CAAC,CAACkS,SAAF,CAAY,KAAZ,CAA/C;AAAA,UAAkEtP,CAAC,GAAC3C,CAAC,CAACkb,IAAtE;AAAA,UAA2EnY,CAAC,GAACnC,CAAC,CAACsa,IAA/E;AAAA,UAAoFjY,CAAC,GAAClD,CAAC,CAACkc,OAAF,CAAUlZ,CAAV,CAAtF;AAAA,UAAmGkD,CAAC,GAAC,KAAKiW,0BAAL,CAAgCjZ,CAAC,CAAC4W,MAAF,CAAS,CAAT,EAAWjZ,CAAC,CAACua,EAAb,CAAhC,CAArG;AAAuJpY,MAAAA,CAAC,GAACJ,CAAF,IAAKsD,CAAL,IAAQlD,CAAC,EAAT,EAAY,KAAKoZ,oBAAL,CAA0BxZ,CAA1B,EAA4BI,CAA5B,EAA8BjD,CAA9B,CAAZ;AAA6C,KAAriE,EAAsiEmG,CAAC,CAACpF,SAAF,CAAYsb,oBAAZ,GAAiC,UAASrc,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAI,IAAIY,CAAC,GAACd,CAAV,EAAYc,CAAC,IAAEb,CAAf,EAAiBa,CAAC,EAAlB,EAAqB;AAAC,YAAImC,CAAC,GAAC,KAAKmX,UAAL,CAAgB+B,OAAhB,CAAwBrb,CAAxB,CAAN;AAAA,YAAiCqC,CAAC,GAAC,KAAKiX,UAAL,CAAgBxG,YAAhB,CAA6B;AAACwH,UAAAA,IAAI,EAACta,CAAN;AAAQua,UAAAA,EAAE,EAAC;AAAX,SAA7B,CAAnC;;AAA+E,YAAGpY,CAAC,CAAC,CAAD,CAAD,KAAOmD,CAAV,EAAY;AAAC,cAAID,CAAC,GAAC,EAAN;AAASA,UAAAA,CAAC,CAACtD,CAAC,CAACoV,aAAH,CAAD,GAAmB,CAAC,CAApB,EAAsB/X,CAAC,CAACiG,CAAD,CAAvB,EAA2B,KAAKmW,UAAL,CAAgBnZ,CAAhB,EAAkBiD,CAAlB,EAAoBD,CAApB,CAA3B;AAAkD,SAAxE,MAA6E,KAAKuV,oBAAL,CAA0BvY,CAA1B,EAA4BA,CAAC,GAAC,CAA9B,EAAgCjD,CAAhC,EAAkC,IAAlC,EAAuC,CAAC,CAAxC;AAA2C;AAAC,KAArzE,EAAszEiG,CAAC,CAACpF,SAAF,CAAYwb,WAAZ,GAAwB,UAASvc,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB+B,CAAjB,EAAmB;AAAC,WAAKoY,SAAL;AAAiB,UAAIhY,CAAC,GAAC,UAAQ,KAAKgY,SAAnB;AAA6B,WAAKC,mBAAL,CAAyBjY,CAAzB,IAA4B;AAACuZ,QAAAA,UAAU,EAAC3Z,CAAZ;AAAckC,QAAAA,UAAU,EAACjE;AAAzB,OAA5B;AAAwD,UAAIqC,CAAC,GAAC,KAAKiX,UAAX;AAAA,UAAsBjU,CAAC,GAAChD,CAAC,CAAC2Q,YAAF,CAAe9T,CAAf,CAAxB;AAAA,UAA0CoG,CAAC,GAAC,YAAU,OAAOnG,CAAjB,GAAmBkD,CAAC,CAAC2Q,YAAF,CAAe7T,CAAf,CAAnB,GAAqC,IAAjF;AAAsFkD,MAAAA,CAAC,CAACsZ,YAAF,CAAevc,CAAf,EAAiBiG,CAAjB,EAAmBC,CAAnB,EAAqBnD,CAArB;AAAwB,KAAtjF,EAAujFkD,CAAC,CAACpF,SAAF,CAAYub,UAAZ,GAAuB,UAAStc,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAAC,UAAI+B,CAAC,GAAC,KAAKuX,UAAX;AAAA,UAAsBnX,CAAC,GAACJ,CAAC,CAACsP,SAAF,EAAxB;AAAA,UAAsChP,CAAC,GAAC,iBAAerC,CAAf,IAAkB,CAAC+B,CAAC,CAAC6Z,iBAAF,EAAnB,IAA0C1c,CAAC,IAAE6C,CAAC,CAAC+Q,YAAF,CAAe3Q,CAAf,CAArF;AAAuG,WAAKsZ,WAAL,CAAiBvc,CAAjB,EAAmB,IAAnB,EAAwBC,CAAxB,EAA0BC,CAA1B,EAA4BY,CAA5B,GAA+BqC,CAAC,IAAEN,CAAC,CAACqP,SAAF,CAAYjP,CAAZ,CAAlC;AAAiD,KAAxvF,EAAyvFkD,CAAC,CAACpF,SAAF,CAAY4b,UAAZ,GAAuB,UAAS3c,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAIY,CAAC,GAAC,KAAKsZ,UAAX;AAAsBtZ,MAAAA,CAAC,CAAC2b,YAAF,CAAe,EAAf,EAAkB3b,CAAC,CAACgT,YAAF,CAAe9T,CAAf,CAAlB,EAAoCc,CAAC,CAACgT,YAAF,CAAe7T,CAAf,CAApC,EAAsDC,CAAtD;AAAyD,KAA/2F,EAAg3FiG,CAAC,CAACpF,SAAF,CAAY6b,oBAAZ,GAAiC,UAAS5c,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAIY,CAAC,GAAC,KAAKsZ,UAAX;AAAA,UAAsBvX,CAAC,GAAC/B,CAAC,CAAC8S,YAAF,CAAe9S,CAAC,CAACqR,SAAF,CAAY,MAAZ,CAAf,CAAxB;AAA4D,WAAK0K,cAAL,CAAoBha,CAApB,EAAsB7C,CAAtB,EAAwBC,CAAxB,EAA0BC,CAA1B;AAA6B,KAA1/F,EAA2/FiG,CAAC,CAACpF,SAAF,CAAY8b,cAAZ,GAA2B,UAAS7c,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe2C,CAAf,EAAiB;AAAC,WAAKuX,UAAL;AAAgB,WAAK0C,aAAL,CAAmB9c,CAAnB,EAAqB,IAAIc,CAAC,CAAC0Y,MAAN,CAAavZ,CAAb,EAAeC,CAAf,CAArB,EAAuC2C,CAAvC;AAA0C,KAAlmG,EAAmmGsD,CAAC,CAACpF,SAAF,CAAY+b,aAAZ,GAA0B,UAAS9c,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKqc,WAAL,CAAiBvc,CAAjB,EAAmB,IAAnB,EAAwBqG,CAAxB,EAA0BpG,CAAC,CAAC4Z,YAAF,EAA1B,EAA2C3Z,CAA3C;AAA8C,KAA3rG,EAA4rGiG,CAAC,CAACpF,SAAF,CAAYgc,iBAAZ,GAA8B,UAAS/c,CAAT,EAAWE,CAAX,EAAa;AAAC,WAAI,IAAIY,CAAC,GAAC,EAAN,EAAS+B,CAAC,GAAC,KAAK2X,eAAL,CAAqB1R,wBAArB,CAA8C,IAAI7I,CAAJ,CAAMD,CAAN,EAAQE,CAAC,GAACF,CAAV,CAA9C,CAAX,EAAuEiD,CAAC,GAAC,CAA7E,EAA+EA,CAAC,GAACJ,CAAC,CAACtB,MAAnF,EAA0F0B,CAAC,EAA3F;AAA8FnC,QAAAA,CAAC,CAACqB,IAAF,CAAO;AAACZ,UAAAA,MAAM,EAACsB,CAAC,CAACI,CAAD,CAAD,CAAK1B,MAAb;AAAoBwD,UAAAA,UAAU,EAAClC,CAAC,CAACI,CAAD,CAAD,CAAKqE,UAAL,CAAgBvC;AAA/C,SAAP;AAA9F;;AAAiK,aAAOjE,CAAP;AAAS,KAAl5G,EAAm5GqF,CAAC,CAACpF,SAAF,CAAY2D,GAAZ,GAAgB,YAAU;AAAC,UAAI1E,CAAC,GAAC,KAAKoa,UAAL,CAAgB4C,SAAhB,KAA4B,CAAlC;AAAoC,aAAO,KAAK5C,UAAL,CAAgBxG,YAAhB,CAA6B;AAACwH,QAAAA,IAAI,EAACpb,CAAN;AAAQqb,QAAAA,EAAE,EAAC,KAAKjB,UAAL,CAAgB+B,OAAhB,CAAwBnc,CAAxB,EAA2BuB;AAAtC,OAA7B,CAAP;AAAmF,KAAriH,EAAsiH4E,CAAC,CAACpF,SAAF,CAAYmS,QAAZ,GAAqB,UAASlT,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,KAAKka,UAAL,CAAgBtG,YAAhB,CAA6B9T,CAA7B,CAAN;AAAA,UAAsCc,CAAC,GAAC,KAAKsZ,UAAL,CAAgBtG,YAAhB,CAA6B7T,CAA7B,CAAxC;AAAwE,aAAO,KAAKma,UAAL,CAAgBlH,QAAhB,CAAyBhT,CAAzB,EAA2BY,CAA3B,CAAP;AAAqC,KAAtrH,EAAurHqF,CAAC,CAACpF,SAAF,CAAY2Z,mBAAZ,GAAgC,YAAU;AAAC,UAAI1a,CAAC,GAAC,KAAK0E,GAAL,EAAN;AAAiB,YAAI1E,CAAJ,IAAO,KAAKwa,eAAL,CAAqBzS,mBAArB,CAAyC,IAAI9H,CAAJ,CAAM,CAAN,EAAQD,CAAR,CAAzC,EAAoD,IAAIyG,CAAJ,EAApD,CAAP;AAAkE,KAArzH,EAAszHN,CAAC,CAACpF,SAAF,CAAY0Z,qBAAZ,GAAkC,UAASza,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAJ;AAAA,UAAMY,CAAC,GAAC,EAAR;AAAW,WAAKmc,0BAAL,CAAgCjd,CAAhC,EAAkCC,CAAlC;;AAAqC,WAAI,IAAIgD,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACjD,CAAC,CAACuB,MAAhB,EAAuB0B,CAAC,EAAxB,EAA2B;AAAC,YAAIE,CAAC,GAACnD,CAAC,CAACiD,CAAD,CAAD,CAAKqE,UAAL,CAAgBvC,UAAtB;AAAiClC,QAAAA,CAAC,CAACoV,aAAF,IAAmB9U,CAAnB,KAAuBrC,CAAC,CAAC,KAAKsZ,UAAL,CAAgBtG,YAAhB,CAA6B9T,CAAC,CAACiD,CAAD,CAAD,CAAKwB,GAAlC,EAAuC2W,IAAxC,CAAD,GAA+C,CAAC,CAAvE,GAA0E,CAAClb,CAAC,GAACF,CAAC,CAACiD,CAAD,CAAD,CAAKyE,iBAAL,EAAH,KAA8BxH,CAAC,CAAC6R,KAAF,EAAxG;AAAkH;;AAAA,WAAI9O,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAChD,CAAC,CAACsB,MAAZ,EAAmB0B,CAAC,EAApB,EAAuB;AAAC,YAAIkD,CAAC,GAAClG,CAAC,CAACgD,CAAD,CAAD,CAAKqE,UAAX;AAAA,YAAsBlB,CAAC,IAACvD,CAAC,CAACoV,aAAF,IAAmB9R,CAAC,CAACpB,UAAtB,CAAvB;AAAA,YAAwDsB,CAAC,IAACxD,CAAC,CAACmV,eAAF,IAAqB7R,CAAC,CAACpB,UAAxB,CAAzD;AAAA,YAA4FuB,CAAC,GAAC,KAAK8T,UAAL,CAAgBtG,YAAhB,CAA6B7T,CAAC,CAACgD,CAAD,CAAD,CAAKwB,GAAlC,CAA9F;AAAqI,YAAG2B,CAAH,EAAKtF,CAAC,CAACwF,CAAC,CAAC8U,IAAH,CAAD,GAAU,CAAC,CAAX,CAAL,KAAuB,IAAG/U,CAAH,EAAK,KAAK6W,WAAL,CAAiBjd,CAAC,CAACgD,CAAD,CAAlB,EAAL,KAAgC;AAAC,cAAIsD,CAAC,GAAC,KAAK4W,0BAAL,CAAgChX,CAAC,CAACpB,UAAlC,CAAN;;AAAoD,cAAG,OAAKwB,CAAR,EAAU;AAAC,gBAAIC,CAAC,GAAC,KAAK4T,UAAL,CAAgBtG,YAAhB,CAA6B7T,CAAC,CAACgD,CAAD,CAAD,CAAKwB,GAAL,GAASxE,CAAC,CAACgD,CAAD,CAAD,CAAK1B,MAA3C,CAAN;AAAyDrB,YAAAA,CAAC,GAAC,KAAKka,UAAL,CAAgBgD,QAAhB,CAAyB9W,CAAzB,EAA2BE,CAA3B,EAA6B;AAACuH,cAAAA,SAAS,EAACxH;AAAX,aAA7B,CAAF,EAA8CtG,CAAC,CAACgD,CAAD,CAAD,CAAK0E,YAAL,CAAkBzH,CAAlB,CAA9C;AAAmE;AAAC;AAAC;;AAAA,WAAI,IAAIuG,CAAR,IAAa3F,CAAb;AAAe,aAAKqa,WAAL,CAAiBhZ,IAAjB,CAAsB,KAAKiY,UAAL,CAAgBiD,aAAhB,CAA8BC,MAAM,CAAC7W,CAAD,CAApC,CAAtB,GAAgE,KAAK8W,iBAAL,EAAhE;AAAf;AAAwG,KAA/jJ,EAAgkJpX,CAAC,CAACpF,SAAF,CAAYkc,0BAAZ,GAAuC,UAASjd,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAI,IAAIC,CAAC,GAACF,CAAC,CAACuB,MAAZ,EAAmBrB,CAAC,EAApB;AAAwB,aAAI,IAAIY,CAAC,GAACd,CAAC,CAACE,CAAD,CAAP,EAAW2C,CAAC,GAAC5C,CAAC,CAACsB,MAAnB,EAA0BsB,CAAC,EAA3B,GAA+B;AAAC,cAAII,CAAC,GAAChD,CAAC,CAAC4C,CAAD,CAAP;;AAAW,cAAG/B,CAAC,CAAC2D,GAAF,IAAOxB,CAAC,CAACwB,GAAT,IAAc3D,CAAC,CAACS,MAAF,IAAU0B,CAAC,CAAC1B,MAA1B,IAAkCT,CAAC,CAACwG,UAAF,CAAavC,UAAb,CAAwByY,GAA1D,IAA+D1c,CAAC,CAACwG,UAAF,CAAavC,UAAb,CAAwByY,GAAxB,IAA6Bva,CAAC,CAACqE,UAAF,CAAavC,UAAb,CAAwByY,GAAvH,EAA2H;AAAC,gBAAIra,CAAC,GAACF,CAAC,CAACqE,UAAF,CAAavC,UAAb,CAAwByY,GAA9B;;AAAkC,gBAAG,KAAKlD,cAAL,CAAoBV,oBAApB,CAAyCzW,CAAzC,CAAH,EAA+C;AAACnD,cAAAA,CAAC,CAACuC,MAAF,CAASrC,CAAT,EAAW,CAAX,GAAcD,CAAC,CAACsC,MAAF,CAASM,CAAT,EAAW,CAAX,CAAd;AAA4B,kBAAIsD,CAAC,GAACrF,CAAC,CAAC4G,iBAAF,EAAN;AAA4BvB,cAAAA,CAAC,CAACkT,MAAF,CAASpW,CAAC,CAACqE,UAAF,CAAavC,UAAtB,GAAkC9B,CAAC,CAAC0E,YAAF,CAAexB,CAAf,CAAlC;AAAoD;AAAC;AAAC;AAA/X;AAAgY,KAAr/J,EAAs/JA,CAAC,CAACpF,SAAF,CAAYwc,iBAAZ,GAA8B,YAAU;AAAC,UAAG,QAAM,KAAKE,gBAAd,EAA+B;AAAC,YAAIzd,CAAC,GAAC,IAAN;AAAW,aAAKyd,gBAAL,GAAsB9S,UAAU,CAAC,YAAU;AAAC3K,UAAAA,CAAC,CAACyd,gBAAF,GAAmB,IAAnB;;AAAwB,eAAI,IAAIxd,CAAC,GAAC,EAAN,EAASC,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACF,CAAC,CAACmb,WAAF,CAAc5Z,MAAjC,EAAwCrB,CAAC,EAAzC,EAA4C;AAAC,gBAAIY,CAAC,GAACd,CAAC,CAACoa,UAAF,CAAasD,aAAb,CAA2B1d,CAAC,CAACmb,WAAF,CAAcjb,CAAd,CAA3B,CAAN;AAAmDD,YAAAA,CAAC,CAACkC,IAAF,CAAOmb,MAAM,CAACxc,CAAD,CAAb;AAAkB;;AAAAd,UAAAA,CAAC,CAACmb,WAAF,GAAc,EAAd,EAAiBlb,CAAC,CAAC0d,IAAF,CAAO,UAAS3d,CAAT,EAAWC,CAAX,EAAa;AAAC,mBAAOD,CAAC,GAACC,CAAT;AAAW,WAAhC,CAAjB;AAAmD,cAAI4C,CAAC,GAAC,CAAC,CAAP;;AAAS,eAAI3C,CAAC,GAAC,CAAN,EAAQA,CAAC,GAACD,CAAC,CAACsB,MAAZ,EAAmBrB,CAAC,EAApB,EAAuB;AAAC,gBAAI+C,CAAC,GAAChD,CAAC,CAACC,CAAD,CAAP;AAAW+C,YAAAA,CAAC,GAACJ,CAAF,KAAMA,CAAC,GAAC7C,CAAC,CAAC4d,0CAAF,CAA6C3a,CAA7C,EAA+CA,CAA/C,CAAR;AAA2D;AAAC,SAAjT,EAAkT,CAAlT,CAAhC;AAAqV;AAAC,KAAh6K,EAAi6KkD,CAAC,CAACpF,SAAF,CAAY8c,gBAAZ,GAA6B,UAAS7d,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC6C,QAAQ,CAACgS,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAN;AAAA,UAA+C5U,CAAC,GAAC4C,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAjD;AAAiF7C,MAAAA,CAAC,CAAC0E,IAAF,GAAO,UAAP,EAAkB1E,CAAC,CAAC4d,UAAF,GAAa5d,CAAC,CAAC4d,UAAF,CAAaC,OAAb,GAAqB/d,CAAlC,GAAoCE,CAAC,CAACgD,WAAF,CAAcJ,QAAQ,CAACQ,cAAT,CAAwBtD,CAAxB,CAAd,CAAtD,EAAgGC,CAAC,CAACiD,WAAF,CAAchD,CAAd,CAAhG;AAAiH,KAA5oL,EAA6oLiG,CAAC,CAACpF,SAAF,CAAYoc,0BAAZ,GAAuC,UAASnd,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,EAAN;;AAAS,WAAI,IAAIC,CAAR,IAAaF,CAAb,EAAe;AAAC,YAAImG,CAAC,GAACnG,CAAC,CAACE,CAAD,CAAP;AAAW,YAAGA,CAAC,KAAG2C,CAAC,CAACoV,aAAT,EAAuBnX,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAe,CAAC,CAAD,KAAK8B,CAApB,EAAsB,sDAAtB,EAAvB,KAAyG;AAAC,cAAIC,CAAC,GAAC,CAAC,KAAKiU,QAAL,CAAc2D,SAAd,IAAyB,OAA1B,IAAmC9d,CAAzC;;AAA2C,cAAG,CAAC,CAAD,KAAKiG,CAAR,EAAU;AAACjG,YAAAA,CAAC,KAAG2C,CAAC,CAACgV,SAAN,IAAiB,YAAU,OAAO1R,CAAlC,KAAsCA,CAAC,IAAE,IAAzC;AAA+C,gBAAIE,CAAC,GAACF,CAAC,CAACnF,QAAF,GAAauY,WAAb,GAA2BrV,OAA3B,CAAmC,cAAnC,EAAkD,GAAlD,CAAN;;AAA6D,gBAAGkC,CAAC,IAAE,MAAIC,CAAP,EAASpD,CAAC,CAAC/C,CAAD,CAAD,KAAOiD,CAAC,CAACjD,CAAD,CAAD,KAAOiD,CAAC,CAACjD,CAAD,CAAD,GAAK,EAAZ,GAAgB,CAACiD,CAAC,CAACjD,CAAD,CAAD,CAAKmG,CAAL,CAAxB,CAAZ,EAA6C;AAAClD,cAAAA,CAAC,CAACjD,CAAD,CAAD,CAAKmG,CAAL,IAAQ,CAAC,CAAT;AAAW,kBAAIC,CAAC,GAACrD,CAAC,CAAC/C,CAAD,CAAP;AAAA,kBAAWqG,CAAC,GAAC,cAAY,OAAOD,CAAnB,GAAqBA,CAAC,CAACH,CAAD,CAAtB,GAA0BG,CAAC,GAAC,IAAF,GAAOH,CAA9C;AAAA,kBAAgDK,CAAC,GAACtG,CAAC,IAAE2C,CAAC,CAACqV,WAAL,GAAiB,SAAO9R,CAAxB,GAA0B,MAAIA,CAAhF;;AAAkF,kBAAG,KAAKyX,gBAAL,CAAsBrX,CAAC,GAAC,KAAF,GAAQD,CAAR,GAAU,IAAhC,GAAsCrG,CAAC,KAAG2C,CAAC,CAACqV,WAA/C,EAA2D;AAAC1R,gBAAAA,CAAC,GAAC,yBAAuBJ,CAAzB;AAA2B,qBAAKyX,gBAAL,CAAsBrX,CAAC,GAAC,KAAF,GAAQD,CAAR,GAAU,IAAhC;AAAsC;AAAC;AAAC;;AAAAtG,UAAAA,CAAC,GAACA,CAAC,GAAC,GAAF,GAAMmG,CAAR;AAAU;AAAC;;AAAA,aAAOnG,CAAP;AAAS,KAA9wM,EAA+wMkG,CAAC,CAACpF,SAAF,CAAYmc,WAAZ,GAAwB,UAASld,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAACD,CAAC,CAACsH,UAAF,CAAavC,UAAnB,EAA8B7E,CAAC,GAACY,CAAC,CAAC0Y,MAAF,CAASM,cAAT,CAAwB7Z,CAAxB,CAAhC,EAA2D4C,CAAC,GAAC,KAAKuX,UAAlE,EAA6EnX,CAAC,GAAC,IAA/E,EAAoFE,CAAC,GAAC,EAAtF,EAAyFgD,CAAC,GAAC,CAA/F,EAAiGA,CAAC,GAACnG,CAAC,CAACuB,MAArG,EAA4G4E,CAAC,EAA7G,EAAgH;AAAC,YAAIC,CAAC,GAACvD,CAAC,CAACiR,YAAF,CAAe9T,CAAC,CAACyE,GAAF,GAAM0B,CAArB,CAAN;AAAA,YAA8BE,CAAC,GAACxD,CAAC,CAACiR,YAAF,CAAe9T,CAAC,CAACyE,GAAF,GAAM0B,CAAN,GAAQ,CAAvB,CAAhC;AAAA,YAA0DG,CAAC,GAAC;AAAC2X,UAAAA,SAAS,EAAC,CAAC,CAAZ;AAAcC,UAAAA,MAAM,EAAC,CAAC,CAAtB;AAAwBC,UAAAA,aAAa,EAAC,CAAC,CAAvC;AAAyCC,UAAAA,cAAc,EAAC,CAAC;AAAzD,SAA5D;AAAA,YAAwH7X,CAAC,GAAC,KAAK8X,mBAAL,CAAyBne,CAAzB,EAA2BF,CAAC,CAACyE,GAA7B,CAA1H;AAAA,YAA4J+B,CAAC,GAAC,KAAK8T,cAAL,CAAoBtB,eAApB,CAAoC9Y,CAApC,EAAsCqG,CAAtC,CAA9J;AAAuMC,QAAAA,CAAC,KAAGF,CAAC,CAACgY,YAAF,GAAe9X,CAAlB,CAAD;AAAsB,YAAIC,CAAC,GAAC5D,CAAC,CAACua,QAAF,CAAWhX,CAAX,EAAaC,CAAb,EAAeC,CAAf,CAAN;AAAwBnD,QAAAA,CAAC,CAAChB,IAAF,CAAOsE,CAAP,GAAUF,CAAC,CAACgY,SAAF,CAAY9X,CAAZ,CAAV;AAAyB;;AAAAzG,MAAAA,CAAC,CAAC2H,YAAF,CAAe;AAACoK,QAAAA,KAAK,EAAC,iBAAU;AAAC,eAAI,IAAI/R,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACmD,CAAC,CAAC5B,MAAhB,EAAuBvB,CAAC,EAAxB;AAA2BmD,YAAAA,CAAC,CAACnD,CAAD,CAAD,CAAK+R,KAAL;AAA3B;AAAwC,SAA1D;AAA2DsH,QAAAA,MAAM,EAAC,gBAASrZ,CAAT,EAAW;AAAC,eAAI,IAAIC,CAAC,GAACa,CAAC,CAAC0Y,MAAF,CAASM,cAAT,CAAwB9Z,CAAxB,CAAN,EAAiCE,CAAC,GAAC,CAAvC,EAAyCA,CAAC,GAACiD,CAAC,CAAC5B,MAA7C,EAAoDrB,CAAC,EAArD;AAAwD+C,YAAAA,CAAC,CAACqX,cAAF,CAAiBnB,aAAjB,CAA+BlZ,CAA/B,EAAiCkD,CAAC,CAACjD,CAAD,CAAD,CAAKoe,YAAtC;AAAxD;AAA4G;AAA1L,OAAf,GAA4M,KAAKE,aAAL,EAA5M;AAAiO,KAAn5N,EAAo5NrY,CAAC,CAACpF,SAAF,CAAYyd,aAAZ,GAA0B,YAAU;AAAC,UAAIxe,CAAC,GAAC,IAAN;AAAW,WAAKye,aAAL,KAAqB,KAAKA,aAAL,GAAmB9T,UAAU,CAAC,YAAU;AAAC3K,QAAAA,CAAC,CAACoa,UAAF,CAAasE,OAAb,IAAuB1e,CAAC,CAACye,aAAF,GAAgB,IAAvC;AAA4C,OAAxD,EAAyD,CAAzD,CAAlD;AAA+G,KAAnjO,EAAojOtY,CAAC,CAACpF,SAAF,CAAYsd,mBAAZ,GAAgC,UAASre,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,IAAN;AAAA,UAAW2C,CAAC,GAAC,IAAb;;AAAkB,eAASI,CAAT,GAAY;AAAC,YAAG/C,CAAH,EAAK;AAAC,cAAIF,CAAC,GAACE,CAAC,CAACuW,IAAF,EAAN;AAAe,iBAAOzW,CAAC,GAAC6C,CAAC,CAACuX,UAAF,CAAaxG,YAAb,CAA0B5T,CAAC,CAACa,IAA5B,CAAD,GAAmC,IAA3C;AAAgD;;AAAA,eAAOZ,CAAP;AAAS;;AAAA,aAAM;AAACwW,QAAAA,IAAI,EAACxT,CAAN;AAAQgI,QAAAA,MAAM,EAAC,kBAAU;AAAC,cAAIjL,CAAC,GAACiD,CAAC,EAAP;AAAU,kBAAMjD,CAAN,KAAU6C,CAAC,CAACuX,UAAF,CAAapJ,KAAb,IAAqBnO,CAAC,CAAC8Z,UAAF,CAAa3c,CAAb,EAAeA,CAAC,GAAC,CAAjB,CAA/B;AAAoD,SAAxF;AAAyFkE,QAAAA,OAAO,EAAC,iBAASjE,CAAT,EAAW;AAAC,cAAIC,CAAC,GAACY,CAAC,CAACyW,kBAAF,CAAqBS,eAA3B;AAAA,cAA2C7U,CAAC,GAACjD,CAAC,GAAC,GAA/C;AAAA,cAAmDiG,CAAC,GAAClD,CAAC,EAAtD;AAAyDJ,UAAAA,CAAC,CAAC6Y,oBAAF,CAAuBvV,CAAvB,EAAyBA,CAAC,GAAC,CAA3B,EAA6B,UAASrF,CAAT,EAAW;AAAC,iBAAI,IAAI+B,CAAR,IAAa/B,CAAb;AAAe,qBAAOA,CAAC,CAAC+B,CAAD,CAAR;AAAf;;AAA2B,iBAAI,IAAII,CAAR,IAAanC,CAAC,CAACZ,CAAD,CAAD,GAAKF,CAAC,CAAC4E,IAAP,EAAY3E,CAAzB;AAA2Ba,cAAAA,CAAC,CAACqC,CAAC,GAACF,CAAH,CAAD,GAAOhD,CAAC,CAACgD,CAAD,CAAR;AAA3B;AAAuC,WAA3G;AAA6G,SAAnR;AAAoRsb,QAAAA,SAAS,EAAC,mBAASve,CAAT,EAAW;AAACE,UAAAA,CAAC,GAACF,CAAF;AAAI;AAA9S,OAAN;AAAsT,KAArgP,EAAsgPmG,CAAC,CAACpF,SAAF,CAAY4d,iBAAZ,GAA8B,UAAS3e,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAKma,UAAX;AAAA,UAAsBla,CAAC,GAACD,CAAC,CAACod,aAAF,CAAgBrd,CAAhB,CAAxB;AAA2C,aAAM;AAAC+R,QAAAA,KAAK,EAAC,iBAAU;AAAC9R,UAAAA,CAAC,CAAC2e,eAAF,CAAkB1e,CAAlB,EAAoB,MAApB,EAA2B,IAA3B;AAAiC;AAAnD,OAAN;AAA2D,KAAtpP,EAAupPiG,CAAC,CAACpF,SAAF,CAAYya,eAAZ,GAA4B,YAAU;AAAC,UAAIxb,CAAC,GAAC,KAAKoa,UAAL,CAAgBjI,SAAhB,CAA0B,OAA1B,CAAN;AAAA,UAAyClS,CAAC,GAAC,KAAKma,UAAL,CAAgBjI,SAAhB,CAA0B,KAA1B,CAA3C;AAA4E,aAAOnS,CAAC,CAACob,IAAF,KAASnb,CAAC,CAACmb,IAAX,IAAiBpb,CAAC,CAACqb,EAAF,KAAOpb,CAAC,CAACob,EAAjC;AAAoC,KAA9yP,EAA+yPlV,CAAC,CAACpF,SAAF,CAAYga,yBAAZ,GAAsC,UAAS/a,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,aAAWA,CAAC,CAAC6b,MAAb,IAAqB,YAAU7b,CAAC,CAAC6b,MAApC,EAA2C;AAAC,aAAI,IAAI5b,CAAC,GAAC,EAAN,EAASY,CAAC,GAAC,CAAf,EAAiBA,CAAC,GAACb,CAAC,CAAC6E,IAAF,CAAOvD,MAA1B,EAAiCT,CAAC,EAAlC,EAAqC;AAAC,cAAI+B,CAAC,GAAC5C,CAAC,CAAC6E,IAAF,CAAOhE,CAAP,CAAN;AAAgB+B,UAAAA,CAAC,GAACA,CAAC,CAACqB,OAAF,CAAU,IAAI2a,MAAJ,CAAW,MAAIzY,CAAJ,GAAMC,CAAN,GAAQ,GAAnB,EAAuB,GAAvB,CAAV,EAAsC,EAAtC,CAAF,EAA4CnG,CAAC,CAACiC,IAAF,CAAOU,CAAP,CAA5C;AAAsD;;AAAA5C,QAAAA,CAAC,CAACoZ,MAAF,CAASpZ,CAAC,CAACY,IAAX,EAAgBZ,CAAC,CAAC6e,EAAlB,EAAqB5e,CAArB;AAAwB;AAAC,KAAphQ,EAAqhQiG,CAAC,CAACpF,SAAF,CAAY+Z,mBAAZ,GAAgC,UAAS9a,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAG,YAAU,OAAOA,CAAC,CAACW,IAAtB,EAA2B;AAAC,aAAI,IAAIC,CAAC,GAAC,EAAV,EAAaZ,CAAb;AAAgBY,UAAAA,CAAC,CAACqB,IAAF,CAAOjC,CAAP,GAAUA,CAAC,GAACA,CAAC,CAAC4H,IAAd;AAAhB;;AAAmC5H,QAAAA,CAAC,GAACY,CAAF;AAAI;;AAAA,WAAI,IAAI+B,CAAC,GAAC,KAAKkc,kCAAL,CAAwC7e,CAAxC,CAAN,EAAiD+C,CAAC,GAAC,EAAnD,EAAsDE,CAAC,GAAC,CAA5D,EAA8DA,CAAC,GAACN,CAAC,CAACtB,MAAlE,EAAyE4B,CAAC,EAA1E,EAA6E;AAAC,YAAIgD,CAAJ;AAAA,YAAMC,CAAC,GAACvD,CAAC,CAACM,CAAD,CAAT;AAAA,YAAakD,CAAC,GAACD,CAAC,CAACgC,KAAjB;AAAA,YAAuB9B,CAAC,IAAEF,CAAC,CAAC1B,GAAF,EAAM0B,CAAC,CAACtB,IAAV,CAAxB;AAAA,YAAwCyB,CAAC,GAACH,CAAC,CAAC4Y,OAA5C;AAAA,YAAoDxY,CAAC,GAACJ,CAAC,CAAC0V,MAAxD;;AAA+D,YAAGvV,CAAC,CAAChF,MAAF,GAAS,CAAZ,EAAc;AAAC,eAAI,IAAImF,CAAC,GAAC,KAAK8T,eAAL,CAAqB1R,wBAArB,CAA8C,IAAI7I,CAAJ,CAAMoG,CAAN,EAAQE,CAAC,CAAChF,MAAV,CAA9C,CAAN,EAAuEoF,CAAC,GAAC,CAAzE,EAA2EC,CAAC,GAAC,CAAjF,EAAmFA,CAAC,GAACF,CAAC,CAACnF,MAAvF,EAA8FqF,CAAC,EAA/F,EAAkG;AAAC,gBAAIqY,CAAC,GAACvY,CAAC,CAACE,CAAD,CAAP;AAAW3D,YAAAA,CAAC,CAACd,IAAF,CAAO;AAACiG,cAAAA,KAAK,EAAC/B,CAAP;AAAS3B,cAAAA,GAAG,EAAC2B,CAAC,GAAC4Y,CAAC,CAAC1d,MAAjB;AAAwB2d,cAAAA,iBAAiB,EAACD,CAAC,CAAC3X,UAAF,CAAavC,UAAvD;AAAkEia,cAAAA,OAAO,EAACzY,CAAC,CAACwT,MAAF,CAASpT,CAAT,EAAWsY,CAAC,CAAC1d,MAAb,CAA1E;AAA+FwD,cAAAA,UAAU,EAAC,EAA1G;AAA6GD,cAAAA,IAAI,EAAC,EAAlH;AAAqHgX,cAAAA,MAAM,EAAC1V,CAAC,CAAC0V;AAA9H,aAAP,GAA8InV,CAAC,IAAEsY,CAAC,CAAC1d,MAAnJ;AAA0J;;AAAA,eAAKiZ,eAAL,CAAqBvS,UAArB,CAAgC,IAAIhI,CAAJ,CAAMoG,CAAN,EAAQE,CAAC,CAAChF,MAAV,CAAhC;AAAmD;;AAAA,YAAG+E,CAAC,CAAC/E,MAAF,GAAS,CAAZ,EAAc,aAAW6E,CAAC,CAAC0V,MAAb,IAAqB,YAAU1V,CAAC,CAAC0V,MAAjC,GAAwC3V,CAAC,GAAC,KAAKoU,kBAAL,IAAyB,EAAnE,GAAsE/T,CAAC,IAAI,KAAK0U,mBAAV,IAA+B/U,CAAC,GAAC,KAAK+U,mBAAL,CAAyB1U,CAAzB,EAA4BzB,UAA9B,EAAyCyB,CAAC,GAAC,KAAK0U,mBAAL,CAAyB1U,CAAzB,EAA4BgW,UAAvE,EAAkF,OAAO,KAAKtB,mBAAL,CAAyB1U,CAAzB,CAAxH,IAAqJL,CAAC,GAAC,EAA7N,EAAgO,KAAKqU,eAAL,CAAqBzS,mBAArB,CAAyC,IAAI9H,CAAJ,CAAMoG,CAAN,EAAQC,CAAC,CAAC/E,MAAV,CAAzC,EAA2D,IAAIkF,CAAJ,CAAMN,CAAN,CAA3D,CAAhO,EAAqSlD,CAAC,CAACd,IAAF,CAAO;AAACiG,UAAAA,KAAK,EAAC/B,CAAP;AAAS3B,UAAAA,GAAG,EAAC2B,CAAb;AAAe6Y,UAAAA,iBAAiB,EAAC,EAAjC;AAAoCF,UAAAA,OAAO,EAAC,EAA5C;AAA+Cla,UAAAA,IAAI,EAACwB,CAApD;AAAsDvB,UAAAA,UAAU,EAACoB,CAAjE;AAAmE2V,UAAAA,MAAM,EAACtV;AAA1E,SAAP,CAArS;AAA0X;;AAAA,WAAK2Y,qCAAL,CAA2Cjf,CAA3C,GAA8C+C,CAAC,CAAC1B,MAAF,GAAS,CAAT,IAAY,KAAKiB,OAAL,CAAa,QAAb,EAAsB,IAAtB,EAA2BS,CAA3B,CAA1D;AAAwF,KAA7jS,EAA8jSkD,CAAC,CAACpF,SAAF,CAAYge,kCAAZ,GAA+C,UAAS/e,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,IAAN;AAAA,UAAWC,CAAC,GAAC,WAASF,CAAT,EAAW;AAAC,eAAOC,CAAC,CAACma,UAAF,CAAaxG,YAAb,CAA0B5T,CAA1B,CAAP;AAAoC,OAA7D;;AAA8D,eAASc,CAAT,CAAWd,CAAX,EAAaC,CAAb,EAAe;AAAC,eAAO,UAASC,CAAT,EAAW;AAAC,iBAAOqG,CAAC,CAACrG,CAAD,EAAGD,CAAC,CAACY,IAAL,CAAD,GAAYb,CAAC,CAACE,CAAD,CAAb,GAAiBqG,CAAC,CAACtG,CAAC,CAAC6e,EAAH,EAAM5e,CAAN,CAAD,GAAUF,CAAC,CAAC;AAACob,YAAAA,IAAI,EAAClb,CAAC,CAACkb,IAAF,GAAOnb,CAAC,CAAC6E,IAAF,CAAOvD,MAAd,GAAqB,CAArB,IAAwBtB,CAAC,CAAC6e,EAAF,CAAK1D,IAAL,GAAUnb,CAAC,CAACY,IAAF,CAAOua,IAAzC,CAAN;AAAqDC,YAAAA,EAAE,EAACpb,CAAC,CAAC6e,EAAF,CAAK1D,IAAL,GAAUlb,CAAC,CAACkb,IAAZ,GAAiBlb,CAAC,CAACmb,EAAnB,GAAsBpb,CAAC,CAAC6E,IAAF,CAAOvD,MAAP,IAAe,CAAf,GAAiBrB,CAAC,CAACmb,EAAF,IAAMpb,CAAC,CAAC6e,EAAF,CAAKzD,EAAL,GAAQpb,CAAC,CAACY,IAAF,CAAOwa,EAArB,IAAyB7U,CAAC,CAACvG,CAAC,CAAC6E,IAAH,CAA3C,GAAoD5E,CAAC,CAACmb,EAAF,GAAKpb,CAAC,CAAC6e,EAAF,CAAKzD,EAAV,GAAa,CAACva,CAAC,GAACb,CAAC,CAAC6E,IAAJ,EAAShE,CAAC,CAACA,CAAC,CAACS,MAAF,GAAS,CAAV,CAAX,EAAyBA;AAAxK,WAAD,CAAD,GAAmLiF,CAAC,CAACvG,CAAC,CAAC+e,OAAH,CAApL,GAAgMxY,CAAC,CAACvG,CAAC,CAAC6E,IAAH,CAA3M,GAAoN7E,CAAC,CAACY,IAAF,CAAOua,IAAP,KAAclb,CAAC,CAACkb,IAAhB,GAAqBpb,CAAC,CAACC,CAAC,CAACY,IAAH,CAAD,GAAUX,CAAC,CAACmb,EAAZ,GAAepb,CAAC,CAACY,IAAF,CAAOwa,EAA3C,GAA8Crb,CAAC,CAACC,CAAC,CAACY,IAAH,CAAD,GAAU2F,CAAC,CAACvG,CAAC,CAAC+e,OAAF,CAAU9d,KAAV,CAAgB,CAAhB,EAAkBhB,CAAC,CAACkb,IAAF,GAAOnb,CAAC,CAACY,IAAF,CAAOua,IAAhC,CAAD,CAAX,GAAmD,CAAnD,GAAqDlb,CAAC,CAACmb,EAAjV;AAAoV,cAAIva,CAAJ;AAAM,SAA7W;AAA8W;;AAAA,WAAI,IAAI+B,CAAC,GAAC,EAAN,EAASI,CAAC,GAACjD,CAAC,CAACuB,MAAF,GAAS,CAAxB,EAA0B0B,CAAC,IAAE,CAA7B,EAA+BA,CAAC,EAAhC,EAAmC;AAAC,YAAIE,CAAC,GAACnD,CAAC,CAACiD,CAAD,CAAP;AAAA,YAAWkD,CAAC,GAAC,CAACjG,CAAC,GAACY,CAAC,CAACZ,CAAD,EAAGiD,CAAH,CAAJ,EAAWA,CAAC,CAACtC,IAAb,CAAb;AAAA,YAAgCuF,CAAC,GAACjD,CAAC,CAAC6b,OAAF,CAAUhZ,IAAV,CAAe,IAAf,CAAlC;AAAA,YAAuDK,CAAC,GAAClD,CAAC,CAAC2B,IAAF,CAAOkB,IAAP,CAAY,IAAZ,CAAzD;AAA2EnD,QAAAA,CAAC,CAACuc,OAAF,CAAU;AAAChX,UAAAA,KAAK,EAACjC,CAAP;AAASzB,UAAAA,GAAG,EAACyB,CAAC,GAACC,CAAC,CAAC7E,MAAjB;AAAwByd,UAAAA,OAAO,EAAC5Y,CAAhC;AAAkCtB,UAAAA,IAAI,EAACuB,CAAvC;AAAyCyV,UAAAA,MAAM,EAAC3Y,CAAC,CAAC2Y;AAAlD,SAAV;AAAqE;;AAAA,aAAOjZ,CAAP;AAAS,KAAlvT,EAAmvTsD,CAAC,CAACpF,SAAF,CAAYoe,qCAAZ,GAAkD,UAASnf,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAACqd,MAAM,CAAC+B,SAAb,EAAuBnf,CAAC,GAAC,CAAC,CAA1B,EAA4BY,CAAC,GAAC,CAAlC,EAAoCA,CAAC,GAACd,CAAC,CAACuB,MAAxC,EAA+CT,CAAC,EAAhD,EAAmD;AAAC,YAAI+B,CAAC,GAAC7C,CAAC,CAACc,CAAD,CAAP;AAAA,YAAWmC,CAAC,GAACJ,CAAC,CAAChC,IAAF,CAAOua,IAApB;AAAyBvY,QAAAA,CAAC,CAAChC,IAAF,CAAOwa,EAAP;AAAU,SAACxY,CAAC,CAACmc,OAAF,CAAUzd,MAAV,GAAiB,CAAjB,IAAoBsB,CAAC,CAACmc,OAAF,CAAU,CAAV,EAAa5a,OAAb,CAAqBgC,CAArB,KAAyB,CAA9C,MAAmDnG,CAAC,GAAC8I,IAAI,CAACE,GAAL,CAAShJ,CAAT,EAAWgD,CAAX,CAAF,EAAgB/C,CAAC,GAAC6I,IAAI,CAACC,GAAL,CAAS9I,CAAT,EAAW+C,CAAX,CAArE,GAAoFJ,CAAC,CAACiC,IAAF,CAAOvD,MAAP,GAAc,CAAd,IAAiBtB,CAAC,GAAC8I,IAAI,CAACE,GAAL,CAAShJ,CAAT,EAAWgD,CAAX,CAAF,EAAgB/C,CAAC,GAAC6I,IAAI,CAACC,GAAL,CAAS9I,CAAT,EAAW+C,CAAC,GAACJ,CAAC,CAACiC,IAAF,CAAOvD,MAAT,GAAgB,CAA3B,CAAnC,IAAkEsB,CAAC,CAACiC,IAAF,CAAO,CAAP,EAAUV,OAAV,CAAkBgC,CAAlB,KAAsB,CAAtB,KAA0BnG,CAAC,GAAC8I,IAAI,CAACE,GAAL,CAAShJ,CAAT,EAAWgD,CAAX,CAAF,EAAgB/C,CAAC,GAAC6I,IAAI,CAACC,GAAL,CAAS9I,CAAT,EAAW+C,CAAX,CAA5C,CAAtJ;AAAiN;;AAAA/C,MAAAA,CAAC,GAAC6I,IAAI,CAACE,GAAL,CAAS/I,CAAT,EAAW,KAAKka,UAAL,CAAgB4C,SAAhB,KAA4B,CAAvC,CAAF,EAA4C,KAAKY,0CAAL,CAAgD3d,CAAhD,EAAkDC,CAAlD,CAA5C;AAAiG,KAA1rU,EAA2rUiG,CAAC,CAACpF,SAAF,CAAY6c,0CAAZ,GAAuD,UAAS5d,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAGD,CAAC,GAACsd,MAAM,CAAC+B,SAAZ,EAAsB,OAAKrf,CAAC,GAAC,CAAF,IAAK,KAAKsf,yBAAL,CAA+Btf,CAAC,GAAC,CAAjC,CAAV;AAA+CA,QAAAA,CAAC;AAAhD;AAAmD,UAAGC,CAAC,GAAC,CAAC,CAAN,EAAQ,KAAI,IAAIC,CAAC,GAAC,KAAKka,UAAL,CAAgB4C,SAAhB,EAAV,EAAsC/c,CAAC,GAAC,CAAF,GAAIC,CAAJ,IAAO,KAAKof,yBAAL,CAA+Brf,CAAC,GAAC,CAAjC,CAA7C;AAAkFA,QAAAA,CAAC;AAAnF;;AAAsF,WAAI,IAAIa,CAAC,GAAC,EAAN,EAAS+B,CAAC,GAAC,KAAKuX,UAAhB,EAA2BnX,CAAC,GAACjD,CAAjC,EAAmCiD,CAAC,IAAEhD,CAAtC,EAAwCgD,CAAC,EAAzC,EAA4C;AAAC,YAAIE,CAAC,GAACN,CAAC,CAACsZ,OAAF,CAAUlZ,CAAV,CAAN;AAAA,YAAmBkD,CAAC,GAACtD,CAAC,CAACwa,aAAF,CAAgBpa,CAAhB,CAArB;AAAwC,YAAGJ,CAAC,CAAC+b,eAAF,CAAkBzY,CAAlB,EAAoB,MAApB,EAA2B,IAA3B,GAAiChD,CAAC,CAAC5B,MAAF,GAAS,CAA7C,EAA+C,KAAI,IAAI8E,CAAC,GAAClD,CAAC,CAACiB,OAAF,CAAUgC,CAAV,CAAV,EAAuBC,CAAC,IAAE,CAA1B,GAA6B;AAAC,eAAI,IAAIC,CAAC,GAACD,CAAV,EAAYA,CAAC,GAAClD,CAAC,CAAC5B,MAAJ,IAAY4B,CAAC,CAACkD,CAAD,CAAD,KAAOD,CAA/B,GAAkC;AAAC,iBAAI,IAAIG,CAAC,GAAC1D,CAAC,CAAC0c,WAAF,CAAc;AAACnE,cAAAA,IAAI,EAACnY,CAAN;AAAQoY,cAAAA,EAAE,EAAChV;AAAX,aAAd,CAAN,EAAmCG,CAAC,GAAC,CAAzC,EAA2CA,CAAC,GAACD,CAAC,CAAChF,MAA/C,EAAsDiF,CAAC,EAAvD;AAA0DD,cAAAA,CAAC,CAACC,CAAD,CAAD,CAAKgZ,iBAAL,IAAwBjZ,CAAC,CAACC,CAAD,CAAD,CAAKuL,KAAL,EAAxB;AAA1D;;AAA+F1L,YAAAA,CAAC;AAAG;;AAAA,eAAKoZ,2BAAL,CAAiCxc,CAAjC,EAAmCqD,CAAnC,EAAqCD,CAArC,EAAuCvF,CAAvC,GAA0CuF,CAAC,GAAClD,CAAC,CAACiB,OAAF,CAAUgC,CAAV,EAAYC,CAAZ,CAA5C;AAA2D,SAA9Q,MAAmRvF,CAAC,GAAC,EAAF;AAAK;;AAAA,aAAOb,CAAP;AAAS,KAA7xV,EAA8xVkG,CAAC,CAACpF,SAAF,CAAY0e,2BAAZ,GAAwC,UAASzf,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAAC,UAAImC,CAAC,GAAC,KAAKmX,UAAX;AAAA,UAAsBjX,CAAC,GAAC,IAAxB;AAAA,UAA6BgD,CAAC,GAAC,IAA/B;AAAA,UAAoCC,CAAC,GAAC,SAAFA,CAAE,GAAU;AAAC,YAAIpG,CAAC,GAACmG,CAAC,CAACsQ,IAAF,EAAN;AAAe,eAAOzW,CAAC,GAACA,CAAC,CAACa,IAAF,CAAOua,IAAR,GAAa,IAArB;AAA0B,OAA1F;;AAA2F,UAAG,MAAInb,CAAP,EAAS;AAAC,YAAIoG,CAAC,GAAC,KAAKqZ,kBAAL,CAAwB1f,CAAxB,CAAN;AAAA,YAAiCsG,CAAC,GAACD,CAAC,CAACxD,CAAC,CAACuV,SAAH,CAApC;AAAA,YAAkD7R,CAAC,GAACF,CAAC,CAACxD,CAAC,CAACqV,WAAH,CAAD,IAAkB,CAAtE;;AAAwE,aAAI5R,CAAC,IAAE,MAAIC,CAAP,KAAWA,CAAC,GAAC,CAAb,CAAJ,EAAoBA,CAAC,IAAEzF,CAAC,CAACS,MAAzB;AAAiCT,UAAAA,CAAC,CAACqB,IAAF,CAAO,CAAP;AAAjC;;AAA2C,gBAAMmE,CAAN,IAASnD,CAAC,GAAC,KAAKwc,uBAAL,CAA6B7e,CAAC,CAACyF,CAAD,CAA9B,CAAF,EAAqCzF,CAAC,CAACyF,CAAD,CAAD,EAA9C,IAAsD,QAAMD,CAAN,IAASnD,CAAC,GAAC,KAAKyc,yBAAL,EAAF,EAAmC9e,CAAC,CAACyF,CAAD,CAAD,GAAK,CAAjD,IAAoD,QAAMD,CAAN,IAASnD,CAAC,GAAC,KAAK0c,oBAAL,CAA0B,CAAC,CAA3B,EAA6BzZ,CAA7B,CAAF,EAAkCtF,CAAC,CAACyF,CAAD,CAAD,GAAK,CAAhD,IAAmD,SAAOD,CAAP,KAAWnD,CAAC,GAAC,KAAK0c,oBAAL,CAA0B,CAAC,CAA3B,EAA6BzZ,CAA7B,CAAF,EAAkCtF,CAAC,CAACyF,CAAD,CAAD,GAAK,CAAlD,CAA7J;AAAkN,YAAIC,CAAC,GAAC,KAAK2W,0BAAL,CAAgC9W,CAAhC,CAAN;AAAyC,eAAKG,CAAL,IAAQ,KAAK4T,UAAL,CAAgB0F,YAAhB,CAA6B9f,CAA7B,EAA+B,MAA/B,EAAsCwG,CAAtC,CAAR,EAAiD1F,CAAC,CAACyF,CAAC,GAAC,CAAH,CAAD,GAAO,CAAxD;AAA0D;;AAAA,UAAIE,CAAC,GAAC;AAAC0X,QAAAA,aAAa,EAAC,CAAC,CAAhB;AAAkBF,QAAAA,SAAS,EAAC,CAAC;AAA7B,OAAN;AAAsC9a,MAAAA,CAAC,KAAGsD,CAAC,CAAC6X,YAAF,GAAenb,CAAlB,CAAD,EAAsB,CAACgD,CAAC,GAAClD,CAAC,CAACma,QAAF,CAAW;AAAChC,QAAAA,IAAI,EAACpb,CAAN;AAAQqb,QAAAA,EAAE,EAACpb;AAAX,OAAX,EAAyB;AAACmb,QAAAA,IAAI,EAACpb,CAAN;AAAQqb,QAAAA,EAAE,EAACnb;AAAX,OAAzB,EAAuCuG,CAAvC,CAAH,EAA8C+Y,iBAA9C,GAAgE,CAAC,CAAvF;AAAyF,KAAp+W,EAAq+WrZ,CAAC,CAACpF,SAAF,CAAY4e,uBAAZ,GAAoC,UAAS3f,CAAT,EAAW;AAAC,aAAOE,CAAC,CAAC0C,GAAF,CAAM,KAAN,EAAY5C,CAAC,GAAC,GAAd,EAAkB;AAACwN,QAAAA,KAAK,EAAC;AAAP,OAAlB,CAAP;AAAsD,KAA3kX,EAA4kXrH,CAAC,CAACpF,SAAF,CAAY6e,yBAAZ,GAAsC,YAAU;AAAC,aAAO1f,CAAC,CAAC0C,GAAF,CAAM,KAAN,EAAY,GAAZ,EAAgB;AAAC4K,QAAAA,KAAK,EAAC;AAAP,OAAhB,CAAP;AAAoD,KAAjrX,EAAkrXrH,CAAC,CAACpF,SAAF,CAAYgf,UAAZ,GAAuB,UAAS/f,CAAT,EAAW;AAAC,UAAIC,CAAJ;AAAA,UAAMC,CAAC,GAAC2C,CAAC,CAACuV,SAAV;AAAA,UAAoBtX,CAAC,GAAC,KAAKkb,yBAAL,EAAtB;AAAuD9b,MAAAA,CAAC,IAAIY,CAAL,KAAS,QAAMA,CAAC,CAACZ,CAAD,CAAP,IAAY,SAAOY,CAAC,CAACZ,CAAD,CAA7B,IAAkC,QAAMY,CAAC,CAACZ,CAAD,CAAP,GAAWD,CAAC,GAAC,IAAb,GAAkB,SAAOa,CAAC,CAACZ,CAAD,CAAR,KAAcD,CAAC,GAAC,CAAC,CAACD,CAAF,IAAK,GAArB,CAApD,GAA8EC,CAAC,GAAC,GAAhF,EAAoF,KAAKgc,gBAAL,CAAsB/b,CAAtB,EAAwBD,CAAxB,CAApF;AAA+G,KAA33X,EAA43XkG,CAAC,CAACpF,SAAF,CAAY8e,oBAAZ,GAAiC,UAAS7f,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIa,CAAC,GAAC;AAAC8D,QAAAA,IAAI,EAAC,UAAN;AAAiB4I,QAAAA,KAAK,EAAC;AAAvB,OAAN;AAAkDxN,MAAAA,CAAC,KAAGc,CAAC,CAACkf,OAAF,GAAU,CAAC,CAAd,CAAD;AAAkB,UAAInd,CAAC,GAAC3C,CAAC,CAAC0C,GAAF,CAAM,OAAN,EAAc,CAAC,CAAf,EAAiB9B,CAAjB,CAAN;AAAA,UAA0BmC,CAAC,GAAC,IAA5B;AAAiC,aAAO/C,CAAC,CAAC8B,EAAF,CAAKa,CAAL,EAAO,OAAP,EAAe3C,CAAC,CAAC8D,YAAF,CAAe,UAAShE,CAAT,EAAW;AAACiD,QAAAA,CAAC,CAACmX,UAAF,CAAalI,SAAb,CAAuB;AAACkJ,UAAAA,IAAI,EAACnb,CAAC,EAAP;AAAUob,UAAAA,EAAE,EAAC;AAAb,SAAvB,GAAwCpY,CAAC,CAAC8c,UAAF,CAAa,CAAC,CAAd,CAAxC;AAAyD,OAApF,CAAf,GAAsGld,CAA7G;AAA+G,KAA/nY,EAAgoYsD,CAAC,CAACpF,SAAF,CAAYue,yBAAZ,GAAsC,UAAStf,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAKyf,kBAAL,CAAwB1f,CAAxB,CAAN;AAAiC,aAAM,CAAC,CAAD,MAAMC,CAAC,CAAC4C,CAAC,CAACuV,SAAH,CAAD,IAAgB,CAAC,CAAvB,KAA2B,OAAKnY,CAAC,CAAC4C,CAAC,CAACqV,WAAH,CAAD,IAAkB,CAAvB,CAAjC;AAA2D,KAA9wY,EAA+wY/R,CAAC,CAACpF,SAAF,CAAYia,iBAAZ,GAA8B,YAAU;AAAC,UAAIhb,CAAC,GAAC,IAAN;AAAW2K,MAAAA,UAAU,CAAC,YAAU;AAAC3K,QAAAA,CAAC,CAAC2b,wBAAF;AAA6B,OAAzC,EAA0C,CAA1C,CAAV;AAAuD,KAA13Y,EAA23YxV,CAAC,CAACpF,SAAF,CAAY0a,qBAAZ,GAAkC,YAAU;AAAC,aAAO,KAAKlB,kBAAL,IAAyB,KAAKoB,wBAAL,EAAzB,EAAyD,KAAKpB,kBAArE;AAAwF,KAAhgZ,EAAigZpU,CAAC,CAACpF,SAAF,CAAY4a,wBAAZ,GAAqC,YAAU;AAAC,UAAI3b,CAAC,GAAC,KAAKoa,UAAX;AAAA,UAAsBna,CAAC,GAACD,CAAC,CAAC4T,YAAF,CAAe5T,CAAC,CAACmS,SAAF,CAAY,QAAZ,CAAf,CAAxB;AAAA,UAA8DjS,CAAC,GAACF,CAAC,CAAC4T,YAAF,CAAe5T,CAAC,CAACmS,SAAF,CAAY,MAAZ,CAAf,CAAhE;AAAA,UAAoGlP,CAAC,GAAC/C,CAAtG;;AAAwG,UAAGD,CAAC,GAACC,CAAL,EAAO;AAAC,eAAK+C,CAAC,GAAC,KAAKyB,GAAL,EAAP,GAAmB;AAAC,cAAIvB,CAAC,GAAC,KAAK+P,QAAL,CAAcjQ,CAAd,EAAgBA,CAAC,GAAC,CAAlB,CAAN;AAA2B,cAAG,SAAOE,CAAP,IAAUA,CAAC,KAAGiD,CAAjB,EAAmB;AAAMnD,UAAAA,CAAC;AAAG;;AAAAA,QAAAA,CAAC,GAAC,KAAKyB,GAAL,EAAF,IAAczB,CAAC,EAAf;AAAkB,OAAtG,MAA2G,OAAKA,CAAC,GAAC,CAAF,KAAM,UAAQE,CAAC,GAAC,KAAK+P,QAAL,CAAcjQ,CAAC,GAAC,CAAhB,EAAkBA,CAAlB,CAAV,KAAiCE,CAAC,KAAGiD,CAA3C,CAAL;AAAoDnD,QAAAA,CAAC;AAArD;;AAAwD,UAAIkD,CAAC,GAAC,KAAKqU,eAAL,CAAqB3R,uBAArB,CAA6C5F,CAA7C,CAAN;AAAsD,WAAKsX,kBAAL,GAAwB,EAAxB;AAA2B,UAAIlU,CAAC,GAAC,EAAN;;AAAS,WAAI,IAAIC,CAAR,IAAaH,CAAC,CAAC5E,MAAF,GAAS,CAAT,IAAY,EAAEsB,CAAC,CAACoV,aAAF,IAAmB9R,CAAC,CAAC,CAAD,CAAD,CAAKmB,UAAL,CAAgBvC,UAArC,CAAZ,GAA6DsB,CAAC,GAACF,CAAC,CAAC,CAAD,CAAD,CAAKmB,UAAL,CAAgBvC,UAA/E,GAA0FoB,CAAC,CAAC5E,MAAF,GAAS,CAAT,KAAaT,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAe,EAAExB,CAAC,CAACoV,aAAF,IAAmB9R,CAAC,CAAC,CAAD,CAAD,CAAKmB,UAAL,CAAgBvC,UAArC,CAAf,EAAgE,uDAAhE,GAAyHsB,CAAC,GAACF,CAAC,CAAC,CAAD,CAAD,CAAKmB,UAAL,CAAgBvC,UAAxJ,CAA1F,EAA8PsB,CAA3Q;AAA6Q,gBAAMC,CAAN,IAAS,SAAOA,CAAhB,IAAmB,SAAOA,CAA1B,IAA6B,MAAIA,CAAC,CAAClC,OAAF,CAAUvB,CAAC,CAACmV,eAAZ,CAAjC,KAAgE,KAAKuC,kBAAL,CAAwBjU,CAAxB,IAA2BD,CAAC,CAACC,CAAD,CAA5F;AAA7Q;AAA8W,KAApwa,EAAqwaH,CAAC,CAACpF,SAAF,CAAYib,yBAAZ,GAAsC,YAAU;AAAC,UAAIhc,CAAC,GAAC,KAAKoa,UAAX;AAAA,UAAsBna,CAAC,GAACD,CAAC,CAACmS,SAAF,CAAY,QAAZ,CAAxB;AAAA,UAA8CjS,CAAC,GAACF,CAAC,CAACmS,SAAF,CAAY,MAAZ,CAAhD;AAAA,UAAoErR,CAAC,GAACZ,CAAC,CAACkb,IAAxE;AAA6E,aAAO,MAAIlb,CAAC,CAACmb,EAAN,IAAUpb,CAAC,CAACmb,IAAF,GAAOlb,CAAC,CAACkb,IAAnB,IAAyBta,CAAC,EAA1B,EAA6B,KAAK4e,kBAAL,CAAwB5e,CAAxB,CAApC;AAA+D,KAAl8a,EAAm8aqF,CAAC,CAACpF,SAAF,CAAY2e,kBAAZ,GAA+B,UAAS1f,CAAT,EAAW;AAAC,UAAIE,CAAC,GAAC,EAAN;AAAA,UAAS2C,CAAC,GAAC,KAAKuX,UAAL,CAAgB+B,OAAhB,CAAwBnc,CAAxB,CAAX;;AAAsC,UAAG6C,CAAC,CAACtB,MAAF,GAAS,CAAT,IAAYsB,CAAC,CAAC,CAAD,CAAD,KAAOuD,CAAtB,EAAwB;AAAC,YAAInD,CAAC,GAAC,KAAKmX,UAAL,CAAgBxG,YAAhB,CAA6B;AAACwH,UAAAA,IAAI,EAACpb,CAAN;AAAQqb,UAAAA,EAAE,EAAC;AAAX,SAA7B,CAAN;AAAA,YAAkDlY,CAAC,GAAC,KAAKqX,eAAL,CAAqB1R,wBAArB,CAA8C,IAAI7I,CAAJ,CAAMgD,CAAN,EAAQ,CAAR,CAA9C,CAApD;;AAA8G,aAAI,IAAIkD,CAAR,IAAarF,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAe,MAAIlB,CAAC,CAAC5B,MAArB,GAA6B4B,CAAC,CAAC,CAAD,CAAD,CAAKmE,UAAL,CAAgBvC,UAA1D;AAAqE7E,UAAAA,CAAC,CAACiG,CAAD,CAAD,GAAKhD,CAAC,CAAC,CAAD,CAAD,CAAKmE,UAAL,CAAgBvC,UAAhB,CAA2BoB,CAA3B,CAAL;AAArE;AAAwG;;AAAA,aAAOjG,CAAP;AAAS,KAA5wb,EAA6wbiG,CAAC,CAACpF,SAAF,CAAYua,iBAAZ,GAA8B,YAAU;AAAC,WAAKd,eAAL,CAAqBtS,UAArB,CAAgC,IAAIjI,CAAJ,CAAM,CAAN,EAAQ,KAAKyE,GAAL,EAAR,CAAhC,EAAoD,UAAS1E,CAAT,EAAWC,CAAX,EAAa;AAAC,eAAO,IAAIwG,CAAJ,CAAM,EAAN,CAAP;AAAiB,OAAnF;AAAqF,KAA34b,EAA44bN,CAAC,CAACpF,SAAF,CAAYkf,OAAZ,GAAoB,YAAU;AAAC,UAAIjgB,CAAC,GAAC,KAAKoa,UAAX;AAAA,UAAsBna,CAAC,GAAC,IAAxB;;AAA6B,UAAG,KAAKub,eAAL,EAAH,EAA0B;AAAC,YAAItb,CAAC,GAACF,CAAC,CAACmS,SAAF,CAAY,MAAZ,EAAoBiJ,IAA1B;AAAA,YAA+Bta,CAAC,GAAC,KAAK4e,kBAAL,CAAwBxf,CAAxB,CAAjC;AAAA,YAA4D+C,CAAC,GAACnC,CAAC,CAAC+B,CAAC,CAACuV,SAAH,CAA/D;AAA6EnV,QAAAA,CAAC,IAAE,MAAIjD,CAAC,CAACmc,OAAF,CAAUjc,CAAV,EAAaqB,MAApB,GAA2B,KAAK8a,oBAAL,CAA0Bnc,CAA1B,EAA4BA,CAA5B,EAA8B,UAASF,CAAT,EAAW;AAAC,iBAAOA,CAAC,CAAC6C,CAAC,CAACuV,SAAH,CAAR,EAAsB,OAAOpY,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAA9B;AAA8C,SAAxF,CAA3B,IAAsHlY,CAAC,CAACkgB,gBAAF,CAAmB,IAAnB,EAAwB,KAAxB,EAA8B,QAA9B,GAAwC,KAAK7D,oBAAL,CAA0Bnc,CAAC,GAAC,CAA5B,EAA8BA,CAAC,GAAC,CAAhC,EAAkC,UAASF,CAAT,EAAW;AAAC,eAAI,IAAImD,CAAR,IAAarC,CAAb;AAAed,YAAAA,CAAC,CAACmD,CAAD,CAAD,GAAKrC,CAAC,CAACqC,CAAD,CAAN;AAAf;;AAAyB,mBAAOF,CAAP,KAAWjD,CAAC,CAAC6C,CAAC,CAACuV,SAAH,CAAD,GAAe,GAA1B,GAA+BnY,CAAC,CAACuC,OAAF,CAAU,SAAV,EAAoB;AAAC4Y,YAAAA,IAAI,EAAClb,CAAC,GAAC,CAAR;AAAUigB,YAAAA,IAAI,EAACngB;AAAf,WAApB,CAA/B;AAAsE,SAA7I,CAA9J;AAA8S,OAAtZ,MAA2ZA,CAAC,CAACkgB,gBAAF,CAAmB,IAAnB,EAAwB,KAAxB,EAA8B,QAA9B;AAAwC,KAA34c,EAA44c/Z,CAAC,CAACpF,SAAF,CAAYqf,UAAZ,GAAuB,YAAU;AAAC,UAAIpgB,CAAC,GAAC,KAAKoa,UAAX;AAAA,UAAsBna,CAAC,GAACD,CAAC,CAACmS,SAAF,CAAY,MAAZ,CAAxB;AAAA,UAA4CjS,CAAC,GAAC,KAAKwf,kBAAL,CAAwBzf,CAAC,CAACmb,IAA1B,CAA9C;AAAA,UAA8Eta,CAAC,GAACZ,CAAC,CAAC2C,CAAC,CAACuV,SAAH,CAAjF;AAAA,UAA+FnV,CAAC,GAAC/C,CAAC,CAAC2C,CAAC,CAACqV,WAAH,CAAlG;AAAA,UAAkH/U,CAAC,GAAC,KAAKqY,eAAL,MAAwB,MAAIvb,CAAC,CAACob,EAAlJ;AAAqJlY,MAAAA,CAAC,IAAErC,CAAH,GAAK,KAAKub,oBAAL,CAA0Bpc,CAAC,CAACmb,IAA5B,EAAiCnb,CAAC,CAACmb,IAAnC,EAAwC,UAASpb,CAAT,EAAW;AAAC,eAAOA,CAAC,CAAC6C,CAAC,CAACuV,SAAH,CAAR,EAAsB,OAAOpY,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAA9B;AAA8C,OAAlG,CAAL,GAAyG/U,CAAC,IAAEF,CAAH,IAAMA,CAAC,GAAC,CAAR,GAAU,KAAKod,QAAL,EAAV,GAA0BrgB,CAAC,CAACsgB,OAAF,CAAU,CAAC,CAAX,EAAa,MAAb,CAAnI;AAAwJ,KAA3td,EAA4tdna,CAAC,CAACpF,SAAF,CAAYwf,WAAZ,GAAwB,YAAU;AAAC,UAAIvgB,CAAC,GAAC,KAAKoa,UAAX;AAAA,UAAsBna,CAAC,GAACD,CAAC,CAACmS,SAAF,CAAY,MAAZ,CAAxB;AAAA,UAA4CjS,CAAC,GAACF,CAAC,CAACmc,OAAF,CAAUlc,CAAC,CAACmb,IAAZ,CAA9C;AAAA,UAAgEta,CAAC,GAAC,KAAKsb,0BAAL,CAAgClc,CAAhC,CAAlE;AAAA,UAAqG2C,CAAC,GAAC5C,CAAC,CAACmb,IAAF,GAAO,CAAP,GAASpb,CAAC,CAACgd,SAAF,EAAT,GAAuBhd,CAAC,CAACmc,OAAF,CAAUlc,CAAC,CAACmb,IAAF,GAAO,CAAjB,CAAvB,GAA2C,EAAlJ;AAAqJ,WAAKI,eAAL,MAAwB1a,CAAxB,IAA2B+B,CAAC,CAAC,CAAD,CAAD,KAAOuD,CAAlC,IAAqCpG,CAAC,CAACyc,YAAF,CAAe,EAAf,EAAkB;AAACrB,QAAAA,IAAI,EAACnb,CAAC,CAACmb,IAAR;AAAaC,QAAAA,EAAE,EAAC;AAAhB,OAAlB,EAAqC;AAACD,QAAAA,IAAI,EAACnb,CAAC,CAACmb,IAAF,GAAO,CAAb;AAAeC,QAAAA,EAAE,EAAC;AAAlB,OAArC,EAA0D,QAA1D,GAAoErb,CAAC,CAACkS,SAAF,CAAY;AAACkJ,QAAAA,IAAI,EAACnb,CAAC,CAACmb,IAAR;AAAaC,QAAAA,EAAE,EAAC;AAAhB,OAAZ,CAAzG,IAA0Irb,CAAC,CAACsgB,OAAF,CAAU,CAAV,EAAY,MAAZ,CAA1I;AAA8J,KAAlje,EAAmjena,CAAC,CAACpF,SAAF,CAAYyf,MAAZ,GAAmB,YAAU;AAAC,WAAKtE,gCAAL,CAAsC,UAASlc,CAAT,EAAW;AAAC,YAAIC,CAAC,GAACD,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAAP;AAAA,YAAuBhY,CAAC,GAACF,CAAC,CAAC6C,CAAC,CAACuV,SAAH,CAA1B;AAAwCnY,QAAAA,CAAC,GAACD,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAAD,EAAD,GAAoBlY,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAAD,GAAiBhY,CAAC,GAAC,CAAD,GAAG,CAA1C;AAA4C,OAAtI;AAAwI,KAAzte,EAA0teiG,CAAC,CAACpF,SAAF,CAAYsf,QAAZ,GAAqB,YAAU;AAAC,WAAKnE,gCAAL,CAAsC,UAASlc,CAAT,EAAW;AAAC,YAAIC,CAAC,GAACD,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAAP;AAAuBjY,QAAAA,CAAC,IAAEA,CAAC,GAAC,CAAL,GAAOD,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAAD,GAAiBjY,CAAC,GAAC,CAA1B,IAA6B,OAAOD,CAAC,CAAC6C,CAAC,CAACuV,SAAH,CAAR,EAAsB,OAAOpY,CAAC,CAAC6C,CAAC,CAACqV,WAAH,CAA3D;AAA4E,OAArJ;AAAuJ,KAAj5e,EAAk5e/R,CAAC,CAACpF,SAAF,CAAY0f,OAAZ,GAAoB,YAAU;AAAC,aAAO,KAAKrG,UAAL,CAAgBjG,QAAhB,GAA2BjQ,OAA3B,CAAmC,IAAI2a,MAAJ,CAAWzY,CAAX,EAAa,GAAb,CAAnC,EAAqD,EAArD,CAAP;AAAgE,KAAj/e,EAAk/eD,CAAC,CAACpF,SAAF,CAAYqb,0BAAZ,GAAuC,UAASpc,CAAT,EAAW;AAAC,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,CAAC,CAACuB,MAAhB,EAAuBtB,CAAC,EAAxB;AAA2B,YAAGD,CAAC,CAACC,CAAD,CAAD,KAAOmG,CAAV,EAAY,OAAM,CAAC,CAAP;AAAvC;;AAAgD,aAAM,CAAC,CAAP;AAAS,KAA9lf,EAA+lfK,CAAC,CAAC1F,SAAF,CAAYoE,MAAZ,GAAmB,UAASnF,CAAT,EAAW;AAAC,UAAG,EAAEA,CAAC,YAAYyG,CAAf,CAAH,EAAqB,OAAM,CAAC,CAAP;AAAS,UAAIxG,CAAJ;;AAAM,WAAIA,CAAJ,IAAS,KAAK8E,UAAd;AAAyB,YAAG/E,CAAC,CAAC+E,UAAF,CAAa9E,CAAb,MAAkB,KAAK8E,UAAL,CAAgB9E,CAAhB,CAArB,EAAwC,OAAM,CAAC,CAAP;AAAjE;;AAA0E,WAAIA,CAAJ,IAASD,CAAC,CAAC+E,UAAX;AAAsB,YAAG/E,CAAC,CAAC+E,UAAF,CAAa9E,CAAb,MAAkB,KAAK8E,UAAL,CAAgB9E,CAAhB,CAArB,EAAwC,OAAM,CAAC,CAAP;AAA9D;;AAAuE,aAAM,CAAC,CAAP;AAAS,KAA5zf,EAA6zfkG,CAAp0f;AAAs0f,GAA7jiB,EAArpF,EAAqtnB,CAACrF,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU4f,yBAAV,GAAoC,YAAU;AAAC;;AAAa,QAAI1gB,CAAC,GAACc,CAAC,CAACwE,aAAR;AAAA,QAAsBrF,CAAC,GAACa,CAAC,CAACqN,gBAA1B;AAAA,QAA2CjO,CAAC,GAACY,CAAC,CAACsI,MAA/C;;AAAsD,aAASvG,CAAT,CAAW7C,CAAX,EAAa;AAAC,WAAK2gB,IAAL,GAAU3gB,CAAV,EAAY,KAAK4gB,EAAL,GAAQ5gB,CAAC,CAACoa,UAAtB,EAAiChU,CAAC,CAAC,IAAD,EAAM,UAAN,CAAlC,EAAoDA,CAAC,CAAC,IAAD,EAAM,oBAAN,CAArD,EAAiFA,CAAC,CAAC,IAAD,EAAM,kBAAN,CAAlF,EAA4GA,CAAC,CAAC,IAAD,EAAM,SAAN,CAA7G,EAA8HA,CAAC,CAAC,IAAD,EAAM,QAAN,CAA/H,EAA+I,KAAKua,IAAL,CAAU3e,EAAV,CAAa,QAAb,EAAsB,KAAK2O,QAA3B,CAA/I,EAAoL,KAAKgQ,IAAL,CAAU3e,EAAV,CAAa,kBAAb,EAAgC,KAAK6e,kBAArC,CAApL,EAA6O,KAAKD,EAAL,CAAQ5e,EAAR,CAAW,gBAAX,EAA4B,KAAK6O,gBAAjC,CAA7O,EAAgS,KAAK+P,EAAL,CAAQ5e,EAAR,CAAW,OAAX,EAAmB,KAAKiP,OAAxB,CAAhS,EAAiU,KAAK2P,EAAL,CAAQ5e,EAAR,CAAW,MAAX,EAAkB,KAAK+O,MAAvB,CAAjU;AAAgW;;AAAA,aAAS9N,CAAT,CAAWjD,CAAX,EAAaC,CAAb,EAAe;AAAC,aAAOD,CAAC,CAACob,IAAF,GAAOnb,CAAC,CAACmb,IAAT,GAAc,CAAC,CAAf,GAAiBpb,CAAC,CAACob,IAAF,GAAOnb,CAAC,CAACmb,IAAT,GAAc,CAAd,GAAgBpb,CAAC,CAACqb,EAAF,GAAKpb,CAAC,CAACob,EAAP,GAAU,CAAC,CAAX,GAAarb,CAAC,CAACqb,EAAF,GAAKpb,CAAC,CAACob,EAAP,GAAU,CAAV,GAAY,CAAjE;AAAmE;;AAAA,aAASlY,CAAT,CAAWnD,CAAX,EAAa;AAAC,UAAIC,CAAC,GAACD,CAAC,CAACgd,SAAF,KAAc,CAApB;AAAsB,aAAOhd,CAAC,CAAC4T,YAAF,CAAe;AAACwH,QAAAA,IAAI,EAACnb,CAAN;AAAQob,QAAAA,EAAE,EAACrb,CAAC,CAACmc,OAAF,CAAUlc,CAAV,EAAasB;AAAxB,OAAf,CAAP;AAAuD;;AAAA,aAAS4E,CAAT,CAAWnG,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,CAACD,CAAJ,EAAM,MAAM,IAAI2C,KAAJ,CAAU1C,CAAC,IAAE,iBAAb,CAAN;AAAsC;;AAAA,aAASmG,CAAT,CAAWpG,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAIC,CAAC,GAACF,CAAC,CAACC,CAAD,CAAP;;AAAWD,MAAAA,CAAC,CAACC,CAAD,CAAD,GAAK,YAAU;AAACC,QAAAA,CAAC,CAACuC,KAAF,CAAQzC,CAAR,EAAU0C,SAAV;AAAqB,OAArC;AAAsC;;AAAA,aAAS2D,CAAT,CAAWrG,CAAX,EAAa;AAAC,WAAI,IAAIC,CAAR,IAAaD,CAAb;AAAe,eAAM,CAAC,CAAP;AAAf;;AAAwB,aAAM,CAAC,CAAP;AAAS;;AAAA,aAASsG,CAAT,CAAWtG,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,YAAU,OAAOD,CAApB,EAAsB,MAAM,IAAIsB,SAAJ,CAAc,mBAAd,CAAN;AAAyC,YAAI,CAACtB,CAAC,GAACA,CAAC,CAACkE,OAAF,CAAU,IAAV,EAAe,EAAf,CAAH,EAAuB3C,MAA3B,KAAoCvB,CAAC,GAACA,CAAC,CAAC,CAAD,CAAD,GAAKA,CAAC,CAAC,CAAD,CAAN,GAAUA,CAAC,CAAC,CAAD,CAAX,GAAeA,CAAC,CAAC,CAAD,CAAhB,GAAoBA,CAAC,CAAC,CAAD,CAArB,GAAyBA,CAAC,CAAC,CAAD,CAAhE;AAAqE,UAAIE,CAAJ;AAAA,UAAMY,CAAC,GAAC6Z,QAAQ,CAAC3a,CAAD,EAAG,EAAH,CAAhB;AAAA,UAAuB6C,CAAC,GAAC,CAAC/B,CAAC,IAAE,EAAJ,EAAOA,CAAC,IAAE,CAAH,GAAK,GAAZ,EAAgB,MAAIA,CAApB,CAAzB;AAAA,UAAgDmC,CAAC,GAAC,KAAlD;AAAwD,aAAO,UAAQ/C,CAAC,GAACD,CAAV,KAAc,KAAK,CAAL,KAASC,CAAvB,KAA2B+C,CAAC,GAAC,MAAF,EAASJ,CAAC,CAACV,IAAF,CAAOlC,CAAP,CAApC,GAA+CgD,CAAC,GAAC,GAAF,GAAMJ,CAAC,CAACmD,IAAF,CAAO,GAAP,CAAN,GAAkB,GAAxE;AAA4E;;AAAA,WAAOnD,CAAC,CAAC9B,SAAF,CAAYuT,MAAZ,GAAmB,YAAU;AAAC,WAAKqM,IAAL,CAAUre,GAAV,CAAc,QAAd,EAAuB,KAAKqO,QAA5B,GAAsC,KAAKgQ,IAAL,CAAUre,GAAV,CAAc,kBAAd,EAAiC,KAAKue,kBAAtC,CAAtC,EAAgG,KAAKD,EAAL,CAAQte,GAAR,CAAY,gBAAZ,EAA6B,KAAKuO,gBAAlC,CAAhG,EAAoJ,KAAK+P,EAAL,CAAQte,GAAR,CAAY,OAAZ,EAAoB,KAAK2O,OAAzB,CAApJ,EAAsL,KAAK2P,EAAL,CAAQte,GAAR,CAAY,MAAZ,EAAmB,KAAKyO,MAAxB,CAAtL;AAAsN,KAApP,EAAqPlO,CAAC,CAACie,8BAAF,GAAiC,UAAS7gB,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAI,IAAIY,CAAC,GAACqC,CAAC,CAACjD,CAAD,CAAP,EAAW2C,CAAC,GAAE,IAAI7C,CAAJ,EAAD,CAAQ0F,MAAR,CAAe5E,CAAf,CAAb,EAA+BmC,CAAC,GAAE,IAAIjD,CAAJ,EAAD,CAAQ0F,MAAR,CAAe5E,CAAf,CAAjC,EAAmDqF,CAAC,GAAClG,CAAC,CAACsB,MAAF,GAAS,CAAlE,EAAoE4E,CAAC,IAAE,CAAvE,EAAyEA,CAAC,EAA1E,EAA6E;AAAC,YAAIC,CAAC,GAACnG,CAAC,CAACkG,CAAD,CAAP;AAAA,YAAWE,CAAC,GAACD,CAAC,CAACgC,KAAf;AAAA,YAAqB9B,CAAC,GAACxF,CAAC,GAACuF,CAAF,GAAID,CAAC,CAACtB,IAAF,CAAOvD,MAAlC;AAAyCsB,QAAAA,CAAC,GAAE,IAAI7C,CAAJ,EAAD,CAAQ0F,MAAR,CAAeW,CAAf,EAAkBT,MAAlB,CAAyBQ,CAAC,CAAC4Y,OAAF,CAAUzd,MAAnC,EAA2CoE,MAA3C,CAAkDS,CAAC,CAACtB,IAApD,EAAyDsB,CAAC,CAACrB,UAA3D,EAAuEW,MAAvE,CAA8EY,CAA9E,EAAiFQ,OAAjF,CAAyFjE,CAAzF,CAAF,EAA8FI,CAAC,GAACA,CAAC,CAAC6D,OAAF,CAAW,IAAI9G,CAAJ,EAAD,CAAQ0F,MAAR,CAAeW,CAAf,EAAkBT,MAAlB,CAAyBQ,CAAC,CAACtB,IAAF,CAAOvD,MAAhC,EAAwCoE,MAAxC,CAA+CS,CAAC,CAAC4Y,OAAjD,EAAyD5Y,CAAC,CAAC8Y,iBAA3D,EAA8ExZ,MAA9E,CAAqFY,CAArF,CAAV,CAAhG,EAAmMxF,CAAC,IAAEsF,CAAC,CAAC4Y,OAAF,CAAUzd,MAAV,GAAiB6E,CAAC,CAACtB,IAAF,CAAOvD,MAA9N;AAAqO;;AAAA,aAAM,CAACsB,CAAD,EAAGI,CAAH,CAAN;AAAY,KAA5oB,EAA6oBJ,CAAC,CAACke,8BAAF,GAAiC,UAAS9gB,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAI,IAAIY,CAAC,GAACqC,CAAC,CAACjD,CAAD,CAAP,EAAW2C,CAAC,GAAC,IAAI7C,CAAJ,EAAb,EAAmBiD,CAAC,GAAC,IAAIjD,CAAJ,EAArB,EAA2BoG,CAAC,GAAC,CAA7B,EAA+BC,CAAC,GAAC,CAArC,EAAuCA,CAAC,GAACpG,CAAC,CAACsB,MAA3C,EAAkD8E,CAAC,EAAnD,EAAsD;AAAC,YAAIC,CAAC,GAACrG,CAAC,CAACoG,CAAD,CAAP;AAAA,YAAWE,CAAC,GAACD,CAAC,CAAC8B,KAAF,GAAQhC,CAArB;AAAuBD,QAAAA,CAAC,CAACI,CAAC,IAAE,CAAJ,CAAD,EAAQ1D,CAAC,CAAC6C,MAAF,CAASa,CAAT,CAAR,EAAoBtD,CAAC,CAACyC,MAAF,CAASa,CAAT,CAApB;AAAgC,YAAIC,CAAC,GAACF,CAAC,CAAC5B,GAAF,GAAM4B,CAAC,CAAC8B,KAAd;AAAoBvF,QAAAA,CAAC,CAAC6C,MAAF,CAASc,CAAT,EAAWF,CAAC,CAACvB,UAAb,GAAyB9B,CAAC,CAACyC,MAAF,CAASc,CAAT,EAAWF,CAAC,CAACuV,iBAAb,CAAzB,EAAyDzV,CAAC,GAACE,CAAC,CAAC8B,KAAF,GAAQ5B,CAAnE;AAAqE;;AAAA,aAAO3D,CAAC,CAAC6C,MAAF,CAAS5E,CAAC,GAACsF,CAAX,GAAcnD,CAAC,CAACyC,MAAF,CAAS5E,CAAC,GAACsF,CAAX,CAAd,EAA4B,CAACvD,CAAD,EAAGI,CAAH,CAAnC;AAAyC,KAA56B,EAA66BJ,CAAC,CAAC9B,SAAF,CAAYoL,iBAAZ,GAA8B,UAASnM,CAAT,EAAW;AAAC,WAAKkV,SAAL,GAAelV,CAAf;AAAiB,KAAx+B,EAAy+B6C,CAAC,CAAC9B,SAAF,CAAY4P,QAAZ,GAAqB,UAAS3Q,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,kBAAgBA,CAAC,CAAC,CAAD,CAAD,CAAK6b,MAAxB,EAA+B;AAAC,YAAI5b,CAAC,GAAC2C,CAAC,CAACie,8BAAF,CAAiC7gB,CAAjC,EAAmC,KAAK2gB,EAAxC,CAAN;AAAkD,aAAKpe,OAAL,CAAa,QAAb,EAAsBtC,CAAC,CAAC,CAAD,CAAvB,EAA2BA,CAAC,CAAC,CAAD,CAA5B;AAAiC;AAAC,KAAhoC,EAAioC2C,CAAC,CAAC9B,SAAF,CAAY8f,kBAAZ,GAA+B,UAAS7gB,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,kBAAgBA,CAAC,CAAC,CAAD,CAAD,CAAK6b,MAAxB,EAA+B;AAAC,YAAI5b,CAAC,GAAC2C,CAAC,CAACke,8BAAF,CAAiC9gB,CAAjC,EAAmC,KAAK2gB,EAAxC,CAAN;AAAkD,aAAKpe,OAAL,CAAa,QAAb,EAAsBtC,CAAC,CAAC,CAAD,CAAvB,EAA2BA,CAAC,CAAC,CAAD,CAA5B;AAAiC;AAAC,KAAlyC,EAAmyC2C,CAAC,CAAC9B,SAAF,CAAY8P,gBAAZ,GAA6B,YAAU;AAAC,UAAI7Q,CAAC,GAAC,IAAN;AAAW2K,MAAAA,UAAU,CAAC,YAAU;AAAC3K,QAAAA,CAAC,CAACwC,OAAF,CAAU,gBAAV;AAA4B,OAAxC,EAAyC,CAAzC,CAAV;AAAsD,KAA54C,EAA64CK,CAAC,CAAC9B,SAAF,CAAYkQ,OAAZ,GAAoB,YAAU;AAAC,WAAKzO,OAAL,CAAa,OAAb;AAAsB,KAAl8C,EAAm8CK,CAAC,CAAC9B,SAAF,CAAYgQ,MAAZ,GAAmB,YAAU;AAAC,WAAK6P,EAAL,CAAQlE,iBAAR,MAA6B,KAAKla,OAAL,CAAa,MAAb,CAA7B;AAAkD,KAAnhD,EAAohDK,CAAC,CAAC9B,SAAF,CAAYoT,QAAZ,GAAqB,YAAU;AAAC,aAAO,KAAKyM,EAAL,CAAQzM,QAAR,EAAP;AAA0B,KAA9kD,EAA+kDtR,CAAC,CAAC9B,SAAF,CAAYoR,SAAZ,GAAsB,YAAU;AAAC,UAAInS,CAAJ;AAAA,UAAMC,CAAC,GAAC,KAAK2gB,EAAb;AAAA,UAAgB9f,CAAC,GAACb,CAAC,CAACkS,SAAF,EAAlB;AAAA,UAAgCtP,CAAC,GAAC5C,CAAC,CAAC2T,YAAF,CAAe9S,CAAf,CAAlC;;AAAoD,UAAGb,CAAC,CAACyc,iBAAF,EAAH,EAAyB;AAAC,YAAIvZ,CAAC,GAAClD,CAAC,CAACkS,SAAF,CAAY,CAAC,CAAb,CAAN;AAAA,YAAsBhM,CAAC,GAAC,MAAIlD,CAAC,CAACnC,CAAD,EAAGqC,CAAH,CAAL,GAAWlD,CAAC,CAACkS,SAAF,CAAY,CAAC,CAAb,CAAX,GAA2BhP,CAAnD;AAAqDnD,QAAAA,CAAC,GAACC,CAAC,CAAC2T,YAAF,CAAezN,CAAf,CAAF;AAAoB,OAAnG,MAAwGnG,CAAC,GAAC6C,CAAF;;AAAI,aAAO,IAAI3C,CAAJ,CAAM2C,CAAN,EAAQ7C,CAAR,CAAP;AAAkB,KAAlyD,EAAmyD6C,CAAC,CAAC9B,SAAF,CAAYmR,SAAZ,GAAsB,UAASlS,CAAT,EAAW;AAAC,WAAK4gB,EAAL,CAAQtK,YAAR,CAAqB,KAAKsK,EAAL,CAAQ9M,YAAR,CAAqB9T,CAAC,CAACqJ,QAAvB,CAArB,EAAsD,KAAKuX,EAAL,CAAQ9M,YAAR,CAAqB9T,CAAC,CAACsJ,YAAvB,CAAtD;AAA4F,KAAj6D,EAAk6DzG,CAAC,CAAC9B,SAAF,CAAYyT,YAAZ,GAAyB,UAASxU,CAAT,EAAW;AAAC,UAAG,eAAa,OAAO8C,QAApB,IAA8B,SAAOA,QAAxC,EAAiD;AAAC,YAAG,CAAC,KAAK8R,eAAT,EAAyB;AAAC,eAAKA,eAAL,GAAqB,EAArB;AAAwB,cAAI3U,CAAC,GAAC6C,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAN;AAAsCD,UAAAA,QAAQ,CAAC+R,eAAT,CAAyBC,oBAAzB,CAA8C,MAA9C,EAAsD,CAAtD,EAAyD5R,WAAzD,CAAqEjD,CAArE,GAAwE,KAAK8U,eAAL,GAAqB9U,CAAC,CAAC+U,KAA/F;AAAqG;;AAAA,YAAG,CAAC,KAAKJ,eAAL,CAAqB5U,CAArB,CAAJ,EAA4B,OAAO,KAAK4U,eAAL,CAAqB5U,CAArB,IAAwB,CAAC,CAAzB,EAA2B,KAAK+U,eAAL,CAAqBE,UAArB,CAAgCjV,CAAhC,EAAkC,CAAlC,CAAlC;AAAuE;AAAC,KAA1xE,EAA2xE6C,CAAC,CAAC9B,SAAF,CAAY+Q,cAAZ,GAA2B,UAAS9R,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAIY,CAAC,GAAC,KAAK8f,EAAL,CAAQ9M,YAAR,CAAqB9T,CAAC,CAACqJ,QAAvB,CAAN;;AAAuC,UAAG,YAAU,OAAOpJ,CAAjB,IAAoBA,CAAC,CAACuW,KAAF,CAAQ,qBAAR,CAAvB,EAAsD;AAAC,YAAI3T,CAAC,GAAC,KAAK8d,IAAL,CAAUjc,GAAV,EAAN;;AAAsB,YAAG,YAAU,OAAO1E,CAAjB,IAAoB,YAAU,OAAOA,CAAC,CAACqJ,QAAvC,IAAiD,YAAU,OAAOrJ,CAAC,CAACsJ,YAApE,IAAkF,EAAEtJ,CAAC,CAACqJ,QAAF,GAAW,CAAX,IAAcrJ,CAAC,CAACqJ,QAAF,GAAWxG,CAAzB,IAA4B7C,CAAC,CAACsJ,YAAF,GAAe,CAA3C,IAA8CtJ,CAAC,CAACsJ,YAAF,GAAezG,CAA/D,CAArF,EAAuJ;AAAC,cAAG7C,CAAC,CAACqJ,QAAF,KAAarJ,CAAC,CAACsJ,YAAlB,EAA+B;AAAC,gBAAIrG,CAAC,GAAC,KAAK2d,EAAL,CAAQI,YAAR,CAAqBlgB,CAArB,CAAN;AAAA,gBAA8BqC,CAAC,GAACL,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAhC;AAA+D,mBAAOI,CAAC,CAAC4K,SAAF,GAAY,cAAZ,EAA2B5K,CAAC,CAAC6K,KAAF,CAAQiT,eAAR,GAAwB,KAAnD,EAAyD9d,CAAC,CAAC6K,KAAF,CAAQkT,eAAR,GAAwB,OAAjF,EAAyF/d,CAAC,CAAC6K,KAAF,CAAQmT,eAAR,GAAwBlhB,CAAjH,EAAmHkD,CAAC,CAAC6K,KAAF,CAAQoT,UAAR,GAAmBje,CAAC,CAAC6K,KAAF,CAAQqT,WAAR,GAAoB,MAA1J,EAAiKle,CAAC,CAAC6K,KAAF,CAAQsT,MAAR,GAAe,MAAIre,CAAC,CAACse,MAAF,GAASte,CAAC,CAACue,GAAf,IAAoB,IAApM,EAAyMre,CAAC,CAACC,YAAF,CAAe,eAAf,EAA+BlD,CAA/B,CAAzM,EAA2OiD,CAAC,CAAC6K,KAAF,CAAQyT,MAAR,GAAe,CAA1P,EAA4P,KAAKb,EAAL,CAAQc,WAAR,CAAoB5gB,CAApB,EAAsB;AAAC6gB,cAAAA,MAAM,EAACxe,CAAR;AAAUye,cAAAA,UAAU,EAAC,CAAC;AAAtB,aAAtB,CAAnQ;AAAmT;;AAAA,cAAIzb,CAAJ;AAAA,cAAMC,CAAN;AAAA,cAAQC,CAAC,GAAC,eAAapG,CAAC,CAACiE,OAAF,CAAU,GAAV,EAAc,EAAd,CAAvB;AAAA,cAAyCqC,CAAC,GAAC,MAAIF,CAAJ,GAAM,iBAAN,GAAwBC,CAAC,CAACrG,CAAD,CAAzB,GAA6B,kBAA7B,GAAgDqG,CAAC,CAACrG,CAAD,EAAG,EAAH,CAAjD,GAAwD,IAAnG;AAAwG,iBAAO,KAAKuU,YAAL,CAAkBjO,CAAlB,GAAqBvG,CAAC,CAACsJ,YAAF,GAAetJ,CAAC,CAACqJ,QAAjB,IAA2BlD,CAAC,GAACrF,CAAF,EAAIsF,CAAC,GAAC,KAAKwa,EAAL,CAAQ9M,YAAR,CAAqB9T,CAAC,CAACsJ,YAAvB,CAAjC,KAAwEnD,CAAC,GAAC,KAAKya,EAAL,CAAQ9M,YAAR,CAAqB9T,CAAC,CAACsJ,YAAvB,CAAF,EAAuClD,CAAC,GAACtF,CAAjH,CAArB,EAAyI,KAAK8f,EAAL,CAAQxD,QAAR,CAAiBjX,CAAjB,EAAmBC,CAAnB,EAAqB;AAAC2H,YAAAA,SAAS,EAAC1H;AAAX,WAArB,CAAhJ;AAAoL;AAAC;AAAC,KAAlwG,EAAmwGxD,CAAC,CAAC9B,SAAF,CAAYyB,OAAZ,GAAoB,UAASxC,CAAT,EAAW;AAAC,UAAIC,CAAC,GAACO,KAAK,CAACO,SAAN,CAAgBG,KAAhB,CAAsBD,IAAtB,CAA2ByB,SAA3B,EAAqC,CAArC,CAAN;AAAA,UAA8CxC,CAAC,GAAC,KAAKgV,SAAL,IAAgB,KAAKA,SAAL,CAAelV,CAAf,CAAhE;AAAkFE,MAAAA,CAAC,IAAEA,CAAC,CAACuC,KAAF,CAAQ,IAAR,EAAaxC,CAAb,CAAH;AAAmB,KAAx4G,EAAy4G4C,CAAC,CAAC9B,SAAF,CAAY8O,cAAZ,GAA2B,UAAS7P,CAAT,EAAW;AAACA,MAAAA,CAAC,CAACuF,GAAF,CAAMhE,MAAN,GAAa,EAAb,IAAiB,KAAKof,IAAL,CAAUvG,UAAV,CAAqByH,iBAArB,GAAyCze,YAAzC,CAAsD,OAAtD,EAA8D,eAA9D,CAAjB;;AAAgG,WAAI,IAAInD,CAAC,GAACD,CAAC,CAACuF,GAAR,EAAYrF,CAAC,GAAC,CAAd,EAAgBY,CAAC,GAAC,CAAlB,EAAoB+B,CAAC,GAAC5C,CAAC,CAACsB,MAA5B,EAAmCT,CAAC,GAAC+B,CAArC,EAAuC/B,CAAC,EAAxC,EAA2C;AAAC,YAAImC,CAAC,GAAChD,CAAC,CAACa,CAAD,CAAP;AAAWmC,QAAAA,CAAC,CAACiC,QAAF,MAAcmB,CAAC,CAACpD,CAAC,CAAC8B,UAAH,CAAD,IAAiB,KAAK4b,IAAL,CAAUjF,oBAAV,CAA+Bxb,CAA/B,EAAiCA,CAAC,GAAC+C,CAAC,CAAC4B,KAArC,EAA2C,UAAS7E,CAAT,EAAW;AAAC,eAAI,IAAIC,CAAR,IAAagD,CAAC,CAAC8B,UAAf;AAA0B,aAAC,CAAD,KAAK9B,CAAC,CAAC8B,UAAF,CAAa9E,CAAb,CAAL,GAAqB,OAAOD,CAAC,CAACC,CAAD,CAA7B,GAAiCD,CAAC,CAACC,CAAD,CAAD,GAAKgD,CAAC,CAAC8B,UAAF,CAAa9E,CAAb,CAAtC;AAA1B;AAAgF,SAAvI,EAAwI,aAAxI,EAAsJ,CAAC,CAAvJ,CAAjB,EAA2KC,CAAC,IAAE+C,CAAC,CAAC4B,KAA9L,IAAqM5B,CAAC,CAAC+B,QAAF,MAAc,KAAK2b,IAAL,CAAUrE,UAAV,CAAqBpc,CAArB,EAAuB+C,CAAC,CAAC6B,IAAzB,EAA8B7B,CAAC,CAAC8B,UAAhC,EAA2C,aAA3C,GAA0D7E,CAAC,IAAE+C,CAAC,CAAC6B,IAAF,CAAOvD,MAAlF,IAA0F0B,CAAC,CAACgC,QAAF,MAAc,KAAK0b,IAAL,CAAUhE,UAAV,CAAqBzc,CAArB,EAAuBA,CAAC,GAAC+C,CAAC,CAAC4B,KAA3B,EAAiC,aAAjC,CAA7S;AAA6V;;AAAA7E,MAAAA,CAAC,CAACuF,GAAF,CAAMhE,MAAN,GAAa,EAAb,KAAkB,KAAKof,IAAL,CAAUvG,UAAV,CAAqByH,iBAArB,GAAyCze,YAAzC,CAAsD,OAAtD,EAA8D,EAA9D,GAAkE,KAAKud,IAAL,CAAUvG,UAAV,CAAqBsE,OAArB,EAApF;AAAoH,KAAxhI,EAAyhI7b,CAAC,CAAC9B,SAAF,CAAYmQ,YAAZ,GAAyB,UAASlR,CAAT,EAAW;AAAC,WAAK4gB,EAAL,CAAQzP,IAAR,GAAanR,CAAb;AAAe,KAA7kI,EAA8kI6C,CAAC,CAAC9B,SAAF,CAAYqQ,YAAZ,GAAyB,UAASpR,CAAT,EAAW;AAAC,WAAK4gB,EAAL,CAAQvP,IAAR,GAAarR,CAAb;AAAe,KAAloI,EAAmoI6C,CAAC,CAAC9B,SAAF,CAAYkR,eAAZ,GAA4B,UAAS/R,CAAT,EAAW;AAAC,WAAI,IAAIY,CAAJ,EAAM+B,CAAN,EAAQI,CAAC,GAAC,CAAV,EAAYE,CAAC,GAAC,KAAKwd,IAAL,CAAUvG,UAAxB,EAAmCjU,CAAC,GAAC,IAAInG,CAAJ,EAArC,EAA2CoG,CAAC,GAAC,CAAjD,EAAmDA,CAAC,GAAClG,CAAC,CAACkO,OAAF,CAAU7I,GAAV,CAAchE,MAAnE,EAA0E6E,CAAC,EAA3E,EAA8E;AAAC,YAAIE,CAAC,GAACpG,CAAC,CAACkO,OAAF,CAAU7I,GAAV,CAAca,CAAd,CAAN;AAAuB,YAAGE,CAAC,CAACpB,QAAF,EAAH;AAAgB,cAAGmB,CAAC,CAACC,CAAC,CAACvB,UAAH,CAAJ,EAAmBoB,CAAC,CAACT,MAAF,CAASY,CAAC,CAACzB,KAAX,GAAkB5B,CAAC,IAAEqD,CAAC,CAACzB,KAAvB,CAAnB,KAAqD,KAAI/D,CAAC,GAAC,KAAK6f,IAAL,CAAU5D,iBAAV,CAA4B9Z,CAA5B,EAA8BA,CAAC,GAACqD,CAAC,CAACzB,KAAlC,CAAF,EAA2ChC,CAAC,GAAC,CAAjD,EAAmDA,CAAC,GAAC/B,CAAC,CAACS,MAAvD,EAA8DsB,CAAC,EAA/D,EAAkE;AAAC,gBAAI0D,CAAC,GAAC,EAAN;;AAAS,iBAAI,IAAIC,CAAR,IAAaF,CAAC,CAACvB,UAAf,EAA0B;AAAC,kBAAI0B,CAAC,GAACH,CAAC,CAACvB,UAAF,CAAayB,CAAb,CAAN;AAAA,kBAAsBE,CAAC,GAAC5F,CAAC,CAAC+B,CAAD,CAAD,CAAKkC,UAAL,CAAgByB,CAAhB,CAAxB;AAA2C,eAAC,CAAD,KAAKC,CAAL,GAAOC,CAAC,KAAGH,CAAC,CAACC,CAAD,CAAD,GAAKE,CAAR,CAAR,GAAmBD,CAAC,KAAGC,CAAJ,KAAQH,CAAC,CAACC,CAAD,CAAD,GAAKE,CAAC,IAAE,CAAC,CAAjB,CAAnB;AAAuC;;AAAAP,YAAAA,CAAC,CAACT,MAAF,CAAS5E,CAAC,CAAC+B,CAAD,CAAD,CAAKtB,MAAd,EAAqBgF,CAArB,GAAwBtD,CAAC,IAAEnC,CAAC,CAAC+B,CAAD,CAAD,CAAKtB,MAAhC;AAAuC;AAArS,eAA0S,IAAG+E,CAAC,CAACtB,QAAF,EAAH,EAAgBmB,CAAC,CAACP,MAAF,CAASU,CAAC,CAACxB,IAAF,CAAOvD,MAAhB,EAAhB,KAA6C,IAAG+E,CAAC,CAACrB,QAAF,EAAH,EAAgB;AAAC,cAAI0B,CAAC,GAACxD,CAAC,CAAC+P,QAAF,CAAW/P,CAAC,CAAC2Q,YAAF,CAAe7Q,CAAf,CAAX,EAA6BE,CAAC,CAAC2Q,YAAF,CAAe7Q,CAAC,GAACqD,CAAC,CAACzB,KAAnB,CAA7B,CAAN;AAA8D/D,UAAAA,CAAC,GAAC,KAAK6f,IAAL,CAAU5D,iBAAV,CAA4B9Z,CAA5B,EAA8BA,CAAC,GAACqD,CAAC,CAACzB,KAAlC,CAAF;AAA2C,cAAI+B,CAAC,GAAC,CAAN;;AAAQ,eAAI/D,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC/B,CAAC,CAACS,MAAZ,EAAmBsB,CAAC,EAApB;AAAuBsD,YAAAA,CAAC,CAACR,MAAF,CAASgB,CAAC,CAACoT,MAAF,CAASnT,CAAT,EAAW9F,CAAC,CAAC+B,CAAD,CAAD,CAAKtB,MAAhB,CAAT,EAAiCT,CAAC,CAAC+B,CAAD,CAAD,CAAKkC,UAAtC,GAAkD6B,CAAC,IAAE9F,CAAC,CAAC+B,CAAD,CAAD,CAAKtB,MAA1D;AAAvB;;AAAwF0B,UAAAA,CAAC,IAAEqD,CAAC,CAACzB,KAAL;AAAW;AAAC;;AAAA,aAAO,IAAI5E,CAAJ,CAAMkG,CAAN,EAAQjG,CAAC,CAACmO,IAAF,CAAOxH,MAAP,EAAR,CAAP;AAAgC,KAA92J,EAA+2JhE,CAAt3J;AAAw3J,GAAt6L,EAAzvnB,EAAkqzB,CAAC/B,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUghB,UAAV,GAAqB,YAAU;AAAC,QAAI9hB,CAAC,GAACc,CAAC,CAACyW,kBAAR;;AAA2B,aAAStX,CAAT,CAAWD,CAAX,EAAa;AAAC,UAAG,EAAE,gBAAgBC,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAMD,CAAN,CAAP;AAAgB,WAAK+E,UAAL,GAAgB/E,CAAC,IAAE,EAAnB;AAAsB;;AAAA,WAAOC,CAAC,CAACc,SAAF,CAAYghB,sBAAZ,GAAmC,UAAS/hB,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAIY,CAAC,GAAC,EAAN;;AAAS,WAAI,IAAI+B,CAAR,IAAa,KAAKkC,UAAlB;AAA6BjE,QAAAA,CAAC,CAAC+B,CAAD,CAAD,GAAK,KAAKkC,UAAL,CAAgBlC,CAAhB,CAAL;AAA7B;;AAAqD,aAAM,CAAC,CAAD,KAAK3C,CAAL,GAAO,OAAOY,CAAC,CAACd,CAAD,CAAf,GAAmBc,CAAC,CAACd,CAAD,CAAD,GAAKE,CAAxB,EAA0B,IAAID,CAAJ,CAAMa,CAAN,CAAhC;AAAyC,KAAxJ,EAAyJb,CAAC,CAACc,SAAF,CAAYihB,IAAZ,GAAiB,UAAS/hB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAACwX,IAA9B,EAAmCvX,CAAnC,CAAP;AAA6C,KAAnO,EAAoOA,CAAC,CAACc,SAAF,CAAYkhB,MAAZ,GAAmB,UAAShiB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAACyX,MAA9B,EAAqCxX,CAArC,CAAP;AAA+C,KAAlT,EAAmTA,CAAC,CAACc,SAAF,CAAYmhB,SAAZ,GAAsB,UAASjiB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAAC0X,SAA9B,EAAwCzX,CAAxC,CAAP;AAAkD,KAAvY,EAAwYA,CAAC,CAACc,SAAF,CAAYohB,MAAZ,GAAmB,UAASliB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAAC2X,MAA9B,EAAqC1X,CAArC,CAAP;AAA+C,KAAtd,EAAudA,CAAC,CAACc,SAAF,CAAYqhB,IAAZ,GAAiB,UAASniB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAAC4X,IAA9B,EAAmC3X,CAAnC,CAAP;AAA6C,KAAjiB,EAAkiBA,CAAC,CAACc,SAAF,CAAYshB,QAAZ,GAAqB,UAASpiB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAAC6X,SAA9B,EAAwC5X,CAAxC,CAAP;AAAkD,KAArnB,EAAsnBA,CAAC,CAACc,SAAF,CAAYsL,KAAZ,GAAkB,UAASpM,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAAC8X,KAA9B,EAAoC7X,CAApC,CAAP;AAA8C,KAAlsB,EAAmsBA,CAAC,CAACc,SAAF,CAAYuhB,eAAZ,GAA4B,UAASriB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAAC+X,gBAA9B,EAA+C9X,CAA/C,CAAP;AAAyD,KAApyB,EAAqyBA,CAA5yB;AAA8yB,GAAh6B,EAAvrzB,EAA0l1B,CAACa,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUyhB,IAAV,GAAe,YAAU;AAAC,WAAO,SAASviB,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,EAAE,gBAAgBF,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAMC,CAAN,EAAQC,CAAR,CAAP;AAAkB,WAAK4E,IAAL,GAAU7E,CAAV,EAAY,KAAKuiB,UAAL,GAAgBtiB,CAAC,IAAEY,CAAC,CAACghB,UAAF,EAA/B;AAA8C,KAA/G;AAAgH,GAA3H,EAAzm1B,EAAuu1B,CAAChhB,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU2hB,cAAV,GAAyB,YAAU;AAAC,QAAIziB,CAAC,GAACc,CAAC,CAACyW,kBAAR;;AAA2B,aAAStX,CAAT,CAAWC,CAAX,EAAa;AAAC,UAAG,EAAE,gBAAgBD,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAMC,CAAN,CAAP;AAAgB,WAAK6E,UAAL,GAAgB7E,CAAC,IAAE,EAAnB,EAAsB,KAAK6E,UAAL,CAAgB/E,CAAC,CAACiY,aAAlB,IAAiC,CAAC,CAAxD;AAA0D;;AAAA,WAAOhY,CAAC,CAACmY,SAAF,GAAY;AAACsK,MAAAA,IAAI,EAAC,CAAC,CAAP;AAASC,MAAAA,OAAO,EAAC,GAAjB;AAAqBC,MAAAA,SAAS,EAAC,GAA/B;AAAmCC,MAAAA,IAAI,EAAC,GAAxC;AAA4CC,MAAAA,WAAW,EAAC;AAAxD,KAAZ,EAA0E7iB,CAAC,CAACc,SAAF,CAAYghB,sBAAZ,GAAmC,UAAS/hB,CAAT,EAAWE,CAAX,EAAa;AAAC,UAAIY,CAAC,GAAC,EAAN;;AAAS,WAAI,IAAI+B,CAAR,IAAa,KAAKkC,UAAlB;AAA6BjE,QAAAA,CAAC,CAAC+B,CAAD,CAAD,GAAK,KAAKkC,UAAL,CAAgBlC,CAAhB,CAAL;AAA7B;;AAAqD,aAAM,CAAC,CAAD,KAAK3C,CAAL,GAAO,OAAOY,CAAC,CAACd,CAAD,CAAf,GAAmBc,CAAC,CAACd,CAAD,CAAD,GAAKE,CAAxB,EAA0B,IAAID,CAAJ,CAAMa,CAAN,CAAhC;AAAyC,KAAlO,EAAmOb,CAAC,CAACc,SAAF,CAAYyf,MAAZ,GAAmB,UAASvgB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAACkY,WAA9B,EAA0CjY,CAA1C,CAAP;AAAoD,KAAtT,EAAuTA,CAAC,CAACc,SAAF,CAAYgiB,KAAZ,GAAkB,UAAS9iB,CAAT,EAAW;AAAC,aAAO,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAACmY,UAA9B,EAAyClY,CAAzC,CAAP;AAAmD,KAAxY,EAAyYA,CAAC,CAACc,SAAF,CAAYiiB,QAAZ,GAAqB,UAAS/iB,CAAT,EAAW;AAAC,aAAOa,CAAC,CAACe,KAAF,CAAQwC,MAAR,CAAe,CAAC,CAAD,KAAKpE,CAAL,IAAQ,QAAMA,CAAd,IAAiB,QAAMA,CAAvB,IAA0B,QAAMA,CAAhC,IAAmC,SAAOA,CAAzD,GAA4D,KAAK8hB,sBAAL,CAA4B/hB,CAAC,CAACoY,SAA9B,EAAwCnY,CAAxC,CAAnE;AAA8G,KAAxhB,EAAyhBA,CAAC,CAACc,SAAF,CAAYkiB,SAAZ,GAAsB,YAAU;AAAC,aAAO,KAAKle,UAAL,CAAgB/E,CAAC,CAACkY,WAAlB,KAAgC,CAAvC;AAAyC,KAAnmB,EAAomBjY,CAAC,CAACc,SAAF,CAAYmiB,QAAZ,GAAqB,YAAU;AAAC,aAAO,KAAKne,UAAL,CAAgB/E,CAAC,CAACmY,UAAlB,KAA+B,CAAtC;AAAwC,KAA5qB,EAA6qBlY,CAAC,CAACc,SAAF,CAAYoiB,WAAZ,GAAwB,YAAU;AAAC,aAAO,KAAKpe,UAAL,CAAgB/E,CAAC,CAACoY,SAAlB,KAA8B,CAAC,CAAtC;AAAwC,KAAxvB,EAAyvBnY,CAAhwB;AAAkwB,GAAx5B,EAAhw1B,EAA2p3B,CAACa,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUsiB,IAAV,GAAe,YAAU;AAAC,WAAO,SAASpjB,CAAT,CAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,UAAG,EAAE,gBAAgBF,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAMC,CAAN,EAAQC,CAAR,CAAP;AAAkB,2BAAmBU,MAAM,CAACG,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BhB,CAA/B,CAAnB,KAAuDA,CAAC,GAAC,KAAK,CAAL,KAASA,CAAT,GAAW,EAAX,GAAc,CAACA,CAAD,CAAvE,GAA4E,KAAKojB,UAAL,GAAgBpjB,CAA5F,EAA8F,KAAKuiB,UAAL,GAAgBtiB,CAAC,IAAEY,CAAC,CAAC2hB,cAAF,EAAjH;AAAoI,KAArM;AAAsM,GAAjN,EAA1q3B,EAA833B,CAAC3hB,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUwiB,SAAV,GAAoB,YAAU;AAAC,QAAItjB,CAAJ;AAAA,QAAMC,CAAC,GAACa,CAAC,CAAC2hB,cAAF,CAAiBrK,SAAzB;;AAAmC,aAASlY,CAAT,CAAWF,CAAX,EAAaE,CAAb,EAAe2C,CAAf,EAAiB;AAAC,WAAK0gB,QAAL,GAAcvjB,CAAC,IAAEC,CAAC,CAAC2iB,SAAnB,EAA6B,KAAKY,cAAL,GAAoBtjB,CAAC,IAAEY,CAAC,CAAC2hB,cAAF,EAApD,EAAuE,KAAKgB,cAAL,GAAoB5gB,CAAC,IAAE/B,CAAC,CAACghB,UAAF,EAA9F;AAA6G;;AAAA,aAASjf,CAAT,GAAY;AAAC,WAAK6Q,KAAL,GAAW,EAAX,EAAc,KAAKgQ,WAAL,GAAiB,EAA/B,EAAkC,KAAKC,uBAAL,GAA6B,IAA/D;AAAoE;;AAAAzjB,IAAAA,CAAC,CAACa,SAAF,CAAY6iB,kBAAZ,GAA+B,UAAS5jB,CAAT,EAAW;AAAC,aAAO,IAAIE,CAAJ,CAAM,KAAKqjB,QAAX,EAAoB,KAAKC,cAAzB,EAAwCxjB,CAAxC,CAAP;AAAkD,KAA7F,EAA8FE,CAAC,CAACa,SAAF,CAAY8iB,kBAAZ,GAA+B,UAAS7jB,CAAT,EAAW;AAAC,aAAO,IAAIE,CAAJ,CAAM,KAAKqjB,QAAX,EAAoBvjB,CAApB,EAAsB,KAAKyjB,cAA3B,CAAP;AAAkD,KAA3L,EAA4LvjB,CAAC,CAACa,SAAF,CAAY+iB,YAAZ,GAAyB,UAAS9jB,CAAT,EAAW;AAAC,aAAO,IAAIE,CAAJ,CAAMF,CAAN,EAAQ,KAAKwjB,cAAb,EAA4B,KAAKC,cAAjC,CAAP;AAAwD,KAAzR,EAA0RvjB,CAAC,CAACa,SAAF,CAAYgjB,mBAAZ,GAAgC,YAAU;AAAC,UAAI/jB,CAAC,GAAC,KAAKwjB,cAAL,CAAoBhD,MAApB,CAA2B,KAAKgD,cAAL,CAAoBP,SAApB,KAAgC,CAA3D,CAAN;AAAoE,aAAO,IAAI/iB,CAAJ,CAAM,KAAKqjB,QAAX,EAAoBvjB,CAApB,EAAsB,KAAKyjB,cAA3B,CAAP;AAAkD,KAA3b,EAA4bvjB,CAAC,CAACa,SAAF,CAAYijB,SAAZ,GAAsB,UAAShkB,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,KAAKujB,cAAL,CAAoBT,KAApB,CAA0B/iB,CAA1B,CAAN;AAAmC,aAAO,IAAIE,CAAJ,CAAM,KAAKqjB,QAAX,EAAoBtjB,CAApB,EAAsB,KAAKwjB,cAA3B,CAAP;AAAkD,KAAnjB,EAAojB5gB,CAAC,CAAC9B,SAAF,CAAYkjB,iBAAZ,GAA8B,UAASjkB,CAAT,EAAW;AAAC,WAAKkkB,UAAL,IAAkB,KAAKR,WAAL,CAAiBniB,MAAjB,GAAwB,CAAxB,IAA2B,KAAK0e,OAAL,CAAajgB,CAAb,CAA7C;AAA6D,KAA3pB,EAA4pB6C,CAAC,CAAC9B,SAAF,CAAYojB,2BAAZ,GAAwC,UAASnkB,CAAT,EAAW;AAAC,WAAKkkB,UAAL,IAAkB,CAAC,KAAKR,WAAL,CAAiBniB,MAAjB,GAAwB,CAAxB,IAA2B,SAAO,KAAKoiB,uBAAxC,KAAkE,KAAK1D,OAAL,CAAajgB,CAAb,CAApF;AAAoG,KAApzB,EAAqzB6C,CAAC,CAAC9B,SAAF,CAAYkf,OAAZ,GAAoB,UAASjgB,CAAT,EAAW;AAAC,WAAKkkB,UAAL;AAAkB,UAAIjkB,CAAC,GAACD,CAAC,CAACwjB,cAAR;AAAuB,eAAO,KAAKG,uBAAZ,KAAsC1jB,CAAC,GAACA,CAAC,CAAC+iB,QAAF,CAAW,KAAKW,uBAAhB,CAAF,EAA2C,KAAKA,uBAAL,GAA6B,IAA9G,GAAoH,KAAKjQ,KAAL,CAAWvR,IAAX,CAAgBrB,CAAC,CAACsiB,IAAF,CAAO,KAAKM,WAAZ,EAAwBzjB,CAAxB,CAAhB,CAApH,EAAgK,KAAKyjB,WAAL,GAAiB,EAAjL;AAAoL,KAAljC,EAAmjC7gB,CAAC,CAAC9B,SAAF,CAAYqjB,YAAZ,GAAyB,UAASpkB,CAAT,EAAW;AAAC,WAAK2jB,uBAAL,GAA6B3jB,CAA7B;AAA+B,KAAvnC,EAAwnC6C,CAAC,CAAC9B,SAAF,CAAYmjB,UAAZ,GAAuB,YAAU;AAAC,UAAG,KAAKR,WAAL,CAAiBniB,MAAjB,GAAwB,CAA3B,EAA6B;AAAC,YAAIvB,CAAC,GAAC,KAAK0jB,WAAL,CAAiBniB,MAAjB,GAAwB,CAA9B;AAAgC,aAAKmiB,WAAL,CAAiB,CAAjB,EAAoB5e,IAApB,GAAyB,KAAK4e,WAAL,CAAiB,CAAjB,EAAoB5e,IAApB,CAAyBZ,OAAzB,CAAiC,KAAjC,EAAuC,EAAvC,CAAzB,EAAoE,KAAKwf,WAAL,CAAiB1jB,CAAjB,EAAoB8E,IAApB,GAAyB,KAAK4e,WAAL,CAAiB1jB,CAAjB,EAAoB8E,IAApB,CAAyBZ,OAAzB,CAAiC,MAAjC,EAAwC,EAAxC,CAA7F;;AAAyI,aAAI,IAAIjE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKyjB,WAAL,CAAiBniB,MAA/B,EAAsCtB,CAAC,EAAvC;AAA0C,eAAKyjB,WAAL,CAAiBzjB,CAAjB,EAAoB6E,IAApB,GAAyB,KAAK4e,WAAL,CAAiBzjB,CAAjB,EAAoB6E,IAApB,CAAyBZ,OAAzB,CAAiC,SAAjC,EAA2C,GAA3C,CAAzB;AAA1C;AAAmH;;AAAA,YAAI,KAAKwf,WAAL,CAAiBniB,MAArB,IAA6B,OAAK,KAAKmiB,WAAL,CAAiB,CAAjB,EAAoB5e,IAAtD,KAA6D,KAAK4e,WAAL,GAAiB,EAA9E;AAAkF,KAAtiD;AAAuiD,QAAIzgB,CAAC,GAACA,CAAC,IAAE;AAACohB,MAAAA,YAAY,EAAC,CAAd;AAAgBC,MAAAA,SAAS,EAAC;AAA1B,KAAT;;AAAsC,aAASnhB,CAAT,CAAWjD,CAAX,EAAa2C,CAAb,EAAeM,CAAf,EAAiB;AAAC,UAAGjD,CAAC,CAACyZ,QAAF,KAAa1W,CAAC,CAACohB,YAAlB,EAA+B;AAAC,YAAIje,CAAC,GAACpG,CAAC,CAAC6Y,WAAF,CAAc3Y,CAAd,CAAN;AAAuB,YAAGkG,CAAH,EAAK,OAAO,KAAKjD,CAAC,CAACugB,WAAF,CAAcvhB,IAAd,CAAmB,IAAIrB,CAAC,CAACyhB,IAAN,CAAWzhB,CAAC,CAACuX,iBAAF,CAAoBE,yBAA/B,EAAyD,IAAIzX,CAAC,CAACghB,UAAN,CAAiB1b,CAAC,CAACyT,YAAF,EAAjB,CAAzD,CAAnB,CAAZ;AAA6H;;AAAA,cAAO3Z,CAAC,CAACyZ,QAAT;AAAmB,aAAK1W,CAAC,CAACqhB,SAAP;AAAiB,cAAIje,CAAC,GAACnG,CAAC,CAACqkB,SAAF,CAAYrgB,OAAZ,CAAoB,WAApB,EAAgC,GAAhC,CAAN;AAA2Cf,UAAAA,CAAC,CAACugB,WAAF,CAAcvhB,IAAd,CAAmBrB,CAAC,CAACyhB,IAAF,CAAOlc,CAAP,EAASxD,CAAC,CAAC4gB,cAAX,CAAnB;AAA+C;;AAAM,aAAKxgB,CAAC,CAACohB,YAAP;AAAoB,kBAAOxhB,CAAC,GAAC,UAAS7C,CAAT,EAAWC,CAAX,EAAa;AAAC,iBAAI,IAAIC,CAAC,GAACF,CAAC,CAACyjB,cAAR,EAAuB5gB,CAAC,GAAC7C,CAAC,CAACwjB,cAA3B,EAA0CvgB,CAAC,GAAChD,CAAC,CAACukB,KAAF,CAAQ,GAAR,CAA5C,EAAyDrhB,CAAC,GAAC,CAA/D,EAAiEA,CAAC,GAACF,CAAC,CAAC1B,MAArE,EAA4E4B,CAAC,EAA7E,EAAgF;AAAC,kBAAIgD,CAAC,GAAClD,CAAC,CAACE,CAAD,CAAD,CAAKqhB,KAAL,CAAW,GAAX,CAAN;;AAAsB,kBAAG,MAAIre,CAAC,CAAC5E,MAAT,EAAgB;AAAC,oBAAI6E,CAAC,GAACtF,CAAC,CAACe,KAAF,CAAQoC,IAAR,CAAakC,CAAC,CAAC,CAAD,CAAd,EAAmBoT,WAAnB,EAAN;AAAA,oBAAuClT,CAAC,GAACvF,CAAC,CAACe,KAAF,CAAQoC,IAAR,CAAakC,CAAC,CAAC,CAAD,CAAd,EAAmBoT,WAAnB,EAAzC;;AAA0E,wBAAOnT,CAAP;AAAU,uBAAI,iBAAJ;AAAsB,wBAAIE,CAAC,GAACD,CAAC,CAACjC,OAAF,CAAU,WAAV,KAAwB,CAA9B;AAAA,wBAAgCmC,CAAC,GAACF,CAAC,CAACjC,OAAF,CAAU,cAAV,KAA2B,CAA7D;AAA+DlE,oBAAAA,CAAC,GAACA,CAAC,CAACgiB,SAAF,CAAY5b,CAAZ,EAAe6b,MAAf,CAAsB5b,CAAtB,CAAF;AAA2B;;AAAM,uBAAI,aAAJ;AAAkB,wBAAIC,CAAC,GAAC,WAASH,CAAT,IAAYsU,QAAQ,CAACtU,CAAD,CAAR,IAAa,GAA/B;AAAmCnG,oBAAAA,CAAC,GAACA,CAAC,CAAC8hB,IAAF,CAAOxb,CAAP,CAAF;AAAY;;AAAM,uBAAI,YAAJ;AAAiB,wBAAIC,CAAC,GAAC,aAAWJ,CAAX,IAAc,cAAYA,CAAhC;AAAkCnG,oBAAAA,CAAC,GAACA,CAAC,CAAC+hB,MAAF,CAASxb,CAAT,CAAF;AAAc;;AAAM,uBAAI,OAAJ;AAAYvG,oBAAAA,CAAC,GAACA,CAAC,CAACmM,KAAF,CAAQhG,CAAR,CAAF;AAAa;;AAAM,uBAAI,kBAAJ;AAAuBnG,oBAAAA,CAAC,GAACA,CAAC,CAACoiB,eAAF,CAAkBjc,CAAlB,CAAF;AAAuB;;AAAM,uBAAI,YAAJ;AAAiBxD,oBAAAA,CAAC,GAACA,CAAC,CAACkgB,KAAF,CAAQ1c,CAAR,CAAF;AAAa;;AAAM,uBAAI,WAAJ;AAAgB,wBAAIK,CAAC,GAAC,IAAN;AAAW5F,oBAAAA,CAAC,CAACe,KAAF,CAAQsC,cAAR,CAAuBkC,CAAvB,EAAyB,CAAC,IAAD,EAAM,IAAN,EAAW,GAAX,EAAe,IAAf,EAAoB,UAApB,EAA+B,SAA/B,EAAyC,OAAzC,EAAiD,QAAjD,EAA0D,OAA1D,EAAkE,SAAlE,EAA4E,UAA5E,EAAuF,SAAvF,EAAiG,QAAjG,CAAzB,IAAqIK,CAAC,GAACL,CAAvI,GAAyIsU,QAAQ,CAACtU,CAAD,CAAR,KAAcK,CAAC,GAACiU,QAAQ,CAACtU,CAAD,CAAR,GAAY,IAA5B,CAAzI,EAA2KK,CAAC,KAAGxG,CAAC,GAACA,CAAC,CAACmiB,QAAF,CAAW3b,CAAX,CAAL,CAA5K;AAAgM;;AAAM,uBAAI,aAAJ;AAAkB,wBAAIC,CAAC,GAAC7F,CAAC,CAACe,KAAF,CAAQoC,IAAR,CAAaoC,CAAC,CAACme,KAAF,CAAQ,GAAR,EAAa,CAAb,CAAb,CAAN;AAAoC7d,oBAAAA,CAAC,GAAC,CAACA,CAAC,GAACA,CAAC,CAACzC,OAAF,CAAU,OAAV,EAAkB,EAAlB,CAAH,EAA0BA,OAA1B,CAAkC,QAAlC,EAA2C,UAASlE,CAAT,EAAW;AAAC,6BAAOA,CAAC,CAACykB,MAAF,CAAS,CAAT,EAAYC,WAAZ,KAA0B1kB,CAAC,CAAC+Z,MAAF,CAAS,CAAT,EAAYR,WAAZ,EAAjC;AAA2D,qBAAlH,CAAF,EAAsHrZ,CAAC,GAACA,CAAC,CAACkiB,IAAF,CAAOzb,CAAP,CAAxH;AAA5pB;AAA+xB;AAAC;;AAAA,mBAAO3G,CAAC,CAAC6jB,kBAAF,CAAqBhhB,CAArB,EAAwB+gB,kBAAxB,CAA2C1jB,CAA3C,CAAP;AAAqD,WAAriC,CAAsiC2C,CAAtiC,EAAwiC3C,CAAC,CAAC6Y,YAAF,CAAe,OAAf,KAAyB,EAAjkC,CAAF,EAAukC7Y,CAAC,CAACoZ,QAAF,CAAWC,WAAX,EAA9kC;AAAwmC,iBAAI,KAAJ;AAAU,iBAAI,IAAJ;AAAS,iBAAI,IAAJ;AAAS,iBAAI,IAAJ;AAAS,iBAAI,GAAJ;AAAQpW,cAAAA,CAAC,CAAC8gB,iBAAF,CAAoBphB,CAApB,GAAuBsD,CAAC,CAACjG,CAAD,EAAG2C,CAAH,EAAKM,CAAL,CAAxB,EAAgCA,CAAC,CAAC8gB,iBAAF,CAAoBphB,CAApB,CAAhC;AAAuD;;AAAM,iBAAI,QAAJ;AAAaA,cAAAA,CAAC,GAACA,CAAC,CAACmhB,SAAF,CAAY,QAAZ,CAAF,EAAwB7gB,CAAC,CAAC8gB,iBAAF,CAAoBphB,CAApB,CAAxB,EAA+CsD,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAACmhB,SAAF,CAAY,QAAZ,CAAH,EAAyB7gB,CAAzB,CAAhD,EAA4EA,CAAC,CAAC8gB,iBAAF,CAAoBphB,CAApB,CAA5E;AAAmG;;AAAM,iBAAI,GAAJ;AAAQ,iBAAI,QAAJ;AAAasD,cAAAA,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBzB,IAAjB,CAAsB,CAAC,CAAvB,CAArB,CAAH,EAAmD7e,CAAnD,CAAD;AAAuD;;AAAM,iBAAI,GAAJ;AAAQgD,cAAAA,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBvB,SAAjB,CAA2B,CAAC,CAA5B,CAArB,CAAH,EAAwD/e,CAAxD,CAAD;AAA4D;;AAAM,iBAAI,GAAJ;AAAQ,iBAAI,IAAJ;AAASgD,cAAAA,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBxB,MAAjB,CAAwB,CAAC,CAAzB,CAArB,CAAH,EAAqD9e,CAArD,CAAD;AAAyD;;AAAM,iBAAI,GAAJ;AAAQgD,cAAAA,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBtB,MAAjB,CAAwB,CAAC,CAAzB,CAArB,CAAH,EAAqDhf,CAArD,CAAD;AAAyD;;AAAM,iBAAI,MAAJ;AAAW,kBAAImD,CAAC,GAACpG,CAAC,CAAC6Y,YAAF,CAAe,MAAf,CAAN;AAAA,kBAA6BxS,CAAC,GAACrG,CAAC,CAAC6Y,YAAF,CAAe,OAAf,CAA/B;AAAA,kBAAuDvS,CAAC,GAACmU,QAAQ,CAACza,CAAC,CAAC6Y,YAAF,CAAe,MAAf,CAAD,CAAjE;AAA0FzS,cAAAA,CAAC,KAAGzD,CAAC,GAACA,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBrB,IAAjB,CAAsB9b,CAAtB,CAArB,CAAL,CAAD,EAAsDC,CAAC,KAAG1D,CAAC,GAACA,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBpX,KAAjB,CAAuB9F,CAAvB,CAArB,CAAL,CAAvD,EAA6GC,CAAC,KAAG3D,CAAC,GAACA,CAAC,CAAC+gB,kBAAF,CAAqB/gB,CAAC,CAAC4gB,cAAF,CAAiBpB,QAAjB,CAA0B7b,CAA1B,CAArB,CAAL,CAA9G,EAAuKL,CAAC,CAACjG,CAAD,EAAG2C,CAAH,EAAKM,CAAL,CAAxK;AAAgL;;AAAM,iBAAI,IAAJ;AAASA,cAAAA,CAAC,CAAC8c,OAAF,CAAUpd,CAAV;AAAa;;AAAM,iBAAI,IAAJ;AAASM,cAAAA,CAAC,CAACghB,2BAAF,CAA8BthB,CAA9B;AAAiC,kBAAI4D,CAAC,GAAC,mBAAiBvG,CAAC,CAAC6Y,YAAF,CAAe,OAAf,CAAjB,GAAyC9Y,CAAC,CAAC4iB,IAA3C,GAAgD5iB,CAAC,CAAC2iB,SAAxD;AAAkEzc,cAAAA,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAACihB,YAAF,CAAerd,CAAf,EAAkBsd,mBAAlB,EAAH,EAA2C5gB,CAA3C,CAAD,EAA+CA,CAAC,CAAC8gB,iBAAF,CAAoBphB,CAApB,CAA/C;AAAsE;;AAAM,iBAAI,IAAJ;AAASM,cAAAA,CAAC,CAACghB,2BAAF,CAA8BthB,CAA9B,GAAiCsD,CAAC,CAACjG,CAAD,EAAG2C,CAAC,CAACihB,YAAF,CAAe7jB,CAAC,CAAC0iB,OAAjB,EAA0BoB,mBAA1B,EAAH,EAAmD5gB,CAAnD,CAAlC,EAAwFA,CAAC,CAAC8gB,iBAAF,CAAoBphB,CAApB,CAAxF;AAA+G;;AAAM,iBAAI,IAAJ;AAAS,eAAC,UAAS7C,CAAT,EAAWE,CAAX,EAAaY,CAAb,EAAe;AAACA,gBAAAA,CAAC,CAACqjB,2BAAF,CAA8BjkB,CAA9B;AAAiC,oBAAI2C,CAAC,GAAC,sBAAoB7C,CAAC,CAAC+Y,YAAF,CAAe,OAAf,CAApB,GAA4C9Y,CAAC,CAAC6iB,WAA9C,GAA0D5iB,CAAC,CAACqjB,QAAlE;AAA2EziB,gBAAAA,CAAC,CAACsjB,YAAF,CAAevhB,CAAf;AAAkB,oBAAII,CAAC,GAACnC,CAAC,CAAC4iB,WAAR;AAAoBvd,gBAAAA,CAAC,CAACnG,CAAD,EAAGE,CAAH,EAAKY,CAAL,CAAD,EAAS,CAACmC,CAAC,KAAGnC,CAAC,CAAC4iB,WAAN,IAAmB5iB,CAAC,CAAC4iB,WAAF,CAAcniB,MAAd,GAAqB,CAAzC,KAA6CT,CAAC,CAACmf,OAAF,CAAU/f,CAAV,CAAtD;AAAmE,eAArO,CAAsOA,CAAtO,EAAwO2C,CAAxO,EAA0OM,CAA1O,CAAD;AAA8O;;AAAM,iBAAI,OAAJ;AAAY;;AAAM;AAAQgD,cAAAA,CAAC,CAACjG,CAAD,EAAG2C,CAAH,EAAKM,CAAL,CAAD;AAA//E;;AAAxJ;AAAkqF;;AAAA,aAASgD,CAAT,CAAWnG,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,UAAGF,CAAC,CAAC2kB,aAAF,EAAH,EAAqB,KAAI,IAAI7jB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACd,CAAC,CAAC0Z,UAAF,CAAanY,MAA3B,EAAkCT,CAAC,EAAnC;AAAsCqC,QAAAA,CAAC,CAACnD,CAAC,CAAC0Z,UAAF,CAAa5Y,CAAb,CAAD,EAAiBb,CAAjB,EAAmBC,CAAnB,CAAD;AAAtC;AAA6D;;AAAA,WAAO,UAASD,CAAT,EAAWgD,CAAX,EAAa;AAAC,UAAIkD,CAAC,GAAC,CAACrF,CAAC,CAACgC,QAAF,IAAYA,QAAb,EAAuBC,aAAvB,CAAqC,KAArC,CAAN;AAAkDoD,MAAAA,CAAC,CAAC9C,SAAF,GAAYpD,CAAZ,EAAcD,CAAC,GAACiD,CAAhB;AAAkB,UAAImD,CAAC,GAAC,IAAIvD,CAAJ,EAAN;AAAY,aAAOM,CAAC,CAACgD,CAAD,EAAG,IAAIjG,CAAJ,EAAH,EAASkG,CAAT,CAAD,EAAaA,CAAC,CAACsN,KAAtB;AAA4B,KAAjI;AAAkI,GAA95J,EAAl53B,EAAmzhC,CAAC5S,CAAC,GAACA,CAAC,IAAE,EAAN,EAAU8jB,aAAV,GAAwB,YAAU;AAAC,QAAI5kB,CAAC,GAACc,CAAC,CAACe,KAAR;AAAA,QAAc5B,CAAC,GAACa,CAAC,CAACyW,kBAAlB;AAAA,QAAqCrX,CAAC,GAACY,CAAC,CAAC2hB,cAAF,CAAiBrK,SAAxD;AAAA,QAAkEvV,CAAC,GAAC,sTAApE;;AAA2X,aAASI,CAAT,CAAWjD,CAAX,EAAa;AAAC,aAAOA,CAAC,KAAGE,CAAC,CAACyiB,OAAN,GAAc,MAAd,GAAqB3iB,CAAC,KAAGE,CAAC,CAAC0iB,SAAN,GAAgB,MAAhB,GAAuB,2BAAnD;AAA+E;;AAAA,aAASzf,CAAT,CAAWnD,CAAX,EAAa;AAAC,aAAOA,CAAC,KAAGE,CAAC,CAACyiB,OAAN,GAAc,OAAd,GAAsB,OAA7B;AAAqC;;AAAA,aAASxc,CAAT,CAAWnG,CAAX,EAAa;AAAC,aAAOA,CAAC,CAACkE,OAAF,CAAU,IAAV,EAAe,OAAf,EAAwBA,OAAxB,CAAgC,IAAhC,EAAqC,QAArC,EAA+CA,OAA/C,CAAuD,IAAvD,EAA4D,OAA5D,EAAqEA,OAArE,CAA6E,IAA7E,EAAkF,MAAlF,EAA0FA,OAA1F,CAAkG,IAAlG,EAAuG,MAAvG,EAA+GA,OAA/G,CAAuH,SAAvH,EAAiI,QAAjI,CAAP;AAAkJ;;AAAA,WAAO,UAASkC,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAI,IAAIC,CAAJ,EAAMC,CAAN,EAAQC,CAAC,GAAC,EAAV,EAAaC,CAAC,GAAC,CAAC,CAAhB,EAAkBC,CAAC,GAAC,EAApB,EAAuBC,CAAC,GAAC,CAAC,CAA1B,EAA4BC,CAAC,GAAC,CAAC,CAA/B,EAAiCqY,CAAC,GAAC,CAAC,CAApC,EAAsC4F,CAAC,GAAC,CAAxC,EAA0CC,CAAC,GAAC1e,CAAC,CAACb,GAAF,CAAMsf,CAAN,CAA5C,EAAqDE,CAAC,GAAC,CAAC,CAA5D,EAA8DD,CAA9D,GAAiE;AAAC9kB,QAAAA,CAAC,CAACqE,MAAF,CAASygB,CAAC,CAAC9f,QAAF,EAAT;AAAuB,YAAIggB,CAAC,GAACF,CAAC,CAAC/f,UAAR;;AAAmB,YAAG0B,CAAH,EAAK;AAACA,UAAAA,CAAC,GAAC,CAAC,CAAH;AAAK,cAAIwe,CAAC,GAAC,CAAN;AAAA,cAAQC,CAAC,GAAC,IAAV;AAAA,cAAeC,CAAC,GAAC,MAAjB;AAAwBllB,UAAAA,CAAC,CAACgY,aAAF,IAAmB+M,CAAnB,KAAuBC,CAAC,GAACD,CAAC,CAAC/kB,CAAC,CAACiY,WAAH,CAAD,IAAkB,CAApB,EAAsBgN,CAAC,GAACF,CAAC,CAAC/kB,CAAC,CAACmY,SAAH,CAAD,IAAgB,IAAxC,EAA6C+M,CAAC,GAACH,CAAC,CAAC/kB,CAAC,CAACkY,UAAH,CAAD,IAAiB,MAAvF,GAA+F+M,CAAC,KAAGD,CAAC,GAACA,CAAC,IAAE,CAAR,CAAhG,EAA2Gte,CAAC,IAAEH,CAAC,IAAE,OAAH,EAAWG,CAAC,GAAC,CAAC,CAAhB,IAAmBC,CAAC,KAAGqY,CAAC,KAAGzY,CAAC,IAAE,OAAN,CAAD,EAAgBA,CAAC,IAAE,QAAtB,CAAhI,EAAgKI,CAAC,GAAC,CAAC,CAAnK,EAAqK5G,CAAC,CAACqE,MAAF,CAAS4gB,CAAC,IAAE,CAAZ,EAAc,8BAAd,CAArK;;AAAmN,iBAAKve,CAAC,CAACnF,MAAF,GAAS0jB,CAAT,IAAYA,CAAC,KAAGve,CAAC,CAACnF,MAAN,IAAc,SAAO2jB,CAArB,KAAyB5e,CAAC,GAAC4e,CAAF,EAAI3e,CAAC,GAACG,CAAC,CAACA,CAAC,CAACnF,MAAF,GAAS,CAAV,CAAP,EAAoB,EAAE+E,CAAC,KAAGC,CAAJ,IAAOD,CAAC,KAAGpG,CAAC,CAAC2iB,IAAN,IAAYtc,CAAC,KAAGrG,CAAC,CAAC4iB,WAAzB,IAAsCxc,CAAC,KAAGpG,CAAC,CAAC4iB,WAAN,IAAmBvc,CAAC,KAAGrG,CAAC,CAAC2iB,IAAjE,CAA7C,CAAjB;AAAuIrc,YAAAA,CAAC,IAAErD,CAAC,CAACuD,CAAC,CAACqI,GAAF,EAAD,CAAJ;AAAvI;;AAAqJ,iBAAKrI,CAAC,CAACnF,MAAF,GAAS0jB,CAAd,GAAiB;AAAC,gBAAIG,CAAC,GAACF,CAAC,IAAEhlB,CAAC,CAAC0iB,SAAX;AAAqBmC,YAAAA,CAAC,GAACG,CAAC,IAAEhlB,CAAC,CAAC2iB,IAAL,IAAWqC,CAAC,IAAEhlB,CAAC,CAAC4iB,WAAhB,IAA6BiC,CAA/B,EAAiCve,CAAC,IAAEvD,CAAC,CAACmiB,CAAD,CAArC,EAAyC1e,CAAC,CAACvE,IAAF,CAAOijB,CAAP,CAAzC;AAAmD;;AAAA,cAAIC,CAAC,GAAC,WAASF,CAAT,GAAW,wBAAsBA,CAAtB,GAAwB,GAAnC,GAAuC,EAA7C;;AAAgD,cAAGD,CAAH,EAAK;AAAC,gBAAII,CAAC,GAAC,EAAN;;AAAS,oBAAOJ,CAAP;AAAU,mBAAKhlB,CAAC,CAAC4iB,WAAP;AAAmBwC,gBAAAA,CAAC,GAAC,0BAAF;AAA6B;;AAAM,mBAAKplB,CAAC,CAAC2iB,IAAP;AAAYyC,gBAAAA,CAAC,GAAC,4BAAF;AAA5E;;AAA2G9e,YAAAA,CAAC,IAAE,QAAM8e,CAAN,GAAQD,CAAR,GAAU,GAAb,EAAiB1e,CAAC,GAAC,CAAC,CAApB;AAAsB,WAAhJ,MAAqJH,CAAC,IAAE,SAAO6e,CAAP,GAAS,GAAZ;;AAAgBpG,UAAAA,CAAC,GAAC,CAAC,CAAH;AAAK;;AAAA,YAAGhf,CAAC,CAACgY,aAAF,IAAmB+M,CAAtB,EAAwBF,CAAC,GAAC1e,CAAC,CAACb,GAAF,CAAM,EAAEsf,CAAR,CAAF,CAAxB,KAA0C,IAAG5kB,CAAC,CAAC+X,eAAF,IAAqBgN,CAAxB,EAA0B;AAAC,eAAI,IAAIO,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACT,CAAC,CAAChgB,IAAF,CAAOvD,MAArB,EAA4BgkB,CAAC,EAA7B,EAAgC;AAAC,gBAAIC,CAAC,GAAC1kB,CAAC,CAAC0Y,MAAF,CAASM,cAAT,CAAwBkL,CAAxB,CAAN;AAAiCxe,YAAAA,CAAC,IAAEH,CAAC,CAAC6S,eAAF,CAAkBsM,CAAlB,EAAqBC,SAAxB;AAAkC;;AAAAX,UAAAA,CAAC,GAAC1e,CAAC,CAACb,GAAF,CAAM,EAAEsf,CAAR,CAAF;AAAa,SAA5I,MAAgJ;AAAC,cAAIa,CAAC,GAAC,EAAN;AAAA,cAASC,CAAC,GAAC,EAAX;;AAAc,eAAI,IAAIC,CAAR,IAAaZ,CAAb,EAAe;AAAC,gBAAIa,CAAJ;AAAA,gBAAMC,CAAN;AAAA,gBAAQC,CAAC,GAACf,CAAC,CAACY,CAAD,CAAX;AAAeA,YAAAA,CAAC,KAAG3lB,CAAC,CAACuX,IAAN,IAAYoO,CAAC,KAAG3lB,CAAC,CAACwX,MAAlB,IAA0BmO,CAAC,KAAG3lB,CAAC,CAACyX,SAAhC,IAA2CkO,CAAC,KAAG3lB,CAAC,CAAC0X,MAAjD,IAAyD3X,CAAC,CAACqE,MAAF,CAAS,CAAC,CAAD,KAAK0hB,CAAd,GAAiBF,CAAC,GAACC,CAAC,GAACF,CAA9E,IAAiFA,CAAC,KAAG3lB,CAAC,CAAC4X,SAAN,IAAiBgO,CAAC,GAAC,4BAA0BE,CAA5B,EAA8BF,CAAC,IAAE,YAAU,OAAOE,CAAjB,IAAoB,CAAC,CAAD,KAAKA,CAAC,CAAC3hB,OAAF,CAAU,IAAV,EAAe2hB,CAAC,CAACxkB,MAAF,GAAS,CAAxB,CAAzB,GAAoD,KAApD,GAA0D,GAA3F,EAA+FukB,CAAC,GAAC,MAAlH,IAA0HF,CAAC,KAAG3lB,CAAC,CAAC2X,IAAN,IAAYiO,CAAC,GAAC,8BAA4BE,CAA5B,GAA8B,GAAhC,EAAoCD,CAAC,GAAC,MAAlD,IAA0DF,CAAC,KAAG3lB,CAAC,CAAC6X,KAAN,IAAa+N,CAAC,GAAC,wBAAsBE,CAAtB,GAAwB,GAA1B,EAA8BD,CAAC,GAAC,MAA7C,IAAqDF,CAAC,KAAG3lB,CAAC,CAAC8X,gBAAN,IAAwB8N,CAAC,GAAC,mCAAiCE,CAAjC,GAAmC,GAArC,EAAyCD,CAAC,GAAC,MAAnE,IAA2E9lB,CAAC,CAACsE,GAAF,CAAM,CAAC,CAAP,EAAS,yDAAuDshB,CAAhE,CAArY,EAAwcC,CAAC,KAAGH,CAAC,IAAE,MAAIG,CAAJ,GAAM,GAAZ,CAAzc,EAA0dC,CAAC,KAAGH,CAAC,GAAC,OAAKG,CAAL,GAAO,GAAP,GAAWH,CAAhB,CAA3d;AAA8e;;AAAA,cAAIK,CAAC,GAAClB,CAAC,CAAChgB,IAAR;AAAA,cAAamhB,CAAC,GAACD,CAAC,CAAC5hB,OAAF,CAAU,IAAV,CAAf;AAA+B6hB,UAAAA,CAAC,IAAE,CAAH,IAAMxf,CAAC,GAAC,CAAC,CAAH,EAAKqe,CAAC,GAACmB,CAAC,GAACD,CAAC,CAACzkB,MAAF,GAAS,CAAX,GAAa,IAAIT,CAAC,CAAC6D,MAAN,CAAa,QAAb,EAAsBqhB,CAAC,CAACjM,MAAF,CAASkM,CAAC,GAAC,CAAX,CAAtB,EAAoCjB,CAApC,CAAb,GAAoD5e,CAAC,CAACb,GAAF,CAAM,EAAEsf,CAAR,CAA3D,EAAsEmB,CAAC,GAACA,CAAC,CAACjM,MAAF,CAAS,CAAT,EAAWkM,CAAX,CAA9E,IAA6FnB,CAAC,GAAC1e,CAAC,CAACb,GAAF,CAAM,EAAEsf,CAAR,CAA/F,EAA0G,CAACmB,CAAC,GAACA,CAAC,CAAC9hB,OAAF,CAAU,MAAV,EAAiB,UAASlE,CAAT,EAAW;AAAC,mBAAO,IAAIQ,KAAJ,CAAUR,CAAC,CAACuB,MAAF,GAAS,CAAnB,EAAsByE,IAAtB,CAA2B,GAA3B,CAAP;AAAuC,WAApE,EAAsE9B,OAAtE,CAA8E,IAA9E,EAAmF,GAAnF,EAAwFA,OAAxF,CAAgG,IAAhG,EAAqG,GAArG,CAAH,EAA8G3C,MAA9G,GAAqH,CAArH,KAAyH0d,CAAC,GAAC,CAAC,CAA5H,CAA1G,EAAyOzY,CAAC,IAAEkf,CAAC,GAACvf,CAAC,CAAC6f,CAAD,CAAH,GAAOL,CAAnP;AAAqP;AAAC;;AAAA,WAAIhf,CAAC,GAACH,CAAC,IAAE,OAAJ,GAAYI,CAAC,KAAGqY,CAAC,KAAGzY,CAAC,IAAE,QAAN,CAAD,EAAiBA,CAAC,IAAE,QAAvB,CAAlB,EAAmDE,CAAC,CAACnF,MAAF,GAAS,CAA5D;AAA+DiF,QAAAA,CAAC,IAAErD,CAAC,CAACuD,CAAC,CAACqI,GAAF,EAAD,CAAJ;AAA/D;;AAA6E,aAAOgW,CAAC,KAAGve,CAAC,GAAC3D,CAAC,GAAC2D,CAAP,CAAD,EAAWA,CAAlB;AAAoB,KAA54D;AAA64D,GAAnkF,EAA30hC,EAAi5mC,CAAC1F,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUolB,mBAAV,GAA8B,UAASlmB,CAAT,EAAWC,CAAX,EAAa;AAAC,QAAIC,CAAC,GAAC,EAAN;;AAAS,aAAS2C,CAAT,CAAW5C,CAAX,EAAa4C,CAAb,EAAe;AAAC5C,MAAAA,CAAC,YAAYa,CAAC,CAACyhB,IAAf,KAAsB1f,CAAC,GAAC5C,CAAC,CAACuiB,UAAF,CAAazd,UAAf,EAA0B9E,CAAC,GAACA,CAAC,CAAC6E,IAApD,GAA0D5E,CAAC,CAACiC,IAAF,CAAO;AAACgkB,QAAAA,MAAM,EAAClmB,CAAR;AAAU8E,QAAAA,UAAU,EAAClC;AAArB,OAAP,CAA1D,EAA0F7C,CAAC,GAAC,SAAOC,CAAC,CAACA,CAAC,CAACsB,MAAF,GAAS,CAAV,CAApG;AAAiH;;AAAA,aAAS0B,CAAT,CAAWhD,CAAX,EAAaC,CAAb,EAAe;AAACF,MAAAA,CAAC,IAAE6C,CAAC,CAAC/B,CAAC,CAACuX,iBAAF,CAAoBC,uBAArB,EAA6CrY,CAAC,CAACuiB,UAAF,CAAazd,UAA1D,CAAJ;;AAA0E,WAAI,IAAI9B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAChD,CAAC,CAACojB,UAAF,CAAa9hB,MAA3B,EAAkC0B,CAAC,EAAnC;AAAsCJ,QAAAA,CAAC,CAAC5C,CAAC,CAACojB,UAAF,CAAapgB,CAAb,CAAD,CAAD;AAAtC;;AAAyD/C,MAAAA,CAAC,IAAE2C,CAAC,CAAC,IAAD,CAAJ;AAAW;;AAAA,SAAI,IAAIM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAClD,CAAC,CAACsB,MAAhB,EAAuB4B,CAAC,EAAxB;AAA2BlD,MAAAA,CAAC,CAACkD,CAAD,CAAD,YAAerC,CAAC,CAACsiB,IAAjB,GAAsBngB,CAAC,CAAChD,CAAC,CAACkD,CAAD,CAAF,EAAMA,CAAC,GAAClD,CAAC,CAACsB,MAAF,GAAS,CAAjB,CAAvB,GAA2CsB,CAAC,CAAC5C,CAAC,CAACkD,CAAD,CAAF,CAA5C;AAA3B;;AAA8E,WAAOjD,CAAP;AAAS,GAA5znC,EAA6znC,CAACY,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUslB,QAAV,GAAmB,YAAU;AAAC,QAAIpmB,CAAC,GAACc,CAAC,CAACwE,aAAR;AAAA,QAAsBrF,CAAC,GAACa,CAAC,CAACyI,eAA1B;AAAA,QAA0CrJ,CAAC,GAACY,CAAC,CAAC0X,aAA9C;AAAA,QAA4D3V,CAAC,GAAC/B,CAAC,CAACwiB,SAAhE;;AAA0E,aAASrgB,CAAT,CAAWjD,CAAX,EAAa;AAAC,UAAG,EAAE,gBAAgBiD,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAMjD,CAAN,CAAP;AAAgB,UAAIc,CAAJ,EAAM+B,CAAN;AAAQ,kBAAU,OAAO7C,CAAjB,IAAoB,KAAK,CAAL,KAASyZ,MAAM,CAACjQ,QAAhB,IAA0B,YAAU,OAAO1I,CAA3C,IAA8CyD,OAAO,CAACD,GAAR,CAAY,WAAZ,GAAyBxD,CAAC,GAAC2I,OAAO,CAAC,cAAD,CAAlC,EAAmDA,OAAO,CAAC,mBAAD,CAAxG,IAA+H3I,CAAC,GAAC2Y,MAAM,CAACjQ,QAAxI,EAAiJ3G,CAAC,GAAC/B,CAAC,CAAC6K,QAAF,GAAa0a,UAAb,CAAwBrmB,CAAxB,CAAvK,IAAmM6C,CAAC,GAAC7C,CAArM,EAAuM,KAAKsa,cAAL,GAAoB,IAAIpa,CAAJ,EAA3N,EAAiO,KAAKomB,gBAAL,GAAsB,IAAIrmB,CAAJ,CAAM4C,CAAN,CAAvP,EAAgQ,KAAK+G,MAAL,GAAY,CAAC,CAA7Q,EAA+Q,KAAKE,OAAL,GAAa,CAAC,CAA7R;AAA+R;;AAAA,WAAO7G,CAAC,CAAClC,SAAF,CAAYmL,WAAZ,GAAwB,UAASlM,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,IAAN;AAAW,UAAGA,CAAC,CAAC2J,MAAL,EAAY,OAAO5J,CAAC,CAACC,CAAC,CAACqmB,gBAAF,CAAmBpa,WAAnB,EAAD,CAAR;AAA2CjM,MAAAA,CAAC,CAACqmB,gBAAF,CAAmBtkB,EAAnB,CAAsB,OAAtB,EAA8B,YAAU;AAAC/B,QAAAA,CAAC,CAAC2J,MAAF,GAAS,CAAC,CAAV,EAAY5J,CAAC,CAACC,CAAC,CAACqmB,gBAAF,CAAmBpa,WAAnB,EAAD,CAAb;AAAgD,OAAzF;AAA2F,KAAjM,EAAkMjJ,CAAC,CAAClC,SAAF,CAAY0f,OAAZ,GAAoB,UAASzgB,CAAT,EAAW;AAAC,UAAG,KAAK8J,OAAR,EAAgB,MAAM,IAAInH,KAAJ,CAAU,2DAAV,CAAN;AAA6E,WAAKuJ,WAAL,CAAiB,UAASjM,CAAT,EAAW;AAAC,YAAIC,CAAC,GAACD,CAAC,CAACwC,KAAF,CAAQ,EAAR,CAAN;;AAAkB,aAAI,IAAII,CAAR,IAAa/B,CAAC,CAACuX,iBAAf;AAAiCnY,UAAAA,CAAC,GAACA,CAAC,CAACgE,OAAF,CAAU,IAAI2a,MAAJ,CAAW/d,CAAC,CAACuX,iBAAF,CAAoBxV,CAApB,CAAX,EAAkC,GAAlC,CAAV,EAAiD,EAAjD,CAAF;AAAjC;;AAAwF7C,QAAAA,CAAC,CAACE,CAAD,CAAD;AAAK,OAA5I;AAA8I,KAA7c,EAA8c+C,CAAC,CAAClC,SAAF,CAAYwlB,OAAZ,GAAoB,UAAStmB,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAG,KAAK4J,OAAR,EAAgB,MAAM,IAAInH,KAAJ,CAAU,2DAAV,CAAN;AAA6E,UAAI7B,CAAC,GAACd,CAAC,GAAG2F,MAAJ,CAAW1F,CAAX,CAAN;AAAoB,WAAKumB,sBAAL,CAA4B1lB,CAA5B,EAA8BZ,CAA9B;AAAiC,KAAloB,EAAmoB+C,CAAC,CAAClC,SAAF,CAAY0lB,iBAAZ,GAA8B,UAASzmB,CAAT,EAAW;AAAC,UAAG,YAAU,OAAO8C,QAAjB,IAA2B,YAAU,OAAOhC,CAAC,CAACgC,QAAjD,EAA0D9C,CAAC,GAA3D,KAAkE;AAAO,YAAAC,EAAC,GAACwJ,OAAO,CAAC,OAAD,CAAT;AAAA,YAA0BvJ,EAA1B,GAA6BD,EAA7B,CAAoBymB,KAApB;AAAA,kBAA0C,IAAIxmB,EAAJ,CAAM,4BAAN,CAA1C;AAAA,YAAuC2C,EAAvC,OAAgC4W,MAAhC;;AAA8E,YAAG3Y,CAAC,CAACgC,QAAL,EAAc,OAAOD,EAAC,CAAC8jB,KAAF,IAAU3mB,CAAC,EAAlB;AAAqBc,QAAAA,CAAC,CAACgC,QAAF,GAAWD,EAAC,CAACC,QAAb,EAAsB9C,CAAC,EAAvB;AAA0B;AAAC,KAAl4B,EAAm4BiD,CAAC,CAAClC,SAAF,CAAY6lB,OAAZ,GAAoB,UAAS5mB,CAAT,EAAW;AAAC,UAAIC,CAAC,GAAC,IAAN;AAAW,UAAG,KAAK6J,OAAR,EAAgB,MAAM,IAAInH,KAAJ,CAAU,2DAAV,CAAN;AAA6E1C,MAAAA,CAAC,CAACwmB,iBAAF,CAAoB,YAAU;AAACxmB,QAAAA,CAAC,CAACiM,WAAF,CAAc,UAAShM,CAAT,EAAW;AAACF,UAAAA,CAAC,CAACc,CAAC,CAAC8jB,aAAF,CAAgB1kB,CAAhB,EAAkBD,CAAC,CAACqa,cAApB,CAAD,CAAD;AAAuC,SAAjE;AAAmE,OAAlG;AAAoG,KAA/mC,EAAgnCrX,CAAC,CAAClC,SAAF,CAAY8lB,OAAZ,GAAoB,UAAS5mB,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAI+C,CAAC,GAAC,IAAN;AAAW,UAAG,KAAK6G,OAAR,EAAgB,MAAM,IAAInH,KAAJ,CAAU,2DAAV,CAAN;AAA6EM,MAAAA,CAAC,CAACwjB,iBAAF,CAAoB,YAAU;AAAC,aAAI,IAAItjB,CAAC,GAACN,CAAC,CAAC5C,CAAD,EAAGgD,CAAC,CAACqX,cAAL,CAAP,EAA4BnU,CAAC,GAACrF,CAAC,CAAColB,mBAAF,CAAsB,CAAC,CAAvB,EAAyB/iB,CAAzB,CAA9B,EAA0DiD,CAAC,GAAC,IAAIpG,CAAJ,EAA5D,EAAkEqG,CAAC,GAAC,CAAxE,EAA0EA,CAAC,GAACF,CAAC,CAAC5E,MAA9E,EAAqF8E,CAAC,EAAtF;AAAyFD,UAAAA,CAAC,CAACT,MAAF,CAASQ,CAAC,CAACE,CAAD,CAAD,CAAK8f,MAAd,EAAqBhgB,CAAC,CAACE,CAAD,CAAD,CAAKtB,UAA1B;AAAzF;;AAA+H9B,QAAAA,CAAC,CAACujB,sBAAF,CAAyBpgB,CAAzB,EAA2BlG,CAA3B;AAA8B,OAA5L;AAA8L,KAAx7C,EAAy7C+C,CAAC,CAAClC,SAAF,CAAYylB,sBAAZ,GAAmC,UAASxmB,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,IAAN;AAAWA,MAAAA,CAAC,CAACgM,WAAF,CAAc,UAASpL,CAAT,EAAW;AAAC,YAAI+B,CAAC,GAAC7C,CAAC,CAAC8F,KAAF,GAAUF,MAAV,CAAiB9E,CAAC,CAAC2E,YAAnB,CAAN;AAAuCvF,QAAAA,CAAC,CAAComB,gBAAF,CAAmBjb,aAAnB,CAAiCxI,CAAjC,EAAmC,UAAS/B,CAAT,EAAW+B,CAAX,EAAa;AAACA,UAAAA,CAAC,GAAC,KAAK,CAAL,KAAS5C,CAAT,IAAYA,CAAC,CAAC,IAAD,EAAM4C,CAAN,CAAd,GAAuB3C,CAAC,CAACsmB,sBAAF,CAAyBxmB,CAAzB,EAA2BC,CAA3B,CAAxB;AAAsD,SAAvG;AAAyG,OAA1K;AAA4K,KAAjqD,EAAkqDgD,CAAC,CAAClC,SAAF,CAAY8J,OAAZ,GAAoB,YAAU;AAAC,WAAKf,OAAL,GAAa,CAAC,CAAd,EAAgB,KAAKwc,gBAAL,CAAsBzb,OAAtB,EAAhB;AAAgD,KAAjvD,EAAkvD5H,CAAzvD;AAA2vD,GAA7qE,EAAh1nC,EAAggsC,CAACnC,CAAC,GAACA,CAAC,IAAE,EAAN,EAAUP,OAAV,GAAkB,UAASP,CAAT,EAAW;AAAC,QAAG,CAACc,CAAC,CAAC4f,yBAAN,EAAgC,MAAM,IAAI/d,KAAJ,CAAU,2KAAV,CAAN;AAA6L,QAAI1C,CAAC,GAACa,CAAC,CAAC4f,yBAAR;AAAA,QAAkCxgB,CAAC,GAACY,CAAC,CAACkZ,kBAAtC;AAAA,QAAyDnX,CAAC,GAAC/B,CAAC,CAACoM,eAA7D;AAAA,QAA6EjK,CAAC,GAACnC,CAAC,CAACsR,UAAjF;AAAA,QAA4FjP,CAAC,GAACrC,CAAC,CAACwW,aAAhG;AAAA,QAA8GnR,CAAC,GAACrF,CAAC,CAACyI,eAAlH;AAAA,QAAkInD,CAAC,GAACtF,CAAC,CAACqP,YAAtI;AAAA,QAAmJ9J,CAAC,GAACvF,CAAC,CAAC0X,aAAvJ;AAAA,QAAqKlS,CAAC,GAACxF,CAAC,CAACyW,kBAAzK;AAAA,QAA4LhR,CAAC,GAACzF,CAAC,CAACe,KAAhM;AAAA,QAAsM2E,CAAC,IAAE1F,CAAC,CAAC2hB,cAAF,CAAiBrK,SAAjB,EAA2BpY,CAAC,CAAC4a,UAA/B,CAAvM;AAAA,QAAkPnU,CAAC,GAACzG,CAAC,CAACsS,GAAtP;AAA0PtS,IAAAA,CAAC,CAACsV,MAAF;;AAAS,aAAS5O,CAAT,CAAW5F,CAAX,EAAa+B,CAAb,EAAeyD,CAAf,EAAiB;AAAC,UAAG,EAAE,gBAAgBI,CAAlB,CAAH,EAAwB,OAAO,IAAIA,CAAJ,CAAM5F,CAAN,EAAQ+B,CAAR,EAAUyD,CAAV,CAAP;AAAoB,UAAG,CAACE,CAAD,IAAI,CAACC,CAAL,IAAQ,CAACzG,CAAC,CAACsV,MAAd,EAAqB,MAAM,IAAI3S,KAAJ,CAAU,4GAAV,CAAN;;AAA8H,UAAG,KAAKmH,OAAL,GAAa,CAAC,CAAd,EAAgBtD,CAAC,IAAE3D,CAAC,YAAY2D,CAAnC,EAAqC;AAAC,aAAKsgB,WAAL,GAAiB,KAAKC,OAAL,GAAalkB,CAA9B;AAAgC,YAAI+D,CAAC,GAAC,KAAKkgB,WAAL,CAAiB3S,QAAjB,EAAN;AAAkC,YAAG,OAAKvN,CAAR,EAAU,MAAM,IAAIjE,KAAJ,CAAU,iFAAV,CAAN;AAAmG,OAArN,MAA0N,IAAG8D,CAAC,IAAE5D,CAAH,IAAMA,CAAC,CAACmkB,OAAF,YAAqBvgB,CAAC,CAACwgB,WAAhC,EAA4C;AAAC,YAAG,KAAKC,IAAL,GAAU,KAAKH,OAAL,GAAalkB,CAAvB,EAAyB,QAAM+D,CAAC,GAAC,KAAKsgB,IAAL,CAAU/S,QAAV,EAAR,CAA5B,EAA0D,MAAM,IAAIxR,KAAJ,CAAU,2EAAV,CAAN;AAA6F,OAApM,MAAyM,IAAG3C,CAAC,CAACsV,MAAF,IAAUzS,CAAV,IAAaA,CAAC,YAAY7C,CAAC,CAACsV,MAAF,CAASnU,WAAtC,EAAkD;AAAC,YAAGnB,CAAC,CAACsV,MAAF,EAAS,KAAK6R,OAAL,GAAa,KAAKJ,OAAL,GAAalkB,CAAnC,EAAqC,QAAM+D,CAAC,GAAC,KAAKugB,OAAL,CAAahT,QAAb,EAAR,CAAxC,EAAyE,MAAM,IAAIxR,KAAJ,CAAU,6EAAV,CAAN;AAA+F,OAA3N,MAAgO,KAAKmkB,WAAL,GAAiB,KAAKC,OAAL,GAAa,IAAIvgB,CAAJ,CAAM3D,CAAN,CAA9B;;AAAuC,UAAIoc,CAAJ;AAAMA,MAAAA,CAAC,GAAC,KAAK6H,WAAL,GAAiB,KAAKA,WAAL,CAAiBjF,iBAAjB,EAAjB,GAAsD,KAAKqF,IAAL,GAAU,KAAKA,IAAL,CAAUE,SAApB,GAA8B,KAAKD,OAAL,CAAaE,UAAb,EAAtF,EAAgH,KAAKC,eAAL,GAAqB/gB,CAAC,CAAC3D,GAAF,CAAM,KAAN,EAAY,IAAZ,EAAiB;AAAC4K,QAAAA,KAAK,EAAC;AAAP,OAAjB,CAArI,EAAyKyR,CAAC,CAACsI,UAAF,CAAaC,YAAb,CAA0B,KAAKF,eAA/B,EAA+CrI,CAA/C,CAAzK,EAA2N,KAAKqI,eAAL,CAAqBpkB,WAArB,CAAiC+b,CAAjC,CAA3N,EAA+P,KAAK8H,OAAL,CAAaU,OAAb,GAAqB,IAApR,EAAyR,KAAKpN,QAAL,GAAc/T,CAAC,IAAE,EAA1S,EAA6S,KAAKohB,SAAL,CAAe,mBAAf,EAAmC,CAAC,CAApC,MAAyClhB,CAAC,CAACmhB,MAAF,CAASC,QAAT,IAAmB,KAAKC,iBAAL,EAAnB,EAA4C,KAAKf,WAAL,CAAiBgB,SAAjB,CAA2B,QAA3B,EAAoC,UAApC,CAA5C,EAA4F,KAAKR,eAAL,CAAqBvZ,SAArB,IAAgC,mBAArK,CAA7S,EAAue,KAAKZ,gBAAL,GAAsB,KAAKua,SAAL,CAAe,kBAAf,EAAkC,CAAC,CAAnC,CAA7f,EAAmiB,KAAKA,SAAL,CAAe,iBAAf,EAAiC,CAAC,CAAlC,MAAuC,KAAKK,WAAL,IAAmB,KAAKT,eAAL,CAAqBvZ,SAArB,IAAgC,wCAA1F,CAAniB,EAAuqB,KAAKia,iBAAL,EAAvqB,EAAgsB,KAAKlB,WAAL,IAAkB,KAAKA,WAAL,CAAiBpI,OAAjB,EAAltB;;AAA6uB,UAAImG,CAAC,GAAC,KAAK6C,SAAL,CAAe,QAAf,EAAwB5mB,CAAC,CAACqB,IAAF,GAASP,GAAjC,CAAN;AAAA,UAA4CkjB,CAAC,GAAC,KAAK4C,SAAL,CAAe,WAAf,EAA2B,UAAS1nB,CAAT,EAAW;AAAC,aAAI,IAAIC,CAAC,GAAC,CAAN,EAAQC,CAAC,GAAC,CAAd,EAAgBA,CAAC,GAACF,CAAC,CAACuB,MAApB,EAA2BrB,CAAC,EAA5B;AAA+BD,UAAAA,CAAC,GAAC,MAAIA,CAAC,GAACD,CAAC,CAACioB,UAAF,CAAa/nB,CAAb,CAAN,IAAuB,GAAzB;AAA/B;;AAA4D,eAAO,UAASF,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,cAAG,MAAID,CAAP,EAAS,OAAO0G,CAAC,CAACzG,CAAD,EAAGA,CAAH,EAAKA,CAAL,CAAR;;AAAgB,cAAIY,CAAC,GAACZ,CAAC,GAAC,EAAF,GAAKA,CAAC,IAAE,IAAED,CAAJ,CAAN,GAAaC,CAAC,GAACD,CAAF,GAAIA,CAAC,GAACC,CAAzB;AAAA,cAA2B2C,CAAC,GAAC,IAAE3C,CAAF,GAAIY,CAAjC;AAAA,cAAmCmC,CAAC,GAAC,SAAFA,CAAE,CAASjD,CAAT,EAAW;AAAC,mBAAOA,CAAC,GAAC,CAAF,KAAMA,CAAC,IAAE,CAAT,GAAYA,CAAC,GAAC,CAAF,KAAMA,CAAC,IAAE,CAAT,CAAZ,EAAwB,IAAEA,CAAF,GAAI,CAAJ,GAAM6C,CAAC,GAAC,KAAG/B,CAAC,GAAC+B,CAAL,IAAQ7C,CAAhB,GAAkB,IAAEA,CAAF,GAAI,CAAJ,GAAMc,CAAN,GAAQ,IAAEd,CAAF,GAAI,CAAJ,GAAM6C,CAAC,GAAC,KAAG/B,CAAC,GAAC+B,CAAL,KAAS,IAAE,CAAF,GAAI7C,CAAb,CAAR,GAAwB6C,CAAjF;AAAmF,WAApI;;AAAqI,iBAAO8D,CAAC,CAAC1D,CAAC,CAACjD,CAAC,GAAC,IAAE,CAAL,CAAF,EAAUiD,CAAC,CAACjD,CAAD,CAAX,EAAeiD,CAAC,CAACjD,CAAC,GAAC,IAAE,CAAL,CAAhB,CAAR;AAAiC,SAA/M,CAAgNC,CAAC,GAAC,GAAlN,EAAsN,CAAtN,EAAwN,GAAxN,CAAP;AAAoO,OAA5S,CAA6S4kB,CAA7S,CAA3B,CAA9C;;AAA0X,WAAKvK,cAAL,GAAoB,IAAIjU,CAAJ,EAApB,EAA0B,KAAKigB,gBAAL,GAAsB,IAAIngB,CAAJ,CAAMrF,CAAN,EAAQ+jB,CAAR,EAAUC,CAAV,CAAhD,EAA6D,KAAKgC,WAAL,IAAkB,KAAKoB,mBAAL,GAAyB,IAAIhoB,CAAJ,CAAM,KAAK4mB,WAAX,EAAuB,KAAKxM,cAA5B,EAA2C;AAAC0D,QAAAA,SAAS,EAAC;AAAX,OAA3C,CAAzB,EAA4F,KAAKmK,cAAL,GAAoB,IAAIloB,CAAJ,CAAM,KAAKioB,mBAAX,CAAlI,IAAmK,KAAKhB,IAAL,GAAU,KAAKiB,cAAL,GAAoB,IAAIllB,CAAJ,CAAM,KAAKikB,IAAX,CAA9B,GAA+C,KAAKiB,cAAL,GAAoB,IAAIhlB,CAAJ,CAAM,KAAKgkB,OAAX,CAAnS,EAAuT,KAAKiB,OAAL,GAAa,IAAIhiB,CAAJ,CAAM,KAAKkgB,gBAAX,EAA4B,KAAK6B,cAAjC,CAApU;AAAqX,UAAIpD,CAAC,GAAC,IAAN;AAAW,WAAKuB,gBAAL,CAAsBtkB,EAAtB,CAAyB,QAAzB,EAAkC,YAAU;AAAC+iB,QAAAA,CAAC,CAACviB,OAAF,CAAUC,KAAV,CAAgBsiB,CAAhB,EAAkB,CAAC,QAAD,EAAWzR,MAAX,CAAkB,GAAGpS,KAAH,CAASD,IAAT,CAAcyB,SAAd,CAAlB,CAAlB;AAA+D,OAA5G,GAA8G,KAAKokB,WAAL,IAAkB,KAAKoB,mBAAL,CAAyBlmB,EAAzB,CAA4B,SAA5B,EAAsC,YAAU;AAAC+iB,QAAAA,CAAC,CAACviB,OAAF,CAAUC,KAAV,CAAgBsiB,CAAhB,EAAkB,CAAC,SAAD,EAAYzR,MAAZ,CAAmB,GAAGpS,KAAH,CAASD,IAAT,CAAcyB,SAAd,CAAnB,CAAlB;AAAgE,OAAjH,CAAhI,EAAmP,KAAK4jB,gBAAL,CAAsBtkB,EAAtB,CAAyB,OAAzB,EAAiC,YAAU;AAAC+iB,QAAAA,CAAC,CAACnb,MAAF,GAAS,CAAC,CAAV,EAAY,KAAKsd,IAAL,IAAW,KAAKiB,cAAL,CAAoBxV,iBAApB,EAAvB,EAA+D,KAAKwU,OAAL,IAAc,KAAKgB,cAAL,CAAoBxV,iBAApB,EAA7E;AAAqH,YAAI3S,CAAC,GAAC+kB,CAAC,CAAC2C,SAAF,CAAY,aAAZ,EAA0B,IAA1B,CAAN;AAAsC1nB,QAAAA,CAAC,IAAE+kB,CAAC,CAAC3Z,cAAF,EAAH,IAAuB2Z,CAAC,CAACwB,OAAF,CAAUvmB,CAAV,CAAvB,EAAoC+kB,CAAC,CAACviB,OAAF,CAAU,OAAV,CAApC;AAAuD,OAA9P,CAAnP,EAAmf,KAAK4lB,OAAL,CAAapmB,EAAb,CAAgB,QAAhB,EAAyB,UAAShC,CAAT,EAAW;AAAC+kB,QAAAA,CAAC,CAACviB,OAAF,CAAU,QAAV,EAAmBxC,CAAnB;AAAsB,OAA3D,CAAnf,EAAgjB,iCAA+BqoB,SAAS,CAACC,OAAzC,IAAkDD,SAAS,CAACE,SAAV,CAAoB/R,KAApB,CAA0B,UAA1B,CAAlD,KAA0FiD,MAAM,CAAC+O,MAAP,GAAc,YAAU;AAAC,YAAIxoB,CAAC,GAAC8C,QAAQ,CAACgS,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAN;AAAA,YAA+C7U,CAAC,GAAC6C,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAjD;AAAiF9C,QAAAA,CAAC,CAAC2E,IAAF,GAAO,UAAP,EAAkB3E,CAAC,CAAC6d,UAAF,CAAaC,OAAb,GAAqB,0CAAvC,EAAkF/d,CAAC,CAACkD,WAAF,CAAcjD,CAAd,CAAlF,EAAmG0K,UAAU,CAAC,YAAU;AAAC3K,UAAAA,CAAC,CAACyoB,WAAF,CAAcxoB,CAAd;AAAiB,SAA7B,EAA8B,CAA9B,CAA7G;AAA8I,OAAlV,CAAhjB;AAAo4B;;AAAA,aAAS0G,CAAT,CAAW3G,CAAX,EAAaC,CAAb,EAAeC,CAAf,EAAiB;AAAC,eAASY,CAAT,CAAWd,CAAX,EAAa;AAAC,YAAIC,CAAC,GAAC8I,IAAI,CAAC2f,KAAL,CAAW,MAAI1oB,CAAf,EAAkBgB,QAAlB,CAA2B,EAA3B,CAAN;AAAqC,eAAO,MAAIf,CAAC,CAACsB,MAAN,GAAa,MAAItB,CAAjB,GAAmBA,CAA1B;AAA4B;;AAAA,aAAM,MAAIa,CAAC,CAACd,CAAD,CAAL,GAASc,CAAC,CAACb,CAAD,CAAV,GAAca,CAAC,CAACZ,CAAD,CAArB;AAAyB;;AAAA,WAAOqG,CAAC,CAACzE,gBAAF,CAAmB4E,CAAnB,GAAsBA,CAAC,CAACiiB,cAAF,GAAiBjiB,CAAvC,EAAyCA,CAAC,CAACkiB,OAAF,GAAUliB,CAAnD,EAAqDA,CAAC,CAACmiB,UAAF,GAAaniB,CAAlE,EAAoEA,CAAC,CAAC3F,SAAF,CAAY8J,OAAZ,GAAoB,YAAU;AAAC,WAAKf,OAAL,GAAa,CAAC,CAAd,EAAgB,KAAKgd,WAAL,GAAiBgC,aAAa,GAAC,KAAKhC,WAAL,CAAiBjF,iBAAjB,EAA/B,GAAoE,KAAKqF,IAAL,GAAU4B,aAAa,GAAC,KAAK5B,IAAL,CAAUE,SAAlC,GAA4C0B,aAAa,GAAC,KAAK3B,OAAL,CAAaE,UAAb,EAA9I,EAAwK,KAAKC,eAAL,CAAqBmB,WAArB,CAAiCK,aAAjC,CAAxK,EAAwN,KAAKxB,eAAL,CAAqBC,UAArB,CAAgCC,YAAhC,CAA6CsB,aAA7C,EAA2D,KAAKxB,eAAhE,CAAxN,EAAyS,KAAKP,OAAL,CAAaU,OAAb,GAAqB,IAA9T,EAAmU,KAAKX,WAAL,IAAkB,eAAa,KAAKA,WAAL,CAAiBY,SAAjB,CAA2B,QAA3B,CAA/B,IAAqE,KAAKZ,WAAL,CAAiBgB,SAAjB,CAA2B,QAA3B,EAAoC,SAApC,CAAxY,EAAub,KAAKxB,gBAAL,CAAsBzb,OAAtB,EAAvb,EAAud,KAAKsd,cAAL,CAAoB7T,MAApB,EAAvd,EAAof,KAAK4T,mBAAL,IAA0B,KAAKA,mBAAL,CAAyB5T,MAAzB,EAA9gB;AAAgjB,KAAnpB,EAAopB5N,CAAC,CAAC3F,SAAF,CAAYmJ,SAAZ,GAAsB,UAASlK,CAAT,EAAW;AAAC,WAAKsmB,gBAAL,CAAsBpc,SAAtB,CAAgClK,CAAhC;AAAmC,KAAztB,EAA0tB0G,CAAC,CAAC3F,SAAF,CAAYgoB,YAAZ,GAAyB,UAAS/oB,CAAT,EAAW;AAAC,WAAKsmB,gBAAL,CAAsBnc,QAAtB,CAA+BnK,CAA/B;AAAkC,KAAjyB,EAAkyB0G,CAAC,CAAC3F,SAAF,CAAY0f,OAAZ,GAAoB,YAAU;AAAC,aAAO,KAAKuI,YAAL,CAAkB,SAAlB,GAA6B,KAAKlC,WAAL,GAAiB,KAAKoB,mBAAL,CAAyBzH,OAAzB,EAAjB,GAAoD,KAAKyG,IAAL,GAAU,KAAKA,IAAL,CAAU1U,UAAV,GAAuBtG,WAAvB,GAAqCiI,QAArC,EAAV,GAA0D,KAAKgT,OAAL,CAAa9R,QAAb,GAAwBlB,QAAxB,EAAlJ;AAAqL,KAAt/B,EAAu/BzN,CAAC,CAAC3F,SAAF,CAAYwlB,OAAZ,GAAoB,UAASvmB,CAAT,EAAW;AAAC,aAAO,KAAKgpB,YAAL,CAAkB,SAAlB,GAA6B,KAAK7B,OAAL,GAAa,KAAKA,OAAL,CAAa9R,QAAb,GAAwB4T,QAAxB,CAAiCjpB,CAAjC,CAAb,GAAiD,KAAKknB,IAAL,GAAU,KAAKA,IAAL,CAAU1U,UAAV,GAAuBtG,WAAvB,GAAqC+c,QAArC,CAA8CjpB,CAA9C,CAAV,IAA4D,KAAK8mB,WAAL,CAAiBjF,iBAAjB,GAAqC7T,KAArC,CAA2CC,OAA3C,GAAmD,MAAnD,EAA0D,KAAK6Y,WAAL,CAAiBmC,QAAjB,CAA0B,EAA1B,CAA1D,EAAwF,KAAK3M,UAAL,CAAgB,CAAhB,EAAkBtc,CAAlB,CAAxF,EAA6G,KAAK8mB,WAAL,CAAiBjF,iBAAjB,GAAqC7T,KAArC,CAA2CC,OAA3C,GAAmD,EAAhK,EAAmK,KAAK6Y,WAAL,CAAiBpI,OAAjB,EAAnK,EAA8L,KAAK,KAAKyJ,cAAL,CAAoBjW,SAApB,CAA8B;AAAC7I,QAAAA,QAAQ,EAAC,CAAV;AAAYC,QAAAA,YAAY,EAAC;AAAzB,OAA9B,CAA/P,CAArF;AAAgZ,KAAv6C,EAAw6C5C,CAAC,CAAC3F,SAAF,CAAYmoB,kBAAZ,GAA+B,UAASlpB,CAAT,EAAW;AAAC,WAAKsc,UAAL,CAAgB,KAAKwK,WAAL,CAAiBlT,YAAjB,CAA8B,KAAKkT,WAAL,CAAiB3U,SAAjB,EAA9B,CAAhB,EAA4EnS,CAA5E;AAA+E,KAAliD,EAAmiD0G,CAAC,CAAC3F,SAAF,CAAYub,UAAZ,GAAuB,UAAStc,CAAT,EAAWC,CAAX,EAAa;AAACsG,MAAAA,CAAC,CAAClC,MAAF,CAAS,CAAC,KAAK6iB,IAAf,EAAoB,4BAApB,GAAkD3gB,CAAC,CAAClC,MAAF,CAAS,CAAC,KAAK8iB,OAAf,EAAuB,+BAAvB,CAAlD,EAA0G,KAAK6B,YAAL,CAAkB,YAAlB,CAA1G,EAA0I,qBAAmBpoB,MAAM,CAACG,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BhB,CAA/B,CAAnB,KAAuDA,CAAC,GAAC,CAACA,CAAD,CAAzD,CAA1I;AAAwM,UAAIC,CAAC,GAAC,IAAN;AAAWA,MAAAA,CAAC,CAAC4mB,WAAF,CAAcla,SAAd,CAAwB,YAAU;AAAC,aAAI,IAAI/J,CAAC,GAAC,MAAI7C,CAAV,EAAYiD,CAAC,GAACnC,CAAC,CAAColB,mBAAF,CAAsBrjB,CAAtB,EAAwB5C,CAAxB,CAAd,EAAyCkD,CAAC,GAAC,CAA/C,EAAiDA,CAAC,GAACF,CAAC,CAAC1B,MAArD,EAA4D4B,CAAC,EAA7D,EAAgE;AAAC,cAAIgD,CAAC,GAAClD,CAAC,CAACE,CAAD,CAAD,CAAKgjB,MAAX;AAAA,cAAkB/f,CAAC,GAACnD,CAAC,CAACE,CAAD,CAAD,CAAK4B,UAAzB;AAAoC7E,UAAAA,CAAC,CAACgoB,mBAAF,CAAsB5L,UAAtB,CAAiCtc,CAAjC,EAAmCmG,CAAnC,EAAqCC,CAArC,GAAwCpG,CAAC,IAAEmG,CAAC,CAAC5E,MAA7C;AAAoD;AAAC,OAA7L;AAA+L,KAA19D,EAA29DmF,CAAC,CAAC3F,SAAF,CAAYooB,mBAAZ,GAAgC,UAASnpB,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAI,IAAIC,CAAC,GAAC,KAAKgoB,mBAAL,CAAyBhV,QAAzB,CAAkClT,CAAlC,EAAoCC,CAApC,CAAN,EAA6C4C,CAAC,GAAC,KAAKqlB,mBAAL,CAAyBnL,iBAAzB,CAA2C/c,CAA3C,EAA6CC,CAA7C,CAA/C,EAA+FgD,CAAC,GAAC,CAAjG,EAAmGE,CAAC,GAAC,IAAIrC,CAAC,CAACwE,aAAN,EAArG,EAAyHa,CAAC,GAAC,CAA/H,EAAiIA,CAAC,GAACtD,CAAC,CAACtB,MAArI,EAA4I4E,CAAC,EAA7I;AAAgJhD,QAAAA,CAAC,CAACwC,MAAF,CAASzF,CAAC,CAAC6Z,MAAF,CAAS9W,CAAT,EAAWJ,CAAC,CAACsD,CAAD,CAAD,CAAK5E,MAAhB,CAAT,EAAiCsB,CAAC,CAACsD,CAAD,CAAD,CAAKpB,UAAtC,GAAkD9B,CAAC,IAAEJ,CAAC,CAACsD,CAAD,CAAD,CAAK5E,MAA1D;AAAhJ;;AAAiN,aAAO4B,CAAP;AAAS,KAAnuE,EAAouEuD,CAAC,CAAC3F,SAAF,CAAY6lB,OAAZ,GAAoB,YAAU;AAAC,aAAO,KAAKwC,gBAAL,CAAsB,IAAtB,EAA2B,IAA3B,CAAP;AAAwC,KAA3yE,EAA4yE1iB,CAAC,CAAC3F,SAAF,CAAYsoB,oBAAZ,GAAiC,YAAU;AAAC,UAAIrpB,CAAC,GAAC,KAAK8mB,WAAL,CAAiB3U,SAAjB,CAA2B,OAA3B,CAAN;AAAA,UAA0ClS,CAAC,GAAC,KAAK6mB,WAAL,CAAiB3U,SAAjB,CAA2B,KAA3B,CAA5C;AAAA,UAA8EjS,CAAC,GAAC,KAAK4mB,WAAL,CAAiBlT,YAAjB,CAA8B5T,CAA9B,CAAhF;AAAA,UAAiHc,CAAC,GAAC,KAAKgmB,WAAL,CAAiBlT,YAAjB,CAA8B3T,CAA9B,CAAnH;AAAoJ,aAAO,KAAKmpB,gBAAL,CAAsBlpB,CAAtB,EAAwBY,CAAxB,CAAP;AAAkC,KAA9gF,EAA+gF4F,CAAC,CAAC3F,SAAF,CAAYqoB,gBAAZ,GAA6B,UAASppB,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAK+oB,YAAL,CAAkB,kBAAlB;AAAsC,UAAI9oB,CAAC,GAAC,QAAMF,CAAN,IAAS,QAAMC,CAAf,GAAiB,KAAKkpB,mBAAL,CAAyBnpB,CAAzB,EAA2BC,CAA3B,CAAjB,GAA+C,KAAKkpB,mBAAL,CAAyB,CAAzB,EAA2B,KAAKrC,WAAL,CAAiB3S,QAAjB,GAA4B5S,MAAvD,CAArD;AAAoH,aAAOT,CAAC,CAAC8jB,aAAF,CAAgB1kB,CAAhB,EAAkB,KAAKoa,cAAvB,CAAP;AAA8C,KAAlwF,EAAmwF5T,CAAC,CAAC3F,SAAF,CAAYuoB,UAAZ,GAAuB,UAAStpB,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAACY,CAAC,CAACwiB,SAAF,CAAYrjB,CAAZ,EAAc,KAAKqa,cAAnB,CAAN;AAAyC,WAAKgC,UAAL,CAAgBtc,CAAhB,EAAkBE,CAAlB;AAAqB,KAAt2F,EAAu2FwG,CAAC,CAAC3F,SAAF,CAAYwoB,kBAAZ,GAA+B,UAASvpB,CAAT,EAAW;AAAC,WAAKspB,UAAL,CAAgB,KAAKxC,WAAL,CAAiBlT,YAAjB,CAA8B,KAAKkT,WAAL,CAAiB3U,SAAjB,EAA9B,CAAhB,EAA4EnS,CAA5E;AAA+E,KAAj+F,EAAk+F0G,CAAC,CAAC3F,SAAF,CAAY8lB,OAAZ,GAAoB,UAAS7mB,CAAT,EAAW;AAAC,UAAIC,CAAC,GAACa,CAAC,CAACwiB,SAAF,CAAYtjB,CAAZ,EAAc,KAAKsa,cAAnB,CAAN;AAAyC,WAAKiM,OAAL,CAAatmB,CAAb;AAAgB,KAA3jG,EAA4jGyG,CAAC,CAAC3F,SAAF,CAAYqK,cAAZ,GAA2B,YAAU;AAAC,aAAO,KAAK4d,YAAL,CAAkB,gBAAlB,GAAoC,KAAK1C,gBAAL,CAAsBlb,cAAtB,EAA3C;AAAkF,KAAprG,EAAqrG1E,CAAC,CAAC3F,SAAF,CAAYihB,IAAZ,GAAiB,YAAU;AAAC,WAAKkG,mBAAL,CAAyB3M,eAAzB,CAAyCjV,CAAC,CAACkR,IAA3C,GAAiD,KAAKsP,WAAL,CAAiB9V,KAAjB,EAAjD;AAA0E,KAA3xG,EAA4xGtK,CAAC,CAAC3F,SAAF,CAAYkhB,MAAZ,GAAmB,YAAU;AAAC,WAAKiG,mBAAL,CAAyB3M,eAAzB,CAAyCjV,CAAC,CAACmR,MAA3C,GAAmD,KAAKqP,WAAL,CAAiB9V,KAAjB,EAAnD;AAA4E,KAAt4G,EAAu4GtK,CAAC,CAAC3F,SAAF,CAAYmhB,SAAZ,GAAsB,YAAU;AAAC,WAAKgG,mBAAL,CAAyB3M,eAAzB,CAAyCjV,CAAC,CAACoR,SAA3C,GAAsD,KAAKoP,WAAL,CAAiB9V,KAAjB,EAAtD;AAA+E,KAAv/G,EAAw/GtK,CAAC,CAAC3F,SAAF,CAAYohB,MAAZ,GAAmB,YAAU;AAAC,WAAK+F,mBAAL,CAAyB3M,eAAzB,CAAyCjV,CAAC,CAACqR,MAA3C,GAAmD,KAAKmP,WAAL,CAAiB9V,KAAjB,EAAnD;AAA4E,KAAlmH,EAAmmHtK,CAAC,CAAC3F,SAAF,CAAYshB,QAAZ,GAAqB,UAASriB,CAAT,EAAW;AAAC,WAAKkoB,mBAAL,CAAyB9kB,YAAzB,CAAsCkD,CAAC,CAACuR,SAAxC,EAAkD7X,CAAlD,GAAqD,KAAK8mB,WAAL,CAAiB9V,KAAjB,EAArD;AAA8E,KAAltH,EAAmtHtK,CAAC,CAAC3F,SAAF,CAAYqhB,IAAZ,GAAiB,UAASpiB,CAAT,EAAW;AAAC,WAAKkoB,mBAAL,CAAyB9kB,YAAzB,CAAsCkD,CAAC,CAACsR,IAAxC,EAA6C5X,CAA7C,GAAgD,KAAK8mB,WAAL,CAAiB9V,KAAjB,EAAhD;AAAyE,KAAzzH,EAA0zHtK,CAAC,CAAC3F,SAAF,CAAYsL,KAAZ,GAAkB,UAASrM,CAAT,EAAW;AAAC,WAAKkoB,mBAAL,CAAyB9kB,YAAzB,CAAsCkD,CAAC,CAACwR,KAAxC,EAA8C9X,CAA9C,GAAiD,KAAK8mB,WAAL,CAAiB9V,KAAjB,EAAjD;AAA0E,KAAl6H,EAAm6HtK,CAAC,CAAC3F,SAAF,CAAYyoB,SAAZ,GAAsB,YAAU;AAAC,WAAKtB,mBAAL,CAAyB3M,eAAzB,CAAyCjV,CAAC,CAACyR,gBAA3C,EAA4D,qBAA5D,GAAmF,KAAK+O,WAAL,CAAiB9V,KAAjB,EAAnF;AAA4G,KAAhjI,EAAijItK,CAAC,CAAC3F,SAAF,CAAYgiB,KAAZ,GAAkB,UAAS/iB,CAAT,EAAW;AAAC,UAAG,WAASA,CAAT,IAAY,aAAWA,CAAvB,IAA0B,YAAUA,CAAvC,EAAyC,MAAM,IAAI2C,KAAJ,CAAU,sDAAV,CAAN;AAAwE,WAAKulB,mBAAL,CAAyBjM,gBAAzB,CAA0C3V,CAAC,CAAC6R,UAA5C,EAAuDnY,CAAvD,GAA0D,KAAK8mB,WAAL,CAAiB9V,KAAjB,EAA1D;AAAmF,KAAnxI,EAAoxItK,CAAC,CAAC3F,SAAF,CAAY0oB,WAAZ,GAAwB,YAAU;AAAC,WAAKvB,mBAAL,CAAyBnM,mBAAzB,CAA6CzV,CAAC,CAAC8R,SAA/C,EAAyD,GAAzD,GAA8D,KAAK0O,WAAL,CAAiB9V,KAAjB,EAA9D;AAAuF,KAA94I,EAA+4ItK,CAAC,CAAC3F,SAAF,CAAY2oB,aAAZ,GAA0B,YAAU;AAAC,WAAKxB,mBAAL,CAAyBnM,mBAAzB,CAA6CzV,CAAC,CAAC8R,SAA/C,EAAyD,GAAzD,GAA8D,KAAK0O,WAAL,CAAiB9V,KAAjB,EAA9D;AAAuF,KAA3gJ,EAA4gJtK,CAAC,CAAC3F,SAAF,CAAY4oB,IAAZ,GAAiB,YAAU;AAAC,WAAKzB,mBAAL,CAAyBnI,UAAzB,IAAsC,KAAK+G,WAAL,CAAiB9V,KAAjB,EAAtC;AAA+D,KAAvmJ,EAAwmJtK,CAAC,CAAC3F,SAAF,CAAYkf,OAAZ,GAAoB,YAAU;AAAC,WAAKiI,mBAAL,CAAyBjI,OAAzB;AAAmC,KAA1qJ,EAA2qJvZ,CAAC,CAAC3F,SAAF,CAAYqf,UAAZ,GAAuB,YAAU;AAAC,WAAK8H,mBAAL,CAAyB9H,UAAzB;AAAsC,KAAnvJ,EAAovJ1Z,CAAC,CAAC3F,SAAF,CAAYwf,WAAZ,GAAwB,YAAU;AAAC,WAAK2H,mBAAL,CAAyB3H,WAAzB;AAAuC,KAA9zJ,EAA+zJ7Z,CAAC,CAAC3F,SAAF,CAAYyf,MAAZ,GAAmB,YAAU;AAAC,WAAK0H,mBAAL,CAAyB1H,MAAzB,IAAkC,KAAKsG,WAAL,CAAiB9V,KAAjB,EAAlC;AAA2D,KAAx5J,EAAy5JtK,CAAC,CAAC3F,SAAF,CAAYsf,QAAZ,GAAqB,YAAU;AAAC,WAAK6H,mBAAL,CAAyB7H,QAAzB,IAAoC,KAAKyG,WAAL,CAAiB9V,KAAjB,EAApC;AAA6D,KAAt/J,EAAu/JtK,CAAC,CAAC3F,SAAF,CAAYoQ,IAAZ,GAAiB,YAAU;AAAC,WAAK2V,WAAL,CAAiB3V,IAAjB;AAAwB,KAA3iK,EAA4iKzK,CAAC,CAAC3F,SAAF,CAAYsQ,IAAZ,GAAiB,YAAU;AAAC,WAAKyV,WAAL,CAAiBzV,IAAjB;AAAwB,KAAhmK,EAAimK3K,CAAC,CAAC3F,SAAF,CAAY6oB,YAAZ,GAAyB,UAAS5pB,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAKgoB,mBAAL,CAAyBtL,oBAAzB,CAA8C5c,CAA9C,EAAgDC,CAAhD,EAAkDC,CAAlD;AAAqD,KAA/rK,EAAgsKwG,CAAC,CAAC3F,SAAF,CAAY8b,cAAZ,GAA2B,UAAS7c,CAAT,EAAWC,CAAX,EAAaC,CAAb,EAAeY,CAAf,EAAiB;AAAC,WAAKonB,mBAAL,CAAyBrL,cAAzB,CAAwC7c,CAAxC,EAA0CC,CAA1C,EAA4CC,CAA5C,EAA8CY,CAA9C;AAAiD,KAA9xK,EAA+xK4F,CAAC,CAAC3F,SAAF,CAAY8oB,cAAZ,GAA2B,UAAS7pB,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAKqa,cAAL,CAAoB5B,QAApB,CAA6B1Y,CAA7B,EAA+BC,CAA/B;AAAkC,KAA12K,EAA22KyG,CAAC,CAAC3F,SAAF,CAAY2mB,SAAZ,GAAsB,UAAS1nB,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOD,CAAC,IAAI,KAAKqa,QAAV,GAAmB,KAAKA,QAAL,CAAcra,CAAd,CAAnB,GAAoCC,CAA3C;AAA6C,KAA57K,EAA67KyG,CAAC,CAAC3F,SAAF,CAAYioB,YAAZ,GAAyB,UAAShpB,CAAT,EAAW;AAAC,UAAG,CAAC,KAAK4J,MAAT,EAAgB,MAAM,IAAIjH,KAAJ,CAAU,wDAAsD3C,CAAtD,GAAwD,GAAlE,CAAN;AAA6E,UAAG,KAAK8J,OAAR,EAAgB,MAAM,IAAInH,KAAJ,CAAU,+DAA6D3C,CAA7D,GAA+D,GAAzE,CAAN;AAAoF,KAAnqL,EAAoqL0G,CAAC,CAAC3F,SAAF,CAAY+oB,gBAAZ,GAA6B,YAAU;AAAC,WAAKC,WAAL,CAAiB,KAAjB,EAAuB,kBAAvB;AAA2C,KAAvvL,EAAwvLrjB,CAAC,CAAC3F,SAAF,CAAYgpB,WAAZ,GAAwB,UAAS/pB,CAAT,EAAWC,CAAX,EAAa;AAAC,UAAIC,CAAC,GAAC,IAAN;AAAA,UAAWY,CAAC,GAACyF,CAAC,CAAC3D,GAAF,CAAM,OAAN,EAAc,IAAd,EAAmB;AAAC4K,QAAAA,KAAK,EAAC,sBAAP;AAA8BjC,QAAAA,EAAE,EAACvL,CAAjC;AAAmC4E,QAAAA,IAAI,EAAC,MAAxC;AAA+ColB,QAAAA,WAAW,EAAC/pB,CAA3D;AAA6DgqB,QAAAA,SAAS,EAAC;AAAvE,OAAnB,CAAb;AAAA,UAAqHpnB,CAAC,GAAC0D,CAAC,CAAC3D,GAAF,CAAM,GAAN,EAAU,QAAV,EAAmB;AAAC4K,QAAAA,KAAK,EAAC,aAAP;AAAqBjC,QAAAA,EAAE,EAAC;AAAxB,OAAnB,CAAvH;AAAgLhF,MAAAA,CAAC,CAACvE,EAAF,CAAKa,CAAL,EAAO,OAAP,EAAe0D,CAAC,CAACvC,YAAF,CAAe,YAAU;AAAC,YAAI/D,CAAC,GAAC6C,QAAQ,CAAConB,cAAT,CAAwB,SAAxB,CAAN;AAAyCjqB,QAAAA,CAAC,CAAC+N,KAAF,CAAQmc,UAAR,GAAmB,QAAnB;AAA4B,YAAIrpB,CAAC,GAACgC,QAAQ,CAAConB,cAAT,CAAwBlqB,CAAxB,EAA2B6N,KAAjC;AAAuC,iBAAO/M,CAAP,IAAUZ,CAAC,CAAC0pB,YAAF,CAAe5pB,CAAf,EAAiB;AAAC4Y,UAAAA,GAAG,EAAC9X;AAAL,SAAjB,CAAV,EAAoCZ,CAAC,CAAConB,eAAF,CAAkBmB,WAAlB,CAA8BxoB,CAA9B,CAApC;AAAqE,OAA3M,CAAf;AAA6N,UAAIgD,CAAC,GAACsD,CAAC,CAAC3D,GAAF,CAAM,GAAN,EAAU,QAAV,EAAmB;AAAC4K,QAAAA,KAAK,EAAC;AAAP,OAAnB,CAAN;AAAgDjH,MAAAA,CAAC,CAACvE,EAAF,CAAKiB,CAAL,EAAO,OAAP,EAAesD,CAAC,CAACvC,YAAF,CAAe,YAAU;AAAC,YAAIhE,CAAC,GAAC8C,QAAQ,CAAConB,cAAT,CAAwB,SAAxB,CAAN;AAAyClqB,QAAAA,CAAC,CAACgO,KAAF,CAAQmc,UAAR,GAAmB,QAAnB,EAA4BjqB,CAAC,CAAConB,eAAF,CAAkBmB,WAAlB,CAA8BzoB,CAA9B,CAA5B;AAA6D,OAAhI,CAAf;AAAkJ,UAAImD,CAAC,GAACoD,CAAC,CAAC3D,GAAF,CAAM,KAAN,EAAY,CAACC,CAAD,EAAGI,CAAH,CAAZ,EAAkB;AAACuK,QAAAA,KAAK,EAAC;AAAP,OAAlB,CAAN;AAAA,UAAqDrH,CAAC,GAACI,CAAC,CAAC3D,GAAF,CAAM,KAAN,EAAY,CAAC9B,CAAD,EAAGqC,CAAH,CAAZ,EAAkB;AAACqK,QAAAA,KAAK,EAAC;AAAP,OAAlB,CAAvD;AAAA,UAAuGpH,CAAC,GAACG,CAAC,CAAC3D,GAAF,CAAM,KAAN,EAAY,CAACuD,CAAD,CAAZ,EAAgB;AAACqH,QAAAA,KAAK,EAAC,gBAAP;AAAwBjC,QAAAA,EAAE,EAAC;AAA3B,OAAhB,CAAzG;AAAgK,WAAK+b,eAAL,CAAqBpkB,WAArB,CAAiCkD,CAAjC;AAAoC,KAAjjN,EAAkjNM,CAAC,CAAC3F,SAAF,CAAYgnB,WAAZ,GAAwB,YAAU;AAAC,WAAKqC,OAAL,GAAa,IAAIvnB,CAAJ,CAAM,KAAKsK,gBAAX,CAAb,EAA0C,KAAKid,OAAL,CAAapoB,EAAb,CAAgB,MAAhB,EAAuB,KAAKmP,IAA5B,EAAiC,IAAjC,CAA1C,EAAiF,KAAKiZ,OAAL,CAAapoB,EAAb,CAAgB,MAAhB,EAAuB,KAAKqP,IAA5B,EAAiC,IAAjC,CAAjF,EAAwH,KAAK+Y,OAAL,CAAapoB,EAAb,CAAgB,MAAhB,EAAuB,KAAKggB,IAA5B,EAAiC,IAAjC,CAAxH,EAA+J,KAAKoI,OAAL,CAAapoB,EAAb,CAAgB,QAAhB,EAAyB,KAAKigB,MAA9B,EAAqC,IAArC,CAA/J,EAA0M,KAAKmI,OAAL,CAAapoB,EAAb,CAAgB,WAAhB,EAA4B,KAAKkgB,SAAjC,EAA2C,IAA3C,CAA1M,EAA2P,KAAKkI,OAAL,CAAapoB,EAAb,CAAgB,QAAhB,EAAyB,KAAKmgB,MAA9B,EAAqC,IAArC,CAA3P,EAAsS,KAAKiI,OAAL,CAAapoB,EAAb,CAAgB,WAAhB,EAA4B,KAAKqgB,QAAjC,EAA0C,IAA1C,CAAtS,EAAsV,KAAK+H,OAAL,CAAapoB,EAAb,CAAgB,MAAhB,EAAuB,KAAKogB,IAA5B,EAAiC,IAAjC,CAAtV,EAA6X,KAAKgI,OAAL,CAAapoB,EAAb,CAAgB,OAAhB,EAAwB,KAAKqK,KAA7B,EAAmC,IAAnC,CAA7X,EAAsa,KAAK+d,OAAL,CAAapoB,EAAb,CAAgB,MAAhB,EAAuB,YAAU;AAAC,aAAK+gB,KAAL,CAAW,MAAX;AAAmB,OAArD,EAAsD,IAAtD,CAAta,EAAke,KAAKqH,OAAL,CAAapoB,EAAb,CAAgB,QAAhB,EAAyB,YAAU;AAAC,aAAK+gB,KAAL,CAAW,QAAX;AAAqB,OAAzD,EAA0D,IAA1D,CAAle,EAAkiB,KAAKqH,OAAL,CAAapoB,EAAb,CAAgB,OAAhB,EAAwB,YAAU;AAAC,aAAK+gB,KAAL,CAAW,OAAX;AAAoB,OAAvD,EAAwD,IAAxD,CAAliB,EAAgmB,KAAKqH,OAAL,CAAapoB,EAAb,CAAgB,cAAhB,EAA+B,KAAKynB,WAApC,EAAgD,IAAhD,CAAhmB,EAAspB,KAAKW,OAAL,CAAapoB,EAAb,CAAgB,gBAAhB,EAAiC,KAAK0nB,aAAtC,EAAoD,IAApD,CAAtpB,EAAgtB,KAAKU,OAAL,CAAapoB,EAAb,CAAgB,WAAhB,EAA4B,KAAK2nB,IAAjC,EAAsC,IAAtC,CAAhtB,EAA4vB,KAAKS,OAAL,CAAapoB,EAAb,CAAgB,iBAAhB,EAAkC,KAAKwe,MAAvC,EAA8C,IAA9C,CAA5vB,EAAgzB,KAAK4J,OAAL,CAAapoB,EAAb,CAAgB,iBAAhB,EAAkC,KAAKqe,QAAvC,EAAgD,IAAhD,CAAhzB,EAAs2B,KAAK+J,OAAL,CAAapoB,EAAb,CAAgB,cAAhB,EAA+B,KAAK8nB,gBAApC,EAAqD,IAArD,CAAt2B,EAAi6B,KAAKxC,eAAL,CAAqB+C,YAArB,CAAkC,KAAKD,OAAL,CAAa9c,OAAb,EAAlC,EAAyD,KAAKga,eAAL,CAAqBgD,UAA9E,CAAj6B;AAA2/B,KAAhlP,EAAilP5jB,CAAC,CAAC3F,SAAF,CAAYinB,iBAAZ,GAA8B,YAAU;AAAC,UAAIhoB,CAAC,GAACuG,CAAC,CAAC3D,GAAF,CAAM,GAAN,EAAU,IAAV,EAAe;AAAC4K,QAAAA,KAAK,EAAC;AAAP,OAAf,CAAN;AAAmDxN,MAAAA,CAAC,CAACoD,YAAF,CAAe,MAAf,EAAsB,wBAAtB,GAAgDpD,CAAC,CAACoD,YAAF,CAAe,QAAf,EAAwB,QAAxB,CAAhD,EAAkF,KAAKkkB,eAAL,CAAqBpkB,WAArB,CAAiClD,CAAjC,CAAlF;AAAsH,KAAnyP,EAAoyP0G,CAAC,CAAC3F,SAAF,CAAY8mB,iBAAZ,GAA8B,YAAU;AAAC,eAAS7nB,CAAT,CAAWA,CAAX,EAAa;AAAC,eAAO,UAASC,CAAT,EAAW;AAAC0K,UAAAA,UAAU,CAAC,YAAU;AAAC3K,YAAAA,CAAC,CAACiB,IAAF,CAAOhB,CAAC,CAACwnB,OAAT;AAAkB,WAA9B,EAA+B,CAA/B,CAAV;AAA4C,SAA/D;AAAgE;;AAAAjhB,MAAAA,CAAC,CAACmhB,MAAF,CAASC,QAAT,GAAkB;AAAC,kBAAS5nB,CAAC,CAAC,KAAKgiB,IAAN,CAAX;AAAuB,iBAAQhiB,CAAC,CAAC,KAAKgiB,IAAN,CAAhC;AAA4C,kBAAShiB,CAAC,CAAC,KAAKiiB,MAAN,CAAtD;AAAoE,iBAAQjiB,CAAC,CAAC,KAAKiiB,MAAN,CAA7E;AAA2F,kBAASjiB,CAAC,CAAC,KAAKkiB,SAAN,CAArG;AAAsH,iBAAQliB,CAAC,CAAC,KAAKkiB,SAAN,CAA/H;AAAgJ,kBAASliB,CAAC,CAAC,KAAKwpB,SAAN,CAA1J;AAA2K,iBAAQxpB,CAAC,CAAC,KAAKwpB,SAAN,CAApL;AAAqMe,QAAAA,KAAK,EAACvqB,CAAC,CAAC,KAAKigB,OAAN,CAA5M;AAA2NuK,QAAAA,MAAM,EAACxqB,CAAC,CAAC,KAAKugB,WAAN,CAAnO;AAAsPkK,QAAAA,SAAS,EAACzqB,CAAC,CAAC,KAAKogB,UAAN,CAAjQ;AAAmRsK,QAAAA,GAAG,EAAC1qB,CAAC,CAAC,KAAKwgB,MAAN,CAAxR;AAAsS,qBAAYxgB,CAAC,CAAC,KAAKqgB,QAAN,CAAnT;AAAmUsK,QAAAA,WAAW,EAAC,CAAC,SAAD;AAA/U,OAAlB;AAA8W,KAAzwQ,EAA0wQjkB,CAAjxQ;AAAmxQ,GAArmY,CAAsmY,IAAtmY,CAAlhsC,EAA8nkD5F,CAAC,CAACP,OAAF,CAAUuhB,UAAV,GAAqBhhB,CAAC,CAACghB,UAArpkD,EAAgqkDhhB,CAAC,CAACP,OAAF,CAAUgiB,IAAV,GAAezhB,CAAC,CAACyhB,IAAjrkD,EAAsrkDzhB,CAAC,CAACP,OAAF,CAAUiZ,MAAV,GAAiB1Y,CAAC,CAAC0Y,MAAzskD,EAAgtkD1Y,CAAC,CAACP,OAAF,CAAUkiB,cAAV,GAAyB3hB,CAAC,CAAC2hB,cAA3ukD,EAA0vkD3hB,CAAC,CAACP,OAAF,CAAU6iB,IAAV,GAAetiB,CAAC,CAACsiB,IAA3wkD,EAAgxkDtiB,CAAC,CAACP,OAAF,CAAU+E,aAAV,GAAwBxE,CAAC,CAACwE,aAA1ykD,EAAwzkDxE,CAAC,CAACP,OAAF,CAAU6lB,QAAV,GAAmBtlB,CAAC,CAACslB,QAA70kD,EAAs1kDtlB,CAAC,CAACP,OAAF,CAAUmgB,yBAAV,GAAoC5f,CAAC,CAAC4f,yBAA53kD,EAAs5kD5f,CAAC,CAACP,OAAF,CAAU6R,UAAV,GAAqBtR,CAAC,CAACsR,UAA76kD,EAAw7kDtR,CAAC,CAACP,OAAF,CAAU+W,aAAV,GAAwBxW,CAAC,CAACwW,aAAl9kD,EAAg+kDxW,CAAC,CAACP,OAAz+kD;AAAi/kD,CAA70gG,EAA80gG,IAA90gG,CAAD","sourcesContent":["!function(t,e,r){\"undefined\"!=typeof module&&module.exports?module.exports=e():\"function\"==typeof r.define&&r.define.amd?define(e):r.Firepad=e()}(0,function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if(\"string\"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(n);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n=n||{}).utils={},n.utils.makeEventEmitter=function(t,e){t.prototype.allowedEvents_=e,t.prototype.on=function(t,e,r){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{},this.eventListeners_[t]=this.eventListeners_[t]||[],this.eventListeners_[t].push({callback:e,context:r})},t.prototype.off=function(t,e){this.validateEventType_(t),this.eventListeners_=this.eventListeners_||{};for(var r=this.eventListeners_[t]||[],n=0;n<r.length;n++)if(r[n].callback===e)return void r.splice(n,1)},t.prototype.trigger=function(t){this.eventListeners_=this.eventListeners_||{};for(var e=this.eventListeners_[t]||[],r=0;r<e.length;r++)e[r].callback.apply(e[r].context,Array.prototype.slice.call(arguments,1))},t.prototype.validateEventType_=function(t){if(this.allowedEvents_){for(var e=!1,r=0;r<this.allowedEvents_.length;r++)if(this.allowedEvents_[r]===t){e=!0;break}if(!e)throw new Error('Unknown event \"'+t+'\"')}}},n.utils.elt=function(t,e,r){var i=document.createElement(t);if(\"string\"==typeof e)n.utils.setTextContent(i,e);else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);for(var s in r||{})i.setAttribute(s,r[s]);return i},n.utils.setTextContent=function(t,e){t.innerHTML=\"\",t.appendChild(document.createTextNode(e))},n.utils.on=function(t,e,r,n){t.addEventListener?t.addEventListener(e,r,n||!1):t.attachEvent&&t.attachEvent(\"on\"+e,r)},n.utils.off=function(t,e,r,n){t.removeEventListener?t.removeEventListener(e,r,n||!1):t.detachEvent&&t.detachEvent(\"on\"+e,r)},n.utils.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},n.utils.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},n.utils.stopEvent=function(t){n.utils.preventDefault(t),n.utils.stopPropagation(t)},n.utils.stopEventAnd=function(t){return function(e){return t(e),n.utils.stopEvent(e),!1}},n.utils.trim=function(t){return t.replace(/^\\s+/g,\"\").replace(/\\s+$/g,\"\")},n.utils.stringEndsWith=function(t,e){for(var r=\"string\"==typeof e?[e]:e,n=0;n<r.length;n++){e=r[n];if(-1!==t.indexOf(e,t.length-e.length))return!0}return!1},n.utils.assert=function(t,e){if(!t)throw new Error(e||\"assertion error\")},n.utils.log=function(){if(\"undefined\"!=typeof console&&void 0!==console.log){for(var t=[\"Firepad:\"],e=0;e<arguments.length;e++)t.push(arguments[e]);console.log.apply(console,t)}},(n=n||{}).Span=function(){function t(t,e){this.pos=t,this.length=e}return t.prototype.end=function(){return this.pos+this.length},t}(),(n=n||{}).TextOp=function(){var t=n.utils;function e(e){this.type=e,this.chars=null,this.text=null,this.attributes=null,\"insert\"===e?(this.text=arguments[1],t.assert(\"string\"==typeof this.text),this.attributes=arguments[2]||{},t.assert(\"object\"==typeof this.attributes)):\"delete\"===e?(this.chars=arguments[1],t.assert(\"number\"==typeof this.chars)):\"retain\"===e&&(this.chars=arguments[1],t.assert(\"number\"==typeof this.chars),this.attributes=arguments[2]||{},t.assert(\"object\"==typeof this.attributes))}return e.prototype.isInsert=function(){return\"insert\"===this.type},e.prototype.isDelete=function(){return\"delete\"===this.type},e.prototype.isRetain=function(){return\"retain\"===this.type},e.prototype.equals=function(t){return this.type===t.type&&this.text===t.text&&this.chars===t.chars&&this.attributesEqual(t.attributes)},e.prototype.attributesEqual=function(t){for(var e in this.attributes)if(this.attributes[e]!==t[e])return!1;for(e in t)if(this.attributes[e]!==t[e])return!1;return!0},e.prototype.hasEmptyAttributes=function(){var t=!0;for(var e in this.attributes){t=!1;break}return t},e}(),(n=n||{}).TextOperation=function(){\"use strict\";var t=n.TextOp,e=n.utils;function r(){if(!this||this.constructor!==r)return new r;this.ops=[],this.baseLength=0,this.targetLength=0}function i(t){var e=t.ops;switch(e.length){case 1:return e[0];case 2:return e[0].isRetain()?e[1]:e[1].isRetain()?e[0]:null;case 3:if(e[0].isRetain()&&e[2].isRetain())return e[1]}return null}function o(t){return t.ops[0].isRetain()?t.ops[0].chars:0}return r.prototype.equals=function(t){if(this.baseLength!==t.baseLength)return!1;if(this.targetLength!==t.targetLength)return!1;if(this.ops.length!==t.ops.length)return!1;for(var e=0;e<this.ops.length;e++)if(!this.ops[e].equals(t.ops[e]))return!1;return!0},r.prototype.retain=function(e,r){if(\"number\"!=typeof e||e<0)throw new Error(\"retain expects a positive integer.\");if(0===e)return this;this.baseLength+=e,this.targetLength+=e,r=r||{};var n=this.ops.length>0?this.ops[this.ops.length-1]:null;return n&&n.isRetain()&&n.attributesEqual(r)?n.chars+=e:this.ops.push(new t(\"retain\",e,r)),this},r.prototype.insert=function(e,r){if(\"string\"!=typeof e)throw new Error(\"insert expects a string\");if(\"\"===e)return this;r=r||{},this.targetLength+=e.length;var n=this.ops.length>0?this.ops[this.ops.length-1]:null,i=this.ops.length>1?this.ops[this.ops.length-2]:null;return n&&n.isInsert()&&n.attributesEqual(r)?n.text+=e:n&&n.isDelete()?i&&i.isInsert()&&i.attributesEqual(r)?i.text+=e:(this.ops[this.ops.length-1]=new t(\"insert\",e,r),this.ops.push(n)):this.ops.push(new t(\"insert\",e,r)),this},r.prototype.delete=function(e){if(\"string\"==typeof e&&(e=e.length),\"number\"!=typeof e||e<0)throw new Error(\"delete expects a positive integer or a string\");if(0===e)return this;this.baseLength+=e;var r=this.ops.length>0?this.ops[this.ops.length-1]:null;return r&&r.isDelete()?r.chars+=e:this.ops.push(new t(\"delete\",e)),this},r.prototype.isNoop=function(){return 0===this.ops.length||1===this.ops.length&&this.ops[0].isRetain()&&this.ops[0].hasEmptyAttributes()},r.prototype.clone=function(){for(var t=new r,e=0;e<this.ops.length;e++)this.ops[e].isRetain()?t.retain(this.ops[e].chars,this.ops[e].attributes):this.ops[e].isInsert()?t.insert(this.ops[e].text,this.ops[e].attributes):t.delete(this.ops[e].chars);return t},r.prototype.toString=function(){return(Array.prototype.map||function(t){for(var e=[],r=0,n=this.length;r<n;r++)e[r]=t(this[r]);return e}).call(this.ops,function(t){return t.isRetain()?\"retain \"+t.chars:t.isInsert()?\"insert '\"+t.text+\"'\":\"delete \"+t.chars}).join(\", \")},r.prototype.toJSON=function(){for(var t=[],e=0;e<this.ops.length;e++)this.ops[e].hasEmptyAttributes()||t.push(this.ops[e].attributes),\"retain\"===this.ops[e].type?t.push(this.ops[e].chars):\"insert\"===this.ops[e].type?t.push(this.ops[e].text):\"delete\"===this.ops[e].type&&t.push(-this.ops[e].chars);return 0===t.length&&t.push(0),t},r.fromJSON=function(t){for(var n=new r,i=0,o=t.length;i<o;i++){var s=t[i],a={};\"object\"==typeof s&&(a=s,s=t[++i]),\"number\"==typeof s?s>0?n.retain(s,a):n.delete(-s):(e.assert(\"string\"==typeof s),n.insert(s,a))}return n},r.prototype.apply=function(t,r,n){if(r=r||[],n=n||[],t.length!==this.baseLength)throw new Error(\"The operation's base length must be equal to the string's length.\");for(var i,o,s=[],a=0,h=0,c=this.ops,u=0,l=c.length;u<l;u++){var p=c[u];if(p.isRetain()){if(h+p.chars>t.length)throw new Error(\"Operation can't retain more characters than are left in the string.\");for(s[a++]=t.slice(h,h+p.chars),i=0;i<p.chars;i++){var d=r[h+i]||{},f={};for(o in d)f[o]=d[o],e.assert(!1!==f[o]);for(o in p.attributes)!1===p.attributes[o]?delete f[o]:f[o]=p.attributes[o],e.assert(!1!==f[o]);n.push(f)}h+=p.chars}else if(p.isInsert())for(s[a++]=p.text,i=0;i<p.text.length;i++){var g={};for(o in p.attributes)g[o]=p.attributes[o],e.assert(!1!==g[o]);n.push(g)}else h+=p.chars}if(h!==t.length)throw new Error(\"The operation didn't operate on the whole string.\");var m=s.join(\"\");return e.assert(m.length===n.length),m},r.prototype.invert=function(t){for(var e=0,n=new r,i=this.ops,o=0,s=i.length;o<s;o++){var a=i[o];a.isRetain()?(n.retain(a.chars),e+=a.chars):a.isInsert()?n.delete(a.text.length):(n.insert(t.slice(e,e+a.chars)),e+=a.chars)}return n},r.prototype.compose=function(t){if(this.targetLength!==t.baseLength)throw new Error(\"The base length of the second operation has to be the target length of the first operation\");function e(t,e,r){var n,i={};for(n in t)i[n]=t[n];for(n in e)r&&!1===e[n]?delete i[n]:i[n]=e[n];return i}for(var n,i=new r,o=this.clone().ops,s=t.clone().ops,a=0,h=0,c=o[a++],u=s[h++];void 0!==c||void 0!==u;)if(c&&c.isDelete())i.delete(c.chars),c=o[a++];else if(u&&u.isInsert())i.insert(u.text,u.attributes),u=s[h++];else{if(void 0===c)throw new Error(\"Cannot compose operations: first operation is too short.\");if(void 0===u)throw new Error(\"Cannot compose operations: first operation is too long.\");if(c.isRetain()&&u.isRetain())n=e(c.attributes,u.attributes),c.chars>u.chars?(i.retain(u.chars,n),c.chars-=u.chars,u=s[h++]):c.chars===u.chars?(i.retain(c.chars,n),c=o[a++],u=s[h++]):(i.retain(c.chars,n),u.chars-=c.chars,c=o[a++]);else if(c.isInsert()&&u.isDelete())c.text.length>u.chars?(c.text=c.text.slice(u.chars),u=s[h++]):c.text.length===u.chars?(c=o[a++],u=s[h++]):(u.chars-=c.text.length,c=o[a++]);else if(c.isInsert()&&u.isRetain())n=e(c.attributes,u.attributes,!0),c.text.length>u.chars?(i.insert(c.text.slice(0,u.chars),n),c.text=c.text.slice(u.chars),u=s[h++]):c.text.length===u.chars?(i.insert(c.text,n),c=o[a++],u=s[h++]):(i.insert(c.text,n),u.chars-=c.text.length,c=o[a++]);else{if(!c.isRetain()||!u.isDelete())throw new Error(\"This shouldn't happen: op1: \"+JSON.stringify(c)+\", op2: \"+JSON.stringify(u));c.chars>u.chars?(i.delete(u.chars),c.chars-=u.chars,u=s[h++]):c.chars===u.chars?(i.delete(u.chars),c=o[a++],u=s[h++]):(i.delete(c.chars),u.chars-=c.chars,c=o[a++])}}return i},r.prototype.shouldBeComposedWith=function(t){if(this.isNoop()||t.isNoop())return!0;var e=o(this),r=o(t),n=i(this),s=i(t);return!(!n||!s)&&(n.isInsert()&&s.isInsert()?e+n.text.length===r:!(!n.isDelete()||!s.isDelete())&&(r+s.chars===e||e===r))},r.prototype.shouldBeComposedWithInverted=function(t){if(this.isNoop()||t.isNoop())return!0;var e=o(this),r=o(t),n=i(this),s=i(t);return!(!n||!s)&&(n.isInsert()&&s.isInsert()?e+n.text.length===r||e===r:!(!n.isDelete()||!s.isDelete())&&r+s.chars===e)},r.transformAttributes=function(t,r){var n,i={},o={},s={};for(n in t)s[n]=!0;for(n in r)s[n]=!0;for(n in s){var a=t[n],h=r[n];e.assert(null!=a||null!=h),null==a?o[n]=h:null==h?i[n]=a:a===h||(i[n]=a)}return[i,o]},r.transform=function(t,e){if(t.baseLength!==e.baseLength)throw new Error(\"Both operations have to have the same base length\");for(var n=new r,i=new r,o=t.clone().ops,s=e.clone().ops,a=0,h=0,c=o[a++],u=s[h++];void 0!==c||void 0!==u;)if(c&&c.isInsert())n.insert(c.text,c.attributes),i.retain(c.text.length),c=o[a++];else if(u&&u.isInsert())n.retain(u.text.length),i.insert(u.text,u.attributes),u=s[h++];else{if(void 0===c)throw new Error(\"Cannot transform operations: first operation is too short.\");if(void 0===u)throw new Error(\"Cannot transform operations: first operation is too long.\");var l;if(c.isRetain()&&u.isRetain()){var p=r.transformAttributes(c.attributes,u.attributes);c.chars>u.chars?(l=u.chars,c.chars-=u.chars,u=s[h++]):c.chars===u.chars?(l=u.chars,c=o[a++],u=s[h++]):(l=c.chars,u.chars-=c.chars,c=o[a++]),n.retain(l,p[0]),i.retain(l,p[1])}else if(c.isDelete()&&u.isDelete())c.chars>u.chars?(c.chars-=u.chars,u=s[h++]):c.chars===u.chars?(c=o[a++],u=s[h++]):(u.chars-=c.chars,c=o[a++]);else if(c.isDelete()&&u.isRetain())c.chars>u.chars?(l=u.chars,c.chars-=u.chars,u=s[h++]):c.chars===u.chars?(l=u.chars,c=o[a++],u=s[h++]):(l=c.chars,u.chars-=c.chars,c=o[a++]),n.delete(l);else{if(!c.isRetain()||!u.isDelete())throw new Error(\"The two operations aren't compatible\");c.chars>u.chars?(l=u.chars,c.chars-=u.chars,u=s[h++]):c.chars===u.chars?(l=c.chars,c=o[a++],u=s[h++]):(l=c.chars,u.chars-=c.chars,c=o[a++]),i.delete(l)}}return[n,i]},r.prototype.transform=function(t){return r.transform(this,t)},r}(),(n=n||{}).AnnotationList=function(){var t=n.Span;function e(t,e){if(!t)throw new Error(\"AnnotationList assertion failed\"+(e?\": \"+e:\"\"))}function r(t,e){this.pos=t,this.length=e.length,this.annotation=e.annotation,this.attachedObject_=e.attachedObject}function i(t,e){this.pos=t,this.length=e.length,this.annotation=e.annotation,this.node_=e}r.prototype.getAttachedObject=function(){return this.attachedObject_},i.prototype.attachObject=function(t){this.node_.attachedObject=t};var o={equals:function(){return!1}};function s(t){this.head_=new a(0,o),this.changeHandler_=t}function a(t,e){this.length=t,this.annotation=e,this.attachedObject=null,this.next=null}return s.prototype.insertAnnotatedSpan=function(r,n){this.wrapOperation_(new t(r.pos,0),function(t,i){e(!i||null===i.next);var s=new a(r.length,n);if(i){e(r.pos>t&&r.pos<t+i.length);var h=new a(0,o);return h.next=new a(r.pos-t,i.annotation),h.next.next=s,s.next=new a(t+i.length-r.pos,i.annotation),h.next}return s})},s.prototype.removeSpan=function(t){0!==t.length&&this.wrapOperation_(t,function(r,n){e(null!==n);var i=new a(0,o),s=i;for(t.pos>r&&(s.next=new a(t.pos-r,n.annotation),s=s.next);t.end()>r+n.length;)r+=n.length,n=n.next;var h=r+n.length-t.end();return h>0&&(s.next=new a(h,n.annotation)),i.next})},s.prototype.updateSpan=function(t,r){0!==t.length&&this.wrapOperation_(t,function(n,i){e(null!==i);var s=new a(0,o),h=s,c=n,u=t.pos-c;for(e(u<i.length),u>0&&(h.next=new a(u,i.annotation),c+=(h=h.next).length);null!==i&&t.end()>=n+i.length;){var l=n+i.length-c;h.next=new a(l,r(i.annotation,l)),h=h.next,n+=i.length,i=i.next,c=n}var p=t.end()-c;return p>0&&(e(p<i.length),h.next=new a(p,r(i.annotation,p)),c+=(h=h.next).length,h.next=new a(n+i.length-c,i.annotation)),s.next})},s.prototype.wrapOperation_=function(t,e){if(t.pos<0)throw new Error(\"Span start cannot be negative.\");var n,o=[],s=[],h=this.getAffectedNodes_(t);null!==h.start?(n=h.end.next,h.end.next=null):n=h.succ;var c=e(h.startPos,h.start),u=!1,l=!1;if(c){var p;for(this.mergeNodesWithSameAnnotations_(c),h.pred&&h.pred.annotation.equals(c.annotation)?(u=!0,c.length+=h.pred.length,h.beforePred.next=c,p=h.predPos):(h.beforeStart.next=c,p=h.startPos);c.next;)s.push(new i(p,c)),p+=c.length,c=c.next;h.succ&&h.succ.annotation.equals(c.annotation)?(c.length+=h.succ.length,l=!0,c.next=h.succ.next):c.next=n,s.push(new i(p,c))}else h.pred&&h.succ&&h.pred.annotation.equals(h.succ.annotation)?(u=!0,l=!0,c=new a(h.pred.length+h.succ.length,h.pred.annotation),h.beforePred.next=c,c.next=h.succ.next,s.push(new i(h.startPos-h.pred.length,c))):h.beforeStart.next=n;u&&o.push(new r(h.predPos,h.pred));for(var d=h.startPos,f=h.start;null!==f;)o.push(new r(d,f)),d+=f.length,f=f.next;l&&o.push(new r(d,h.succ)),this.changeHandler_(o,s)},s.prototype.getAffectedNodes_=function(t){for(var e={},r=null,n=this.head_,i=n.next,o=0;null!==i&&t.pos>=o+i.length;)o+=i.length,r=n,n=i,i=i.next;if(null===i&&(0!==t.length||t.pos!==o))throw new Error(\"Span start exceeds the bounds of the AnnotationList.\");for(e.startPos=o,0===t.length&&t.pos===o?e.start=null:e.start=i,e.beforeStart=n,o===t.pos&&o>0?(e.pred=n,e.predPos=o-n.length,e.beforePred=r):e.pred=null;null!==i&&t.end()>o;)o+=i.length,n=i,i=i.next;if(t.end()>o)throw new Error(\"Span end exceeds the bounds of the AnnotationList.\");return 0===t.length&&t.end()===o?e.end=null:e.end=n,e.succ=o===t.end()?i:null,e},s.prototype.mergeNodesWithSameAnnotations_=function(t){if(t)for(var e=null,r=t;r;)e&&e.annotation.equals(r.annotation)?(e.length+=r.length,e.next=r.next):e=r,r=r.next},s.prototype.forEach=function(t){for(var e=this.head_.next;null!==e;)t(e.length,e.annotation,e.attachedObject),e=e.next},s.prototype.getAnnotatedSpansForPos=function(t){for(var e=0,n=this.head_.next,i=null;null!==n&&e+n.length<=t;)e+=n.length,i=n,n=n.next;if(null===n&&e!==t)throw new Error(\"pos exceeds the bounds of the AnnotationList\");var o=[];return e===t&&i&&o.push(new r(e-i.length,i)),n&&o.push(new r(e,n)),o},s.prototype.getAnnotatedSpansForSpan=function(e){if(0===e.length)return[];for(var r=[],n=this.getAffectedNodes_(e),i=n.startPos,o=n.start;null!==o&&i<e.end();){var s=Math.max(i,e.pos),a=Math.min(i+o.length,e.end()),h=new t(s,a-s);h.annotation=o.annotation,r.push(h),i+=o.length,o=o.next}return r},s.prototype.count=function(){for(var t=0,r=this.head_.next,n=null;null!==r;)n&&e(!n.annotation.equals(r.annotation)),n=r,r=r.next,t++;return t},a.prototype.clone=function(){var t=new a(this.spanLength,this.annotation);return t.next=this.next,t},s}(),(n=n||{}).Cursor=function(){\"use strict\";function t(t,e){this.position=t,this.selectionEnd=e}return t.fromJSON=function(e){return new t(e.position,e.selectionEnd)},t.prototype.equals=function(t){return this.position===t.position&&this.selectionEnd===t.selectionEnd},t.prototype.compose=function(t){return t},t.prototype.transform=function(e){function r(t){for(var r=t,n=e.ops,i=0,o=e.ops.length;i<o&&(n[i].isRetain()?t-=n[i].chars:n[i].isInsert()?r+=n[i].text.length:(r-=Math.min(t,n[i].chars),t-=n[i].chars),!(t<0));i++);return r}var n=r(this.position);return this.position===this.selectionEnd?new t(n,n):new t(n,r(this.selectionEnd))},t}(),(n=n||{}).FirebaseAdapter=function(t){\"undefined\"==typeof firebase&&\"function\"==typeof require&&\"function\"!=typeof Firebase&&(firebase=require(\"firebase/app\"),require(\"firebase/database\"));var e=n.TextOperation,r=n.utils;function i(t,r,n){this.ref_=t,this.ready_=!1,this.firebaseCallbacks_=[],this.zombie_=!1,this.document_=new e,this.revision_=0,this.pendingReceivedRevisions_={};var i=this;if(r){this.setUserId(r),this.setColor(n);var o=t.root.child(\".info/connected\");this.firebaseOn_(o,\"value\",function(t){!0===t.val()&&i.initializeUserData_()},this),this.on(\"ready\",function(){i.monitorCursors_()})}else this.userId_=t.push().key;setTimeout(function(){i.monitorHistory_()},0)}function o(t,e){if(!t)throw new Error(e||\"assertion error\")}r.makeEventEmitter(i,[\"ready\",\"cursor\",\"operation\",\"ack\",\"retry\"]),i.prototype.dispose=function(){var t=this;this.removeFirebaseCallbacks_(),this.handleInitialRevisions_=(()=>{}),this.ready_?(this.userRef_&&(this.userRef_.child(\"cursor\").remove(),this.userRef_.child(\"color\").remove()),this.ref_=null,this.document_=null,this.zombie_=!0):this.on(\"ready\",function(){t.dispose()})},i.prototype.setUserId=function(t){this.userRef_&&(this.userRef_.child(\"cursor\").remove(),this.userRef_.child(\"cursor\").onDisconnect().cancel(),this.userRef_.child(\"color\").remove(),this.userRef_.child(\"color\").onDisconnect().cancel()),this.userId_=t,this.userRef_=this.ref_.child(\"users\").child(t),this.initializeUserData_()},i.prototype.isHistoryEmpty=function(){return o(this.ready_,\"Not ready yet.\"),0===this.revision_},i.prototype.sendOperation=function(t,e){var n=this;if(this.ready_){o(this.document_.targetLength===t.baseLength,\"sendOperation() called with invalid operation.\");var i=a(this.revision_);this.sent_={id:i,op:t},function t(i,o){n.ref_.child(\"history\").child(i).transaction(function(t){if(null===t)return o},function(s,a,h){if(s){if(\"disconnect\"!==s.message)throw r.log(\"Transaction failure!\",s),s;n.sent_&&n.sent_.id===i?setTimeout(function(){t(i,o)},0):e&&e(s,!1)}else e&&e(null,a)},!1)}(i,{a:n.userId_,o:t.toJSON(),t:firebase.database.ServerValue.TIMESTAMP})}else this.on(\"ready\",function(){n.trigger(\"retry\")})},i.prototype.sendCursor=function(t){this.userRef_.child(\"cursor\").set(t),this.cursor_=t},i.prototype.setColor=function(t){this.userRef_.child(\"color\").set(t),this.color_=t},i.prototype.getDocument=function(){return this.document_},i.prototype.registerCallbacks=function(t){for(var e in t)this.on(e,t[e])},i.prototype.initializeUserData_=function(){this.userRef_.child(\"cursor\").onDisconnect().remove(),this.userRef_.child(\"color\").onDisconnect().remove(),this.sendCursor(this.cursor_||null),this.setColor(this.color_||null)},i.prototype.monitorCursors_=function(){var t=this.ref_.child(\"users\"),e=this;function r(t){var r=t.key,n=t.val();e.trigger(\"cursor\",r,n.cursor,n.color)}this.firebaseOn_(t,\"child_added\",r),this.firebaseOn_(t,\"child_changed\",r),this.firebaseOn_(t,\"child_removed\",function(t){var r=t.key;e.trigger(\"cursor\",r,null)})},i.prototype.monitorHistory_=function(){var t=this;this.ref_.child(\"checkpoint\").once(\"value\",function(e){if(!t.zombie_){var r=e.child(\"id\").val(),n=e.child(\"o\").val(),i=e.child(\"a\").val();null!=n&&null!=r&&null!==i?(t.pendingReceivedRevisions_[r]={o:n,a:i},t.checkpointRevision_=function(t){o(t.length>0&&t[0]===s[t.length+8]);for(var e=0,r=1;r<t.length;r++)e*=s.length,e+=s.indexOf(t[r]);return e}(r),t.monitorHistoryStartingAt_(t.checkpointRevision_+1)):(t.checkpointRevision_=0,t.monitorHistoryStartingAt_(t.checkpointRevision_))}})},i.prototype.monitorHistoryStartingAt_=function(t){var e=this.ref_.child(\"history\").startAt(null,a(t)),r=this;setTimeout(function(){r.firebaseOn_(e,\"child_added\",function(t){var e=t.key;r.pendingReceivedRevisions_[e]=t.val(),r.ready_&&r.handlePendingReceivedRevisions_()}),e.once(\"value\",function(){r.handleInitialRevisions_()})},0)},i.prototype.handleInitialRevisions_=function(){o(!this.ready_,\"Should not be called multiple times.\"),this.revision_=this.checkpointRevision_;for(var t=a(this.revision_),e=this.pendingReceivedRevisions_;null!=e[t];){var n=this.parseRevision_(e[t]);n?this.document_=this.document_.compose(n.operation):r.log(\"Invalid operation.\",this.ref_.toString(),t,e[t]),delete e[t],this.revision_++,t=a(this.revision_)}this.trigger(\"operation\",this.document_),this.ready_=!0;var i=this;setTimeout(function(){i.trigger(\"ready\")},0)},i.prototype.handlePendingReceivedRevisions_=function(){for(var t=this.pendingReceivedRevisions_,e=a(this.revision_),n=!1;null!=t[e];){this.revision_++;var i=this.parseRevision_(t[e]);i?(this.document_=this.document_.compose(i.operation),this.sent_&&e===this.sent_.id?this.sent_.op.equals(i.operation)&&i.author===this.userId_?(this.revision_%100==0&&this.saveCheckpoint_(),this.sent_=null,this.trigger(\"ack\")):(n=!0,this.trigger(\"operation\",i.operation)):this.trigger(\"operation\",i.operation)):r.log(\"Invalid operation.\",this.ref_.toString(),e,t[e]),delete t[e],e=a(this.revision_)}n&&(this.sent_=null,this.trigger(\"retry\"))},i.prototype.parseRevision_=function(t){if(\"object\"!=typeof t)return null;if(\"string\"!=typeof t.a||\"object\"!=typeof t.o)return null;var r=null;try{r=e.fromJSON(t.o)}catch(t){return null}return r.baseLength!==this.document_.targetLength?null:{author:t.a,operation:r}},i.prototype.saveCheckpoint_=function(){this.ref_.child(\"checkpoint\").set({a:this.userId_,o:this.document_.toJSON(),id:a(this.revision_-1)})},i.prototype.firebaseOn_=function(t,e,r,n){return this.firebaseCallbacks_.push({ref:t,eventType:e,callback:r,context:n}),t.on(e,r,n),r},i.prototype.firebaseOff_=function(t,e,r,n){t.off(e,r,n);for(var i=0;i<this.firebaseCallbacks_.length;i++){var o=this.firebaseCallbacks_[i];if(o.ref===t&&o.eventType===e&&o.callback===r&&o.context===n){this.firebaseCallbacks_.splice(i,1);break}}},i.prototype.removeFirebaseCallbacks_=function(){for(var t=0;t<this.firebaseCallbacks_.length;t++){var e=this.firebaseCallbacks_[t];e.ref.off(e.eventType,e.callback,e.context)}this.firebaseCallbacks_=[]};var s=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";function a(t){if(0===t)return\"A0\";for(var e=\"\";t>0;){var r=t%s.length;e=s[r]+e,t-=r,t/=s.length}return s[e.length+9]+e}return i}(),(n=n||{}).RichTextToolbar=function(t){var e=n.utils;function r(t){this.imageInsertionUI=t,this.element_=this.makeElement_()}return e.makeEventEmitter(r,[\"bold\",\"italic\",\"underline\",\"strike\",\"font\",\"font-size\",\"color\",\"left\",\"center\",\"right\",\"unordered-list\",\"ordered-list\",\"todo-list\",\"indent-increase\",\"indent-decrease\",\"undo\",\"redo\",\"insert-image\"]),r.prototype.element=function(){return this.element_},r.prototype.makeButton_=function(t,r){var n=this;r=r||t;var i=e.elt(\"a\",[e.elt(\"span\",\"\",{class:\"firepad-tb-\"+r})],{class:\"firepad-btn\"});return e.on(i,\"click\",e.stopEventAnd(function(){n.trigger(t)})),i},r.prototype.makeElement_=function(){var t=this.makeFontDropdown_(),r=this.makeFontSizeDropdown_(),n=this.makeColorDropdown_(),i=[e.elt(\"div\",[t],{class:\"firepad-btn-group\"}),e.elt(\"div\",[r],{class:\"firepad-btn-group\"}),e.elt(\"div\",[n],{class:\"firepad-btn-group\"}),e.elt(\"div\",[this.makeButton_(\"bold\"),this.makeButton_(\"italic\"),this.makeButton_(\"underline\"),this.makeButton_(\"strike\",\"strikethrough\")],{class:\"firepad-btn-group\"}),e.elt(\"div\",[this.makeButton_(\"unordered-list\",\"list-2\"),this.makeButton_(\"ordered-list\",\"numbered-list\"),this.makeButton_(\"todo-list\",\"list\")],{class:\"firepad-btn-group\"}),e.elt(\"div\",[this.makeButton_(\"indent-decrease\"),this.makeButton_(\"indent-increase\")],{class:\"firepad-btn-group\"}),e.elt(\"div\",[this.makeButton_(\"left\",\"paragraph-left\"),this.makeButton_(\"center\",\"paragraph-center\"),this.makeButton_(\"right\",\"paragraph-right\")],{class:\"firepad-btn-group\"}),e.elt(\"div\",[this.makeButton_(\"undo\"),this.makeButton_(\"redo\")],{class:\"firepad-btn-group\"})];this.imageInsertionUI&&i.push(e.elt(\"div\",[this.makeButton_(\"insert-image\")],{class:\"firepad-btn-group\"}));var o=e.elt(\"div\",i,{class:\"firepad-toolbar-wrapper\"}),s=e.elt(\"div\",null,{class:\"firepad-toolbar\"});return s.appendChild(o),s},r.prototype.makeFontDropdown_=function(){for(var t=[\"Arial\",\"Comic Sans MS\",\"Courier New\",\"Impact\",\"Times New Roman\",\"Verdana\"],r=[],n=0;n<t.length;n++){var i=e.elt(\"span\",t[n]);i.setAttribute(\"style\",\"font-family:\"+t[n]),r.push({content:i,value:t[n]})}return this.makeDropdown_(\"Font\",\"font\",r)},r.prototype.makeFontSizeDropdown_=function(){for(var t=[9,10,12,14,18,24,32,42],r=[],n=0;n<t.length;n++){var i=e.elt(\"span\",t[n].toString());i.setAttribute(\"style\",\"font-size:\"+t[n]+\"px; line-height:\"+(t[n]-6)+\"px;\"),r.push({content:i,value:t[n]})}return this.makeDropdown_(\"Size\",\"font-size\",r,\"px\")},r.prototype.makeColorDropdown_=function(){for(var t=[\"black\",\"red\",\"green\",\"blue\",\"yellow\",\"cyan\",\"magenta\",\"grey\"],r=[],n=0;n<t.length;n++){var i=e.elt(\"div\");i.className=\"firepad-color-dropdown-item\",i.setAttribute(\"style\",\"background-color:\"+t[n]),r.push({content:i,value:t[n]})}return this.makeDropdown_(\"Color\",\"color\",r)},r.prototype.makeDropdown_=function(t,r,n,i){i=i||\"\";var o=this,s=e.elt(\"a\",t+\" ▾\",{class:\"firepad-btn firepad-dropdown\"}),a=e.elt(\"ul\",[],{class:\"firepad-dropdown-menu\"});s.appendChild(a);var h=!1;var c=!1;function u(){h&&(a.style.display=\"\",e.off(document,\"click\",u,!0),h=!1),c=!0,setTimeout(function(){c=!1},0)}function l(t,n){\"object\"!=typeof t&&(t=document.createTextNode(String(t)));var s=e.elt(\"a\",[t]);e.on(s,\"click\",e.stopEventAnd(function(){u(),o.trigger(r,n+i)})),a.appendChild(s)}for(var p=0;p<n.length;p++){l(n[p].content,n[p].value)}return e.on(s,\"click\",e.stopEventAnd(function(){c||h||(a.style.display=\"block\",e.on(document,\"click\",u,!0),h=!0)})),s},r}(),(n=n||{}).WrappedOperation=function(t){\"use strict\";function e(t,e){this.wrapped=t,this.meta=e}function r(t,e){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}function n(t,e){return t&&\"object\"==typeof t&&\"function\"==typeof t.transform?t.transform(e):t}return e.prototype.apply=function(){return this.wrapped.apply.apply(this.wrapped,arguments)},e.prototype.invert=function(){var t=this.meta;return new e(this.wrapped.invert.apply(this.wrapped,arguments),t&&\"object\"==typeof t&&\"function\"==typeof t.invert?t.invert.apply(t,arguments):t)},e.prototype.compose=function(t){return new e(this.wrapped.compose(t.wrapped),function(t,e){if(t&&\"object\"==typeof t){if(\"function\"==typeof t.compose)return t.compose(e);var n={};return r(t,n),r(e,n),n}return e}(this.meta,t.meta))},e.transform=function(t,r){var i=t.wrapped.transform(r.wrapped);return[new e(i[0],n(t.meta,r.wrapped)),new e(i[1],n(r.meta,t.wrapped))]},e.prototype.transform=function(t){return e.transform(this,t)},e}(),(n=n||{}).UndoManager=function(){\"use strict\";var t=\"normal\";function e(e){this.maxItems=e||50,this.state=t,this.dontCompose=!1,this.undoStack=[],this.redoStack=[]}function r(t,e){for(var r=[],n=e.constructor,i=t.length-1;i>=0;i--){var o=n.transform(t[i],e);\"function\"==typeof o[0].isNoop&&o[0].isNoop()||r.push(o[0]),e=o[1]}return r.reverse()}return e.prototype.add=function(t,e){if(\"undoing\"===this.state)this.redoStack.push(t),this.dontCompose=!0;else if(\"redoing\"===this.state)this.undoStack.push(t),this.dontCompose=!0;else{var r=this.undoStack;!this.dontCompose&&e&&r.length>0?r.push(t.compose(r.pop())):(r.push(t),r.length>this.maxItems&&r.shift()),this.dontCompose=!1,this.redoStack=[]}},e.prototype.transform=function(t){this.undoStack=r(this.undoStack,t),this.redoStack=r(this.redoStack,t)},e.prototype.performUndo=function(e){if(this.state=\"undoing\",0===this.undoStack.length)throw new Error(\"undo not possible\");e(this.undoStack.pop()),this.state=t},e.prototype.performRedo=function(e){if(this.state=\"redoing\",0===this.redoStack.length)throw new Error(\"redo not possible\");e(this.redoStack.pop()),this.state=t},e.prototype.canUndo=function(){return 0!==this.undoStack.length},e.prototype.canRedo=function(){return 0!==this.redoStack.length},e.prototype.isUndoing=function(){return\"undoing\"===this.state},e.prototype.isRedoing=function(){return\"redoing\"===this.state},e}(),(n=n||{}).Client=function(){\"use strict\";function t(){this.state=r}function e(){}t.prototype.setState=function(t){this.state=t},t.prototype.applyClient=function(t){this.setState(this.state.applyClient(this,t))},t.prototype.applyServer=function(t){this.setState(this.state.applyServer(this,t))},t.prototype.serverAck=function(){this.setState(this.state.serverAck(this))},t.prototype.serverRetry=function(){this.setState(this.state.serverRetry(this))},t.prototype.sendOperation=function(t){throw new Error(\"sendOperation must be defined in child class\")},t.prototype.applyOperation=function(t){throw new Error(\"applyOperation must be defined in child class\")},t.Synchronized=e,e.prototype.applyClient=function(t,e){return t.sendOperation(e),new n(e)},e.prototype.applyServer=function(t,e){return t.applyOperation(e),this},e.prototype.serverAck=function(t){throw new Error(\"There is no pending operation.\")},e.prototype.serverRetry=function(t){throw new Error(\"There is no pending operation.\")};var r=new e;function n(t){this.outstanding=t}function i(t,e){this.outstanding=t,this.buffer=e}return t.AwaitingConfirm=n,n.prototype.applyClient=function(t,e){return new i(this.outstanding,e)},n.prototype.applyServer=function(t,e){var r=this.outstanding.transform(e);return t.applyOperation(r[1]),new n(r[0])},n.prototype.serverAck=function(t){return r},n.prototype.serverRetry=function(t){return t.sendOperation(this.outstanding),this},t.AwaitingWithBuffer=i,i.prototype.applyClient=function(t,e){var r=this.buffer.compose(e);return new i(this.outstanding,r)},i.prototype.applyServer=function(t,e){var r=this.outstanding.transform(e),n=this.buffer.transform(r[1]);return t.applyOperation(n[1]),new i(r[0],n[0])},i.prototype.serverRetry=function(t){var e=this.outstanding.compose(this.buffer);return t.sendOperation(e),new n(e)},i.prototype.serverAck=function(t){return t.sendOperation(this.buffer),new n(this.buffer)},t}(),(n=n||{}).EditorClient=function(){\"use strict\";var t=n.Client,e=n.Cursor,r=n.UndoManager,i=n.WrappedOperation;function o(t,e){this.cursorBefore=t,this.cursorAfter=e}function s(t,e){this.id=t,this.editorAdapter=e}function a(n,i){t.call(this),this.serverAdapter=n,this.editorAdapter=i,this.undoManager=new r,this.clients={};var o=this;this.editorAdapter.registerCallbacks({change:function(t,e){o.onChange(t,e)},cursorActivity:function(){o.onCursorActivity()},blur:function(){o.onBlur()},focus:function(){o.onFocus()}}),this.editorAdapter.registerUndo(function(){o.undo()}),this.editorAdapter.registerRedo(function(){o.redo()}),this.serverAdapter.registerCallbacks({ack:function(){o.serverAck(),o.focused&&o.state instanceof t.Synchronized&&(o.updateCursor(),o.sendCursor(o.cursor)),o.emitStatus()},retry:function(){o.serverRetry()},operation:function(t){o.applyServer(t)},cursor:function(r,n,i){if(o.serverAdapter.userId_!==r&&o.state instanceof t.Synchronized){var s=o.getClientObject(r);n?(i&&s.setColor(i),s.updateCursor(e.fromJSON(n))):s.removeCursor()}}})}return o.prototype.invert=function(){return new o(this.cursorAfter,this.cursorBefore)},o.prototype.compose=function(t){return new o(this.cursorBefore,t.cursorAfter)},o.prototype.transform=function(t){return new o(this.cursorBefore?this.cursorBefore.transform(t):null,this.cursorAfter?this.cursorAfter.transform(t):null)},s.prototype.setColor=function(t){this.color=t},s.prototype.updateCursor=function(t){this.removeCursor(),this.cursor=t,this.mark=this.editorAdapter.setOtherCursor(t,this.color,this.id)},s.prototype.removeCursor=function(){this.mark&&this.mark.clear()},function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}(a,t),a.prototype.getClientObject=function(t){var e=this.clients[t];return e||(this.clients[t]=new s(t,this.editorAdapter))},a.prototype.applyUnredo=function(t){this.undoManager.add(this.editorAdapter.invertOperation(t)),this.editorAdapter.applyOperation(t.wrapped),this.cursor=t.meta.cursorAfter,this.cursor&&this.editorAdapter.setCursor(this.cursor),this.applyClient(t.wrapped)},a.prototype.undo=function(){var t=this;this.undoManager.canUndo()&&this.undoManager.performUndo(function(e){t.applyUnredo(e)})},a.prototype.redo=function(){var t=this;this.undoManager.canRedo()&&this.undoManager.performRedo(function(e){t.applyUnredo(e)})},a.prototype.onChange=function(t,e){var r=this.cursor;this.updateCursor();var n,s=this.undoManager.undoStack.length>0&&e.shouldBeComposedWithInverted((n=this.undoManager.undoStack,n[n.length-1]).wrapped),a=new o(this.cursor,r);this.undoManager.add(new i(e,a),s),this.applyClient(t)},a.prototype.updateCursor=function(){this.cursor=this.editorAdapter.getCursor()},a.prototype.onCursorActivity=function(){var t=this.cursor;this.updateCursor(),!this.focused||t&&this.cursor.equals(t)||this.sendCursor(this.cursor)},a.prototype.onBlur=function(){this.cursor=null,this.sendCursor(null),this.focused=!1},a.prototype.onFocus=function(){this.focused=!0,this.onCursorActivity()},a.prototype.sendCursor=function(e){this.state instanceof t.AwaitingWithBuffer||this.serverAdapter.sendCursor(e)},a.prototype.sendOperation=function(t){this.serverAdapter.sendOperation(t),this.emitStatus()},a.prototype.applyOperation=function(t){this.editorAdapter.applyOperation(t),this.updateCursor(),this.undoManager.transform(new i(t,null))},a.prototype.emitStatus=function(){var e=this;setTimeout(function(){e.trigger(\"synced\",e.state instanceof t.Synchronized)},0)},a}(),n.utils.makeEventEmitter(n.EditorClient,[\"synced\"]),void 0!==n&&null!==n||(n={}),n.ACEAdapter=function(){var e=function(){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.ace=t,this.aceSession=this.ace.getSession(),this.aceDoc=this.aceSession.getDocument(),this.aceDoc.setNewLineMode(\"unix\"),this.grabDocumentState(),this.ace.on(\"change\",this.onChange),this.ace.on(\"blur\",this.onBlur),this.ace.on(\"focus\",this.onFocus),this.aceSession.selection.on(\"changeCursor\",this.onCursorActivity),null==this.aceRange&&(this.aceRange=(null!=(r=ace.require)?r:require)(\"ace/range\").Range)}var i,o,s;return i=e,(o=[{key:\"grabDocumentState\",value:function(){return this.lastDocLines=this.aceDoc.getAllLines(),this.lastCursorRange=this.aceSession.selection.getRange()}},{key:\"detach\",value:function(){return this.ace.removeListener(\"change\",this.onChange),this.ace.removeListener(\"blur\",this.onBlur),this.ace.removeListener(\"focus\",this.onFocus),this.aceSession.selection.removeListener(\"changeCursor\",this.onCursorActivity)}},{key:\"onChange\",value:function(e){var r;if(!this.ignoreChanges)return r=this.operationFromACEChange(e),this.trigger.apply(this,[\"change\"].concat(t(r))),this.grabDocumentState()}},{key:\"onBlur\",value:function(){if(this.ace.selection.isEmpty())return this.trigger(\"blur\")}},{key:\"onFocus\",value:function(){return this.trigger(\"focus\")}},{key:\"onCursorActivity\",value:function(){var t=this;return setTimeout(function(){return t.trigger(\"cursorActivity\")},0)}},{key:\"operationFromACEChange\",value:function(t){var e,r,i,o,s,a,h;return t.data?(\"insertLines\"===(o=(r=t.data).action)||\"removeLines\"===o?(h=r.lines.join(\"\\n\")+\"\\n\",r.action.replace(\"Lines\",\"\")):(h=r.text.replace(this.aceDoc.getNewLineCharacter(),\"\\n\"),r.action.replace(\"Text\",\"\")),a=this.indexFromPos(r.range.start)):(h=t.lines.join(\"\\n\"),a=this.indexFromPos(t.start)),s=this.lastDocLines.join(\"\\n\").length-a,\"remove\"===t.action&&(s-=h.length),i=(new n.TextOperation).retain(a).insert(h).retain(s),e=(new n.TextOperation).retain(a).delete(h).retain(s),\"remove\"===t.action?[e,i]:[i,e]}},{key:\"applyOperationToACE\",value:function(t){var e,r,n,i,o,s,a,h;for(r=0,n=0,i=(a=t.ops).length;n<i;n++)(o=a[n]).isRetain()?r+=o.chars:o.isInsert()?(this.aceDoc.insert(this.posFromIndex(r),o.text),r+=o.text.length):o.isDelete()&&(e=this.posFromIndex(r),h=this.posFromIndex(r+o.chars),s=this.aceRange.fromPoints(e,h),this.aceDoc.remove(s));return this.grabDocumentState()}},{key:\"posFromIndex\",value:function(t){var e,r,n,i,o;for(o=e=0,r=(i=this.aceDoc.$lines).length;e<r&&!(t<=(n=i[o]).length);o=++e)t-=n.length+1;return{row:o,column:t}}},{key:\"indexFromPos\",value:function(t,e){var r,n,i,o;for(null==e&&(e=this.lastDocLines),n=0,r=i=0,o=t.row;0<=o?i<o:i>o;r=0<=o?++i:--i)n+=this.lastDocLines[r].length+1;return n+t.column}},{key:\"getValue\",value:function(){return this.aceDoc.getValue()}},{key:\"getCursor\",value:function(){var t,e,r;try{r=this.indexFromPos(this.aceSession.selection.getRange().start,this.aceDoc.$lines),e=this.indexFromPos(this.aceSession.selection.getRange().end,this.aceDoc.$lines)}catch(n){n;try{r=this.indexFromPos(this.lastCursorRange.start),e=this.indexFromPos(this.lastCursorRange.end)}catch(n){t=n,console.log(\"Couldn't figure out the cursor range:\",t,\"-- setting it to 0:0.\"),r=0,e=0}}if(r>e){var i=[e,r];r=i[0],e=i[1]}return new n.Cursor(r,e)}},{key:\"setCursor\",value:function(t){var e,r;if(r=this.posFromIndex(t.position),e=this.posFromIndex(t.selectionEnd),t.position>t.selectionEnd){var n=[e,r];r=n[0],e=n[1]}return this.aceSession.selection.setSelectionRange(new this.aceRange(r.row,r.column,e.row,e.column))}},{key:\"setOtherCursor\",value:function(t,e,r){var n,i,o,s,a,h,c,u=this;if(null==this.otherCursors&&(this.otherCursors={}),(o=this.otherCursors[r])&&(o.start.detach(),o.end.detach(),this.aceSession.removeMarker(o.id)),c=this.posFromIndex(t.position),s=this.posFromIndex(t.selectionEnd),t.selectionEnd<t.position){var l=[s,c];c=l[0],s=l[1]}return n=\"other-client-selection-\".concat(e.replace(\"#\",\"\")),(a=t.position===t.selectionEnd)&&(n=n.replace(\"selection\",\"cursor\")),i=\".\".concat(n,\" {\\n  position: absolute;\\n  background-color: \").concat(a?\"transparent\":e,\";\\n  border-left: 2px solid \").concat(e,\";\\n}\"),this.addStyleRule(i),this.otherCursors[r]=o=new this.aceRange(c.row,c.column,s.row,s.column),h=this,o.clipRows=function(){var t;return(t=h.aceRange.prototype.clipRows.apply(this,arguments)).isEmpty=function(){return!1},t},o.start=this.aceDoc.createAnchor(o.start),o.end=this.aceDoc.createAnchor(o.end),o.id=this.aceSession.addMarker(o,n,\"text\"),{clear:function(){return o.start.detach(),o.end.detach(),u.aceSession.removeMarker(o.id)}}}},{key:\"addStyleRule\",value:function(t){var e;if(\"undefined\"!=typeof document&&null!==document&&(this.addedStyleRules||(this.addedStyleRules={},e=document.createElement(\"style\"),document.documentElement.getElementsByTagName(\"head\")[0].appendChild(e),this.addedStyleSheet=e.sheet),!this.addedStyleRules[t]))return this.addedStyleRules[t]=!0,this.addedStyleSheet.insertRule(t,0)}},{key:\"registerCallbacks\",value:function(t){this.callbacks=t}},{key:\"trigger\",value:function(t){for(var e,r,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return null!=(e=this.callbacks)&&null!=(r=e[t])?r.apply(this,i):void 0}},{key:\"applyOperation\",value:function(t){return t.isNoop()||(this.ignoreChanges=!0),this.applyOperationToACE(t),this.ignoreChanges=!1}},{key:\"registerUndo\",value:function(t){return this.ace.undo=t}},{key:\"registerRedo\",value:function(t){return this.ace.redo=t}},{key:\"invertOperation\",value:function(t){return t.invert(this.getValue())}}])&&r(i.prototype,o),s&&r(i,s),e}();return e.prototype.ignoreChanges=!1,e}.call(void 0);var n,i=function(t,e,r){return\".\"+t+\" {\\n  position: relative;\\nbackground-color: \"+e+\";\\nborder-left: 2px solid \"+r+\";\\n}\"},o=function(t,e){if(\"undefined\"==typeof document||null===document)return!1;if(-1===this.addedStyleRules.indexOf(t)){var r=document.createElement(\"style\"),n=document.createTextNode(e);r.appendChild(n),document.head.appendChild(r),this.addedStyleRules.push(t)}},s=function(){function t(t){if(!t||\"function\"!=typeof t.getModel)throw new Error(\"MonacoAdapter: Incorrect Parameter Recieved in constructor, expected valid Monaco Instance\");this.monaco=t,this.monacoModel=this.monaco.getModel(),this.lastDocLines=this.monacoModel.getLinesContent(),this.lastCursorRange=this.monaco.getSelection(),this.callbacks={},this.otherCursors=[],this.addedStyleRules=[],this.ignoreChanges=!1,this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onCursorActivity=this.onCursorActivity.bind(this),this.changeHandler=this.monaco.onDidChangeModelContent(this.onChange),this.didBlurHandler=this.monaco.onDidBlurEditorWidget(this.onBlur),this.didFocusHandler=this.monaco.onDidFocusEditorWidget(this.onFocus),this.didChangeCursorPositionHandler=this.monaco.onDidChangeCursorPosition(this.onCursorActivity)}return t.prototype.detach=function(){this.changeHandler.dispose(),this.didBlurHandler.dispose(),this.didFocusHandler.dispose(),this.didChangeCursorPositionHandler.dispose()},t.prototype.getCursor=function(){var t=this.monaco.getSelection();void 0!==t&&null!==t||(t=this.lastCursorRange);var e=t.getStartPosition(),r=t.getEndPosition(),i=this.monacoModel.getOffsetAt(e),o=this.monacoModel.getOffsetAt(r);if(i>o){var s=[o,i];i=s[0],o=s[1]}return new n.Cursor(i,o)},t.prototype.setCursor=function(t){var e=t.position,r=t.selectionEnd,n=this.monacoModel.getPositionAt(e),i=this.monacoModel.getPositionAt(r);if(e>r){var o=[i,n];n=o[0],i=o[1]}this.monaco.setSelection(new monaco.Range(n.lineNumber,n.column,i.lineNumber,i.column))},t.prototype.setOtherCursor=function(t,e,r){if(\"object\"!=typeof t||\"number\"!=typeof t.position||\"number\"!=typeof t.selectionEnd)return!1;if(\"string\"!=typeof e||!e.match(/^#[a-fA-F0-9]{3,6}$/))return!1;var n=t.position,s=t.selectionEnd;if(n<0||s<0)return!1;var a=this.otherCursors.find(function(t){return t.clientID===r});a||(a={clientID:r,decoration:[]},this.otherCursors.push(a)),a.decoration=this.monaco.deltaDecorations(a.decoration,[]);var h,c,u=\"other-client-selection-\"+e.replace(\"#\",\"\");n===s?(u=u.replace(\"selection\",\"cursor\"),h=i(u,\"transparent\",e),c=o.call(this,u,h)):(h=i(u,e,e),c=o.call(this,u,h)),0==c&&console.log(\"Monaco Adapter: Failed to add some css style.\\nPlease make sure you're running on supported environment.\");var l=this.monacoModel.getPositionAt(n),p=this.monacoModel.getPositionAt(s);if(n>s){var d=[p,l];l=d[0],p=d[1]}a.decoration=this.monaco.deltaDecorations(a.decoration,[{range:new monaco.Range(l.lineNumber,l.column,p.lineNumber,p.column),options:{className:u}}]);var f=this;return{clear:function(){a.decoration=f.monaco.deltaDecorations(a.decoration,[])}}},t.prototype.registerCallbacks=function(t){this.callbacks=Object.assign({},this.callbacks,t)},t.prototype.registerUndo=function(t){if(\"function\"!=typeof t)throw new Error(\"MonacoAdapter: registerUndo method expects a callback function in parameter\");this.callbacks.undo=t},t.prototype.registerRedo=function(t){if(\"function\"!=typeof t)throw new Error(\"MonacoAdapter: registerRedo method expects a callback function in parameter\");this.callbacks.redo=t},t.prototype.operationFromMonacoChanges=function(t,e,r){var i,o,s,a=t.text,h=t.rangeLength,c=t.rangeOffset,u=e.length+r-c;return 0===a.length&&h>0?(s=e.slice(c,c+h),i=(new n.TextOperation).retain(c).delete(h).retain(u-h),o=(new n.TextOperation).retain(c).insert(s).retain(u-h)):a.length>0&&h>0?(s=e.slice(c,c+h),i=(new n.TextOperation).retain(c).delete(h).insert(a).retain(u-h),o=(new n.TextOperation).retain(c).delete(a.length).insert(s).retain(u-h)):(i=(new n.TextOperation).retain(c).insert(a).retain(u),o=(new n.TextOperation).retain(c).delete(a).retain(u)),[i,o]},t.prototype.onChange=function(t){var e=this;if(!this.ignoreChanges){var r=this.lastDocLines.join(this.monacoModel.getEOL()),i=0;if(!t.changes){var o=(new n.TextOperation).retain(r.length);this.trigger(\"change\",o,o)}t.changes.forEach(function(t){var n=e.operationFromMonacoChanges(t,r,i);i+=n[0].targetLength-n[0].baseLength,e.trigger.apply(e,[\"change\"].concat(n))}),this.lastDocLines=this.monacoModel.getLinesContent()}},t.prototype.trigger=function(t){if(this.callbacks.hasOwnProperty(t)){var e=this.callbacks[t];0;var r=[];if(arguments.length>1)for(var n=1;n<arguments.length;n++)r.push(arguments[n]);e.apply(null,r)}},t.prototype.onBlur=function(){this.monaco.getSelection().isEmpty()&&this.trigger(\"blur\")},t.prototype.onFocus=function(){this.trigger(\"focus\")},t.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){return t.trigger(\"cursorActivity\")},1)},t.prototype.applyOperation=function(t){t.isNoop()||(this.ignoreChanges=!0);var e=0,r=this;t.ops.forEach(function(t){if(t.isRetain())e+=t.chars;else if(t.isInsert()){var n=r.monacoModel.getPositionAt(e);r.monaco.executeEdits(\"my-source\",[{range:new monaco.Range(n.lineNumber,n.column,n.lineNumber,n.column),text:t.text,forceMoveMarkers:!0}]),e+=t.text.length}else if(t.isDelete()){var i=r.monacoModel.getPositionAt(e),o=r.monacoModel.getPositionAt(e+t.chars);r.monaco.executeEdits(\"my-source\",[{range:new monaco.Range(i.lineNumber,i.column,o.lineNumber,o.column),text:\"\",forceMoveMarkers:!0}])}}),this.lastDocLines=this.monacoModel.getLinesContent(),this.ignoreChanges=!1},t.prototype.invertOperation=function(t){t.invert(this.getValue())},t}();return n.MonacoAdapter=s,(n=n||{}).AttributeConstants={BOLD:\"b\",ITALIC:\"i\",UNDERLINE:\"u\",STRIKE:\"s\",FONT:\"f\",FONT_SIZE:\"fs\",COLOR:\"c\",BACKGROUND_COLOR:\"bc\",ENTITY_SENTINEL:\"ent\",LINE_SENTINEL:\"l\",LINE_INDENT:\"li\",LINE_ALIGN:\"la\",LIST_TYPE:\"lt\"},n.sentinelConstants={LINE_SENTINEL_CHARACTER:\"\",ENTITY_SENTINEL_CHARACTER:\"\"},(n=n||{}).EntityManager=function(){var t=n.utils;function e(){this.entities_={};var e=[\"src\",\"alt\",\"width\",\"height\",\"style\",\"class\"];this.register(\"img\",{render:function(e){t.assert(e.src,\"image entity should have 'src'!\");for(var r=[\"src\",\"alt\",\"width\",\"height\",\"style\",\"class\"],n=\"<img \",i=0;i<r.length;i++){var o=r[i];o in e&&(n+=\" \"+o+'=\"'+e[o]+'\"')}return n+=\">\"},fromElement:function(t){for(var r={},n=0;n<e.length;n++){var i=e[n];t.hasAttribute(i)&&(r[i]=t.getAttribute(i))}return r}})}return e.prototype.register=function(t,e){n.utils.assert(e.render,\"Entity options should include a 'render' function!\"),n.utils.assert(e.fromElement,\"Entity options should include a 'fromElement' function!\"),this.entities_[t]=e},e.prototype.renderToElement=function(t,e){return this.tryRenderToElement_(t,\"render\",e)},e.prototype.exportToElement=function(t){var e=this.tryRenderToElement_(t,\"export\")||this.tryRenderToElement_(t,\"getHtml\")||this.tryRenderToElement_(t,\"render\");return e.setAttribute(\"data-firepad-entity\",t.type),e},e.prototype.updateElement=function(t,e){var r=t.type,n=t.info;this.entities_[r]&&void 0!==this.entities_[r].update&&this.entities_[r].update(n,e)},e.prototype.fromElement=function(t){var e=t.getAttribute(\"data-firepad-entity\");if(e||(e=t.nodeName.toLowerCase()),e&&this.entities_[e]){var r=this.entities_[e].fromElement(t);return new n.Entity(e,r)}},e.prototype.tryRenderToElement_=function(t,e,r){var i=t.type,o=t.info;if(this.entities_[i]&&this.entities_[i][e]){var s=n.document||window&&window.document,a=this.entities_[i][e](o,r,s);if(a){if(\"string\"==typeof a){var h=(n.document||document).createElement(\"div\");return h.innerHTML=a,h.childNodes[0]}if(\"object\"==typeof a)return n.utils.assert(void 0!==a.nodeType,\"Error rendering \"+i+\" entity.  render() function must return an html string or a DOM element.\"),a}}},e.prototype.entitySupportsUpdate=function(t){return this.entities_[t]&&this.entities_[t].update},e}(),(n=n||{}).Entity=function(){var t=n.AttributeConstants.ENTITY_SENTINEL,e=t+\"_\";function r(t,e){if(!(this instanceof r))return new r(t,e);this.type=t,this.info=e||{}}return r.prototype.toAttributes=function(){var r={};for(var n in r[t]=this.type,this.info)r[e+n]=this.info[n];return r},r.fromAttributes=function(n){var i=n[t],o={};for(var s in n)0===s.indexOf(e)&&(o[s.substr(e.length)]=n[s]);return new r(i,o)},r}(),(n=n||{}).RichTextCodeMirror=function(){var t=n.AnnotationList,e=n.Span,r=n.utils,i=n.AttributeConstants,o={c:\"color\",bc:\"background-color\",fs:\"font-size\",li:function(t){return\"padding-left: \"+40*t+\"px\"}},s={};function a(e,r,n){this.codeMirror=e,this.options_=n||{},this.entityManager_=r,this.currentAttributes_=null;var i=this;this.annotationList_=new t(function(t,e){i.onAnnotationsChanged_(t,e)}),this.initAnnotationList_(),f(this,\"onCodeMirrorBeforeChange_\"),f(this,\"onCodeMirrorChange_\"),f(this,\"onCursorActivity_\"),parseInt(CodeMirror.version)>=4?this.codeMirror.on(\"changes\",this.onCodeMirrorChange_):this.codeMirror.on(\"change\",this.onCodeMirrorChange_),this.codeMirror.on(\"beforeChange\",this.onCodeMirrorBeforeChange_),this.codeMirror.on(\"cursorActivity\",this.onCursorActivity_),this.changeId_=0,this.outstandingChanges_={},this.dirtyLines_=[]}r.makeEventEmitter(a,[\"change\",\"attributesChange\",\"newLine\"]);var h=n.sentinelConstants.LINE_SENTINEL_CHARACTER,c=n.sentinelConstants.ENTITY_SENTINEL_CHARACTER;function u(t,e){return t.line-e.line||t.ch-e.ch}function l(t,e){return u(t,e)<=0}function p(t){if(0===t.length)return 0;for(var e=0,r=0;r<t.length;r++)e+=t[r].length;return e+t.length-1}function d(t){this.attributes=t||{}}function f(t,e){var r=t[e];t[e]=function(){r.apply(t,arguments)}}return a.prototype.detach=function(){this.codeMirror.off(\"beforeChange\",this.onCodeMirrorBeforeChange_),this.codeMirror.off(\"change\",this.onCodeMirrorChange_),this.codeMirror.off(\"changes\",this.onCodeMirrorChange_),this.codeMirror.off(\"cursorActivity\",this.onCursorActivity_),this.clearAnnotations_()},a.prototype.toggleAttribute=function(t,e){var r=e||!0;if(this.emptySelection_()){var n=this.getCurrentAttributes_();n[t]===r?delete n[t]:n[t]=r,this.currentAttributes_=n}else{var i=this.getCurrentAttributes_()[t]!==r&&r;this.setAttribute(t,i)}},a.prototype.setAttribute=function(t,e){var r=this.codeMirror;if(this.emptySelection_()){var n=this.getCurrentAttributes_();!1===e?delete n[t]:n[t]=e,this.currentAttributes_=n}else this.updateTextAttributes(r.indexFromPos(r.getCursor(\"start\")),r.indexFromPos(r.getCursor(\"end\")),function(r){!1===e?delete r[t]:r[t]=e}),this.updateCurrentAttributes_()},a.prototype.updateTextAttributes=function(t,r,n,o,s){var a=[],h=t,c=this;this.annotationList_.updateSpan(new e(t,r-t),function(t,e){var r={};for(var u in t.attributes)r[u]=t.attributes[u];r[i.LINE_SENTINEL]&&!s||n(r);var l={},p={};return c.computeChangedAttributes_(t.attributes,r,l,p),function(t){for(var e in t)return!1;return!0}(l)||a.push({start:h,end:h+e,attributes:l,attributesInverse:p,origin:o}),h+=e,new d(r)}),a.length>0&&this.trigger(\"attributesChange\",this,a)},a.prototype.computeChangedAttributes_=function(t,e,r,n){var i,o={};for(i in t)o[i]=!0;for(i in e)o[i]=!0;for(i in o)i in e?i in t?t[i]!==e[i]&&(r[i]=e[i],n[i]=t[i]):(r[i]=e[i],n[i]=!1):(r[i]=!1,n[i]=t[i])},a.prototype.toggleLineAttribute=function(t,e){var r,n=this.getCurrentLineAttributes_();r=!(t in n&&n[t]===e)&&e,this.setLineAttribute(t,r)},a.prototype.setLineAttribute=function(t,e){this.updateLineAttributesForSelection(function(r){!1===e?delete r[t]:r[t]=e})},a.prototype.updateLineAttributesForSelection=function(t){var e=this.codeMirror,r=e.getCursor(\"start\"),n=e.getCursor(\"end\"),i=r.line,o=n.line,s=e.getLine(o),a=this.areLineSentinelCharacters_(s.substr(0,n.ch));o>i&&a&&o--,this.updateLineAttributes(i,o,t)},a.prototype.updateLineAttributes=function(t,e,r){for(var n=t;n<=e;n++){var o=this.codeMirror.getLine(n),s=this.codeMirror.indexFromPos({line:n,ch:0});if(o[0]!==h){var a={};a[i.LINE_SENTINEL]=!0,r(a),this.insertText(s,h,a)}else this.updateTextAttributes(s,s+1,r,null,!0)}},a.prototype.replaceText=function(t,e,r,n,i){this.changeId_++;var o=\"cmrt-\"+this.changeId_;this.outstandingChanges_[o]={origOrigin:i,attributes:n};var s=this.codeMirror,a=s.posFromIndex(t),h=\"number\"==typeof e?s.posFromIndex(e):null;s.replaceRange(r,a,h,o)},a.prototype.insertText=function(t,e,r,n){var i=this.codeMirror,o=i.getCursor(),s=\"RTCMADAPTER\"==n&&!i.somethingSelected()&&t==i.indexFromPos(o);this.replaceText(t,null,e,r,n),s&&i.setCursor(o)},a.prototype.removeText=function(t,e,r){var n=this.codeMirror;n.replaceRange(\"\",n.posFromIndex(t),n.posFromIndex(e),r)},a.prototype.insertEntityAtCursor=function(t,e,r){var n=this.codeMirror,i=n.indexFromPos(n.getCursor(\"head\"));this.insertEntityAt(i,t,e,r)},a.prototype.insertEntityAt=function(t,e,r,i){this.codeMirror;this.insertEntity_(t,new n.Entity(e,r),i)},a.prototype.insertEntity_=function(t,e,r){this.replaceText(t,null,c,e.toAttributes(),r)},a.prototype.getAttributeSpans=function(t,r){for(var n=[],i=this.annotationList_.getAnnotatedSpansForSpan(new e(t,r-t)),o=0;o<i.length;o++)n.push({length:i[o].length,attributes:i[o].annotation.attributes});return n},a.prototype.end=function(){var t=this.codeMirror.lineCount()-1;return this.codeMirror.indexFromPos({line:t,ch:this.codeMirror.getLine(t).length})},a.prototype.getRange=function(t,e){var r=this.codeMirror.posFromIndex(t),n=this.codeMirror.posFromIndex(e);return this.codeMirror.getRange(r,n)},a.prototype.initAnnotationList_=function(){var t=this.end();0!==t&&this.annotationList_.insertAnnotatedSpan(new e(0,t),new d)},a.prototype.onAnnotationsChanged_=function(t,e){var r,n={};this.tryToUpdateEntitiesInPlace(t,e);for(var o=0;o<t.length;o++){var s=t[o].annotation.attributes;i.LINE_SENTINEL in s&&(n[this.codeMirror.posFromIndex(t[o].pos).line]=!0),(r=t[o].getAttachedObject())&&r.clear()}for(o=0;o<e.length;o++){var a=e[o].annotation,h=i.LINE_SENTINEL in a.attributes,c=i.ENTITY_SENTINEL in a.attributes,u=this.codeMirror.posFromIndex(e[o].pos);if(h)n[u.line]=!0;else if(c)this.markEntity_(e[o]);else{var l=this.getClassNameForAttributes_(a.attributes);if(\"\"!==l){var p=this.codeMirror.posFromIndex(e[o].pos+e[o].length);r=this.codeMirror.markText(u,p,{className:l}),e[o].attachObject(r)}}}for(var d in n)this.dirtyLines_.push(this.codeMirror.getLineHandle(Number(d))),this.queueLineMarking_()},a.prototype.tryToUpdateEntitiesInPlace=function(t,e){for(var r=t.length;r--;)for(var n=t[r],i=e.length;i--;){var o=e[i];if(n.pos==o.pos&&n.length==o.length&&n.annotation.attributes.ent&&n.annotation.attributes.ent==o.annotation.attributes.ent){var s=o.annotation.attributes.ent;if(this.entityManager_.entitySupportsUpdate(s)){t.splice(r,1),e.splice(i,1);var a=n.getAttachedObject();a.update(o.annotation.attributes),o.attachObject(a)}}}},a.prototype.queueLineMarking_=function(){if(null==this.lineMarkTimeout_){var t=this;this.lineMarkTimeout_=setTimeout(function(){t.lineMarkTimeout_=null;for(var e=[],r=0;r<t.dirtyLines_.length;r++){var n=t.codeMirror.getLineNumber(t.dirtyLines_[r]);e.push(Number(n))}t.dirtyLines_=[],e.sort(function(t,e){return t-e});var i=-1;for(r=0;r<e.length;r++){var o=e[r];o>i&&(i=t.markLineSentinelCharactersForChangedLines_(o,o))}},0)}},a.prototype.addStyleWithCSS_=function(t){var e=document.getElementsByTagName(\"head\")[0],r=document.createElement(\"style\");r.type=\"text/css\",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),e.appendChild(r)},a.prototype.getClassNameForAttributes_=function(t){var e=\"\";for(var r in t){var a=t[r];if(r===i.LINE_SENTINEL)n.utils.assert(!0===a,\"LINE_SENTINEL attribute should be true if it exists.\");else{var h=(this.options_.cssPrefix||\"cmrt-\")+r;if(!0!==a){r===i.FONT_SIZE&&\"string\"!=typeof a&&(a+=\"px\");var c=a.toString().toLowerCase().replace(/[^a-z0-9-_]/g,\"-\");if(h+=\"-\"+c,o[r]&&(s[r]||(s[r]={}),!s[r][c])){s[r][c]=!0;var u=o[r],l=\"function\"==typeof u?u(a):u+\": \"+a,p=r==i.LINE_INDENT?\"pre.\"+h:\".\"+h;if(this.addStyleWithCSS_(p+\" { \"+l+\" }\"),r===i.LINE_INDENT){p=\"pre.CodeMirror-line.\"+h;this.addStyleWithCSS_(p+\" { \"+l+\" }\")}}}e=e+\" \"+h}}return e},a.prototype.markEntity_=function(t){for(var e=t.annotation.attributes,r=n.Entity.fromAttributes(e),i=this.codeMirror,o=this,s=[],a=0;a<t.length;a++){var h=i.posFromIndex(t.pos+a),c=i.posFromIndex(t.pos+a+1),u={collapsed:!0,atomic:!0,inclusiveLeft:!1,inclusiveRight:!1},l=this.createEntityHandle_(r,t.pos),p=this.entityManager_.renderToElement(r,l);p&&(u.replacedWith=p);var d=i.markText(h,c,u);s.push(d),l.setMarker(d)}t.attachObject({clear:function(){for(var t=0;t<s.length;t++)s[t].clear()},update:function(t){for(var e=n.Entity.fromAttributes(t),r=0;r<s.length;r++)o.entityManager_.updateElement(e,s[r].replacedWith)}}),this.queueRefresh_()},a.prototype.queueRefresh_=function(){var t=this;this.refreshTimer_||(this.refreshTimer_=setTimeout(function(){t.codeMirror.refresh(),t.refreshTimer_=null},0))},a.prototype.createEntityHandle_=function(t,e){var r=null,i=this;function o(){if(r){var t=r.find();return t?i.codeMirror.indexFromPos(t.from):null}return e}return{find:o,remove:function(){var t=o();null!=t&&(i.codeMirror.focus(),i.removeText(t,t+1))},replace:function(e){var r=n.AttributeConstants.ENTITY_SENTINEL,s=r+\"_\",a=o();i.updateTextAttributes(a,a+1,function(n){for(var i in n)delete n[i];for(var o in n[r]=t.type,e)n[s+o]=e[o]})},setMarker:function(t){r=t}}},a.prototype.lineClassRemover_=function(t){var e=this.codeMirror,r=e.getLineHandle(t);return{clear:function(){e.removeLineClass(r,\"text\",\".*\")}}},a.prototype.emptySelection_=function(){var t=this.codeMirror.getCursor(\"start\"),e=this.codeMirror.getCursor(\"end\");return t.line===e.line&&t.ch===e.ch},a.prototype.onCodeMirrorBeforeChange_=function(t,e){if(\"+input\"===e.origin||\"paste\"===e.origin){for(var r=[],n=0;n<e.text.length;n++){var i=e.text[n];i=i.replace(new RegExp(\"[\"+h+c+\"]\",\"g\"),\"\"),r.push(i)}e.update(e.from,e.to,r)}},a.prototype.onCodeMirrorChange_=function(t,r){if(\"object\"==typeof r.from){for(var n=[];r;)n.push(r),r=r.next;r=n}for(var i=this.convertCoordinateSystemForChanges_(r),o=[],s=0;s<i.length;s++){var a,h=i[s],c=h.start,u=(h.end,h.text),l=h.removed,p=h.origin;if(l.length>0){for(var f=this.annotationList_.getAnnotatedSpansForSpan(new e(c,l.length)),g=0,m=0;m<f.length;m++){var y=f[m];o.push({start:c,end:c+y.length,removedAttributes:y.annotation.attributes,removed:l.substr(g,y.length),attributes:{},text:\"\",origin:h.origin}),g+=y.length}this.annotationList_.removeSpan(new e(c,l.length))}if(u.length>0)\"+input\"===h.origin||\"paste\"===h.origin?a=this.currentAttributes_||{}:p in this.outstandingChanges_?(a=this.outstandingChanges_[p].attributes,p=this.outstandingChanges_[p].origOrigin,delete this.outstandingChanges_[p]):a={},this.annotationList_.insertAnnotatedSpan(new e(c,u.length),new d(a)),o.push({start:c,end:c,removedAttributes:{},removed:\"\",text:u,attributes:a,origin:p})}this.markLineSentinelCharactersForChanges_(r),o.length>0&&this.trigger(\"change\",this,o)},a.prototype.convertCoordinateSystemForChanges_=function(t){var e=this,r=function(t){return e.codeMirror.indexFromPos(t)};function n(t,e){return function(r){return l(r,e.from)?t(r):l(e.to,r)?t({line:r.line+e.text.length-1-(e.to.line-e.from.line),ch:e.to.line<r.line?r.ch:e.text.length<=1?r.ch-(e.to.ch-e.from.ch)+p(e.text):r.ch-e.to.ch+(n=e.text,n[n.length-1]).length})+p(e.removed)-p(e.text):e.from.line===r.line?t(e.from)+r.ch-e.from.ch:t(e.from)+p(e.removed.slice(0,r.line-e.from.line))+1+r.ch;var n}}for(var i=[],o=t.length-1;o>=0;o--){var s=t[o],a=(r=n(r,s))(s.from),h=s.removed.join(\"\\n\"),c=s.text.join(\"\\n\");i.unshift({start:a,end:a+h.length,removed:h,text:c,origin:s.origin})}return i},a.prototype.markLineSentinelCharactersForChanges_=function(t){for(var e=Number.MAX_VALUE,r=-1,n=0;n<t.length;n++){var i=t[n],o=i.from.line;i.from.ch;(i.removed.length>1||i.removed[0].indexOf(h)>=0)&&(e=Math.min(e,o),r=Math.max(r,o)),i.text.length>1?(e=Math.min(e,o),r=Math.max(r,o+i.text.length-1)):i.text[0].indexOf(h)>=0&&(e=Math.min(e,o),r=Math.max(r,o))}r=Math.min(r,this.codeMirror.lineCount()-1),this.markLineSentinelCharactersForChangedLines_(e,r)},a.prototype.markLineSentinelCharactersForChangedLines_=function(t,e){if(t<Number.MAX_VALUE)for(;t>0&&this.lineIsListItemOrIndented_(t-1);)t--;if(e>-1)for(var r=this.codeMirror.lineCount();e+1<r&&this.lineIsListItemOrIndented_(e+1);)e++;for(var n=[],i=this.codeMirror,o=t;o<=e;o++){var s=i.getLine(o),a=i.getLineHandle(o);if(i.removeLineClass(a,\"text\",\".*\"),s.length>0)for(var c=s.indexOf(h);c>=0;){for(var u=c;c<s.length&&s[c]===h;){for(var l=i.findMarksAt({line:o,ch:c}),p=0;p<l.length;p++)l[p].isForLineSentinel&&l[p].clear();c++}this.markLineSentinelCharacters_(o,u,c,n),c=s.indexOf(h,c)}else n=[]}return e},a.prototype.markLineSentinelCharacters_=function(t,e,r,n){var o=this.codeMirror,s=null,a=null,h=function(){var t=a.find();return t?t.from.line:null};if(0===e){var c=this.getLineAttributes_(t),u=c[i.LIST_TYPE],l=c[i.LINE_INDENT]||0;for(u&&0===l&&(l=1);l>=n.length;)n.push(1);\"o\"===u?(s=this.makeOrderedListElement_(n[l]),n[l]++):\"u\"===u?(s=this.makeUnorderedListElement_(),n[l]=1):\"t\"===u?(s=this.makeTodoListElement_(!1,h),n[l]=1):\"tc\"===u&&(s=this.makeTodoListElement_(!0,h),n[l]=1);var p=this.getClassNameForAttributes_(c);\"\"!==p&&this.codeMirror.addLineClass(t,\"text\",p),n[l+1]=1}var d={inclusiveLeft:!0,collapsed:!0};s&&(d.replacedWith=s),(a=o.markText({line:t,ch:e},{line:t,ch:r},d)).isForLineSentinel=!0},a.prototype.makeOrderedListElement_=function(t){return r.elt(\"div\",t+\".\",{class:\"firepad-list-left\"})},a.prototype.makeUnorderedListElement_=function(){return r.elt(\"div\",\"•\",{class:\"firepad-list-left\"})},a.prototype.toggleTodo=function(t){var e,r=i.LIST_TYPE,n=this.getCurrentLineAttributes_();r in n&&(\"t\"===n[r]||\"tc\"===n[r])?\"t\"===n[r]?e=\"tc\":\"tc\"===n[r]&&(e=!!t&&\"t\"):e=\"t\",this.setLineAttribute(r,e)},a.prototype.makeTodoListElement_=function(t,e){var n={type:\"checkbox\",class:\"firepad-todo-left\"};t&&(n.checked=!0);var i=r.elt(\"input\",!1,n),o=this;return r.on(i,\"click\",r.stopEventAnd(function(t){o.codeMirror.setCursor({line:e(),ch:1}),o.toggleTodo(!0)})),i},a.prototype.lineIsListItemOrIndented_=function(t){var e=this.getLineAttributes_(t);return!1!==(e[i.LIST_TYPE]||!1)||0!==(e[i.LINE_INDENT]||0)},a.prototype.onCursorActivity_=function(){var t=this;setTimeout(function(){t.updateCurrentAttributes_()},1)},a.prototype.getCurrentAttributes_=function(){return this.currentAttributes_||this.updateCurrentAttributes_(),this.currentAttributes_},a.prototype.updateCurrentAttributes_=function(){var t=this.codeMirror,e=t.indexFromPos(t.getCursor(\"anchor\")),r=t.indexFromPos(t.getCursor(\"head\")),o=r;if(e>r){for(;o<this.end();){var s=this.getRange(o,o+1);if(\"\\n\"!==s&&s!==h)break;o++}o<this.end()&&o++}else for(;o>0&&(\"\\n\"===(s=this.getRange(o-1,o))||s===h);)o--;var a=this.annotationList_.getAnnotatedSpansForPos(o);this.currentAttributes_={};var c={};for(var u in a.length>0&&!(i.LINE_SENTINEL in a[0].annotation.attributes)?c=a[0].annotation.attributes:a.length>1&&(n.utils.assert(!(i.LINE_SENTINEL in a[1].annotation.attributes),\"Cursor can't be between two line sentinel characters.\"),c=a[1].annotation.attributes),c)\"l\"!==u&&\"lt\"!==u&&\"li\"!==u&&0!==u.indexOf(i.ENTITY_SENTINEL)&&(this.currentAttributes_[u]=c[u])},a.prototype.getCurrentLineAttributes_=function(){var t=this.codeMirror,e=t.getCursor(\"anchor\"),r=t.getCursor(\"head\"),n=r.line;return 0===r.ch&&e.line<r.line&&n--,this.getLineAttributes_(n)},a.prototype.getLineAttributes_=function(t){var r={},i=this.codeMirror.getLine(t);if(i.length>0&&i[0]===h){var o=this.codeMirror.indexFromPos({line:t,ch:0}),s=this.annotationList_.getAnnotatedSpansForSpan(new e(o,1));for(var a in n.utils.assert(1===s.length),s[0].annotation.attributes)r[a]=s[0].annotation.attributes[a]}return r},a.prototype.clearAnnotations_=function(){this.annotationList_.updateSpan(new e(0,this.end()),function(t,e){return new d({})})},a.prototype.newline=function(){var t=this.codeMirror,e=this;if(this.emptySelection_()){var r=t.getCursor(\"head\").line,n=this.getLineAttributes_(r),o=n[i.LIST_TYPE];o&&1===t.getLine(r).length?this.updateLineAttributes(r,r,function(t){delete t[i.LIST_TYPE],delete t[i.LINE_INDENT]}):(t.replaceSelection(\"\\n\",\"end\",\"+input\"),this.updateLineAttributes(r+1,r+1,function(t){for(var s in n)t[s]=n[s];\"tc\"===o&&(t[i.LIST_TYPE]=\"t\"),e.trigger(\"newLine\",{line:r+1,attr:t})}))}else t.replaceSelection(\"\\n\",\"end\",\"+input\")},a.prototype.deleteLeft=function(){var t=this.codeMirror,e=t.getCursor(\"head\"),r=this.getLineAttributes_(e.line),n=r[i.LIST_TYPE],o=r[i.LINE_INDENT],s=this.emptySelection_()&&1===e.ch;s&&n?this.updateLineAttributes(e.line,e.line,function(t){delete t[i.LIST_TYPE],delete t[i.LINE_INDENT]}):s&&o&&o>0?this.unindent():t.deleteH(-1,\"char\")},a.prototype.deleteRight=function(){var t=this.codeMirror,e=t.getCursor(\"head\"),r=t.getLine(e.line),n=this.areLineSentinelCharacters_(r),i=e.line+1<t.lineCount()?t.getLine(e.line+1):\"\";this.emptySelection_()&&n&&i[0]===h?(t.replaceRange(\"\",{line:e.line,ch:0},{line:e.line+1,ch:0},\"+input\"),t.setCursor({line:e.line,ch:0})):t.deleteH(1,\"char\")},a.prototype.indent=function(){this.updateLineAttributesForSelection(function(t){var e=t[i.LINE_INDENT],r=t[i.LIST_TYPE];e?t[i.LINE_INDENT]++:t[i.LINE_INDENT]=r?2:1})},a.prototype.unindent=function(){this.updateLineAttributesForSelection(function(t){var e=t[i.LINE_INDENT];e&&e>1?t[i.LINE_INDENT]=e-1:(delete t[i.LIST_TYPE],delete t[i.LINE_INDENT])})},a.prototype.getText=function(){return this.codeMirror.getValue().replace(new RegExp(h,\"g\"),\"\")},a.prototype.areLineSentinelCharacters_=function(t){for(var e=0;e<t.length;e++)if(t[e]!==h)return!1;return!0},d.prototype.equals=function(t){if(!(t instanceof d))return!1;var e;for(e in this.attributes)if(t.attributes[e]!==this.attributes[e])return!1;for(e in t.attributes)if(t.attributes[e]!==this.attributes[e])return!1;return!0},a}(),(n=n||{}).RichTextCodeMirrorAdapter=function(){\"use strict\";var t=n.TextOperation,e=n.WrappedOperation,r=n.Cursor;function i(t){this.rtcm=t,this.cm=t.codeMirror,h(this,\"onChange\"),h(this,\"onAttributesChange\"),h(this,\"onCursorActivity\"),h(this,\"onFocus\"),h(this,\"onBlur\"),this.rtcm.on(\"change\",this.onChange),this.rtcm.on(\"attributesChange\",this.onAttributesChange),this.cm.on(\"cursorActivity\",this.onCursorActivity),this.cm.on(\"focus\",this.onFocus),this.cm.on(\"blur\",this.onBlur)}function o(t,e){return t.line<e.line?-1:t.line>e.line?1:t.ch<e.ch?-1:t.ch>e.ch?1:0}function s(t){var e=t.lineCount()-1;return t.indexFromPos({line:e,ch:t.getLine(e).length})}function a(t,e){if(!t)throw new Error(e||\"assertion error\")}function h(t,e){var r=t[e];t[e]=function(){r.apply(t,arguments)}}function c(t){for(var e in t)return!1;return!0}function u(t,e){if(\"string\"!=typeof t)throw new TypeError(\"Expected a string\");3===(t=t.replace(/^#/,\"\")).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var r,n=parseInt(t,16),i=[n>>16,n>>8&255,255&n],o=\"rgb\";return null!==(r=e)&&void 0!==r&&(o=\"rgba\",i.push(e)),o+\"(\"+i.join(\",\")+\")\"}return i.prototype.detach=function(){this.rtcm.off(\"change\",this.onChange),this.rtcm.off(\"attributesChange\",this.onAttributesChange),this.cm.off(\"cursorActivity\",this.onCursorActivity),this.cm.off(\"focus\",this.onFocus),this.cm.off(\"blur\",this.onBlur)},i.operationFromCodeMirrorChanges=function(e,r){for(var n=s(r),i=(new t).retain(n),o=(new t).retain(n),a=e.length-1;a>=0;a--){var h=e[a],c=h.start,u=n-c-h.text.length;i=(new t).retain(c).delete(h.removed.length).insert(h.text,h.attributes).retain(u).compose(i),o=o.compose((new t).retain(c).delete(h.text.length).insert(h.removed,h.removedAttributes).retain(u)),n+=h.removed.length-h.text.length}return[i,o]},i.operationFromAttributesChanges=function(e,r){for(var n=s(r),i=new t,o=new t,h=0,c=0;c<e.length;c++){var u=e[c],l=u.start-h;a(l>=0),i.retain(l),o.retain(l);var p=u.end-u.start;i.retain(p,u.attributes),o.retain(p,u.attributesInverse),h=u.start+p}return i.retain(n-h),o.retain(n-h),[i,o]},i.prototype.registerCallbacks=function(t){this.callbacks=t},i.prototype.onChange=function(t,e){if(\"RTCMADAPTER\"!==e[0].origin){var r=i.operationFromCodeMirrorChanges(e,this.cm);this.trigger(\"change\",r[0],r[1])}},i.prototype.onAttributesChange=function(t,e){if(\"RTCMADAPTER\"!==e[0].origin){var r=i.operationFromAttributesChanges(e,this.cm);this.trigger(\"change\",r[0],r[1])}},i.prototype.onCursorActivity=function(){var t=this;setTimeout(function(){t.trigger(\"cursorActivity\")},1)},i.prototype.onFocus=function(){this.trigger(\"focus\")},i.prototype.onBlur=function(){this.cm.somethingSelected()||this.trigger(\"blur\")},i.prototype.getValue=function(){return this.cm.getValue()},i.prototype.getCursor=function(){var t,e=this.cm,n=e.getCursor(),i=e.indexFromPos(n);if(e.somethingSelected()){var s=e.getCursor(!0),a=0===o(n,s)?e.getCursor(!1):s;t=e.indexFromPos(a)}else t=i;return new r(i,t)},i.prototype.setCursor=function(t){this.cm.setSelection(this.cm.posFromIndex(t.position),this.cm.posFromIndex(t.selectionEnd))},i.prototype.addStyleRule=function(t){if(\"undefined\"!=typeof document&&null!==document){if(!this.addedStyleRules){this.addedStyleRules={};var e=document.createElement(\"style\");document.documentElement.getElementsByTagName(\"head\")[0].appendChild(e),this.addedStyleSheet=e.sheet}if(!this.addedStyleRules[t])return this.addedStyleRules[t]=!0,this.addedStyleSheet.insertRule(t,0)}},i.prototype.setOtherCursor=function(t,e,r){var n=this.cm.posFromIndex(t.position);if(\"string\"==typeof e&&e.match(/^#[a-fA-F0-9]{3,6}$/)){var i=this.rtcm.end();if(\"object\"==typeof t&&\"number\"==typeof t.position&&\"number\"==typeof t.selectionEnd&&!(t.position<0||t.position>i||t.selectionEnd<0||t.selectionEnd>i)){if(t.position===t.selectionEnd){var o=this.cm.cursorCoords(n),s=document.createElement(\"span\");return s.className=\"other-client\",s.style.borderLeftWidth=\"2px\",s.style.borderLeftStyle=\"solid\",s.style.borderLeftColor=e,s.style.marginLeft=s.style.marginRight=\"-1px\",s.style.height=.9*(o.bottom-o.top)+\"px\",s.setAttribute(\"data-clientid\",r),s.style.zIndex=0,this.cm.setBookmark(n,{widget:s,insertLeft:!0})}var a,h,c=\"selection-\"+e.replace(\"#\",\"\"),l=\".\"+c+\" { background: \"+u(e)+\";\\n background: \"+u(e,.4)+\";}\";return this.addStyleRule(l),t.selectionEnd>t.position?(a=n,h=this.cm.posFromIndex(t.selectionEnd)):(a=this.cm.posFromIndex(t.selectionEnd),h=n),this.cm.markText(a,h,{className:c})}}},i.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1),r=this.callbacks&&this.callbacks[t];r&&r.apply(this,e)},i.prototype.applyOperation=function(t){t.ops.length>10&&this.rtcm.codeMirror.getWrapperElement().setAttribute(\"style\",\"display: none\");for(var e=t.ops,r=0,n=0,i=e.length;n<i;n++){var o=e[n];o.isRetain()?(c(o.attributes)||this.rtcm.updateTextAttributes(r,r+o.chars,function(t){for(var e in o.attributes)!1===o.attributes[e]?delete t[e]:t[e]=o.attributes[e]},\"RTCMADAPTER\",!0),r+=o.chars):o.isInsert()?(this.rtcm.insertText(r,o.text,o.attributes,\"RTCMADAPTER\"),r+=o.text.length):o.isDelete()&&this.rtcm.removeText(r,r+o.chars,\"RTCMADAPTER\")}t.ops.length>10&&(this.rtcm.codeMirror.getWrapperElement().setAttribute(\"style\",\"\"),this.rtcm.codeMirror.refresh())},i.prototype.registerUndo=function(t){this.cm.undo=t},i.prototype.registerRedo=function(t){this.cm.redo=t},i.prototype.invertOperation=function(r){for(var n,i,o=0,s=this.rtcm.codeMirror,a=new t,h=0;h<r.wrapped.ops.length;h++){var u=r.wrapped.ops[h];if(u.isRetain())if(c(u.attributes))a.retain(u.chars),o+=u.chars;else for(n=this.rtcm.getAttributeSpans(o,o+u.chars),i=0;i<n.length;i++){var l={};for(var p in u.attributes){var d=u.attributes[p],f=n[i].attributes[p];!1===d?f&&(l[p]=f):d!==f&&(l[p]=f||!1)}a.retain(n[i].length,l),o+=n[i].length}else if(u.isInsert())a.delete(u.text.length);else if(u.isDelete()){var g=s.getRange(s.posFromIndex(o),s.posFromIndex(o+u.chars));n=this.rtcm.getAttributeSpans(o,o+u.chars);var m=0;for(i=0;i<n.length;i++)a.insert(g.substr(m,n[i].length),n[i].attributes),m+=n[i].length;o+=u.chars}}return new e(a,r.meta.invert())},i}(),(n=n||{}).Formatting=function(){var t=n.AttributeConstants;function e(t){if(!(this instanceof e))return new e(t);this.attributes=t||{}}return e.prototype.cloneWithNewAttribute_=function(t,r){var n={};for(var i in this.attributes)n[i]=this.attributes[i];return!1===r?delete n[t]:n[t]=r,new e(n)},e.prototype.bold=function(e){return this.cloneWithNewAttribute_(t.BOLD,e)},e.prototype.italic=function(e){return this.cloneWithNewAttribute_(t.ITALIC,e)},e.prototype.underline=function(e){return this.cloneWithNewAttribute_(t.UNDERLINE,e)},e.prototype.strike=function(e){return this.cloneWithNewAttribute_(t.STRIKE,e)},e.prototype.font=function(e){return this.cloneWithNewAttribute_(t.FONT,e)},e.prototype.fontSize=function(e){return this.cloneWithNewAttribute_(t.FONT_SIZE,e)},e.prototype.color=function(e){return this.cloneWithNewAttribute_(t.COLOR,e)},e.prototype.backgroundColor=function(e){return this.cloneWithNewAttribute_(t.BACKGROUND_COLOR,e)},e}(),(n=n||{}).Text=function(){return function t(e,r){if(!(this instanceof t))return new t(e,r);this.text=e,this.formatting=r||n.Formatting()}}(),(n=n||{}).LineFormatting=function(){var t=n.AttributeConstants;function e(r){if(!(this instanceof e))return new e(r);this.attributes=r||{},this.attributes[t.LINE_SENTINEL]=!0}return e.LIST_TYPE={NONE:!1,ORDERED:\"o\",UNORDERED:\"u\",TODO:\"t\",TODOCHECKED:\"tc\"},e.prototype.cloneWithNewAttribute_=function(t,r){var n={};for(var i in this.attributes)n[i]=this.attributes[i];return!1===r?delete n[t]:n[t]=r,new e(n)},e.prototype.indent=function(e){return this.cloneWithNewAttribute_(t.LINE_INDENT,e)},e.prototype.align=function(e){return this.cloneWithNewAttribute_(t.LINE_ALIGN,e)},e.prototype.listItem=function(e){return n.utils.assert(!1===e||\"u\"===e||\"o\"===e||\"t\"===e||\"tc\"===e),this.cloneWithNewAttribute_(t.LIST_TYPE,e)},e.prototype.getIndent=function(){return this.attributes[t.LINE_INDENT]||0},e.prototype.getAlign=function(){return this.attributes[t.LINE_ALIGN]||0},e.prototype.getListItem=function(){return this.attributes[t.LIST_TYPE]||!1},e}(),(n=n||{}).Line=function(){return function t(e,r){if(!(this instanceof t))return new t(e,r);\"[object Array]\"!==Object.prototype.toString.call(e)&&(e=void 0===e?[]:[e]),this.textPieces=e,this.formatting=r||n.LineFormatting()}}(),(n=n||{}).ParseHtml=function(){var t,e=n.LineFormatting.LIST_TYPE;function r(t,r,i){this.listType=t||e.UNORDERED,this.lineFormatting=r||n.LineFormatting(),this.textFormatting=i||n.Formatting()}function i(){this.lines=[],this.currentLine=[],this.currentLineListItemType=null}r.prototype.withTextFormatting=function(t){return new r(this.listType,this.lineFormatting,t)},r.prototype.withLineFormatting=function(t){return new r(this.listType,t,this.textFormatting)},r.prototype.withListType=function(t){return new r(t,this.lineFormatting,this.textFormatting)},r.prototype.withIncreasedIndent=function(){var t=this.lineFormatting.indent(this.lineFormatting.getIndent()+1);return new r(this.listType,t,this.textFormatting)},r.prototype.withAlign=function(t){var e=this.lineFormatting.align(t);return new r(this.listType,e,this.textFormatting)},i.prototype.newlineIfNonEmpty=function(t){this.cleanLine_(),this.currentLine.length>0&&this.newline(t)},i.prototype.newlineIfNonEmptyOrListItem=function(t){this.cleanLine_(),(this.currentLine.length>0||null!==this.currentLineListItemType)&&this.newline(t)},i.prototype.newline=function(t){this.cleanLine_();var e=t.lineFormatting;null!==this.currentLineListItemType&&(e=e.listItem(this.currentLineListItemType),this.currentLineListItemType=null),this.lines.push(n.Line(this.currentLine,e)),this.currentLine=[]},i.prototype.makeListItem=function(t){this.currentLineListItemType=t},i.prototype.cleanLine_=function(){if(this.currentLine.length>0){var t=this.currentLine.length-1;this.currentLine[0].text=this.currentLine[0].text.replace(/^ +/,\"\"),this.currentLine[t].text=this.currentLine[t].text.replace(/ +$/g,\"\");for(var e=0;e<this.currentLine.length;e++)this.currentLine[e].text=this.currentLine[e].text.replace(/\\u00a0/g,\" \")}1===this.currentLine.length&&\"\"===this.currentLine[0].text&&(this.currentLine=[])};var o=o||{ELEMENT_NODE:1,TEXT_NODE:3};function s(r,i,s){if(r.nodeType===o.ELEMENT_NODE){var h=t.fromElement(r);if(h)return void s.currentLine.push(new n.Text(n.sentinelConstants.ENTITY_SENTINEL_CHARACTER,new n.Formatting(h.toAttributes())))}switch(r.nodeType){case o.TEXT_NODE:var c=r.nodeValue.replace(/[ \\n\\t]+/g,\" \");s.currentLine.push(n.Text(c,i.textFormatting));break;case o.ELEMENT_NODE:switch(i=function(t,e){for(var r=t.textFormatting,i=t.lineFormatting,o=e.split(\";\"),s=0;s<o.length;s++){var a=o[s].split(\":\");if(2===a.length){var h=n.utils.trim(a[0]).toLowerCase(),c=n.utils.trim(a[1]).toLowerCase();switch(h){case\"text-decoration\":var u=c.indexOf(\"underline\")>=0,l=c.indexOf(\"line-through\")>=0;r=r.underline(u).strike(l);break;case\"font-weight\":var p=\"bold\"===c||parseInt(c)>=600;r=r.bold(p);break;case\"font-style\":var d=\"italic\"===c||\"oblique\"===c;r=r.italic(d);break;case\"color\":r=r.color(c);break;case\"background-color\":r=r.backgroundColor(c);break;case\"text-align\":i=i.align(c);break;case\"font-size\":var f=null;n.utils.stringEndsWith(c,[\"px\",\"pt\",\"%\",\"em\",\"xx-small\",\"x-small\",\"small\",\"medium\",\"large\",\"x-large\",\"xx-large\",\"smaller\",\"larger\"])?f=c:parseInt(c)&&(f=parseInt(c)+\"px\"),f&&(r=r.fontSize(f));break;case\"font-family\":var g=n.utils.trim(c.split(\",\")[0]);g=(g=g.replace(/['\"]/g,\"\")).replace(/\\w\\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}),r=r.font(g)}}}return t.withLineFormatting(i).withTextFormatting(r)}(i,r.getAttribute(\"style\")||\"\"),r.nodeName.toLowerCase()){case\"div\":case\"h1\":case\"h2\":case\"h3\":case\"p\":s.newlineIfNonEmpty(i),a(r,i,s),s.newlineIfNonEmpty(i);break;case\"center\":i=i.withAlign(\"center\"),s.newlineIfNonEmpty(i),a(r,i.withAlign(\"center\"),s),s.newlineIfNonEmpty(i);break;case\"b\":case\"strong\":a(r,i.withTextFormatting(i.textFormatting.bold(!0)),s);break;case\"u\":a(r,i.withTextFormatting(i.textFormatting.underline(!0)),s);break;case\"i\":case\"em\":a(r,i.withTextFormatting(i.textFormatting.italic(!0)),s);break;case\"s\":a(r,i.withTextFormatting(i.textFormatting.strike(!0)),s);break;case\"font\":var u=r.getAttribute(\"face\"),l=r.getAttribute(\"color\"),p=parseInt(r.getAttribute(\"size\"));u&&(i=i.withTextFormatting(i.textFormatting.font(u))),l&&(i=i.withTextFormatting(i.textFormatting.color(l))),p&&(i=i.withTextFormatting(i.textFormatting.fontSize(p))),a(r,i,s);break;case\"br\":s.newline(i);break;case\"ul\":s.newlineIfNonEmptyOrListItem(i);var d=\"firepad-todo\"===r.getAttribute(\"class\")?e.TODO:e.UNORDERED;a(r,i.withListType(d).withIncreasedIndent(),s),s.newlineIfNonEmpty(i);break;case\"ol\":s.newlineIfNonEmptyOrListItem(i),a(r,i.withListType(e.ORDERED).withIncreasedIndent(),s),s.newlineIfNonEmpty(i);break;case\"li\":!function(t,r,n){n.newlineIfNonEmptyOrListItem(r);var i=\"firepad-checked\"===t.getAttribute(\"class\")?e.TODOCHECKED:r.listType;n.makeListItem(i);var o=n.currentLine;a(t,r,n),(o===n.currentLine||n.currentLine.length>0)&&n.newline(r)}(r,i,s);break;case\"style\":break;default:a(r,i,s)}}}function a(t,e,r){if(t.hasChildNodes())for(var n=0;n<t.childNodes.length;n++)s(t.childNodes[n],e,r)}return function(e,o){var a=(n.document||document).createElement(\"div\");a.innerHTML=e,t=o;var h=new i;return s(a,new r,h),h.lines}}(),(n=n||{}).SerializeHtml=function(){var t=n.utils,e=n.AttributeConstants,r=n.LineFormatting.LIST_TYPE,i='<style>ul.firepad-todo { list-style: none; margin-left: 0; padding-left: 0; } ul.firepad-todo > li { padding-left: 1em; text-indent: -1em; } ul.firepad-todo > li:before { content: \"\\\\2610\"; padding-right: 5px; } ul.firepad-todo > li.firepad-checked:before { content: \"\\\\2611\"; padding-right: 5px; }</style>\\n';function o(t){return t===r.ORDERED?\"<ol>\":t===r.UNORDERED?\"<ul>\":'<ul class=\"firepad-todo\">'}function s(t){return t===r.ORDERED?\"</ol>\":\"</ul>\"}function a(t){return t.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#39;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\u00a0/g,\"&nbsp;\")}return function(h,c){for(var u,l,p=\"\",d=!0,f=[],g=!1,m=!0,y=!0,v=0,_=h.ops[v],b=!1;_;){t.assert(_.isInsert());var E=_.attributes;if(d){d=!1;var C=0,x=null,w=\"left\";e.LINE_SENTINEL in E&&(C=E[e.LINE_INDENT]||0,x=E[e.LIST_TYPE]||null,w=E[e.LINE_ALIGN]||\"left\"),x&&(C=C||1),g?(p+=\"</li>\",g=!1):m||(y&&(p+=\"<br/>\"),p+=\"</div>\"),m=!1,t.assert(C>=0,\"Indent must not be negative.\");for(;f.length>C||C===f.length&&null!==x&&(u=x,l=f[f.length-1],!(u===l||u===r.TODO&&l===r.TODOCHECKED||u===r.TODOCHECKED&&l===r.TODO));)p+=s(f.pop());for(;f.length<C;){var A=x||r.UNORDERED;b=x==r.TODO||x==r.TODOCHECKED||b,p+=o(A),f.push(A)}var T=\"left\"!==w?' style=\"text-align:'+w+'\"':\"\";if(x){var L=\"\";switch(x){case r.TODOCHECKED:L=' class=\"firepad-checked\"';break;case r.TODO:L=' class=\"firepad-unchecked\"'}p+=\"<li\"+L+T+\">\",g=!0}else p+=\"<div\"+T+\">\";y=!0}if(e.LINE_SENTINEL in E)_=h.ops[++v];else if(e.ENTITY_SENTINEL in E){for(var I=0;I<_.text.length;I++){var M=n.Entity.fromAttributes(E);p+=c.exportToElement(M).outerHTML}_=h.ops[++v]}else{var S=\"\",N=\"\";for(var k in E){var R,O,F=E[k];k===e.BOLD||k===e.ITALIC||k===e.UNDERLINE||k===e.STRIKE?(t.assert(!0===F),R=O=k):k===e.FONT_SIZE?(R='span style=\"font-size: '+F,R+=\"string\"!=typeof F||-1===F.indexOf(\"px\",F.length-2)?'px\"':'\"',O=\"span\"):k===e.FONT?(R='span style=\"font-family: '+F+'\"',O=\"span\"):k===e.COLOR?(R='span style=\"color: '+F+'\"',O=\"span\"):k===e.BACKGROUND_COLOR?(R='span style=\"background-color: '+F+'\"',O=\"span\"):t.log(!1,\"Encountered unknown attribute while rendering html: \"+k),R&&(S+=\"<\"+R+\">\"),O&&(N=\"</\"+O+\">\"+N)}var D=_.text,P=D.indexOf(\"\\n\");P>=0?(d=!0,_=P<D.length-1?new n.TextOp(\"insert\",D.substr(P+1),E):h.ops[++v],D=D.substr(0,P)):_=h.ops[++v],(D=D.replace(/  +/g,function(t){return new Array(t.length+1).join(\" \")}).replace(/^ /,\" \").replace(/ $/,\" \")).length>0&&(y=!1),p+=S+a(D)+N}}for(g?p+=\"</li>\":m||(y&&(p+=\"&nbsp;\"),p+=\"</div>\");f.length>0;)p+=s(f.pop());return b&&(p=i+p),p}}(),(n=n||{}).textPiecesToInserts=function(t,e){var r=[];function i(e,i){e instanceof n.Text&&(i=e.formatting.attributes,e=e.text),r.push({string:e,attributes:i}),t=\"\\n\"===e[e.length-1]}function o(e,r){t&&i(n.sentinelConstants.LINE_SENTINEL_CHARACTER,e.formatting.attributes);for(var o=0;o<e.textPieces.length;o++)i(e.textPieces[o]);r&&i(\"\\n\")}for(var s=0;s<e.length;s++)e[s]instanceof n.Line?o(e[s],s<e.length-1):i(e[s]);return r},(n=n||{}).Headless=function(){var t=n.TextOperation,e=n.FirebaseAdapter,r=n.EntityManager,i=n.ParseHtml;function o(t){if(!(this instanceof o))return new o(t);var n,i;\"string\"==typeof t?(void 0===window.firebase&&\"object\"!=typeof n?(console.log(\"REQUIRING\"),n=require(\"firebase/app\"),require(\"firebase/database\")):n=window.firebase,i=n.database().refFromURL(t)):i=t,this.entityManager_=new r,this.firebaseAdapter_=new e(i),this.ready_=!1,this.zombie_=!1}return o.prototype.getDocument=function(t){var e=this;if(e.ready_)return t(e.firebaseAdapter_.getDocument());e.firebaseAdapter_.on(\"ready\",function(){e.ready_=!0,t(e.firebaseAdapter_.getDocument())})},o.prototype.getText=function(t){if(this.zombie_)throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");this.getDocument(function(e){var r=e.apply(\"\");for(var i in n.sentinelConstants)r=r.replace(new RegExp(n.sentinelConstants[i],\"g\"),\"\");t(r)})},o.prototype.setText=function(e,r){if(this.zombie_)throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");var n=t().insert(e);this.sendOperationWithRetry(n,r)},o.prototype.initializeFakeDom=function(t){if(\"object\"==typeof document||\"object\"==typeof n.document)t();else{const e=require(\"jsdom\"),{JSDOM:r}=e,{window:i}=new r(\"<head></head><body></body>\");if(n.document)return i.close(),t();n.document=i.document,t()}},o.prototype.getHtml=function(t){var e=this;if(this.zombie_)throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");e.initializeFakeDom(function(){e.getDocument(function(r){t(n.SerializeHtml(r,e.entityManager_))})})},o.prototype.setHtml=function(e,r){var o=this;if(this.zombie_)throw new Error(\"You can't use a firepad.Headless after calling dispose()!\");o.initializeFakeDom(function(){for(var s=i(e,o.entityManager_),a=n.textPiecesToInserts(!0,s),h=new t,c=0;c<a.length;c++)h.insert(a[c].string,a[c].attributes);o.sendOperationWithRetry(h,r)})},o.prototype.sendOperationWithRetry=function(t,e){var r=this;r.getDocument(function(n){var i=t.clone().delete(n.targetLength);r.firebaseAdapter_.sendOperation(i,function(n,i){i?void 0!==e&&e(null,i):r.sendOperationWithRetry(t,e)})})},o.prototype.dispose=function(){this.zombie_=!0,this.firebaseAdapter_.dispose()},o}(),(n=n||{}).Firepad=function(t){if(!n.RichTextCodeMirrorAdapter)throw new Error(\"Oops! It looks like you're trying to include lib/firepad.js directly.  This is actually one of many source files that make up firepad.  You want dist/firepad.js instead.\");var e=n.RichTextCodeMirrorAdapter,r=n.RichTextCodeMirror,i=n.RichTextToolbar,o=n.ACEAdapter,s=n.MonacoAdapter,a=n.FirebaseAdapter,h=n.EditorClient,c=n.EntityManager,u=n.AttributeConstants,l=n.utils,p=(n.LineFormatting.LIST_TYPE,t.CodeMirror),d=t.ace;t.monaco;function f(n,i,u){if(!(this instanceof f))return new f(n,i,u);if(!p&&!d&&!t.monaco)throw new Error(\"Couldn't find CodeMirror, ACE or Monaco.  Did you forget to include codemirror.js/ace.js or import monaco?\");if(this.zombie_=!1,p&&i instanceof p){this.codeMirror_=this.editor_=i;var m=this.codeMirror_.getValue();if(\"\"!==m)throw new Error(\"Can't initialize Firepad with a CodeMirror instance that already contains text.\")}else if(d&&i&&i.session instanceof d.EditSession){if(this.ace_=this.editor_=i,\"\"!==(m=this.ace_.getValue()))throw new Error(\"Can't initialize Firepad with an ACE instance that already contains text.\")}else if(t.monaco&&i&&i instanceof t.monaco.constructor){if(t.monaco,this.monaco_=this.editor_=i,\"\"!==(m=this.monaco_.getValue()))throw new Error(\"Can't initialize Firepad with a Monaco instance that already contains text.\")}else this.codeMirror_=this.editor_=new p(i);var y;y=this.codeMirror_?this.codeMirror_.getWrapperElement():this.ace_?this.ace_.container:this.monaco_.getDomNode(),this.firepadWrapper_=l.elt(\"div\",null,{class:\"firepad\"}),y.parentNode.replaceChild(this.firepadWrapper_,y),this.firepadWrapper_.appendChild(y),this.editor_.firepad=this,this.options_=u||{},this.getOption(\"richTextShortcuts\",!1)&&(p.keyMap.richtext||this.initializeKeyMap_(),this.codeMirror_.setOption(\"keyMap\",\"richtext\"),this.firepadWrapper_.className+=\" firepad-richtext\"),this.imageInsertionUI=this.getOption(\"imageInsertionUI\",!0),this.getOption(\"richTextToolbar\",!1)&&(this.addToolbar_(),this.firepadWrapper_.className+=\" firepad-richtext firepad-with-toolbar\"),this.addPoweredByLogo_(),this.codeMirror_&&this.codeMirror_.refresh();var v=this.getOption(\"userId\",n.push().key),_=this.getOption(\"userColor\",function(t){for(var e=1,r=0;r<t.length;r++)e=17*(e+t.charCodeAt(r))%360;return function(t,e,r){if(0===e)return g(r,r,r);var n=r<.5?r*(1+e):r+e-e*r,i=2*r-n,o=function(t){return t<0&&(t+=1),t>1&&(t-=1),6*t<1?i+6*(n-i)*t:2*t<1?n:3*t<2?i+6*(n-i)*(2/3-t):i};return g(o(t+1/3),o(t),o(t-1/3))}(e/360,1,.75)}(v));this.entityManager_=new c,this.firebaseAdapter_=new a(n,v,_),this.codeMirror_?(this.richTextCodeMirror_=new r(this.codeMirror_,this.entityManager_,{cssPrefix:\"firepad-\"}),this.editorAdapter_=new e(this.richTextCodeMirror_)):this.ace_?this.editorAdapter_=new o(this.ace_):this.editorAdapter_=new s(this.monaco_),this.client_=new h(this.firebaseAdapter_,this.editorAdapter_);var b=this;this.firebaseAdapter_.on(\"cursor\",function(){b.trigger.apply(b,[\"cursor\"].concat([].slice.call(arguments)))}),this.codeMirror_&&this.richTextCodeMirror_.on(\"newLine\",function(){b.trigger.apply(b,[\"newLine\"].concat([].slice.call(arguments)))}),this.firebaseAdapter_.on(\"ready\",function(){b.ready_=!0,this.ace_&&this.editorAdapter_.grabDocumentState(),this.monaco_&&this.editorAdapter_.grabDocumentState();var t=b.getOption(\"defaultText\",null);t&&b.isHistoryEmpty()&&b.setText(t),b.trigger(\"ready\")}),this.client_.on(\"synced\",function(t){b.trigger(\"synced\",t)}),\"Microsoft Internet Explorer\"==navigator.appName&&navigator.userAgent.match(/MSIE 8\\./)&&(window.onload=function(){var t=document.getElementsByTagName(\"head\")[0],e=document.createElement(\"style\");e.type=\"text/css\",e.styleSheet.cssText=\":before,:after{content:none !important;}\",t.appendChild(e),setTimeout(function(){t.removeChild(e)},0)})}function g(t,e,r){function n(t){var e=Math.round(255*t).toString(16);return 1===e.length?\"0\"+e:e}return\"#\"+n(t)+n(e)+n(r)}return l.makeEventEmitter(f),f.fromCodeMirror=f,f.fromACE=f,f.fromMonaco=f,f.prototype.dispose=function(){this.zombie_=!0,this.codeMirror_?editorWrapper=this.codeMirror_.getWrapperElement():this.ace_?editorWrapper=this.ace_.container:editorWrapper=this.monaco_.getDomNode(),this.firepadWrapper_.removeChild(editorWrapper),this.firepadWrapper_.parentNode.replaceChild(editorWrapper,this.firepadWrapper_),this.editor_.firepad=null,this.codeMirror_&&\"richtext\"===this.codeMirror_.getOption(\"keyMap\")&&this.codeMirror_.setOption(\"keyMap\",\"default\"),this.firebaseAdapter_.dispose(),this.editorAdapter_.detach(),this.richTextCodeMirror_&&this.richTextCodeMirror_.detach()},f.prototype.setUserId=function(t){this.firebaseAdapter_.setUserId(t)},f.prototype.setUserColor=function(t){this.firebaseAdapter_.setColor(t)},f.prototype.getText=function(){return this.assertReady_(\"getText\"),this.codeMirror_?this.richTextCodeMirror_.getText():this.ace_?this.ace_.getSession().getDocument().getValue():this.monaco_.getModel().getValue()},f.prototype.setText=function(t){return this.assertReady_(\"setText\"),this.monaco_?this.monaco_.getModel().setValue(t):this.ace_?this.ace_.getSession().getDocument().setValue(t):(this.codeMirror_.getWrapperElement().style.display=\"none\",this.codeMirror_.setValue(\"\"),this.insertText(0,t),this.codeMirror_.getWrapperElement().style.display=\"\",this.codeMirror_.refresh(),void this.editorAdapter_.setCursor({position:0,selectionEnd:0}))},f.prototype.insertTextAtCursor=function(t){this.insertText(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),t)},f.prototype.insertText=function(t,e){l.assert(!this.ace_,\"Not supported for ace yet.\"),l.assert(!this.monaco_,\"Not supported for monaco yet.\"),this.assertReady_(\"insertText\"),\"[object Array]\"!==Object.prototype.toString.call(e)&&(e=[e]);var r=this;r.codeMirror_.operation(function(){for(var i=0===t,o=n.textPiecesToInserts(i,e),s=0;s<o.length;s++){var a=o[s].string,h=o[s].attributes;r.richTextCodeMirror_.insertText(t,a,h),t+=a.length}})},f.prototype.getOperationForSpan=function(t,e){for(var r=this.richTextCodeMirror_.getRange(t,e),i=this.richTextCodeMirror_.getAttributeSpans(t,e),o=0,s=new n.TextOperation,a=0;a<i.length;a++)s.insert(r.substr(o,i[a].length),i[a].attributes),o+=i[a].length;return s},f.prototype.getHtml=function(){return this.getHtmlFromRange(null,null)},f.prototype.getHtmlFromSelection=function(){var t=this.codeMirror_.getCursor(\"start\"),e=this.codeMirror_.getCursor(\"end\"),r=this.codeMirror_.indexFromPos(t),n=this.codeMirror_.indexFromPos(e);return this.getHtmlFromRange(r,n)},f.prototype.getHtmlFromRange=function(t,e){this.assertReady_(\"getHtmlFromRange\");var r=null!=t&&null!=e?this.getOperationForSpan(t,e):this.getOperationForSpan(0,this.codeMirror_.getValue().length);return n.SerializeHtml(r,this.entityManager_)},f.prototype.insertHtml=function(t,e){var r=n.ParseHtml(e,this.entityManager_);this.insertText(t,r)},f.prototype.insertHtmlAtCursor=function(t){this.insertHtml(this.codeMirror_.indexFromPos(this.codeMirror_.getCursor()),t)},f.prototype.setHtml=function(t){var e=n.ParseHtml(t,this.entityManager_);this.setText(e)},f.prototype.isHistoryEmpty=function(){return this.assertReady_(\"isHistoryEmpty\"),this.firebaseAdapter_.isHistoryEmpty()},f.prototype.bold=function(){this.richTextCodeMirror_.toggleAttribute(u.BOLD),this.codeMirror_.focus()},f.prototype.italic=function(){this.richTextCodeMirror_.toggleAttribute(u.ITALIC),this.codeMirror_.focus()},f.prototype.underline=function(){this.richTextCodeMirror_.toggleAttribute(u.UNDERLINE),this.codeMirror_.focus()},f.prototype.strike=function(){this.richTextCodeMirror_.toggleAttribute(u.STRIKE),this.codeMirror_.focus()},f.prototype.fontSize=function(t){this.richTextCodeMirror_.setAttribute(u.FONT_SIZE,t),this.codeMirror_.focus()},f.prototype.font=function(t){this.richTextCodeMirror_.setAttribute(u.FONT,t),this.codeMirror_.focus()},f.prototype.color=function(t){this.richTextCodeMirror_.setAttribute(u.COLOR,t),this.codeMirror_.focus()},f.prototype.highlight=function(){this.richTextCodeMirror_.toggleAttribute(u.BACKGROUND_COLOR,\"rgba(255,255,0,.65)\"),this.codeMirror_.focus()},f.prototype.align=function(t){if(\"left\"!==t&&\"center\"!==t&&\"right\"!==t)throw new Error('align() must be passed \"left\", \"center\", or \"right\".');this.richTextCodeMirror_.setLineAttribute(u.LINE_ALIGN,t),this.codeMirror_.focus()},f.prototype.orderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(u.LIST_TYPE,\"o\"),this.codeMirror_.focus()},f.prototype.unorderedList=function(){this.richTextCodeMirror_.toggleLineAttribute(u.LIST_TYPE,\"u\"),this.codeMirror_.focus()},f.prototype.todo=function(){this.richTextCodeMirror_.toggleTodo(),this.codeMirror_.focus()},f.prototype.newline=function(){this.richTextCodeMirror_.newline()},f.prototype.deleteLeft=function(){this.richTextCodeMirror_.deleteLeft()},f.prototype.deleteRight=function(){this.richTextCodeMirror_.deleteRight()},f.prototype.indent=function(){this.richTextCodeMirror_.indent(),this.codeMirror_.focus()},f.prototype.unindent=function(){this.richTextCodeMirror_.unindent(),this.codeMirror_.focus()},f.prototype.undo=function(){this.codeMirror_.undo()},f.prototype.redo=function(){this.codeMirror_.redo()},f.prototype.insertEntity=function(t,e,r){this.richTextCodeMirror_.insertEntityAtCursor(t,e,r)},f.prototype.insertEntityAt=function(t,e,r,n){this.richTextCodeMirror_.insertEntityAt(t,e,r,n)},f.prototype.registerEntity=function(t,e){this.entityManager_.register(t,e)},f.prototype.getOption=function(t,e){return t in this.options_?this.options_[t]:e},f.prototype.assertReady_=function(t){if(!this.ready_)throw new Error('You must wait for the \"ready\" event before calling '+t+\".\");if(this.zombie_)throw new Error(\"You can't use a Firepad after calling dispose()!  [called \"+t+\"]\")},f.prototype.makeImageDialog_=function(){this.makeDialog_(\"img\",\"Insert image url\")},f.prototype.makeDialog_=function(t,e){var r=this,n=l.elt(\"input\",null,{class:\"firepad-dialog-input\",id:t,type:\"text\",placeholder:e,autofocus:\"autofocus\"}),i=l.elt(\"a\",\"Submit\",{class:\"firepad-btn\",id:\"submitbtn\"});l.on(i,\"click\",l.stopEventAnd(function(){var e=document.getElementById(\"overlay\");e.style.visibility=\"hidden\";var n=document.getElementById(t).value;null!==n&&r.insertEntity(t,{src:n}),r.firepadWrapper_.removeChild(e)}));var o=l.elt(\"a\",\"Cancel\",{class:\"firepad-btn\"});l.on(o,\"click\",l.stopEventAnd(function(){var t=document.getElementById(\"overlay\");t.style.visibility=\"hidden\",r.firepadWrapper_.removeChild(t)}));var s=l.elt(\"div\",[i,o],{class:\"firepad-btn-group\"}),a=l.elt(\"div\",[n,s],{class:\"firepad-dialog-div\"}),h=l.elt(\"div\",[a],{class:\"firepad-dialog\",id:\"overlay\"});this.firepadWrapper_.appendChild(h)},f.prototype.addToolbar_=function(){this.toolbar=new i(this.imageInsertionUI),this.toolbar.on(\"undo\",this.undo,this),this.toolbar.on(\"redo\",this.redo,this),this.toolbar.on(\"bold\",this.bold,this),this.toolbar.on(\"italic\",this.italic,this),this.toolbar.on(\"underline\",this.underline,this),this.toolbar.on(\"strike\",this.strike,this),this.toolbar.on(\"font-size\",this.fontSize,this),this.toolbar.on(\"font\",this.font,this),this.toolbar.on(\"color\",this.color,this),this.toolbar.on(\"left\",function(){this.align(\"left\")},this),this.toolbar.on(\"center\",function(){this.align(\"center\")},this),this.toolbar.on(\"right\",function(){this.align(\"right\")},this),this.toolbar.on(\"ordered-list\",this.orderedList,this),this.toolbar.on(\"unordered-list\",this.unorderedList,this),this.toolbar.on(\"todo-list\",this.todo,this),this.toolbar.on(\"indent-increase\",this.indent,this),this.toolbar.on(\"indent-decrease\",this.unindent,this),this.toolbar.on(\"insert-image\",this.makeImageDialog_,this),this.firepadWrapper_.insertBefore(this.toolbar.element(),this.firepadWrapper_.firstChild)},f.prototype.addPoweredByLogo_=function(){var t=l.elt(\"a\",null,{class:\"powered-by-firepad\"});t.setAttribute(\"href\",\"http://www.firepad.io/\"),t.setAttribute(\"target\",\"_blank\"),this.firepadWrapper_.appendChild(t)},f.prototype.initializeKeyMap_=function(){function t(t){return function(e){setTimeout(function(){t.call(e.firepad)},0)}}p.keyMap.richtext={\"Ctrl-B\":t(this.bold),\"Cmd-B\":t(this.bold),\"Ctrl-I\":t(this.italic),\"Cmd-I\":t(this.italic),\"Ctrl-U\":t(this.underline),\"Cmd-U\":t(this.underline),\"Ctrl-H\":t(this.highlight),\"Cmd-H\":t(this.highlight),Enter:t(this.newline),Delete:t(this.deleteRight),Backspace:t(this.deleteLeft),Tab:t(this.indent),\"Shift-Tab\":t(this.unindent),fallthrough:[\"default\"]}},f}(this),n.Firepad.Formatting=n.Formatting,n.Firepad.Text=n.Text,n.Firepad.Entity=n.Entity,n.Firepad.LineFormatting=n.LineFormatting,n.Firepad.Line=n.Line,n.Firepad.TextOperation=n.TextOperation,n.Firepad.Headless=n.Headless,n.Firepad.RichTextCodeMirrorAdapter=n.RichTextCodeMirrorAdapter,n.Firepad.ACEAdapter=n.ACEAdapter,n.Firepad.MonacoAdapter=n.MonacoAdapter,n.Firepad},this);"]},"metadata":{},"sourceType":"script"}